/*!
 * Copyright (c) 2017 Nobook inc.
 * 
 * (TBD)
 * 
 * Version: 0.5.92
 * Date: Sat Mar 30 2019 10:13:19 GMT+0800 (中国标准时间)
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jQuery")):"function"==typeof define&&define.amd?define("PhysicsCanvas",["jQuery"],e):"object"==typeof exports?exports.PhysicsCanvas=e(require("jQuery")):t.PhysicsCanvas=e(t.jQuery)}(this,function(t){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n=window.webpackJsonpPhysicsCanvas;window.webpackJsonpPhysicsCanvas=function(e,i,o){for(var a,s,u=0,l=[];e.length>u;u++)s=e[u],r[s]&&l.push(r[s][0]),r[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);for(n&&n(e,i,o);l.length;)l.shift()()};var i={},r={11:0};return e.e=function(t){function n(){s.onerror=s.onload=null,clearTimeout(u);var e=r[t];0!==e&&(e&&e[1](Error("Loading chunk "+t+" failed.")),r[t]=undefined)}var i=r[t];if(0===i)return new Promise(function(t){t()});if(i)return i[2];var o=new Promise(function(e,n){i=r[t]=[e,n]});i[2]=o;var a=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,e.nc&&s.setAttribute("nonce",e.nc),s.src=e.p+"physics-libs."+({0:"elec-req",1:"module-mechanics-index",2:"module-electricity-index",3:"module-optical-index",4:"module-forceAndMotion-index",5:"module-atomicPhysics-index",6:"module-elecfamily-index",7:"module-thermal-index",8:"module-napeLib-index",9:"module-acoustic-index",10:"module-loading-index"}[t]||t)+"."+{0:"24034d56d34033f5c3ee",1:"1817286945c7a144315d",2:"74f745e5da394ecf88e4",3:"dd4dbd70f57162e37547",4:"dfd5585e25a6bc23194b",5:"28b5f60cfdba984f5993",6:"4da95207c14e565930a7",7:"92df27822e59ad18bc2c",8:"41b39dd8beb9bdd1fa40",9:"a9b67df5fbe86d813258",10:"a65be6c5371aa0fa2430"}[t]+".chunk.min.js";var u=setTimeout(n,12e4);return s.onerror=s.onload=n,a.appendChild(s),o},e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e.oe=function(t){throw t},e(e.s=414)}([function(t,e,n){"use strict";(function(t){function e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=t,s=function c(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:c(r,e,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},u="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":o(t)},l=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function f(t,e,n){function i(a,s){if(!e[a]){if(!t[a]){var u="function"==typeof r&&r;if(!s&&u)return r(a,!0);if(o)return o(a,!0);throw Error("Cannot find module '"+a+"'")}var l=e[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,f,t,e,n)}return e[a].exports}for(var o="function"==typeof r&&r,a=0;n.length>a;a++)i(n[a]);return i}({1:[function(t,e,n){var r=function(){function t(){i(this,t)}return l(t,null,[{key:"arrayContainsValue",value:function(t,e){return-1!=t.indexOf(e)}},{key:"arrayContainsArray",value:function(e,n){var i=!0,r=void 0,o=n.length;for(r=0;o>r;r++){if(!t.arrayContainsValue(e,n[r])){i=!1;break}}return i}},{key:"removeValueFromArray",value:function(t,e){var n=void 0;for(n=t.length;n>-1;n--)if(t[n]==e)return t.splice(n,1),!0;return!1}},{key:"addSingleArr",value:function(e,n){return!t.arrayContainsValue(e,n)&&(e.push(n),!0)}},{key:"removeValueFromIndex",value:function(t,e){var n=t.length,i=void 0;return e>=0&&n>e&&(i=t[e],t.splice(e,1)),i}},{key:"removeArrayFromArray",value:function(e,n){var i=n.length,r=void 0;for(r=0;i>r;r++){t.removeValueFromArray(e,n[r])}}},{key:"createUniqueCopy",value:function(e){var n=[],i=e.length,r=void 0,o=void 0;for(o=0;i>o;++o)r=e[o],t.arrayContainsValue(n,r)||n.push(r);return n}},{key:"arraysAreEqual",value:function(t,e){if(t.length!=e.length)return!1;var n=t.length,i=void 0;for(i=0;n>i;i++)if(t[i]!==e[i])return!1;return!0}},{key:"clear",value:function(t){t&&0!=t.length&&t.splice(0,t.length)}},{key:"print",value:function(t){for(var e in t)trace(e+":"+t[e])}},{key:"getIndexFromValue",value:function(t,e){var n=-1,i=void 0,r=t.length;for(i=0;r>i;i++)if(e==t[i]){n=i;break}return n}},{key:"swapObj",value:function(t,e){var n=t;t=e,e=n}},{key:"swapArrObj",value:function(e,n,i){var r=t.getIndexFromValue(e,n),o=t.getIndexFromValue(e,i);r>-1&&o>-1&&(e[r]=i,e[o]=n)}},{key:"swapArrInd",value:function(t,e,n){var i=t[e],r=t[n];e>-1&&n>-1&&(t[e]=r,t[n]=i)}},{key:"swapChaArrInd",value:function(e,n,i){var r=[],o=void 0,a=void 0,s=void 0,u=void 0,l=e.length;if(0>n||n>=l)return e;if(i>=0&&l>i){o=e[n],a=e[i],t.removeValueFromIndex(e,n);var c=t.getIndexFromValue(e,a);for(s=0;c>s;s++)r[s]=e[s];for(r[c]=o,u=c+1;l+1>u;u++)r[u]=e[u-1]}else l>i?0>i&&(o=e[n],t.removeValueFromIndex(e,n),e.unshift(o),r=t.copyArray(e)):(o=e[n],t.removeValueFromIndex(e,n),e.push(o),r=t.copyArray(e));return r}},{key:"getString",value:function(t,e){return t&&0!==t.length?(e=e||",",t.join(e)):""}},{key:"copy",value:function(t){return t?t.slice():null}},{key:"copyArray",value:function(e){return t.copy(e)}},{key:"isArray",value:function(t){return"[object Array]"===Object.prototype.toString.call(t)}}]),t}();e.exports=r},{}],2:[function(t,e,n){e.exports=function(){function t(){i(this,t)}return l(t,null,[{key:"checkHasFlag",value:function(t,e){t=t instanceof $?t:$(t);for(var n=!1,i=0;20>i++;){var r=t&&t[0]?t[0].tagName:null;if(r=r?r.toLowerCase():r,!t||"phy-app"===r||"body"===r)break;if(t.hasClass(e)){n=!0;break}t=t.parent()}return n}}]),t}()},{}],3:[function(t,e,n){var r=t("./NumberUtilities"),o=function(){function t(){i(this,t)}return l(t,null,[{key:"setFullscreen",value:function(t){var e=t instanceof HTMLElement?t:document.documentElement,n=e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen;if(n)n.call(e);else if(window.ActiveXObject){var i=new window.ActiveXObject("WScript.Shell");i&&i.SendKeys("{F11}")}}},{key:"exitFullscreen",value:function(){var t=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;if(t)t.call(document);else if(window.ActiveXObject){var e=new window.ActiveXObject("WScript.Shell");e&&e.SendKeys("{F11}")}}},{key:"_invokeFieldOrMethod",value:function(t,e){var n=void 0;return["webkit","moz","ms","o",""].forEach(function(i){if(!n){""===i&&(e=e.slice(0,1).toLowerCase()+e.slice(1));var r=u(t[i+e]);r+""!="undefined"&&(n="function"===r?t[i+e]():t[i+e])}}),n}},{key:"isFullScreen",value:function(){return t._invokeFieldOrMethod(document,"FullScreen")||t._invokeFieldOrMethod(document,"IsFullScreen")||document.IsFullScreen}},{key:"toggle",value:function(e){var n=t.isFullScreen();return n?t.exitFullscreen():t.setFullscreen(e),!n}},{key:"addFullListener",value:function(e,n){if(!e||!n)return null;var i=r.getUnique();return t._fullListenerMap[i]={dom:e,func:n},e.addEventListener("webkitfullscreenchange",n),e.addEventListener("mozfullscreenchange",n),e.addEventListener("fullscreenchange",n),e.addEventListener("MSFullscreenChange",n),i}},{key:"removeFullListener",value:function(e){if(!t._fullListenerMap[e])return!1;var n=t._fullListenerMap[e],i=n.dom,r=n.func;return i.removeEventListener("webkitfullscreenchange",r),i.removeEventListener("mozfullscreenchange",r),i.removeEventListener("fullscreenchange",r),i.removeEventListener("MSFullscreenChange",r),delete t._fullListenerMap[e],!0}},{key:"hasFullListener",value:function(e){return!!t._fullListenerMap[e]}},{key:"setFullscreenFix",value:function(t){var e=window.__temp_fix_full_data;if(t&&!e){window.__temp_fix_full_data={element:t,style:{zIndex:t.style.zIndex||"unset",position:t.style.position||"unset",left:t.style.position||"unset",top:t.style.top||"unset",width:t.style.width||"unset",height:t.style.height||"unset"},parent:$(t).parent()};var n=$(t).detach();$(document.body).append(n),$(t).css({zIndex:9999,position:"fixed",left:"0px",top:"0px",width:$(window).width()+"px",height:$(window).height()+"px"})}}},{key:"exitFullscreenFix",value:function(){var t=window.__temp_fix_full_data;if(t){var e=t.style,n=t.element;t.parent.append($(n).detach()),e&&n&&$(n).css(e),delete window.__temp_fix_full_data}}},{key:"toggleFix",value:function(e){e&&(window.__temp_fix_full_data?t.exitFullscreenFix():t.setFullscreenFix(e))}}]),t}();o._fullListenerMap={},e.exports=o},{"./NumberUtilities":10}],4:[function(t,r,o){(function(t){var o=t||window,a=o.PIXI?o.PIXI.mesh.Mesh:function(){},u=function(t){function r(t,n,o){i(this,r);var s=e(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));if(s.mess=o||{},s.points=[],s._ready=!0,s.rectW=10,s.rectH=10,s.radius=10,s.total=36,s.drawType=n||r.RECT,s.drawMode=a.DRAW_MODES.TRIANGLES,s.drawType===r.CRICLE)(s.radius=s.mess.r||10)>300&&(s.total*=2);else if(s.drawType===r.RECT)s.rectW=s.mess.w||10,s.rectH=s.mess.h||10;else if(s.drawType===r.POLYGON){if(!o||!o.points||3>o.points.length)throw Error("输入数据有误");s.points=o.points}return s.refresh(),s}return n(r,a),l(r,[{key:"updateData",value:function(){}},{key:"drawCircle",value:function(t){this.drawType=r.CRICLE,this.radius=t}},{key:"drawRect",value:function(t,e){this.drawType=r.RECT,this.rectW=t,this.rectH=e}},{key:"refresh",value:function(){var t=[0,0],e=[],n=[],i=[],o=this.texture;if(o._updateUvs(),this.drawType===r.RECT)$.each(o._uvs,function(t,e){n.push(e)}),t=[0,0,this.rectW,0,0,this.rectH,this.rectW,this.rectH],i=[0,1,2,1,3,2];else if(this.drawType===r.CRICLE){var a=0,s=o._uvs,u=2*this.radius/o.width,l=s.x1*u,c=s.y2*u,f={x:s.x0+l/2,y:s.y0+c/2};n.push(f.x,f.y);var h=l/2,d=2*Math.PI/this.total;for(m=0;this.total>m;m++){var p=a,v=this.radius*Math.cos(p),y=this.radius*Math.sin(p),g=h*Math.cos(p),_=h*Math.sin(p);a+=d,t.push(v,y),n.push(f.x+g,f.y+_),m>1&&i.push(0,m-1,m)}i.push(0,this.total-1,this.total,0,this.total,1)}else if(this.drawType==r.POLYGON){var m,b=1e6,w=-1e6,E=1e7,x=-1e5;for(t=[],m=0;this.points.length>m;m++)(k=this.points[m]).index=m,t.push(k.x,k.y),0===m?(b=w=k.y,E=x=k.x):(E>k.x&&(E=k.x),k.x>x&&(x=k.x),b>k.y&&(b=k.y),k.y>w&&(w=k.y));var O=x-E,P=w-b,l=(s=o._uvs).x1-s.x0,c=s.y2-s.y0;for(m=0;this.points.length>m;m++){var k=this.points[m],g=(k.x-E)/O,_=(k.y-b)/P;n.push(s.x0+l*g,s.y0+c*_)}i=3==this.points.length?[0,1,2]:this.createTriangles()}this.vertices=new Float32Array(t),this.uvs=new Float32Array(n),this.colors=new Float32Array(e),this.indices=new Uint16Array(i)}},{key:"createTriangles",value:function(){var t=this.points.concat(),e=[],n=0,i=0,r=0;for(n=0;t.length>n;n++)0==n?(a=t[t.length-1],s=t[n],u=t[n+1]):n==t.length-1?(a=t[n-1],s=t[n],u=t[0]):(a=t[n-1],s=t[n],u=t[n+1]),(l=this.cross(a,s,u))?i++:r++;var o=void 0;for(o=i>r,n=0;;){if(3==t.length){e.push(t[0].index,t[1].index,t[2].index);break}n>t.length-1&&(n=0);var a,s,u;0==n?(a=t[t.length-1],s=t[n],u=t[n+1]):n==t.length-1?(a=t[n-1],s=t[n],u=t[0]):(a=t[n-1],s=t[n],u=t[n+1]);var l=this.cross(a,s,u);if(l==o){var c=void 0,f=void 0,h=void 0;0==n?(c=t[t.length-1],f=t[n],h=t[n+1]):n==t.length-1?(c=t[n-1],f=t[n],h=t[0]):(c=t[n-1],f=t[n],h=t[n+1]);var d=void 0,p=!0;for(d=0;t.length>d;d++)if(t[d]!=c&&t[d]!=f&&t[d]!=h&&this.isInsideTriangle(c,f,h,t[d])){p=!1,n++;break}p&&(e.push(c.index,f.index,h.index),t.splice(n,1))}else n++}return e}},{key:"isInsideTriangle",value:function(t,e,n,i){var r=(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y),o=(e.x-i.x)*(n.y-i.y)-(n.x-i.x)*(e.y-i.y),a=(n.x-i.x)*(t.y-i.y)-(t.x-i.x)*(n.y-i.y);return this.sign(r)===this.sign(o)&&this.sign(o)===this.sign(a)}},{key:"sign",value:function(t){return Math.abs(t)/t}},{key:"cross",value:function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)>0}},{key:"_onTextureUpdate",value:function(){s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"_onTextureUpdate",this).call(this),this._ready&&this.refresh()}}]),r}();u.CRICLE="circle",u.RECT="rect",u.POLYGON="polygon",r.exports=u}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,n){e.exports=function(){function t(){i(this,t)}return l(t,null,[{key:"drawArc",value:function(t,e,n,i,r,o){var a=[e,n];o||(o=0),Math;var s=o*Math.PI/180,u=(o+r)*Math.PI/180,l=[a[0]+i*Math.cos(s),a[1]+i*Math.sin(s)];t.moveTo(l[0],l[1]);for(var c=[a[0]+i*Math.cos(u),a[1]+i*Math.sin(u)],f=l,h=0;r>h;h+=2){var d=(h+o)*Math.PI/180,p=[i*Math.cos(d)+a[0],i*Math.sin(d)+a[1]];t.moveTo(f[0],f[1]),t.lineTo(p[0],p[1]),t.filling&&(t.lineTo(a[0],a[1]),t.lineTo(f[0],f[1])),f=p}t.lineTo(c[0],c[1]),t.filling&&(t.lineTo(a[0],a[1]),t.lineTo(f[0],f[1]))}}]),t}()},{}],6:[function(t,e,n){var r=function(){function t(){i(this,t),this._data={}}return l(t,[{key:"get",value:function(t){var e=this._data[this._hash(t)];return e&&e[1]}},{key:"find",value:function(t){return this.get(t)}},{key:"set",value:function(t,e){this._data[this._hash(t)]=[t,e]}},{key:"insert",value:function(t,e){this.set(t,e)}},{key:"put",value:function(t,e){this.set(t,e)}},{key:"copy",value:function(t){for(var e in t._data)this._data[e]=t._data[e]}},{key:"has",value:function(t){return this._hash(t)in this._data}},{key:"containsKey",value:function(t){return this.has(t)}},{key:"search",value:function(t){for(var e in this._data)if(this._data[e][1]===t)return this._data[e][0];return null}},{key:"remove",value:function(t){delete this._data[this._hash(t)]}},{key:"type",value:function(t){var e=Object.prototype.toString.call(t).slice(8,-1).toLowerCase();return"domwindow"!==e||t?e:t+""}},{key:"keys",value:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t}},{key:"getKeySet",value:function(){return this.keys()}},{key:"values",value:function(){var t=[];return this.forEach(function(e){t.push(e)}),t}},{key:"count",value:function(){return this.keys().length}},{key:"size",value:function(){return this.count()}},{key:"clear",value:function(){this._data={}}},{key:"clone",value:function(){return new t(this)}},{key:"forEach",value:function(t,e){for(var n in this._data){var i=this._data[n];t.call(e||this,i[1],i[0])}}},{key:"toString",value:function(){var t="HashMap Content = \n";return this.forEach(function(e,n){t+=n+" -> "+e+"\n"}),t}},{key:"length",value:function(){return this.count()}},{key:"isEmpty",value:function(){return 0===this.count()}},{key:"containsValue",value:function(t){var e=!1;return this.forEach(function(n,i){if(t===n)return e=!0,!1}),e}},{key:"getKeyValyeArray",value:function(){var t=[];return this.forEach(function(e,n){t.push({key:n,value:e})}),t}},{key:"_hash",value:function(e){switch(this.type(e)){case"undefined":case"null":case"boolean":case"number":case"string":case"regexp":return e+"";case"date":return"♣"+e.getTime();case"array":for(var n=[],i=0;e.length>i;i++)n[i]=this._hash(e[i]);return"♥"+n.join("⁞");default:return e.hasOwnProperty("_hmuid_")||(e._hmuid_=++t.uid),"♦"+e._hmuid_}}}]),t}();e.exports=r},{}],7:[function(t,e,n){var r=t("./NumberUtilities"),o=t("./Point"),a=t("./Rectangle"),s=t("./ArrayUtil"),c=t("./ObjTree"),f=function(){function t(){i(this,t)}return l(t,null,[{key:"sq",value:function(t){return Math.pow(Math.abs(t),2)}},{key:"bevel",value:function(t,e){return Math.sqrt(t*t+e*e)}},{key:"max",value:function(t){return Math.max.apply(null,t)}},{key:"ping",value:function(t){for(var e=0,n=0;t.length>n;n++)e+=t[n];return e/t.length}},{key:"getUnique",value:function(){return r.getUnique()}},{key:"getUniqueID",value:function(){return r.getUniqueID()}},{key:"getBoundsFromArray",value:function(t){for(var e=new a,n=1e8,i=-1e8,r=1e10,o=-1e9,s=0;t.length>s;s++){var u=t[s];n>u.x&&(n=u.x),r>u.y&&(r=u.y),u.x+u.width>i&&(i=u.x+u.width),u.y+u.height>o&&(o=u.y+u.height)}return e.x=n,e.y=r,e.width=i-n,e.height=o-r,e}},{key:"getCenP",value:function(t,e){return new o((t.x+e.x)/2,(t.y+e.y)/2)}},{key:"getPointLen",value:function(t,e){return o.distance(t,e)}},{key:"getFuhao",value:function(t){return 0>t?-1:1}},{key:"getXYLen",value:function(t,e,n,i){return Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))}},{key:"getXianDianByDis",value:function(e,n,i,r){var a=void 0;if(i.x===r.x&&i.y===r.y)return i.clone();if(1e-6>Math.abs(r.x-i.x)){if(n&&i.y>r.y||!n&&r.y>i.y)return new o(i.x,i.y-e);if(!n&&i.y>r.y||n&&r.y>i.y)return new o(i.x,i.y+e)}a=(r.y-i.y)/(r.x-i.x);var s=Math.sqrt(e*e/(1+a*a))+i.x,u=-Math.sqrt(e*e/(1+a*a))+i.x,l=a*(s-i.x)+i.y,c=a*(u-i.x)+i.y,f=t.sq(s-r.x)+t.sq(l-r.y),h=t.sq(u-r.x)+t.sq(c-r.y);return n?f>h?new o(u,c):new o(s,l):f>h?new o(s,l):new o(u,c)}},{key:"interpolate",value:function(t,e,n){return new o(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)}},{key:"getRandColor",value:function(){return 16777215*Math.random()+4278190080}},{key:"getDecimalNum",value:function(t){var e=""+t;return this.StringUtil.contains(e,".")?(e=e.substring(e.indexOf(".")+1)).length:0}},{key:"getAngleP",value:function(t,e){e||(e=new o(0,0));var n=t.x-e.x,i=t.y-e.y;return Math.atan2(i,n)*(180/Math.PI)}},{key:"getAngleP1",value:function(t,e){var n=Math.atan2(t.y,t.x)*(180/Math.PI);return e?n-Math.atan2(e.y,e.x)*(180/Math.PI):n}},{key:"getAreaByPoints",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);i=e.x-n.x,r=e.y-n.y;var a=Math.sqrt(i*i+r*r);i=n.x-t.x,r=n.y-t.y;var s=Math.sqrt(i*i+r*r),u=(o+a+s)/2;return Math.sqrt(u*(u-o)*(u-a)*(u-s))}},{key:"checkPointIn",value:function(e,n,i,r){var o=t.getAreaByPoints(n,i,r),a=0;return a+=t.getAreaByPoints(e,n,i),a+=t.getAreaByPoints(e,i,r),(a+=t.getAreaByPoints(e,r,n))===o||1e-4>Math.abs(a-o)}},{key:"getAngleByP",value:function(e,n,i){var r=t.getPointLen(n,i),o=t.getPointLen(e,i),a=t.getPointLen(e,n),s=2*o*a;0===s&&(s=1e-9);var u=(o*o+a*a-r*r)/s;return 180*Math.acos(u)/Math.PI}},{key:"getPoint_NeiXin",value:function(e,n,i){var r=t.getPointLen(e,n),a=t.getPointLen(n,i),s=t.getPointLen(e,i),u=new o;return u.x=(r*e.x+a*n.x+s*i.x)/(r+a+s),u.y=(r*e.y+a*n.y+s*i.y)/(r+a+s),u}},{key:"getSPPoint",value:function(t){return new o(t.x,t.y)}},{key:"setSPPoint",value:function(t,e){t&&e&&(t.x=e.x,t.y=e.y)}},{key:"setSPPointXY",value:function(t,e,n){t&&(t.x=e,t.y=n)}},{key:"rotaPointFromP",value:function(e,n,i){n.y===e.y&&(n.y=e.y+t.MIN);var r=new o(e.x-n.x,e.y-n.y),a=t.rotaPoint(r,i);return a.x+=n.x,a.y+=n.y,a}},{key:"atan",value:function(e,n){return t.getAngleP(e,n)}},{key:"getPFrom2DianAndAngle",value:function(e,n,i,r){e.clone(),n.clone();var a=180+t.atan(n,e)-r,s=t.toHu(a);e=t.rotaPoint(e,-s),n=t.rotaPoint(n,-s);var u=Math.sqrt(t.sq(n.x-e.x)+t.sq(n.y-e.y))*Math.sin(t.toHu(i))/Math.sin(t.toHu(180-i-r))+n.x,l=n.y,c=new o(u,l);return c=t.rotaPoint(c,s)}},{key:"toHu",value:function(t){return t/180*Math.PI}},{key:"toAngle",value:function(t){return t/Math.PI*180}},{key:"getNumStr",value:function(t){if(!(t=""+t))return"";var e=/(-?\d+)(\.\d+)?/;return null===e.exec(t)?0:(e.exec(t)[0]||0)-0}},{key:"getPStr",value:function(t){return/'+/.exec(t)}},{key:"getFAStr",value:function(t){return/[ABC]+/.exec(t)}},{key:"checkPointOnLineLeftOrRight",value:function(t,e,n){return(t.x-e.x)*(t.y-n.y)-(t.x-n.x)*(t.y-e.y)}},{key:"checkOnLineAB",value:function(t,e,n,i){return i||(i=.5),Math.abs((t.y-e.y)*(t.x-n.x)-(t.y-n.y)*(t.x-e.x))<i}},{key:"checkInLineAB",value:function(e,n,i,r){r||(r=.1);var o=!1;return e?t.getPointLen(e,n)+t.getPointLen(e,i)-t.getPointLen(n,i)<r&&(o=!0):o=!1,o}},{key:"isPingxing",value:function(t,e,n,i){var r=!1;return(e.y-t.y)*(i.x-n.x)==(e.x-t.x)*(i.y-n.y)&&(r=!0),r}},{key:"getJiaoP",value:function(t,e,n,i){var r=new o,a=t.x,s=t.y,u=e.x,l=e.y,c=n.x,f=n.y,h=i.x,d=i.y,p=1e-7,v=void 0;v=u===a?(l-s)/(u-a+p):(l-s)/(u-a);var y=void 0;return y=h===c?(d-f)/(h-c+p):(d-f)/(h-c),r.x=v===y?(v*a-y*c+f-s)/(v-y+p):(v*a-y*c+f-s)/(v-y),r.y=v*r.x-v*a+s,r}},{key:"checkJPIsInAB",value:function(e,n,i,r){return t.checkInLineAB(t.getJiaoP(e,n,i,r),e,n)}},{key:"checkJPIsInABCD",value:function(e,n,i,r){var o=t.getJiaoP(e,n,i,r);return t.checkInLineAB(o,e,n)&&t.checkInLineAB(o,i,r)||t.checkInLineAB(e,i,r)||t.checkInLineAB(n,i,r)||t.checkInLineAB(i,e,n)||t.checkInLineAB(r,e,n)}},{key:"hasPoint",value:function(t,e){for(var n=!1,i=0;t.length>i;i++){var r=t[i];if(r.x===e.x&&r.y===e.y){n=!0;break}}return n}},{key:"rotaPoint",value:function(t,e){var n=new o;return n.x=Math.cos(e)*t.x-Math.sin(e)*t.y,n.y=Math.cos(e)*t.y+Math.sin(e)*t.x,n}},{key:"getPArrRect",value:function(t){for(var e=void 0,n=void 0,i=0;t.length>i;i++){var r=t[i];e?(e.x=Math.min(e.x,r.x),e.y=Math.min(e.y,r.y)):e=new o(r.x,r.y),n?(n.x=Math.max(n.x,r.x),n.y=Math.max(n.y,r.y)):n=new o(e.x,e.y)}return new a(e.x,e.y,n.x-e.x,n.y-e.y)}},{key:"getRectCen",value:function(t){var e=new o;return e.x=(t.left+t.right)/2,e.y=(t.top+t.bottom)/2,e}},{key:"getRectFromDuiP",value:function(t,e){var n=Math.min(t.x,e.x),i=Math.min(t.y,e.y),r=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);return new a(n,i,r,o)}},{key:"getZoomPoint",value:function(t,e,n,i){var r=t.x,a=t.y;return new o((n.x-r)/(e.x-r)*(i.x-r)+r,(n.y-a)/(e.y-a)*(i.y-a)+a)}},{key:"getZoomPointA",value:function(e,n,i,r,a){var s=e.x,u=e.y,l=n.x,c=n.y,f=i.x,h=i.y,d=r.x,p=r.y,v=new o(f-s,h-u),y=new o(l-s,c-u),g=new o(d-s,p-u),_=v.x/y.x,m=v.y/y.y,b=new o(_*g.x,m*g.y),w=b.x+s,E=b.y+u,x=new o(w-d,E-p),O=(x=t.getRoZoomP(x,a)).x+d;return new o(O,x.y+p)}},{key:"isPointNi",value:function(t,e,n){var i=e.x,r=e.y;return(t.y-r)*(n.x-i)>(t.x-i)*(n.y-r)}},{key:"getRoZoomP",value:function(e,n){var i=new o;return i.x=e.x*Math.cos(t.toHu(-n))+e.y*Math.sin(t.toHu(-n)),i.y=e.y*Math.cos(t.toHu(-n))-e.x*Math.sin(t.toHu(-n)),i}},{key:"getOvalPoint",value:function(t,e,n){void 0===n&&(n=null);var i=[],r=t/2,a=e/2,s=0,u=void 0,l=void 0;for(n||(n=new o(0,0));s<2*Math.PI;)u=n.x+r*Math.sin(s),l=n.y+a*Math.cos(s),i.push(new o(u,l)),s+=2/180*Math.PI;return i}},{key:"getRegPolygon",value:function(t,e,n){var i=[];if(1===t)return[e];for(var r=0;t>r;r++){var a=new o;a.x=e.x+n*Math.cos(2*Math.PI/t*r),a.y=e.y+n*Math.sin(2*Math.PI/t*r),1e-5>Math.abs(a.x)&&(a.x=0),1e-5>Math.abs(a.y)&&(a.y=0),i.push(a)}return i}},{key:"getLianPObj",value:function(t,e){return{p1:t,p2:e}}},{key:"getRegPolygonRay",value:function(e,n,i){var r=t.getRegPolygon(e,n,i),o=[];if(2===e)o.push(t.getLianPObj(r[0],r[1]));else if(e>2){for(var a=0;r.length-1>a;a++)o.push({p1:r[a],p2:r[a+1]});o.push({p1:r[r.length-1],p2:r[0]})}return{pArr:r,lianArr:o}}},{key:"getThreeRay",value:function(e,n,i){var r=[],a=[],s=0;r.push(n),s++;for(var u=Math.ceil((e-1)/3),l=0;u>l;l++)for(var c=0;3>c&&s!==e;c++){var f=void 0;f=1===r.length?r[0]:r[r.length-3];var h=new o(f.x,f.y-i);if(r.push(h),++s===e)break;var d=t.rotaPointFromP(h,n,2*-Math.PI/3);if(r.push(d),++s===e)break;var p=t.rotaPointFromP(h,n,2*Math.PI/3);if(r.push(p),++s===e)break}if(2===e)a.push(t.getLianPObj(r[0],r[1]));else if(3===e)a.push(t.getLianPObj(r[0],r[1])),a.push(t.getLianPObj(r[0],r[2]));else if(e>3){a.push(t.getLianPObj(r[0],r[1])),a.push(t.getLianPObj(r[0],r[2]));for(var v=0;r.length-4>=v;v++)a.push(t.getLianPObj(r[v],r[v+3]))}return{pArr:r,lianArr:a}}},{key:"getCrossRay",value:function(e,n,i){var r=[],a=[],s=0;r.push(n),s++;for(var u=Math.ceil((e-1)/3),l=0;u>l;l++)for(var c=0;4>c&&s!==e;c++){var f=void 0;f=1===r.length?r[0]:r[r.length-4];var h=new o(f.x,f.y-i);if(r.push(h),++s===e)break;var d=t.rotaPointFromP(h,n,-Math.PI/2);if(r.push(d),++s===e)break;var p=t.rotaPointFromP(h,n,-Math.PI);if(r.push(p),++s===e)break;var v=t.rotaPointFromP(h,n,Math.PI/2);if(r.push(v),++s===e)break}if(2===e)a.push(t.getLianPObj(r[0],r[1]));else if(3===e)a.push(t.getLianPObj(r[0],r[1])),a.push(t.getLianPObj(r[0],r[2]));else if(4===e)a.push(t.getLianPObj(r[0],r[1])),a.push(t.getLianPObj(r[0],r[2])),a.push(t.getLianPObj(r[0],r[3]));else if(e>4){a.push(t.getLianPObj(r[0],r[1])),a.push(t.getLianPObj(r[0],r[2])),a.push(t.getLianPObj(r[0],r[3]));for(var y=0;r.length-5>=y;y++)a.push(t.getLianPObj(r[y],r[y+4]))}return{pArr:r,lianArr:a}}},{key:"getHorizontalRay",value:function(e,n,i){var r=[],a=[],s=0;r.push(n),s++;for(var u=Math.ceil((e-1)/3),l=0;u>l;l++)for(var c=0;3>c&&s!==e;c++){var f=void 0;f=1===r.length?r[0]:r[r.length-2];var h=new o(f.x-i,f.y);if(r.push(h),++s===e)break;var d=t.rotaPointFromP(h,n,Math.PI);if(r.push(d),++s===e)break}if(2===e)a.push(t.getLianPObj(r[0],r[1]));else if(e>2){a.push(t.getLianPObj(r[0],r[1]));for(var p=0;r.length-3>=p;p++)a.push(t.getLianPObj(r[p],r[p+2]))}return{pArr:r,lianArr:a}}},{key:"getVerticalRay",value:function(e,n,i){var r=[],a=[],s=0;r.push(n),s++;for(var u=Math.ceil((e-1)/3),l=0;u>l;l++)for(var c=0;3>c&&s!==e;c++){var f=void 0;f=1===r.length?r[0]:r[r.length-2];var h=new o(f.x,f.y-i);if(r.push(h),++s===e)break;var d=t.rotaPointFromP(h,n,Math.PI);if(r.push(d),++s===e)break}if(2===e)a.push(t.getLianPObj(r[0],r[1]));else if(e>2){a.push(t.getLianPObj(r[0],r[1]));for(var p=0;r.length-3>=p;p++)a.push(t.getLianPObj(r[p],r[p+2]))}return{pArr:r,lianArr:a}}},{key:"getDuiDianP",value:function(e,n,i){var r=new o,a=t.getGaoDianFrom3Dian(e,n,i);return r.x=2*a.x-e.x,r.y=2*a.y-e.y,r}},{key:"getDuiDianDian",value:function(t,e){return new o(2*e.x-t.x,2*e.y-t.y)}},{key:"getNumJie",value:function(t,e){void 0===e&&(e=0),t-=0;var n=Math.pow(10,e),i=Math.round(t*n)/n+"",r=i.split(".");if(0===e)return r[0];var o=0;2===r.length?o=e-r[1].length:(o=e,i+=".");for(var a=0;o>a;)i+="0",a++;return i-0==0?0:i}},{key:"getNumToInt",value:function(t){var e=t+"",n=e.indexOf(".");return-1===n?e-0:(e=e.slice(0,n))-0}},{key:"getGaoDianFrom3Dian",value:function(t,e,n){if(!t||!e||!n)return null;if(e.x===n.x&&e.y===n.y)return new o(e.x,e.y);var i=t.x,r=t.y,a=e.x,s=e.y,u=n.x,l=n.y;return new o(1*((l-s)*(l-s)*a+(u-a)*(u-a)*i+(r-s)*(u-a)*(l-s))/((l-s)*(l-s)+(u-a)*(u-a)),((i-a)*(u-a)*(l-s)+(r-s)*(l-s)*(l-s))/((l-s)*(l-s)+(u-a)*(u-a))+s)}},{key:"getDisFrom3Dian",value:function(e,n,i){return t.getPointLen(e,t.getGaoDianFrom3Dian(e,n,i))}},{key:"getXianDuanGaoXianDian",value:function(e,n,i,r){void 0===r&&(r=!0);var o=t.getXianDianByDis(i,!0,e,n);return r?t.rotaPointFromP(o,e,-Math.PI/2):t.rotaPointFromP(o,e,Math.PI/2)}},{key:"getRectOneP",value:function(t,e,n){return new o(t.x+e.x-n.x,t.y+e.y-n.y)}},{key:"retrieveRGBComponent",value:function(t){return"[object String]"===Object.prototype.toString.call(t)&&(t="0x"+(t="#"===t.substring(0,1)?t.substring(1):t)-0),[t>>16,t>>8&255,255&t]}},{key:"generateFromRGBComponent",value:function(t){return null===t||3!==t.length||0>t[0]||t[0]>255||0>t[1]||t[1]>255||0>t[2]||t[2]>255?16777215:t[0]<<16|t[1]<<8|t[2]}},{key:"generateTransitionalColor",value:function(e,n,i){if(1===i)return[e];if(2===i)return[e,n];var r=t.retrieveRGBComponent(e),o=t.retrieveRGBComponent(n),a=[];a.push(e),i-=2;for(var s=o[0]-r[0],u=o[1]-r[1],l=o[2]-r[2],c=1;i-1>c;c++){a.push(t.generateFromRGBComponent([r[0]+s*c/i,r[1]+u*c/i,r[2]+l*c/i]))}return a.push(n),a}},{key:"drawArc",value:function(t,e,n,i,r,o){var a=[e,n];o||(o=0),Math;var s=o*Math.PI/180,u=(o+r)*Math.PI/180,l=[a[0]+i*Math.cos(s),a[1]+i*Math.sin(s)];t.moveTo(l[0],l[1]);for(var c=[a[0]+i*Math.cos(u),a[1]+i*Math.sin(u)],f=l,h=0;r>h;h+=2){var d=(h+o)*Math.PI/180,p=[i*Math.cos(d)+a[0],i*Math.sin(d)+a[1]];t.moveTo(f[0],f[1]),t.lineTo(p[0],p[1]),t.filling&&(t.lineTo(a[0],a[1]),t.lineTo(f[0],f[1])),f=p}t.lineTo(c[0],c[1]),t.filling&&(t.lineTo(a[0],a[1]),t.lineTo(f[0],f[1]))}},{key:"getArcPoints",value:function(e,n,i,r,a){r=t.toAngle(r);var s=[],u=[e,n];(a=t.toAngle(a))||(a=0),Math;var l=a*Math.PI/180,c=(a+r)*Math.PI/180,f=[u[0]+i*Math.cos(l),u[1]+i*Math.sin(l)];s.push(new o(f[0],f[1])),Math.cos(c),Math.sin(c);for(var h=0;r>h;h+=1){rad=(h+a)*Math.PI/180;var d=[i*Math.cos(rad)+u[0],i*Math.sin(rad)+u[1]];s.push(new o(d[0],d[1]))}return s}},{key:"checkPolygonPointArr",value:function(e,n){for(var i=0,r=0,o=void 0,a=!1,s=0;n.length>s;s++){var u=void 0,l=void 0;s===n.length-1?(u=n[s],l=n[0]):(u=n[s],l=n[s+1]),o=t.getAngleByP(e,u,l),.2>Math.abs(o-180)&&(a=!0),r+=o}return a?i=2:!a&&.2>Math.abs(r-360)?i=1:Math.abs(r-360)>.2&&(i=3),i}},{key:"clonePointArr",value:function(t){if(!t)return null;for(var e=[],n=0;t.length>n;n++){e.push(t[n].clone())}return e}},{key:"checkArrEqual",value:function(e,n,i){void 0===i&&(i=5),e=t.clonePointArr(e),n=t.clonePointArr(n);var r=t.getRectCen(t.getPArrRect(e)),o=t.getRectCen(t.getPArrRect(n)),a=o.x-r.x,s=o.y-r.y,u=void 0,l=void 0;for(u=0;e.length>u;u++){var c=e[u];c.x+=a,c.y+=s}for(u=0;e.length>u;u++){var f=e[u],h=!1;for(l=0;n.length>l;l++){if(t.getPointLen(f,n[l])<=i){h=!0;break}}if(!h)return!1}return{chaX:a,chaY:s}}},{key:"checkPointEqual",value:function(e,n,i){return void 0===i&&(i=.1),t.getPointLen(e,n)<i}},{key:"checkPolygonPointArr2",value:function(t,e){for(var n=!1,i=0,r=0,o=e.length,a=0,s=o-1;o>a;s=a++){var u=(t.x-e[s].x)*(e[a].y-e[s].y)-(t.y-e[s].y)*(e[a].x-e[s].x);u>0?++i:0>u&&++r}return 0!==i&&0!==r||(n=!0),n}},{key:"drawPolygonPArr",value:function(t,e){t.moveTo(e[0].x,e[0].y),$.each(e,function(n,i){n>0&&t.lineTo(e[n].x,e[n].y)}),t.lineTo(e[0].x,e[0].y)}},{key:"vec3ToVec2",value:function(t){return nape.geom.Vec2.get(t.zpp_inner.x,t.zpp_inner.y)}},{key:"getJiao_polygon_line",value:function(e,n,i){for(var r=[],o=0;i.length>o;o++){var a=i[o],s=o===i.length-1?i[0]:i[o+1];if(!t.isPingxing(a,s,e,n)){var u=t.getJiaoP(e,n,a,s);t.checkInLineAB(u,a,s,.1)&&r.push(u)}}return r}},{key:"containtsP",value:function(e,n,i){void 0===i&&(i=.1);for(var r=!1,o=0;e.length>o;o++){if(t.getPointLen(e[o],n)<i){r=!0;break}}return r}},{key:"getNearP",value:function(e,n){var i=1e5,r=void 0,o=void 0;for(o=0;e.length>o;o++){var a=e[o],s=t.getPointLen(n,a);i>s&&(i=s,r=a)}return r}},{key:"checkPolygonPointArr3",value:function(t,e){if(null===e)return!1;var n=e.length,i=0,r=void 0,o=void 0,a=0,s=0;for(r=e[0],i=1;n>=i;i++)o=e[i%n],t.y>Math.min(r.y,o.y)&&t.y<=Math.max(r.y,o.y)&&t.x<=Math.max(r.x,o.x)&&r.y!==o.y&&(s=(t.y-r.y)*(o.x-r.x)/(o.y-r.y)+r.x,(r.x===o.x||s>=t.x)&&a++),r=o;return a%2!=0}},{key:"centerRotate",value:function(t,e){var n=t.rotation;t.rotation=0;var i=t.width,r=t.height;t.rotation=n;var a=t.localToGlobal(new o(i/2,r/2));t.rotation=e;var s=t.localToGlobal(new o(i/2,r/2)),u=a.subtract(s),l=t.transform.matrix;l.translate(u.x,u.y),t.transform.matrix=l}},{key:"getAllChildren",value:function(t){if(!t)return null;for(var e=[],n=0;t.numChildren>n;n++)e.push(t.getChildAt(n));return e}},{key:"getFnName",value:function(t){var e=(""+t).replace(/[\s\?]*/g,""),n=50>e.length?e.length:50,i=(e=e.substring(0,n)).match(/^function([^\(]+?)\(/);if(i&&i[1])return i[1];var r=(""+t.caller).replace(/[\s\?]*/g,""),o=r.indexOf(e);return(i=r.substring(o-30,o).match(/([^\=]+?)\=/))&&i[1]?i[1]:"anonymous"}},{key:"touchIsType",value:function(t,e){if(t===e)return!0;switch(e){case TouchEvent.TOUCH_BEGIN:return"touchstart"===t;case TouchEvent.TOUCH_MOVE:return"touchmove"===t;case TouchEvent.TOUCH_END:return"touchend"===t;case TouchEvent.TOUCH_END_OUDSIDE:return"touchendoutside"===t;case TouchEvent.TAP:return"tap"===t}return!1}},{key:"addDenyDB",value:function(e){s.addSingleArr(t.__bdArr,e)}},{key:"removeDenyDB",value:function(e){s.removeValueFromArray(t.__bdArr,e)}},{key:"_checkIsDBMC",value:function(e){return s.arrayContainsValue(t.__bdArr,e)}},{key:"addDomTouch",value:function(e,n,i,r){if(e&&n){var a="_M"+t.getUnique()+"_";return n.mc=e,n["this"]=i,e[a]=n,e[a].downTime=(new Date).getTime(),e[a].downP=new o,e.$document=$(document),e[0]&&(e[0][a]=e[a]),r||(r={time:500,dis:15}),r&&(n.outData=r,n.outData.canTab=!0),n.tab&&(e[a+"touchTab"]=function(t){t.t="tab",this[a]&&(this[a]["this"]?this[a].tab.call(this[a]["this"],t,this):this[a].tab.call(this,t,this))},e.on("click."+a+" touchend.tab"+a,e[a+"touchTab"])),e[a+"touchStart"]=function(e){if(this[a]){this.$document.on("mousemove."+a+" touchmove."+a,this[a+"touchMove"]),e.t="begin",this._isDown=!0;var n=void 0,i=void 0,r=!1;t._checkIsDBMC(this)&&(t.__isDenyDB=!0),this[a].dbtab&&(n=(new Date).getTime()-this[a].downTime,i=Math.abs(t.getPointLen(this[a].downP,t.getCanvasP(e))),300>n&&50>i&&(r=!0,this[a]["this"]?this[a].dbtab.call(this[a]["this"],e,this):this[a].dbtab.call(this,e,this))),this[a].downTime=(new Date).getTime(),this[a].downP=t.getSPPoint(t.getMouseXY(e)),!r&&this[a].begin&&(!this[a].isAddDB||this[a].isAddDB&&!t.__isDenyDB)&&(this[a]["this"]?this[a].begin.call(this[a]["this"],e,this):this[a].begin.call(this,e,this))}}.bind(e),e[a+"touchMove"]=function(e){if(this._isDown&&(e.t="move",this[a])){if(t._checkIsDBMC(this)&&(t.__isDenyDB=!0),this[a]&&(e.outData=this[a].outData,this[a].outData)){var n=Math.abs(t.getPointLen(this[a].downP,t.getMouseXY(e)));this[a].outData.dis&&n>this[a].outData.dis&&(this[a].outData.canTab=!1)}this._isDown&&this[a]&&this[a].move&&(!this[a].isAddDB||this[a].isAddDB&&!t.__isDenyDB)&&(this[a]["this"]?this[a].move.call(this[a]["this"],e,this):this[a].move.call(this,e,this)),this[a]&&this[a].move2&&(!this[a].isAddDB||this[a].isAddDB&&!t.__isDenyDB)&&(this[a]["this"]?this[a].move2.call(this[a]["this"],e,this):this[a].move2.call(this,e,this))}}.bind(e),e[a+"touchEnd"]=function(e){e.t="end",this[a]&&(this.$document.off("mousemove."+a,this[a+"touchMove"]),this.$document.off("touchmove."+a,this[a+"touchMove"]),this._isDown=!1,n.end&&(!this[a].isAddDB||this[a].isAddDB&&!t.__isDenyDB)&&(this[a]["this"]?this[a].end.call(this[a]["this"],e,this):this[a].end.call(this,e,this)),this[a]&&this[a].isAddDB&&t.__isDenyDB&&(t.__isDenyDB=!1))}.bind(e),e.on("mousedown."+a+" touchstart."+a,e[a+"touchStart"]),e.on("mouseup."+a+" touchend."+a,e[a+"touchEnd"]),a}}},{key:"removeDomTouch",value:function(t,e){t&&e&&(t[e+"touchTab"]&&(t.off("click."+e+" touchend.tab"+e,t[e+"touchTab"]),delete t[e+"touchTab"]),t.off("mousedown."+e+" touchstart."+e,t[e+"touchStart"]),t.$document&&t.$document.off("mousemove."+e+" touchmove."+e,t[e+"touchMove"]),t.off("mouseup."+e+" touchend."+e,t[e+"touchEnd"]),delete t[e+"touchStart"],delete t[e+"touchMove"],delete t[e+"touchEnd"],t[e]&&delete t[e])}},{key:"addSVGTouch",value:function(e,n,i,r){if(e&&n){var o="_MSVG"+t.getUnique()+"_";return i=void 0===i?e:i,n["this"]=i,n.mc=e,e.data(o,n),e.data("funcID",o),r||(r={time:300,dis:15}),r&&(n.outData=r,n.outData.canTab=!0),n._svg_tabFunc=function(t){var e=this.data("funcID"),n=this.data(e);t.t="tab",t.mc=this,n.tab.call(n["this"],t)},n._svg_beginFunc=function(t){var e=this.data("funcID");this._isDown=!0;var n=this.data(e);t.t="begin",t.mc=this,n.begin.call(n["this"],t)},n._svg_moveFunc=function(t){if(this._isDown){var e=this.data("funcID"),n=this.data(e);t.t="move",t.mc=this,n.move.call(n["this"],t)}},n._svg_endFunc=function(t){var e=this.data("funcID"),n=this.data(e);this._isDown=!1,t.t="end",t.mc=this,n.end.call(n["this"],t)},n.tab&&e.click(n._svg_tabFunc),t.isMobileBrowser()?(n.begin&&e.touchstart(n._svg_beginFunc),n.move&&e.touchmove(n._svg_moveFunc),n.end&&e.touchend(n._svg_endFunc)):(n.begin&&e.mousedown(n._svg_beginFunc),n.move&&e.mousemove(n._svg_moveFunc),n.end&&e.mouseup(n._svg_endFunc)),o}}},{key:"isMobileBrowser",value:function(){var t=!1;if(navigator){t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}return t}},{key:"removeSVGTouch",value:function(t,e){if(t&&e){var n=t.data(e);n.tab&&t.unclick(n._svg_tabFunc),n.begin&&(t.untouchstart(n._svg_beginFunc),t.unmousedown(n._svg_beginFunc)),n.move&&(t.untouchmove(n._svg_moveFunc),t.unmousemove(n._svg_moveFunc)),n.end&&(t.untouchend(n._svg_endFunc),t.unmouseup(n._svg_endFunc)),t.data(e,null)}}},{key:"addTouch",value:function(e,n,i,r){if(n){var a="_M"+t.getUnique()+"_";return n.mc=e,n["this"]=i,e[a]=n,e[a].downTime=(new Date).getTime(),e[a].downP=new o,r||(r={time:300,dis:15}),r&&(n.outData=r,n.outData.canTab=!0),n.tab&&(e[a+"touchTab"]=function(e){if(e.t="tab",this[a]){if(this[a].outData){var n=(new Date).getTime()-this[a].downTime;this[a].outData.time>0&&this[a].outData.time&&n>this[a].outData.time&&(this[a].outData.canTab=!1)}(!this[a].outData||this[a].outData&&this[a].outData.canTab)&&(this[a]["this"]?this[a].tab.call(this[a]["this"],e,this):this[a].tab.call(this,e,this)),this[a]&&this[a].outData&&(this[a].outData.canTab=!0,this[a].outData.downP=t.getSPPoint(t.getMouseXY(e)))}},e.addEventListener(TouchEvent.TOUCH_END,e[a+"touchTab"])),e[a+"touchStart"]=function(e){e.t="begin",this._isDown=!0;var n=void 0,i=void 0,r=!1;t._checkIsDBMC(this)&&(t.__isDenyDB=!0),this[a].dbtab&&(n=(new Date).getTime()-this[a].downTime,i=Math.abs(t.getPointLen(this[a].downP,t.getMouseXY(e))),300>n&&50>i&&(r=!0,this[a]["this"]?this[a].dbtab.call(this[a]["this"],e,this):this[a].dbtab.call(this,e,this))),this[a].downTime=(new Date).getTime(),this[a].downP=t.getSPPoint(t.getMouseXY(e)),!r&&this[a].begin&&(this[a]["this"]?this[a].begin.call(this[a]["this"],e,this):this[a].begin.call(this,e,this))},e.addEventListener(TouchEvent.TOUCH_BEGIN,e[a+"touchStart"]),e[a+"touchMove"]=function(e){if(e.t="move",this[a].globalMove&&(this[a]["this"]?this[a].globalMove.call(this[a]["this"],e,this):this[a].globalMove.call(this,e,this)),this._isDown){if(t._checkIsDBMC(this)&&(t.__isDenyDB=!0),e.outData=this[a].outData,this[a].outData){var n=Math.abs(t.getPointLen(this[a].downP,t.getMouseXY(e)));this[a].outData.dis&&n>this[a].outData.dis&&(this[a].outData.canTab=!1)}this[a].move&&(this[a]["this"]?this[a].move.call(this[a]["this"],e,this):this[a].move.call(this,e,this))}},e.addEventListener(TouchEvent.TOUCH_MOVE,e[a+"touchMove"]),e[a+"touchEnd"]=function(t){t.t="end",this._isDown=!1,n.end&&(this[a]["this"]?this[a].end.call(this[a]["this"],t,this):this[a].end.call(this,t,this))},e.addEventListener(TouchEvent.TOUCH_END,e[a+"touchEnd"]),e.addEventListener(TouchEvent.TOUCH_END_OUTSIDE,e[a+"touchEnd"]),a}}},{key:"removeTouch",value:function(t,e){if(t&&e){if(t[e]){var n=t[e],i=!0,r=!1,o=void 0;try{for(var a,s=Object.keys(n)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)n[a.value]=null}catch(t){r=!0,o=t}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}}delete t[e],t[e+"touchTab"]&&(t.removeEventListener(TouchEvent.TOUCH_END,t[e+"touchTab"]),delete t[e+"touchTab"]),t.removeEventListener(TouchEvent.TOUCH_BEGIN,t[e+"touchStart"]),delete t[e+"touchStart"],t.removeEventListener(TouchEvent.TOUCH_MOVE,t[e+"touchMove"]),delete t[e+"touchMove"],t[e+"touchEnd"]&&(t.removeEventListener(TouchEvent.TOUCH_END,t[e+"touchEnd"]),t.removeEventListener(TouchEvent.TOUCH_END_OUTSIDE,t[e+"touchEnd"]),delete t[e+"touchEnd"]),t[e]&&(t[e]["this"]=null)}}},{key:"vec2Length",value:function(t){return Math.sqrt(t.get_x()*t.get_x()+t.get_y()*t.get_y())}},{key:"vec3Length",value:function(t){return Math.sqrt(t.zpp_inner.x*t.zpp_inner.x+t.zpp_inner.y*t.zpp_inner.y+t.zpp_inner.z*t.zpp_inner.z)}},{key:"getRayPoint",value:function(t,e,n){var i=o.interpolate(e,t,1/o.distance(t,e));return new o(t.x+(i.x-t.x)*n,t.y+(i.y-t.y)*n)}},{key:"addDrag",value:function(e,n,i,r,a){r||(r=e),n&&void 0===i.dragRectEnable&&(i.dragRectEnable=n&&n.width>=0&&n.height>=0);var s=t.addTouch(e,{begin:function(n){e[s+"_dragData"].isDown=!0,t.setSPPoint(e[s+"_dragData"].p,t.getMouseXY(n)),i&&i.begin&&i.begin.call(r,n)},move:function(o){if(e[s+"_dragData"].isDown){var a=t.getMouseXY(o).x-e[s+"_dragData"].p.x,u=t.getMouseXY(o).y-e[s+"_dragData"].p.y;if(e.getMScale){var l=e.getMScale();a/=l.x,u/=l.y}var c=e.x+a,f=e.y+u;i&&i.dragRectEnable&&(c=t.range(c,n.x,n.x+n.width),f=t.range(f,n.y,n.y+n.height)),e[s].isLock||e.x===c&&e.y===f||(t.setSPPointXY(e,c,f),t.setSPPoint(e[s+"_dragData"].p,t.getMouseXY(o)),i&&i.move&&(o.chaX=a,o.chaY=u,i.move.call(r,o)))}},end:function(t){e[s+"_dragData"].isDown=!1,i&&i.end&&i.end.call(r,t)},tab:function(t){i&&i.tab&&i.tab.call(r,t)},dbtab:function(t){i&&i.dbtab&&i.dbtab.call(r,t)}},r,a);return e[s+"_dragData"]={p:new o(0,0)},s}},{key:"removeDrag",value:function(e,n){delete e[n+"_dragData"],t.removeTouch(e,n)}},{key:"setButton",value:function(e,n,i){if(!e.totalFrames)throw Error("it is not MovieClip");if(2!==e.totalFrames)throw Error("totalFrames is not equals 2");e.____setButton_touchID=t.addTouch(e,{begin:function(t){this.currentFrame=1},end:function(t){this.currentFrame=0},tab:function(t){n&&(i?n.call(i,{target:this}):n.call(this,{target:this}))}},null,{time:-1})}},{key:"removeButton",value:function(e){e&&t.removeTouch(e,e.____setButton_touchID)}},{key:"setToggle",value:function(e,n,i){e.data=n,e.data.target=e;var r=i||e;e.toggled&&(e.x+=e.data.w),t.addTouch(e,{tab:function(t){e.data.toggled=!e.data.toggled,e.data.toggled?e.x+=e.data.w:e.x-=e.data.w,e.data.toggle&&e.data.toggle.call(r,e.data.toggled)}})}},{key:"writeTxt",value:function(t,e){var n=new Blob([e],{type:"text/plain;charset=utf-8"});FileSaver.saveAs(n,t)}},{key:"setObjProperties",value:function(t,e){for(var n in e)t[n]=e[n]}},{key:"getAbsoluteUrl",value:function(t){var e=document.createElement("A");return e.href=t,t=e.href}},{key:"drawDashed",value:function(e,n,i,r,a){r||(r=5),a||(a=5);for(var s=t.getPointLen(n,i),u=0,l=void 0,c=void 0;s>u;)l=o.interpolate(i,n,u/s),(u+=r)>s&&(u=s),c=o.interpolate(i,n,u/s),e.moveTo(l.x,l.y),e.lineTo(c.x,c.y),u+=a}},{key:"drawDashedRect",value:function(e,n,i,r,o,a,s){t.drawDashed(e,n,i,a,s),t.drawDashed(e,i,r,a,s),t.drawDashed(e,r,o,a,s),t.drawDashed(e,o,n,a,s)}},{key:"drawSVGDashed",value:function(e,n,i,r){i||(i=5),r||(r=5);for(var a=t.getPointLen(e,n),s=0,u=void 0,l=void 0,c="";a>s;)u=o.interpolate(n,e,s/a),(s+=i)>a&&(s=a),l=o.interpolate(n,e,s/a),c+="M"+u.x+" "+u.y,c+="L"+l.x+" "+l.y,s+=r;return c}},{key:"drawSVGDashedRect",value:function(e,n,i,r,o,a){var s="";return s+=t.drawSVGDashed(e,n,o,a),s+=t.drawSVGDashed(n,i,o,a),s+=t.drawSVGDashed(i,r,o,a),s+=t.drawSVGDashed(r,e,o,a)}},{key:"parseXML",value:function(t){return(new c).parseXML(t)}},{key:"removeAllChild",value:function(t){if(t&&t.children.length)for(;t.children.length>0;)t.removeChildAt(0)}},{key:"get_quadraticCurveTo_points",value:function(t,e,n,i,r,a){for(var s=void 0,u=void 0,l=[],c=t,f=e,h=0,d=1;20>=d;++d)s=c+(n-c)*(h=d/20),u=f+(i-f)*h,l.push(new o(s+(n+(r-n)*h-s)*h,u+(i+(a-i)*h-u)*h));return l}},{key:"extends",value:function(t,e){t.prototype=Object.create(e.prototype),t.constructor=t}},{key:"range",value:function(t,e,n){return t=Math.max(e,t),t=Math.min(n,t)}},{key:"getValidAngle",value:function(t){var e=Math.abs(t);return 0>t?360*Math.floor(e/360+1)+t:0===e?0:e%360}},{key:"angleSplitLine",value:function(t,e,n,i){var r=new o(e.x-t.x,e.y-t.y),a=new o(i.x-n.x,i.y-n.y),s=Math.sqrt(r.x*r.x+r.y*r.y),u=Math.sqrt(a.x*a.x+a.y*a.y),l=new o(1/s*r.x,1/s*r.y),c=new o(1/u*a.x,1/u*a.y);return new o(l.x+c.x,l.y+c.y)}},{key:"getValidHu",value:function(e){return t.toHu(t.getValidAngle(t.toAngle(e)))}},{key:"stopPropagation",value:function(e){var n=function(t){t.stopPropagation()};t.addTouch(e,{tab:n,begin:n,move:n,end:n})}},{key:"GetObjPos",value:function(t){var e=t,n=new o(e.offsetLeft-e.scrollLeft,e.offsetTop-e.scrollTop);for(e=e.offsetParent;e;)n.x+=e.offsetLeft-e.scrollLeft,n.y+=e.offsetTop-e.scrollTop,e=e.offsetParent;return n}},{key:"containsPoint",value:function(t,e){return!!t.getBounds().contains(e.x,e.y)}},{key:"getMouseXY",value:function(t,e,n){void 0===e&&(e=0),n||(n="changedTouches");var i=void 0;if(t.data&&t.data.global)i=t.data.global;else if(void 0===t.clientX){var r=void 0;t[n]?(r=this.getIndexFromIdentifier(t[n],e),i=new o(t[n][r].clientX,t[n][r].clientY)):(r=this.getIndexFromIdentifier(t.originalEvent[n],e),i=new o(t.originalEvent[n][r].clientX,t.originalEvent[n][r].clientY))}else i=new o(t.clientX,t.clientY);return i.clone()}},{key:"getIndexFromIdentifier",value:function(t,e){var n=0;for(n=0;t.length>n;n++)if(e===t[n].identifier)return n;return 0}},{key:"getCanvasPToMouseP",value:function(e){var n=t.getCanvasP(e),i={};return i.data={},i.data.global=new o(n.x,n.y),i.type=e.type,i}},{key:"getMousePToCanvasP",value:function(e){var n=t.getMouseXY(e),i=$("#canvasID").offset(),r=new o(i.left,i.top),a=nb.PhysicsMain.ToolScale,s=new o(n.x*a,n.y*a);s.x+=r.x,s.y+=r.y;var u={};return u.data={},u.data.global=new o(s.x,s.y),u.type=e.type,u}},{key:"getCanvasP",value:function(e,n,i){var r=$("#canvasID").offset(),a=new o(r.left,r.top),s=t.getMouseXY(e,n,i),u=new o(s.x-a.x,s.y-a.y);return u.x=u.x/nb.PhysicsMain.ToolScale,u.y=u.y/nb.PhysicsMain.ToolScale,u}},{key:"getCanvasP_sdk",value:function(e,n,i){var r=new o(0,0),a=t.getMouseXY(e,n,i);return new o(a.x-r.x,a.y-r.y)}},{key:"os",value:function(){var t=navigator.userAgent.toLowerCase();return{isIpad:/ipad/.test(t),isIphone:/iphone os/.test(t),isAndroid:/android/.test(t),isWindowsCe:/windows ce/.test(t),isWindowsMobile:/windows mobile/.test(t),isWin2K:/windows nt 5.0/.test(t),isXP:/windows nt 5.1/.test(t),isVista:/windows nt 6.0/.test(t),isWin7:/windows nt 6.1/.test(t),isWin8:/windows nt 6.2/.test(t),isWin81:/windows nt 6.3/.test(t),isWinPC:/windows nt/.test(t)}}},{key:"RGBToHex",value:function(t){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,n=t;if(/^(rgb|RGB)/.test(n)){for(var i=n.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),r="",o=0;i.length>o;o++){var a=(+i[o]).toString(16);1===a.length&&(a="0"+a),r+=a}return r}if(!e.test(n))return n;var s=n.replace(/#/,"").split("");if(6===s.length)return n;if(3===s.length){for(var u="",l=0;s.length>l;l+=1)u+=s[l]+s[l];return u}}},{key:"isColorDeep",value:function(e){var n=t.retrieveRGBComponent(e);return!(.299*n[0]+.587*n[1]+.114*n[2]>=192)}},{key:"getDomColor",value:function(t){return"#"+(+t).toString(16)}},{key:"linePath",value:function(t,e,n){if(void 0===n&&(n=!0),!t||!e||3>e.length)return null;t.moveTo(e[0].x,e[0].y);var i=void 0,r=e.length;for(i=1;r>i;i++)t.lineTo(e[i].x,e[i].y);return n&&t.lineTo(e[0].x,e[0].y),t}},{key:"getRoundP",value:function(e,n,i){var r=t.getXianDianByDis(10,!0,n,e),o=t.getXianDianByDis(10,!0,n,i);return t.toHu(t.getAngleByP(e,n,i)),[e,r,o,i]}},{key:"addTicker",value:function(t,e,n){void 0===n&&(n=!0);var i=window.PIXI,r=void 0;return i&&((r=new i.ticker.Ticker).$this=e,r.add(function(e){r.$this?t.call(r.$this):t()}),n&&r.start()),r}},{key:"removeTicker",value:function(t){t&&(t.stop(),t.$this=null,delete t.$this,t=null)}},{key:"delayCallFunc",value:function(e,n,i,r){void 0===r&&(r=50),i||(i=this),e.call(i)?n.call(i):setTimeout(function(){t.delayCallFunc(e,n,i,r)},r)}},{key:"makeOrStr",value:function(t,e){var n=void 0,i=void 0,r=e.length,o=t.length,a="",s=void 0,u=void 0;for(n=0;r>n;n++){for(i=0;o>i;i++)s=t.charCodeAt(i),u=e.charCodeAt(n)^s;a+=String.fromCharCode(u)}return a}},{key:"standardletiance",value:function(t){var e=void 0,n=t.length,i=0;for(e=0;n>e;e++)i+=t[e];var r=i/n,o=0;for(e=0;n>e;e++){var a=t[e]-r;o+=a*a}var s=o/n;return Math.sqrt(s)}},{key:"hitTestPoint",value:function(t,e,n){var i=t.getBounds();return n||(e=t.toGlobal(e)),i.contains(e.x,e.y)}},{key:"alignPivot",value:function(t,e,n){var i=e||"center",r=n||"center";"left"===i?t.pivot.x=0:"center"===i?t.pivot.x=t.width/2:"right"===i&&(t.pivot.x=t.width),"top"===r?t.pivot.y=0:"center"===r?t.pivot.y=t.height/2:"bottom"===r&&(t.pivot.y=t.height)}},{key:"clone",value:function(e){if(null===e||"object"!==(void 0===e?"undefined":u(e)))return e;if(e instanceof Date){var n=new Date;return n.setTime(e.getTime()),n}if(e instanceof Array){var i=[],r=void 0,o=e.length;for(r=0;o>r;++r)i[r]=t.clone(e[r]);return i}if(e instanceof Object){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=t.clone(e[s]));return a}throw Error("Unable to copy obj! Its type isn't supported.")}},{key:"equals",value:function(e,n){if(e===n)return!0;if(void 0===n||null===n||"object"!==(void 0===n?"undefined":u(n)))return!1;var i=0,r=0;for(var o in e)i++;for(var a in n)r++;if(i!==r)return!1;if(n.constructor===e.constructor){for(var s in e)if("object"===u(e[s])){if(!t.equals(e[s],n[s]))return!1}else if("function"==typeof e[s]){if(!t.equals(""+e[s],""+n[s]))return!1}else if(e[s]!==n[s])return!1;return!0}return!1}},{key:"getFirstChildren",value:function(t){for(var e=[],n=t.getElementsByTagName("*"),i=0,r=n.length;r>i;++i)if(1===n[i].nodeType){var o=n[i].parentNode;1===o.nodeType?o===t&&(e[e.length]=n[i]):o.parentNode===t&&(e[e.length]=n[i])}return e}},{key:"setInputReg",value:function(t,e){var n=this;$("#"+t).keyup(function(t){var i=n.value.replace(e,"");$(n).val(i)})}},{key:"debounce",value:function(t,e,n,i){void 0===e&&(e=250);var r=void 0,o=i||this;return function(){var i=o||this,a=arguments,s=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,a)},e),s&&t.apply(i,a)}}},{key:"getAddPIXIBMP",value:function(t,e){if(!t||!t.children||!e||0===e.length)return null;var n=null;return each(t.children,function(t,i){if(i&&i._nbData_&&i._nbData_.libName===e)return n=i,!1}),n}},{key:"checkValidMT",value:function(t){return!t.type||t.type.indexOf("touch")>-1}},{key:"fullScreen",value:function(){var t=document.documentElement,e=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(void 0!==e&&e)e.call(t);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}},{key:"exitFullScreen",value:function(){var t=document,e=t.cancelFullScreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.exitFullScreen;if(void 0!==e&&e)e.call(t);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}},{key:"listenFullscreen",value:function(t,e){var n=void 0!==e?e:this,i=document.documentElement;i.requestFullscreen?document.addEventListener("fullscreenchange",function(){t.call(n,document.fullscreen)},!1):i.mozRequestFullScreen?document.addEventListener("mozfullscreenchange",function(){t.call(n,document.mozFullScreen)},!1):i.webkitRequestFullscreen?document.addEventListener("webkitfullscreenchange",function(){t.call(n,document.webkitIsFullScreen)},!1):i.msRequestFullscreen&&document.addEventListener("msfullscreenchange",function(){t.call(n,document.msFullscreenElement)},!1)}},{key:"setRopePoints",value:function(t,e){t.points=e,t.vertices=new Float32Array(4*e.length),t.uvs=new Float32Array(4*e.length),t.colors=new Float32Array(2*e.length),t.indices=new Uint16Array(2*e.length),(t._refresh||t.refresh).call(t)}},{key:"checkIsWinXP",value:function(){var t="Win32"===navigator.platform||"Windows"===navigator.platform,e=!1,n=navigator.userAgent;return t&&(e=n.indexOf("Windows NT 5.1")>-1||n.indexOf("Windows Xp")>-1),e}},{key:"checkIsIE",value:function(){return!!window.ActiveXObject||"ActiveXObject"in window}},{key:"killTweenMax",value:function(e,n){if(e)if(e instanceof Array)for(;e.length;)t.killTweenMax(e.pop());else if(TweenMax.killTweensOf(e.target,!1,null),!n){e.prevNode=null,e.nextNode=null,e.target=null;for(var i in e.vars)e.vars[i]["this"]&&(e.vars[i]["this"]=null),e.vars[i]=null;e.data=null,e=null}}},{key:"getObjFromJsonStr",value:function(t){var e=null;try{var n="[object String]"===Object.prototype.toString.call(t)?JSON.parse(t):t;"[object Object]"===Object.prototype.toString.call(n)&&(e=n)}catch(t){e=null}return e}},{key:"getUrlPara",value:function(t){var e=RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=location.href.substring(location.href.indexOf("?")+1).match(e);return null!=n?n[2]:null}}]),t}();f.MIN=1e-6,f.__bdArr=[],f.__isDenyDB=!1,e.exports=f},{"./ArrayUtil":1,"./NumberUtilities":10,"./ObjTree":11,"./Point":12,"./Rectangle":14}],8:[function(t,e,n){var r=function(){function t(){i(this,t),this.ERROR_MATRIX_NOT_SQUARE="Matrix must be square.",this.ERROR_VECTOR_NOT_2D="Only two dimensional operations are supported at this time."}return l(t,null,[{key:"_check2DVector",value:function(t){if(2!==t.length)throw Error(this.ERROR_VECTOR_NOT_2D)}},{key:"deepCopy",value:function(t){if(!Array.isArray(t))throw Error("Input must be a Matrix.");if(void 0===t[0][0])throw Error("Input cannot be a vector.");for(var e=Array(t.length),n=0;t.length>n;n++)e[n]=t[n].slice();return e}},{key:"isSquare",value:function(t){if(!Array.isArray(t))throw Error("Input must be a Matrix.");if(void 0===t[0][0])throw Error("Input cannot be a vector.");for(var e=t.length,n=0;e>n;n++)if(t[n].length!==e)return!1;return!0}},{key:"addition",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw Error("Matrix mismatch");var n=Array(t.length),i=void 0;if(t[0].length)for(i=0;t.length>i;i++){n[i]=Array(t[i].length);for(var r=0;t[i].length>r;r++)n[i][r]=t[i][r]+e[i][r]}else for(i=0;t.length>i;i++)n[i]=t[i]+e[i];return n}},{key:"traceMatrix",value:function(t){var e=void 0,n=void 0;if(t[0].length)for(e=0;t.length>e;e++){n="";for(var i=0;t[e].length>i;i++)n+=t[e][i]+"\t"}else for(n="",e=0;t.length>e;e++)n+=t[e]+"\t"}},{key:"subtraction",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw Error("Matrix mismatch");var n=Array(t.length),i=void 0;if(t[0].length)for(i=0;t.length>i;i++){n[i]=Array(t[i].length);for(var r=0;t[i].length>r;r++)n[i][r]=t[i][r]-e[i][r]}else for(i=0;t.length>i;i++)n[i]=t[i]-e[i];return n}},{key:"scalar",value:function(t,e){for(var n=0;t.length>n;n++)for(var i=0;t[n].length>i;i++)t[n][i]=e*t[n][i];return t}},{key:"transpose",value:function(t){for(var e=Array(t[0].length),n=0;t[0].length>n;n++){e[n]=Array(t.length);for(var i=0;t.length>i;i++)e[n][i]=t[i][n]}return e}},{key:"identity",value:function(t){for(var e=Array(t),n=0;t>n;n++){e[n]=Array(t);for(var i=0;t>i;i++)e[n][i]=n===i?1:0}return e}},{key:"dotproduct",value:function(t,e){if(t.length!==e.length)throw Error("Vector mismatch");for(var n=0,i=0;t.length>i;i++)n+=t[i]*e[i];return n}},{key:"multiply",value:function(e,n){if(e[0].length!==n.length)throw Error("Matrix mismatch");for(var i=Array(e.length),r=0;e.length>r;r++)i[r]=Array(n[0].length);for(var o=t.transpose(n),a=0;i.length>a;a++)for(var s=0;i[a].length>s;s++)i[a][s]=t.dotproduct(e[a],o[s]);return i}},{key:"determinant",value:function(e){var n=e.length,i=e[0].length,r=0,o=void 0,a=void 0,s=void 0,u=void 0;if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);if(1===n)return e[0][0];if(2===n)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(a=0;i>a;a++){for(s=e[0][a],u=e[0][a],o=1;n>o;o++)u*=e[o][((a+o)%i+i)%i],s*=e[o][((a-o)%i+i)%i];r+=u-s}return r}},{key:"lupDecomposition",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var n=e.length,i=t.deepCopy(e),r=t.transpose(t.identity(n)),o=void 0,a=Array(n);this.getL=function(e){for(var n=e[0].length,i=t.identity(n),r=0;n>r;r++)for(var o=0;n>o;o++)r>o&&(i[r][o]=e[r][o]);return i},this.getU=function(e){for(var n=e[0].length,i=t.identity(n),r=0;n>r;r++)for(var o=0;n>o;o++)o>=r&&(i[r][o]=e[r][o]);return i};for(var s=0;n>s;s++){var u=void 0;for(u=0;n>u;u++)a[u]=i[u][s];for(u=0;n>u;u++){o=i[u];for(var l=Math.min(u,s),c=0,f=0;l>f;f++)c+=o[f]*a[f];o[s]=a[u]-=c}var h=s;for(u=s+1;n>u;u++)Math.abs(a[u])>Math.abs(a[h])&&(h=u);if(h!==s&&(i=t.rowSwitch(i,h,s),r=t.rowSwitch(r,h,s)),n>s&&0!==i[s][s])for(u=s+1;n>u;u++)i[u][s]/=i[s][s]}return[this.getL(i),this.getU(i),r]}},{key:"rotate",value:function(e,n,i){t._check2DVector(e);var r="clockwise"===i?-1:1,o=n*(Math.PI/180);return t.multiply([[Math.cos(o),-1*r*Math.sin(o)],[r*Math.sin(o),Math.cos(o)]],e)}},{key:"scale",value:function(e,n,i){return t._check2DVector(e),t.multiply([[n,0],[0,i]],e)}},{key:"shear",value:function(e,n,i){return t._check2DVector(e),t.multiply([[1,"xaxis"===i?n:0],["yaxis"===i?n:0,1]],e)}},{key:"affine",value:function(e,n,i){t._check2DVector(e);var r=[[1,0,n],[0,1,i],[0,0,1]],o=[[e[0][0]],[e[1][0]],[1]],a=t.multiply(r,o);return[[a[0][0]],[a[1][0]]]}},{key:"rowScale",value:function(t,e,n){for(var i=Array(t.length),r=0;t.length>r;r++){i[r]=Array(t[r].length);for(var o=0;t[r].length>o;o++)i[r][o]=r===e?n*t[r][o]:t[r][o]}return i}},{key:"rowSwitch",value:function(t,e,n){for(var i=Array(t.length),r=0;t.length>r;r++){i[r]=Array(t[r].length);for(var o=0;t[r].length>o;o++)i[r][o]=r===e?t[n][o]:r===n?t[e][o]:t[r][o]}return i}},{key:"rowAddMultiple",value:function(t,e,n,i){for(var r=Array(t.length),o=0;t.length>o;o++){r[o]=Array(t[o].length);for(var a=0;t[o].length>a;a++)o===n?r[n][a]=t[n][a]+i*t[e][a]:r[o][a]=t[o][a]}return r}},{key:"GaussJordanEliminate",value:function(t,e){for(var n=void 0===e?1e-10:e,i=t.length,r=t[0].length,o=-1,a=void 0,s=void 0,u=void 0;++o<i;){var l=o;for(a=o;++a<i;)Math.abs(t[a][o])>Math.abs(t[l][o])&&(l=a);var c=t[o];if(t[o]=t[l],t[l]=c,Math.abs(t[o][o])<=n)return t;for(a=o;++a<i;)for(u=t[a][o]/t[o][o],s=o-1;++s<r;)t[a][s]-=t[o][s]*u}for(o=i;--o>=0;){for(u=t[o][o],a=-1;++a<o;)for(s=r;--s>=o;)t[a][s]-=t[o][s]*t[a][o]/u;for(t[o][o]/=u,s=i-1;++s<r;)t[o][s]/=u}return t}},{key:"rowReduce",value:function(e,n){return t.GaussJordanEliminate(e,n)}},{key:"inverse",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var n=e.length,i=t.identity(n),r=void 0;for(r=0;n>r;r++)e[r]=e[r].concat(i[r]);for(e=t.GaussJordanEliminate(e),r=0;n>r;r++)e[r]=e[r].slice(n);return e}},{key:"getCol",value:function(t,e){var n=Array(t.length);if(0>e)throw Error("The specified column must be a positive integer.");if(e>=t[0].length)throw Error("The specified column must be between 0 and the number of columns - 1.");for(var i=0;t.length>i;i++)n[i]=t[i][e];return n}},{key:"reorderRows",value:function(t,e){var n=[];if(void 0===e)throw Error("A reordering array must be entered.");if(e.length!==t.length)throw Error("The reordered matrix must have the same number of rows as the original Matrix.");for(var i=0;e.length>i;i++){if(0>e[i])throw Error("The desired order of the rows must be positive integers.");if(e[i]>=e.length)throw Error("The desired order of the rows must start at 0 and end at the number of rows - 1.");n.push(t[e[i]])}return n}},{key:"reorderCols",value:function(e,n){var i=[];if(void 0===n)throw Error("Please enter a desired reordering array.");if(n.length!==e[0].length)throw Error("The reordered matrix must have the same number of columns as the original Matrix.");for(var r=0;n.length>r;r++){if(0>n[r])throw Error("The desired order of the columns must be positive integers.");if(n[r]>=n.length)throw Error("The desired order of the columns must start at 0 and end at the number of columns - 1.");i.push(t.getCol(e,n[r]))}return t.transpose(i)}},{key:"reverseRows",value:function(e){for(var n=[],i=e.length-1;i>-1;i--)n.push(i);return t.reorderRows(e,n)}},{key:"reverseCols",value:function(e){for(var n=[],i=e.length-1;i>-1;i--)n.push(i);return t.reorderCols(e,n)}},{key:"zeros",value:function(t,e){var n=Array(t);if(1>t||1>e)throw Error("The matrix dimensions must be positive integers.");t=Math.ceil(t),e=Math.ceil(e);for(var i=0;t>i;i++){for(var r=Array(e),o=0;e>o;o++)r[o]=0;n[i]=r}return n}},{key:"zigzag",value:function(e,n,i){if(1>=e)throw Error("Matrix size must be at least 2x2.");e=Math.ceil(e);var r=t.zeros(e,e),o=function(t){var n=!1,i=e*e,r=1,o=1,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0;for(t[0][0]=i,t[e-1][e-1]=r,l=1;e>l;l++)n?(i-=4*o,r+=4*o,o++):(i--,r++),t[0][l]=i,t[e-1][e-1-l]=r,n=!n;var f=!0;for(l=1;e>l;l++){for(s=l,u=t[a=0][s],c=1;l+1>c;c++)f?u-=1:u+=1,s--,t[++a][s]=u;f=!f}for(f=e%2==0,l=1;e-1>l;l++){for(s=l,u=t[a=e-1][s],c=1;e-l>c;c++)f?u--:u++,s++,t[--a][s]=u;f=!f}return t},a=function(e){return t.transpose(o(e))},s=function(e){return t.reverseCols(o(e))},u=function(e){return t.reverseCols(t.reverseRows(o(e)))},l=function(e){return t.transpose(u(e))};if("BR"===n&&"H"===i)return o(r);if("BR"===n&&"V"===i)return a(r);if("BL"===n&&"H"===i)return s(r);if("BL"===n&&"V"===i)return function(e){return t.reverseRows(l(s(e)))}(r);if("TR"===n&&"H"===i)return function(e){return t.reverseRows(o(e))}(r);if("TR"===n&&"V"===i)return function(e){return t.reverseRows(a(e))}(r);if("TL"===n&&"H"===i)return u(r);if("TL"===n&&"V"===i)return l(r);throw Error("Enter the direction (V,H) and corner (BR,BL,TR,TL) correctly.")}},{key:"vectorNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length)throw Error("Vector must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e)throw Error("Norm order must be a number.");e=void 0===e?2:e;var n=t.length,i=0,r=void 0,o=void 0;switch(e){case 1/0:for(o=0;n>o;o++)(r=Math.abs(t[o]))>i&&(i=r);break;case-1/0:for(i=1/0,o=0;n>o;o++)(r=Math.abs(t[o]))<i&&(i=r);break;default:for(o=0;n>o;o++)i+=Math.pow(Math.abs(t[o]),e);i=Math.pow(i,1/e)}return i}},{key:"matrixNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length||!Array.isArray(t[0]))throw Error("Matrix must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e&&null!==e)throw Error("Norm order must be a number or null.");e=void 0===e?null:e;var n=t.length,i=t[0].length,r=0,o=void 0,a=void 0,s=void 0;switch(e){case 1/0:for(a=0;n>a;a++){for(o=0,s=0;i>s;s++)o+=Math.abs(t[a][s]);o>r&&(r=o)}break;case-1/0:for(r=1/0,a=0;n>a;a++){for(o=0,s=0;i>s;s++)o+=Math.abs(t[a][s]);r>o&&(r=o)}break;case 1:for(a=0;i>a;a++){for(o=0,s=0;n>s;s++)o+=Math.abs(t[s][a]);o>r&&(r=o)}break;case-1:for(r=1/0,a=0;i>a;a++){for(o=0,s=0;n>s;s++)o+=Math.abs(t[s][a]);r>o&&(r=o)}break;case null:for(a=0;n>a;a++)for(s=0;i>s;s++)r+=Math.pow(t[a][s],2);r=Math.pow(r,.5);break;case 2:case-2:throw Error("Singular values are not yet supported in numbers.js.");default:for(a=0;n>a;a++)for(s=0;i>s;s++)r+=Math.pow(Math.abs(t[a][s]),e);r=Math.pow(r,1/e)}return r}},{key:"isUpperBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||2>t.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||0>e||e%1!=0)throw Error("Upper bandwidth must be a nonzero integer.");for(var n=!0,i=t[0].length,r=0,o=e+1;i>o;o++){if(0!==t[r][o]){n=!1;break}r++}return n}},{key:"isLowerBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||2>t.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||0>e||e%1!=0)throw Error("Lower bandwidth must be a nonzero integer.");for(var n=!0,i=t.length,r=0,o=e+1;i>o;o++){if(0!==t[o][r]){n=!1;break}r++}return n}},{key:"isRowDD",value:function(e){var n=e.length;if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=0;n>i;i++){var r=e[i],a=r[i],s=o(r,i);if(Math.abs(a)<s)return!1}return!0}},{key:"isStrictlyRowDD",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=e.length,i=0;n>i;i++){var r=e[i],a=r[i],s=o(r,i);if(Math.abs(a)<=s)return!1}return!0}},{key:"isColumnDD",value:function(e){if(!t.isSquare)throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=e.length,i=0;n>i;i++){var r=t.getCol(e,i),a=r[i],s=o(r,i);if(Math.abs(a)<s)return!1}return!0}},{key:"isStrictlyColumnDD",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=e.length,i=0;n>i;i++){var r=t.getCol(e,i),a=r[i],s=o(r,i);if(Math.abs(a)<=s)return!1}return!0}}]),t}();r.clone=r.deepCopy,r.add=r.addition;var o=function(t,e){var n=0,i=void 0;for(i=0;e>i;i++)n+=Math.abs(t[i]);for(i=e+1;t.length>i;i++)n+=Math.abs(t[i]);return n};e.exports=r},{}],9:[function(t,e,n){var r=function(){function t(e,n){i(this,t),this._m=[],this._isError=!1,this._errorMes="",this._det=0,this._rows=e,this._columns=n,Object.defineProperty(this,"isError",{get:function(){return this._isError},set:function(t){this._isError=t}}),Object.defineProperty(this,"errorMes",{get:function(){return this._errorMes},set:function(t){this._errorMes=t}}),Object.defineProperty(this,"detMultiplier",{get:function(){return this._det}}),Object.defineProperty(this,"rows",{get:function(){return this._rows}}),Object.defineProperty(this,"columns",{get:function(){return this._columns}}),Object.defineProperty(this,"m",{get:function(){return this._m}});var r=e*n,o=void 0;for(o=0;r>o;o++)this._m.push(0)}return l(t,[{key:"identity",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,void(this._errorMes="Number of rows doesn't match number of columns");var t=void 0,e=void 0;for(t=0;this._rows>t;t++)for(e=0;this._columns>e;e++)this._m[e+t*this._columns]=t==e?1:0}},{key:"multiply",value:function(e){if(this._isError=!1,this._errorMes="",this._columns!=e.rows)return this._isError=!0,void(this._errorMes="Number of columns of the first matrix doesn't match with number of rows of the second matrix");var n=e.columns,i=new t(this._rows,n),r=void 0,o=void 0,a=void 0;for(r=0;this._rows>r;r++)for(o=0;n>o;o++)for(a=0;this._columns>a;a++)i._m[o+r*n]+=this._m[a+r*this._columns]*e._m[o+a*n];this._columns=n,this._m=i._m}},{key:"scalar",value:function(t){var e=this._rows*this._columns,n=void 0;for(n=0;e>n;n++)this._m[n]*=t}},{key:"add",value:function(t){if(this._isError=!1,this._errorMes="",this._rows!=t.rows||this._columns!=t.columns)return this._isError=!0,void(this._errorMes="Number of columns and rows of the first matrix doesn't match with number of columns and rows of the second matrix");var e=this._rows*this._columns,n=void 0;for(n=0;e>n;n++)this._m[n]+=t._m[n]}},{key:"substract",value:function(t){if(this._isError=!1,this._errorMes="",this._rows!=t.rows||this._columns!=t.columns)return this._isError=!0,void(this._errorMes="Number of columns and rows of the first matrix doesn't match with number of columns and rows of the second matrix");var e=this._rows*this._columns,n=void 0;for(n=0;e>n;n++)this._m[n]-=t._m[n]}},{key:"transpose",value:function(){var e=new t(this._columns,this._rows),n=void 0,i=void 0;for(n=0;this._rows>n;n++)for(i=0;this._columns>i;i++)e._m[n+i*this._rows]=this._m[i+n*this._columns];return e}},{key:"gaussElimination",value:function(){this._isError=!1,this._errorMes="";var t=void 0,e=void 0;if(this._det=1,this._rows>this._columns-1)return this._isError=!0,void(this._errorMes="This matrix doesn't represent any system of equations");var n=void 0,i=void 0,r=void 0;for(n=0;this._rows-1>n;n++){for(t=n,i=n+1;this._rows>i;i++)Math.abs(this._m[n+i*this._columns])>Math.abs(this._m[n+t*this._columns])&&(t=i);for(this.swapRows(n,t),i=n+1;this._rows>i;i++){if(0==this._m[n*(1+this._columns)])return this._isError=!0,void(this._errorMes="This system of equations doesn't have any solution");for(e=this._m[n+i*this._columns]/this._m[n*(1+this._columns)],r=n;this._columns>r;r++)this._m[r+i*this._columns]-=this._m[r+n*this._columns]*e}}return 0==this._m[(this._rows-1)*(1+this._columns)]?(this._isError=!0,void(this._errorMes="This system of equations doesn't have any solution")):void 0}},{key:"inverse",value:function(){this._isError=!1,this._errorMes="";var e=this._rows,n=new t(e,e);if(this._rows!=this._columns)return n.resize(0,0),n.isError=!0,n.errorMes="Number of rows doesn't match number of columns",n;var i=void 0,r=this.merge(n),o=r.columns,a=void 0;for(a=0;e>a;a++)r._m[a+e+a*o]=1;if(r.gaussElimination(),r.isError)return n.resize(0,0),n.isError=!0,n.errorMes=r.errorMes,n;for(var s=void 0,u=0;e>u;u++)for(a=e-1;a>=0;a--){for(i=0,s=a+1;e>s;s++)i+=r._m[s+a*o]*n._m[u+s*e];n._m[u+a*e]=(r._m[u+e+a*o]-i)/r._m[a*(1+o)]}return n}},{key:"gaussDeterminant",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,this._errorMes="Number of rows doesn't match number of columns",null;var e=this._rows,n=this.merge(new t(e,1));if(n.gaussElimination(),n.isError)return this._isError=!0,this._errorMes="Some unexpected error",0;this._det=n.detMultiplier;var i=n.columns,r=void 0;for(r=0;e>r;r++)this._det*=n._m[r*(1+i)];return this._det}},{key:"recursiveDeterminant",value:function(){if(this._isError=!1,this._errorMes="",this._rows!=this._columns)return this._isError=!0,this._errorMes="Number of rows doesn't match number of columns",null;var t=this._rows,e=0,n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0;if(t>1)for(s=0;t>s;s++)0!=(a=this._m[s])&&(o=s%2==0?1:-1,0==s?r=this.fragment(1,1,t-1,this._columns-1):s==t-1?r=this.fragment(1,0,t-1,this.columns-2):(n=this.fragment(1,0,t-1,s-1),i=this.fragment(1,s+1,t-1,this._columns-1),r=n.merge(i)),e+=o*a*r.recursiveDeterminant());else e=_m[0];return e}},{key:"insert",value:function(t,e,n,i){var r=this._rows,o=this._columns;if(r>e&&o>n){var a=e+t.rows,s=n+t.columns;a=a>r?a:r,s=s>o?s:o,i&&this.resize(a,s),a=e+t.rows,s=n+t.columns;var u=a>this._rows?this._rows:a,l=s>this._columns?this._columns:s,c=void 0,f=void 0;for(c=e;u>c;c++)for(f=n;l>f;f++)this._m[f+c*this._columns]=t._m[f-n+(c-e)*t.columns]}}},{key:"resize",value:function(e,n){var i=this._rows,r=this._columns,o=new t(e,n),a=void 0,s=void 0;for(a=0;e>a;a++)if(i>a)for(s=0;n>s;s++)r>s&&(o._m[s+a*n]=this._m[s+a*r]);this._rows=e,this._columns=n,this._m=o._m}},{key:"fragment",value:function(e,n,i,r){e>this._rows&&(e=this._rows),n>this._columns&&(n=this._columns),i>this._rows&&(i=this._rows),r>this._columns&&(r=this._columns);var o=void 0;e>i&&(o=e,e=i,i=o),n>r&&(o=n,n=r,r=o);var a=r-n+1,s=new t(i-e+1,a),u=void 0,l=void 0;for(u=e;i>=u;u++)for(l=n;r>=l;l++)s._m[l-n+(u-e)*a]=_m[l+u*this._columns];return s}},{key:"merge",value:function(e){var n=e.rows,i=e.columns,r=this._rows,o=this._columns,a=o+i,s=new t(Math.max(r,n),a),u=void 0,l=void 0;for(u=0;r>u;u++)for(l=0;o>l;l++)s._m[l+u*a]=this._m[l+u*o];for(u=0;n>u;u++)for(l=0;i>l;l++)s._m[l+o+u*a]=e._m[l+u*i];return s}},{key:"swapRows",value:function(t,e){if(this._rows>=t&&this._rows>=e&&t!=e){this._det=-this._det;var n=void 0,i=void 0;for(i=0;this._columns>i;i++)n=this._m[i+t*this._columns],this._m[i+t*this._columns]=this._m[i+e*this._columns],this._m[i+e*this._columns]=n}}},{key:"random",value:function(t,e){var n=this._rows*this._columns,i=void 0;for(i=0;n>i;i++)this._m[i]=Math.round(Math.random()*(Math.max(t,e)-Math.min(t,e)))+Math.min(t,e)}},{key:"clone",value:function(){var e=this._rows*this._columns,n=new t(this._rows,this._columns),i=void 0;for(i=0;e>i;i++)n._m[i]=this._m[i];return n}},{key:"setElement",value:function(t,e,n){t>=this._rows||e>=this._columns||(this._m[e+t*this._columns]=n)}},{key:"getElement",value:function(t,e){return this._rows>t&&this._columns>e?this._m[e+t*this._columns]:NaN}},{key:"setMatrixFromRows",value:function(t){var e=t.length,n=t[0].length,i=void 0,r=void 0;for(i=0;e>i;i++)if(t[i].length!=n)return;for(this._m.length=e*n,i=0;e>i;i++)for(r=0;n>r;r++)this._m[r+i*n]=t[i][r];this._rows=e,this._columns=n}},{key:"setMatrixFromVector",value:function(t,e,n){var i=e*n;if(i==t.length){var r=void 0;for(r=0;i>r;r++)this._m[r]=t[r];this._rows=e,this._columns=n}}},{key:"traceMatrix",value:function(){var t=void 0,e=void 0;for(t=0;this._rows>t;t++)for(e=0;this._columns>e;e++);}}],[{key:"GaussSolution",value:function(e,n){var i=e.rows,r=void 0,o=new t(i,1);if(e.rows!=e.columns||e.rows!=n.rows||n.columns>1||0==n.columns)return o.resize(0,0),o.isError=!0,o.errorMes="Can't solve this system of equations",o;var a=e.merge(n),s=a.columns;if(a.gaussElimination(),a.isError)return o.resize(0,0),o.isError=!0,o.errorMes=a.errorMes,o;var u=void 0,l=void 0;for(u=i-1;u>=0;u--){for(r=0,l=u+1;i>l;l++)r+=a._m[l+u*s]*o._m[l];o._m[u]=(a._m[i+u*s]-r)/a._m[u*(1+s)]}return o}},{key:"LUPDecomposition",value:function(t,e){if(t.rows==t.columns){var n=t.rows;e.resize(n,1);var i=void 0,r=void 0,o=void 0;for(i=0;n>i;i++)e._m[i]=i;for(o=0;n>o;o++){var a=0,s=void 0;for(i=o;n>i;i++)Math.abs(t._m[o+i*n])>a&&(a=Math.abs(t._m[o+i*n]),s=i);if(0==a)return t.isError=!0,void(t.errorMes="Can't solve this system of equations");for(e.swapRows(o,s),t.swapRows(o,s),i=o+1;n>i;i++)for(t._m[o+i*n]/=t._m[o*(1+n)],r=o+1;n>r;r++)t._m[r+i*n]-=t._m[o+i*n]*t._m[r+o*n]}}}},{key:"LUPSolution",value:function(e,n,i){var r=e.rows,o=void 0,a=void 0,s=void 0,u=new t(r,1);if(e.isError||r!=e.columns||r!=n.rows||1!=n.columns||r!=i.rows||1!=i.columns)return u.resize(0,0),u.isError=!0,u.errorMes="Can't solve this system of equations",u;for(a=0;r>a;a++){for(o=0,s=0;a>s;s++)o+=e._m[s+a*r]*u._m[s];u._m[a]=i._m[n._m[a]]-o}for(a=r-1;a>=0;a--){for(o=0,s=a+1;r>s;s++)o+=e._m[s+a*r]*u._m[s];u._m[a]=(u._m[a]-o)/e._m[a*(1+r)]}return u}},{key:"CramerSolution",value:function(e,n){var i=e.rows,r=new t(i,1),o=void 0;if(e.rows!=e.columns||e.rows!=n.rows||1!=n.columns)return r.resize(0,0),r.isError=!0,r.errorMes="Can't solve this system of equations",r;var a=e.recursiveDeterminant();if(0==a)return r.resize(0,0),r.isError=!0,r.errorMes="The A matrix is not invertible. So I can't solve this system of equations",r;var s=void 0;for(s=0;i>s;s++)(o=e.clone()).insert(n,0,s),r._m[s]=o.recursiveDeterminant()/a;return r}}]),t}();e.exports=r},{}],10:[function(t,e,n){var r=function(){function t(){i(this,t)}return l(t,null,[{key:"round",value:function(t,e){return void 0===e&&(e=1),Math.round(t/e)*e}},{key:"floor",value:function(t,e){return void 0===e&&(e=1),Math.floor(t/e)*e}},{key:"ceil",value:function(t,e){return void 0===e&&(e=1),Math.ceil(t/e)*e}},{key:"random",value:function(e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=1),e>n){var r=e;e=n,n=r}var o=n-e+1*i,a=Math.random()*o;return a+=e,t.floor(a,i)}},{key:"getUniqueID",value:function(){return t.getUnique()+""}},{key:"getUnique",value:function(){null==t._aUniqueIDs&&(t._aUniqueIDs=[]);for(var e=new Date,n=e.getTime();!t.isUnique(n);)n+=t.random(e.getTime(),2*e.getTime());return t._aUniqueIDs.push(n),n}},{key:"isUnique",value:function(e){for(var n=0;t._aUniqueIDs.length>n;n++)if(t._aUniqueIDs[n]==e)return!1;return!0}}]),t}();e.exports=r},{}],11:[function(t,e,n){(function(t){var n=t||window,r=function(){function t(){i(this,t),this.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',this.attr_prefix="-"}return l(t,[{key:"parseXML",value:function(t){var e=void 0;if(n.DOMParser){var i=(new DOMParser).parseFromString(t,"application/xml");if(!i)return;e=i.documentElement}else n.ActiveXObject&&(xmldom=new ActiveXObject("Microsoft.XMLDOM"),xmldom.async=!1,xmldom.loadXML(t),e=xmldom.documentElement);if(e)return this.parseDOM(e)}},{key:"parseHTTP",value:function(t,e,n){var i={};for(var r in e)i[r]=e[r];if(i.method||(i.method=void 0===i.postBody&&void 0===i.postbody&&void 0===i.parameters?"get":"post"),n){i.asynchronous=!0;var o=this,a=n,s=i.onComplete;i.onComplete=function(t){var e=void 0;t&&t.responseXML&&t.responseXML.documentElement&&(e=o.parseDOM(t.responseXML.documentElement)),a(e,t),s&&s(t)}}else i.asynchronous=!1;var u=void 0;if("undefined"!=typeof HTTP&&HTTP.Request){i.uri=t;var l=new HTTP.Request(i);l&&(u=l.transport)}else if("undefined"!=typeof Ajax&&Ajax.Request){var c=new Ajax.Request(t,i);c&&(u=c.transport)}return n?u:u&&u.responseXML&&u.responseXML.documentElement?this.parseDOM(u.responseXML.documentElement):void 0}},{key:"parseDOM",value:function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;this.force_array.length>e;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!==t.nodeType){var i={};i[t.nodeName]=n,n=i}return n}}},{key:"parseElement",value:function(t){if(7!==t.nodeType){if(3===t.nodeType||4===t.nodeType){if(null===t.nodeValue.match(/[^\x00-\x20]/))return;return t.nodeValue}var e=void 0,n={};if(t.attributes&&t.attributes.length){e={};for(var i=0;t.attributes.length>i;i++){var r=t.attributes[i].nodeName;if("string"==typeof r){var o=t.attributes[i].nodeValue;o&&(void 0===n[r=this.attr_prefix+r]&&(n[r]=0),n[r]++,this.addNode(e,r,n[r],o))}}}if(t.childNodes&&t.childNodes.length){var a=!0;e&&(a=!1);for(var s=0;t.childNodes.length>s&&a;s++){var u=t.childNodes[s].nodeType;3!==u&&4!==u&&(a=!1)}if(a){e||(e="");for(var l=0;t.childNodes.length>l;l++)e+=t.childNodes[l].nodeValue}else{e||(e={});for(var c=0;t.childNodes.length>c;c++){var f=t.childNodes[c].nodeName;if("string"==typeof f){var h=this.parseElement(t.childNodes[c]);h&&(void 0===n[f]&&(n[f]=0),n[f]++,this.addNode(e,f,n[f],h))}}}}return e}}},{key:"addNode",value:function(t,e,n,i){this.__force_array[e]?(1===n&&(t[e]=[]),t[e][t[e].length]=i):1===n?t[e]=i:2===n?t[e]=[t[e],i]:t[e][t[e].length]=i}},{key:"writeXML",value:function(t){return this.xmlDecl+this.hash_to_xml(null,t)}},{key:"hash_to_xml",value:function(t,e){var n=[],i=[];for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];r.charAt(0)!==this.attr_prefix?n[n.length]=void 0!==o&&o?"object"===(void 0===o?"undefined":u(o))&&o.constructor===Array?this.array_to_xml(r,o):"object"===(void 0===o?"undefined":u(o))?this.hash_to_xml(r,o):this.scalar_to_xml(r,o):"<"+r+" />":i[i.length]=" "+r.substring(1)+'="'+this.xml_escape(o)+'"'}var a=i.join(""),s=n.join("");return void 0!==t&&t&&(s=n.length>0?s.match(/\n/)?"<"+t+a+">\n"+s+"</"+t+">\n":"<"+t+a+">"+s+"</"+t+">\n":"<"+t+a+" />\n"),s}},{key:"array_to_xml",value:function(t,e){for(var n=[],i=0;e.length>i;i++){var r=e[i];n[n.length]=void 0!==r&&r?"object"===(void 0===r?"undefined":u(r))&&r.constructor===Array?this.array_to_xml(t,r):"object"===(void 0===r?"undefined":u(r))?this.hash_to_xml(t,r):this.scalar_to_xml(t,r):"<"+t+" />"}return n.join("")}},{key:"scalar_to_xml",value:function(t,e){return"#text"===t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"}},{key:"xml_escape",value:function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}]),t}();e.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,e,n){e.exports=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.x=e,this.y=n}return l(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"normalize",value:function(t){var e=this.length;0!==e&&(this.x*=t/e,this.y*=t/e)}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+"}"}},{key:"setTo",value:function(t,e){this.x=t,this.y=e}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}],[{key:"vec2ToPoint",value:function(e){return new t(e.get_x(),e.get_y())}},{key:"interpolate",value:function(e,n,i){return new t(e.x+(n.x-e.x)*i,e.y+(n.y-e.y)*i)}},{key:"distance",value:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}}]),t}()},{}],13:[function(t,e,n){e.exports=function(){function t(e){i(this,t),this.__queuePromiseArr=e.slice(),this.resultArr=[]}return l(t,[{key:"run",value:function(){var t=this;return new Promise(function(e,n){t.resolve=e,t.reject=n,t.__queueNext()})}},{key:"__queueNext",value:function(){var t=this;this.__queuePromiseArr.length?this.__queuePromiseArr.shift().then(function(e){t.resultArr.push(e),t.__queueNext()})["catch"](this.reject):this.resolve(this.resultArr)}}]),t}()},{}],14:[function(t,e,n){var r=t("./Point");e.exports=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.x=e,this.y=n,this.width=o,this.height=a,this.topLeftPoint=new r,this.sizePoint=new r}return l(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},{key:"union",value:function(e){if(0===e.width||0===e.height)return this;var n=Math.min(this.x,e.x),i=Math.min(this.y,e.y);return new t(n,i,Math.max(this.x+this.width,e.x+e.width)-n,Math.max(this.y+this.height,e.y+e.height)-i)}},{key:"inflate",value:function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e}},{key:"contains",value:function(t,e){return!(this.x>t||t>this.right||this.y>e||e>this.bottom)}},{key:"containsPoint",value:function(t){return this.contains(t.x,t.y)}},{key:"offset",value:function(t,e){this.x+=t,this.y+=e}},{key:"intersects",value:function(t,e){return e?!!(this.right>t.left&&t.right>this.left&&this.bottom>t.top&&t.bottom>this.top):!(t.left>this.right||this.left>t.right||t.top>this.bottom||this.top>t.bottom)}},{key:"intersection",value:function(e,n){var i=new t;return this.intersects(e,n)&&(e.left>this.right?(i.x=this.left,i.width=e.right-i.x):(i.x=e.left,i.width=this.right-i.x),i.y=this.top>e.top?this.top:e.top,i.height=this.bottom>e.bottom?e.bottom:this.bottom,i.height=i.height-i.y),i}},{key:"isEmpty",value:function(){return 0>=this.width||0>=this.height}},{key:"setEmpty",value:function(){this.x=0,this.y=0,this.width=0,this.height=0}},{key:"setTo",value:function(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i}},{key:"left",get:function(){return this.x},set:function(t){this.x=t}},{key:"top",get:function(){return this.y},set:function(t){this.y=t}},{key:"right",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"bottom",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"topLeft",get:function(){return this.topLeftPoint.x=this.x,this.topLeftPoint.y=this.y,this.topLeftPoint},set:function(t){this.x=t.x,this.y=t.y}},{key:"size",get:function(){return this.sizePoint.x=this.width,this.sizePoint.y=this.height,this.sizePoint},set:function(t){this.width=t.x,this.height=t.y}}]),t}()},{"./Point":12}],15:[function(t,e,n){e.exports=function(){function t(){i(this,t)}return l(t,[{key:"load",value:function(t){var e=this;return new Promise(function(n,i){e._loadNextSVG(n,t,[])})}},{key:"_loadNextSVG",value:function(t,e,n){var i=this;if(0!==e.length){var r=e.shift();Snap.load(r.path,function(o){r.g=o.select("g"),n.push(r),i._loadNextSVG(t,e,n)},this)}else t(n)}}]),t}()},{}],16:[function(t,e,n){var r=function(){function t(){i(this,t)}return l(t,null,[{key:"stringsAreEqual",value:function(t,e,n){return n?t===e:t.toUpperCase()===e.toUpperCase()}},{key:"trim",value:function(e){return t.ltrim(t.rtrim(e))}},{key:"ltrim",value:function(t){for(var e=t.length,n=0;e>n;n++)if(t.charCodeAt(n)>32)return t.substring(n);return""}},{key:"rtrim",value:function(t){for(var e=t.length;e>0;e--)if(t.charCodeAt(e-1)>32)return t.substring(0,e);return""}},{key:"beginsWith",value:function(t,e){return e===t.substring(0,e.length)}},{key:"endsWith",value:function(t,e){return e===t.substring(t.length-e.length)}},{key:"remove",value:function(e,n){return t.replace(e,n,"")}},{key:"replace",value:function(t,e,n){return t.split(e).join(n)}},{key:"stringHasValue",value:function(t){return null!==t&&t.length>0}},{key:"contains",value:function(t,e){return""===t&&""===e||!!t&&t.indexOf(e)>-1}},{key:"addString",value:function(t,e,n){void 0===n&&(n="0");for(var i=t;e>i.length;)i+=n;return i}}]),t}();e.exports=r},{}],17:[function(t,e,n){var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this._x=e,this._y=n}return l(t,[{key:"clone",value:function(){return new t(this._x,this._y)}},{key:"scale",value:function(t){return this._x*=t,this._y*=t,this}},{key:"add",value:function(t){return this._x+=t.x,this._y+=t.y,this}},{key:"substract",value:function(t){return this._x-=t.x,this._y-=t.y,this}},{key:"dotProduct",value:function(t){return this._x*t.x+this._y*t.y}},{key:"dotProdWithNormalizing",value:function(t){var e=t.clone().normalize();return this._x*e.x+this._y*e.y}},{key:"isPerpendicular",value:function(e){return Math.abs(this.dotProduct(e))<t.EPSILON_SQUARED}},{key:"crossProduct",value:function(t){return this._x*t.y-this._y*t.x}},{key:"isParallel",value:function(e){return Math.abs(this.crossProduct(e))<t.EPSILON_SQUARED}},{key:"isZero",value:function(){return Math.abs(this._x)<t.EPSILON&&Math.abs(this._y)<t.EPSILON}},{key:"zero",value:function(){this._x=this._y=0}},{key:"normalize",value:function(){return this.isZero()?(this._x=1,this):this.scale(1/this.length)}},{key:"isNormalized",value:function(){return Math.abs(this.lengthSquared-1)<t.EPSILON_SQUARED}},{key:"equals",value:function(e){return Math.abs(this._x-e.x)<t.EPSILON&&Math.abs(this._y-e.y)<t.EPSILON}},{key:"isValid",value:function(){return!isNaN(this._x)&&!isNaN(this._y)&&isFinite(this._x)&&isFinite(this._y)}},{key:"rotate",value:function(t){var e=Math.sin(t),n=Math.cos(t),i=this._x;return this._x=i*n-this._y*e,this._y=i*e+this._y*n,this}},{key:"rotateWithTrig",value:function(t,e){var n=this._x;return this._x=n*e-this._y*t,this._y=n*t+this._y*e,this}},{key:"negate",value:function(){return this._x*=-1,this._y*=-1,this}},{key:"projectTo",value:function(e){var n=this.dotProduct(e),i=e.lengthSquared;return new t(n*e.x/i,n*e.y/i)}},{key:"projectToNormalized",value:function(e){var n=this.dotProduct(e);return new t(n*e.x,n*e.y)}},{key:"perpProduct",value:function(t){return this.lx*t.x+this.ly*t.y}},{key:"ratio",value:function(e,n,i){return this.isParallel(i)?NaN:t.EPSILON_SQUARED>this.lengthSquared||t.EPSILON_SQUARED>i.lengthSquared?NaN:n.clone().substract(e).perpProduct(i)/this.perpProduct(i)}},{key:"findIntersection",value:function(e,n,i){var r=this.ratio(e,n,i);return isNaN(r)?new t(NaN,NaN):new t(e.x+r*this.x,e.y+r*this.y)}},{key:"findIntersectionInBounds",value:function(e,n,i){e.clone().substract(n);var r=this.ratio(e,n,i),o=i.ratio(n,e,this);return isNaN(r)||isNaN(o)||0>=r||r>1||0>=o||o>1?new t(NaN,NaN):new t(e.x+r*this.x,e.y+r*this.y)}},{key:"truncate",value:function(t){return this.length=Math.min(t,this.length),this}},{key:"angleBetween",value:function(t){var e=this.clone(),n=t.clone();return this.isNormalized()||e.normalize(),t.isNormalized()||n.normalize(),Math.acos(e.dotProduct(n))}},{key:"setXY",value:function(t,e){this._x=t,this._y=e}},{key:"sign",value:function(t,e){return(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x)}},{key:"dist",value:function(t){return Math.sqrt(this.distSquared(t))}},{key:"dist_XY",value:function(t,e){var n=t-this._x,i=e-this._y;return Math.sqrt(n*n+i*i)}},{key:"distSquared",value:function(t){var e=t.x-this._x,n=t.y-this._y;return e*e+n*n}},{key:"distSquared_XY",value:function(t,e){var n=t-this._x,i=e-this._y;return n*n+i*i}},{key:"bounce",value:function(t,e){void 0===e&&(e=1);var n=(1+e)*this.dotProduct(t);return this._x-=n*t.x,this._y-=n*t.y,this}},{key:"bounceWithFriction",value:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0),this.clone();var i=this.projectToNormalized(t.rightNormal),r=this.projectToNormalized(t),o=-r.x,a=-r.y,s=i.x,u=i.y;return this.x=o*e+s*n,this.y=a*e+u*n,this}},{key:"toString",value:function(){return"["+this._x+", "+this._y+"]"}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"length",get:function(){return Math.sqrt(this._x*this._x+this._y*this._y)},set:function(t){var e=this.angle;this._x=t*Math.cos(e),this._y=t*Math.sin(e)}},{key:"lengthSquared",get:function(){return this._x*this._x+this._y*this._y}},{key:"angle",get:function(){return this.isZero()?0:Math.atan2(this._y,this._x)},set:function(t){var e=this.length;this._x=e*Math.cos(t),this._y=e*Math.sin(t)}},{key:"dx",get:function(){return this.isZero()?0:this._x/this.length}},{key:"dy",get:function(){return this.isZero()?0:this._y/this.length}},{key:"rightNormal",get:function(){return new t(-this._y,this._x)}},{key:"rx",get:function(){return-this._y}},{key:"ry",get:function(){return this._x}},{key:"leftNormal",get:function(){return new t(this._y,-this._x)}},{key:"lx",get:function(){return this._y}},{key:"ly",get:function(){return-this._x}}]),t}();r.EPSILON=1e-7,r.EPSILON_SQUARED=r.EPSILON*r.EPSILON,e.exports=r},{}],18:[function(t,e,n){(function(n){var i=n||window;i.trace=void 0,i.each=function(t,e,n){var i=void 0,r=t.length;for(i=0;r>i&&!1!==(n?e.call(n,i,t[i]):e.call(t[i],i,t[i]));i++);},Date.prototype.pattern=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},n={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+n[this.getDay()+""]));for(var i in e)RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t};var r={Point:t("./Point"),Rectangle:t("./Rectangle"),SVGLoad:t("./SVGLoad"),ArrayUtil:t("./ArrayUtil"),NumberUtilities:t("./NumberUtilities"),Matrix:t("./Matrix"),ObjTree:t("./ObjTree"),StringUtil:t("./StringUtil"),Vector2DMath:t("./Vector2DMath"),HashMap:t("./HashMap"),MatrixMath:t("./MatrixMath"),GraphicsTexture:t("./GraphicsTexture"),GraphicsUtil:t("./GraphicsUtil"),M:t("./M"),PromiseQueue:t("./PromiseQueue"),DomUtil:t("./DomUtil"),FullscreenTool:t("./FullscreenTool")};e.exports=r,(void 0===a?function(){}:a).exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ArrayUtil":1,"./DomUtil":2,"./FullscreenTool":3,"./GraphicsTexture":4,"./GraphicsUtil":5,"./HashMap":6,"./M":7,"./Matrix":8,"./MatrixMath":9,"./NumberUtilities":10,"./ObjTree":11,"./Point":12,"./PromiseQueue":13,"./Rectangle":14,"./SVGLoad":15,"./StringUtil":16,"./Vector2DMath":17}]},{},[18])}).call(e,n(36)(t))},function(t,e,n){"use strict";var i=n(5),r=n(33),o=n(23),a=n(25),s=n(22),u=function l(t,e,n){var u,c,f,h,d=t&l.F,p=t&l.G,v=t&l.S,y=t&l.P,g=t&l.B,_=p?i:v?i[e]||(i[e]={}):(i[e]||{}).prototype,m=p?r:r[e]||(r[e]={}),b=m.prototype||(m.prototype={});p&&(n=e);for(u in n)c=!d&&_&&_[u]!==undefined,f=(c?_:n)[u],h=g&&c?s(f,i):y&&"function"==typeof f?s(Function.call,f):f,_&&a(_,u,f,t&l.U),m[u]!=f&&o(m,u,h),y&&b[u]!=f&&(b[u]=f)};i.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e["default"]=function(){function t(){i(this,t)}return r(t,[{key:"execute",value:function(){throw"必须重写该方法"}}]),t}()},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===(void 0===t?"undefined":i(t))?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var i=n(80)("wks"),r=n(43),o=n(5).Symbol,a="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=i},function(t,e,n){"use strict";var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,n,i){"use strict";(function(t){var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){function a(t,e){return t.set(e[0],e[1]),t}function s(t,e){return t.add(e),t}function u(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function l(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function c(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function f(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function h(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function d(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function p(t,e){return!!(null==t?0:t.length)&&P(t,e,0)>-1}function v(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function y(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function g(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function _(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function m(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function b(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function w(t){return t.split("")}function E(t){return t.match(Fe)||[]}function x(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function O(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function P(t,e,n){return e===e?Q(t,e,n):O(t,S,n)}function k(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function S(t){return t!==t}function C(t,e){var n=null==t?0:t.length;return n?L(t,e)/n:Nt}function M(t){return function(e){return null==e?ot:e[t]}}function T(t){return function(e){return null==t?ot:t[e]}}function A(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function D(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function L(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==ot&&(n=n===ot?o:n+o)}return n}function I(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function j(t,e){return y(e,function(e){return[e,t[e]]})}function N(t){return function(e){return t(e)}}function R(t,e){return y(e,function(e){return t[e]})}function B(t,e){return t.has(e)}function U(t,e){for(var n=-1,i=t.length;++n<i&&P(e,t[n],0)>-1;);return n}function H(t,e){for(var n=t.length;n--&&P(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function G(t){return"\\"+_n[t]}function V(t,e){return null==t?ot:t[e]}function W(t){return ln.test(t)}function q(t){return cn.test(t)}function X(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function z(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function Y(t,e){return function(n){return t(e(n))}}function $(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==ft||(t[n]=ft,o[r++]=n)}return o}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Z(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Q(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function J(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}function tt(t){return W(t)?nt(t):jn(t)}function et(t){return W(t)?it(t):w(t)}function nt(t){for(var e=sn.lastIndex=0;sn.test(t);)++e;return e}function it(t){return t.match(sn)||[]}function rt(t){return t.match(un)||[]}var ot,at=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ut="Expected a function",lt="__lodash_hash_undefined__",ct=500,ft="__lodash_placeholder__",ht=1,dt=2,pt=4,vt=1,yt=2,gt=1,_t=2,mt=4,bt=8,wt=16,Et=32,xt=64,Ot=128,Pt=256,kt=512,St=30,Ct="...",Mt=800,Tt=16,At=1,Dt=2,Lt=1/0,It=9007199254740991,jt=1.7976931348623157e308,Nt=NaN,Rt=4294967295,Bt=Rt-1,Ut=Rt>>>1,Ht=[["ary",Ot],["bind",gt],["bindKey",_t],["curry",bt],["curryRight",wt],["flip",kt],["partial",Et],["partialRight",xt],["rearg",Pt]],Ft="[object Arguments]",Gt="[object Array]",Vt="[object AsyncFunction]",Wt="[object Boolean]",qt="[object Date]",Xt="[object DOMException]",zt="[object Error]",Yt="[object Function]",$t="[object GeneratorFunction]",Kt="[object Map]",Zt="[object Number]",Qt="[object Null]",Jt="[object Object]",te="[object Proxy]",ee="[object RegExp]",ne="[object Set]",ie="[object String]",re="[object Symbol]",oe="[object Undefined]",ae="[object WeakMap]",se="[object WeakSet]",ue="[object ArrayBuffer]",le="[object DataView]",ce="[object Float32Array]",fe="[object Float64Array]",he="[object Int8Array]",de="[object Int16Array]",pe="[object Int32Array]",ve="[object Uint8Array]",ye="[object Uint8ClampedArray]",ge="[object Uint16Array]",_e="[object Uint32Array]",me=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ee=/&(?:amp|lt|gt|quot|#39);/g,xe=/[&<>"']/g,Oe=RegExp(Ee.source),Pe=RegExp(xe.source),ke=/<%-([\s\S]+?)%>/g,Se=/<%([\s\S]+?)%>/g,Ce=/<%=([\s\S]+?)%>/g,Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Ae=/^\./,De=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Le=/[\\^$.*+?()[\]{}|]/g,Ie=RegExp(Le.source),je=/^\s+|\s+$/g,Ne=/^\s+/,Re=/\s+$/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,He=/,? & /,Fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ge=/\\(\\)?/g,Ve=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,We=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,Xe=/^0b[01]+$/i,ze=/^\[object .+?Constructor\]$/,Ye=/^0o[0-7]+$/i,$e=/^(?:0|[1-9]\d*)$/,Ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Je="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",tn="["+Je+"]",en="\\ud83c[\\udffb-\\udfff]",nn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",rn="[\\ufe0e\\ufe0f]?"+nn+"(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",on=RegExp("['’]","g"),an=RegExp(tn,"g"),sn=RegExp(en+"(?="+en+")|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])"+rn,"g"),un=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+|(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*","g"),ln=RegExp("[\\u200d\\ud800-\\udfff"+Je+"\\ufe0e\\ufe0f]"),cn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],hn=-1,dn={};dn[ce]=dn[fe]=dn[he]=dn[de]=dn[pe]=dn[ve]=dn[ye]=dn[ge]=dn[_e]=!0,dn[Ft]=dn[Gt]=dn[ue]=dn[Wt]=dn[le]=dn[qt]=dn[zt]=dn[Yt]=dn[Kt]=dn[Zt]=dn[Jt]=dn[ee]=dn[ne]=dn[ie]=dn[ae]=!1;var pn={};pn[Ft]=pn[Gt]=pn[ue]=pn[le]=pn[Wt]=pn[qt]=pn[ce]=pn[fe]=pn[he]=pn[de]=pn[pe]=pn[Kt]=pn[Zt]=pn[Jt]=pn[ee]=pn[ne]=pn[ie]=pn[re]=pn[ve]=pn[ye]=pn[ge]=pn[_e]=!0,pn[zt]=pn[Yt]=pn[ae]=!1;var vn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},yn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_n={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mn=parseFloat,bn=parseInt,wn="object"==("undefined"==typeof global?"undefined":o(global))&&global&&global.Object===Object&&global,En="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,xn=wn||En||Function("return this")(),On="object"==o(n)&&n&&!n.nodeType&&n,Pn=On&&"object"==o(t)&&t&&!t.nodeType&&t,kn=Pn&&Pn.exports===On,Sn=kn&&wn.process,Cn=function(){try{return Sn&&Sn.binding&&Sn.binding("util")}catch(e){}}(),Mn=Cn&&Cn.isArrayBuffer,Tn=Cn&&Cn.isDate,An=Cn&&Cn.isMap,Dn=Cn&&Cn.isRegExp,Ln=Cn&&Cn.isSet,In=Cn&&Cn.isTypedArray,jn=M("length"),Nn=T(vn),Rn=T(yn),Bn=T(gn),Un=function Hn(t){function n(t){if(su(t)&&!mh(t)&&!(t instanceof w)){if(t instanceof r)return t;if(_c.call(t,"__wrapped__"))return ra(t)}return new r(t)}function i(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=ot}function w(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Rt,this.__views__=[]}function T(){var t=new w(this.__wrapped__);return t.__actions__=Ur(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ur(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ur(this.__views__),t}function Q(){if(this.__filtered__){var t=new w(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function nt(){var t=this.__wrapped__.value(),e=this.__dir__,n=mh(t),i=0>e,r=n?t.length:0,o=Mo(0,r,this.__views__),a=o.start,s=o.end,u=s-a,l=i?s:a-1,c=this.__iteratees__,f=c.length,h=0,d=Yc(u,this.__takeCount__);if(!n||!i&&r==u&&d==u)return br(t,this.__actions__);var p=[];t:for(;u--&&d>h;){l+=e;for(var v=-1,y=t[l];++v<f;){var g=c[v],_=g.iteratee,m=g.type,b=_(y);if(m==Dt)y=b;else if(!b){if(m==At)continue t;break t}}p[h++]=y}return p}function it(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Fe(){this.__data__=of?of(null):{},this.size=0}function Je(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function tn(t){var e=this.__data__;if(of){var n=e[t];return n===lt?ot:n}return _c.call(e,t)?e[t]:ot}function en(t){var e=this.__data__;return of?e[t]!==ot:_c.call(e,t)}function nn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=of&&e===ot?lt:e,this}function rn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function sn(){this.__data__=[],this.size=0}function un(t){var e=this.__data__,n=Qn(e,t);return n>=0&&(n==e.length-1?e.pop():Dc.call(e,n,1),--this.size,!0)}function ln(t){var e=this.__data__,n=Qn(e,t);return 0>n?ot:e[n][1]}function cn(t){return Qn(this.__data__,t)>-1}function vn(t,e){var n=this.__data__,i=Qn(n,t);return 0>i?(++this.size,n.push([t,e])):n[i][1]=e,this}function yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function gn(){this.size=0,this.__data__={hash:new it,map:new(tf||rn),string:new it}}function _n(t){var e=Po(this,t)["delete"](t);return this.size-=e?1:0,e}function wn(t){return Po(this,t).get(t)}function En(t){return Po(this,t).has(t)}function On(t,e){var n=Po(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function Pn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new yn;++e<n;)this.add(t[e])}function Sn(t){return this.__data__.set(t,lt),this}function Cn(t){return this.__data__.has(t)}function jn(t){this.size=(this.__data__=new rn(t)).size}function Fn(){this.__data__=new rn,this.size=0}function Gn(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function Vn(t){return this.__data__.get(t)}function Wn(t){return this.__data__.has(t)}function qn(t,e){var n=this.__data__;if(n instanceof rn){var i=n.__data__;if(!tf||at-1>i.length)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new yn(i)}return n.set(t,e),this.size=n.size,this}function Xn(t,e){var n=mh(t),i=!n&&_h(t),r=!n&&!i&&wh(t),o=!n&&!i&&!r&&kh(t),a=n||i||r||o,s=a?I(t.length,fc):[],u=s.length;for(var l in t)!e&&!_c.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ro(l,u))||s.push(l);return s}function zn(t){var e=t.length;return e?t[er(0,e-1)]:ot}function Yn(t,e){return ta(Ur(t),ri(e,0,t.length))}function $n(t){return ta(Ur(t))}function Kn(t,e,n){(n===ot||zs(t[e],n))&&(n!==ot||e in t)||ni(t,e,n)}function Zn(t,e,n){var i=t[e];_c.call(t,e)&&zs(i,n)&&(n!==ot||e in t)||ni(t,e,n)}function Qn(t,e){for(var n=t.length;n--;)if(zs(t[n][0],e))return n;return-1}function Jn(t,e,n,i){return gf(t,function(t,r,o){e(i,t,n(t),o)}),i}function ti(t,e){return t&&Hr(e,Gu(e),t)}function ei(t,e){return t&&Hr(e,Vu(e),t)}function ni(t,e,n){"__proto__"==e&&Nc?Nc(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ii(t,e){for(var n=-1,i=e.length,r=rc(i),o=null==t;++n<i;)r[n]=o?ot:Uu(t,e[n]);return r}function ri(t,e,n){return t===t&&(n!==ot&&(t=t>n?n:t),e!==ot&&(t=e>t?e:t)),t}function oi(t,e,n,i,r,o){var a,s=e&ht,u=e&dt,l=e&pt;if(n&&(a=r?n(t,i,r,o):n(t)),a!==ot)return a;if(!au(t))return t;var f=mh(t);if(f){if(a=Do(t),!s)return Ur(t,a)}else{var h=Mf(t),d=h==Yt||h==$t;if(wh(t))return Sr(t,s);if(h==Jt||h==Ft||d&&!r){if(a=u||d?{}:Lo(t),!s)return u?Gr(t,ei(a,t)):Fr(t,ti(a,t))}else{if(!pn[h])return r?t:{};a=Io(t,h,oi,s)}}o||(o=new jn);var p=o.get(t);if(p)return p;o.set(t,a);var v=l?u?wo:bo:u?Vu:Gu,y=f?ot:v(t);return c(y||t,function(i,r){y&&(r=i,i=t[r]),Zn(a,r,oi(i,e,n,r,t,o))}),a}function ai(t){var e=Gu(t);return function(n){return si(n,t,e)}}function si(t,e,n){var i=n.length;if(null==t)return!i;for(t=lc(t);i--;){var r=n[i],o=e[r],a=t[r];if(a===ot&&!(r in t)||!o(a))return!1}return!0}function ui(t,e,n){if("function"!=typeof t)throw new hc(ut);return Df(function(){t.apply(ot,n)},e)}function li(t,e,n,i){var r=-1,o=p,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=y(e,N(n))),i?(o=v,a=!1):at>e.length||(o=B,a=!1,e=new Pn(e));t:for(;++r<s;){var c=t[r],f=null==n?c:n(c);if(c=i||0!==c?c:0,a&&f===f){for(var h=l;h--;)if(e[h]===f)continue t;u.push(c)}else o(e,f,i)||u.push(c)}return u}function ci(t,e){var n=!0;return gf(t,function(t,i,r){return n=!!e(t,i,r)}),n}function fi(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],a=e(o);if(null!=a&&(s===ot?a===a&&!_u(a):n(a,s)))var s=a,u=o}return u}function hi(t,e,n,i){var r=t.length;for(n=Ou(n),0>n&&(n=-n>r?0:r+n),i=i===ot||i>r?r:Ou(i),0>i&&(i+=r),i=n>i?0:Pu(i);i>n;)t[n++]=e;return t}function di(t,e){var n=[];return gf(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function pi(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=No),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?pi(s,e-1,n,i,r):g(r,s):i||(r[r.length]=s)}return r}function vi(t,e){return t&&mf(t,e,Gu)}function yi(t,e){return t&&bf(t,e,Gu)}function gi(t,e){return d(e,function(e){return iu(t[e])})}function _i(t,e){e=Pr(e,t);for(var n=0,i=e.length;null!=t&&i>n;)t=t[ea(e[n++])];return n&&n==i?t:ot}function mi(t,e,n){var i=e(t);return mh(t)?i:g(i,n(t))}function bi(t){return null==t?t===ot?oe:Qt:jc&&jc in lc(t)?Co(t):Yo(t)}function wi(t,e){return t>e}function Ei(t,e){return null!=t&&_c.call(t,e)}function xi(t,e){return null!=t&&e in lc(t)}function Oi(t,e,n){return t>=Yc(e,n)&&t<zc(e,n)}function Pi(t,e,n){for(var i=n?v:p,r=t[0].length,o=t.length,a=o,s=rc(o),u=Infinity,l=[];a--;){var c=t[a];a&&e&&(c=y(c,N(e))),u=Yc(c.length,u),s[a]=n||!e&&(120>r||120>c.length)?ot:new Pn(a&&c)}c=t[0];var f=-1,h=s[0];t:for(;++f<r&&u>l.length;){var d=c[f],g=e?e(d):d;if(d=n||0!==d?d:0,!(h?B(h,g):i(l,g,n))){for(a=o;--a;){var _=s[a];if(!(_?B(_,g):i(t[a],g,n)))continue t}h&&h.push(g),l.push(d)}}return l}function ki(t,e,n,i){return vi(t,function(t,r,o){e(i,n(t),r,o)}),i}function Si(t,e,n){e=Pr(e,t),t=Ko(t,e);var i=null==t?t:t[ea(xa(e))];return null==i?ot:u(i,t,n)}function Ci(t){return su(t)&&bi(t)==Ft}function Mi(t){return su(t)&&bi(t)==ue}function Ti(t){return su(t)&&bi(t)==qt}function Ai(t,e,n,i,r){return t===e||(null==t||null==e||!su(t)&&!su(e)?t!==t&&e!==e:Di(t,e,n,i,Ai,r))}function Di(t,e,n,i,r,o){var a=mh(t),s=mh(e),u=a?Gt:Mf(t),l=s?Gt:Mf(e);u=u==Ft?Jt:u,l=l==Ft?Jt:l;var c=u==Jt,f=l==Jt,h=u==l;if(h&&wh(t)){if(!wh(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new jn),a||kh(t)?yo(t,e,n,i,r,o):go(t,e,u,n,i,r,o);if(!(n&vt)){var d=c&&_c.call(t,"__wrapped__"),p=f&&_c.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,y=p?e.value():e;return o||(o=new jn),r(v,y,n,i,o)}}return!!h&&(o||(o=new jn),_o(t,e,n,i,r,o))}function Li(t){return su(t)&&Mf(t)==Kt}function Ii(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=lc(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){s=n[r];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(l===ot&&!(u in t))return!1}else{var f=new jn;if(i)var h=i(l,c,u,t,e,f);if(!(h===ot?Ai(c,l,vt|yt,i,f):h))return!1}}return!0}function ji(t){return!(!au(t)||Go(t))&&(iu(t)?Oc:ze).test(na(t))}function Ni(t){return su(t)&&bi(t)==ee}function Ri(t){return su(t)&&Mf(t)==ne}function Bi(t){return su(t)&&ou(t.length)&&!!dn[bi(t)]}function Ui(t){return"function"==typeof t?t:null==t?Dl:"object"==(ot===t?"undefined":o(t))?mh(t)?qi(t[0],t[1]):Wi(t):Hl(t)}function Hi(t){if(!Vo(t))return Xc(t);var e=[];for(var n in lc(t))_c.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fi(t){if(!au(t))return zo(t);var e=Vo(t),n=[];for(var i in t)("constructor"!=i||!e&&_c.call(t,i))&&n.push(i);return n}function Gi(t,e){return e>t}function Vi(t,e){var n=-1,i=Ys(t)?rc(t.length):[];return gf(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function Wi(t){var e=ko(t);return 1==e.length&&e[0][2]?qo(e[0][0],e[0][1]):function(n){return n===t||Ii(n,t,e)}}function qi(t,e){return Uo(t)&&Wo(e)?qo(ea(t),e):function(n){var i=Uu(n,t);return i===ot&&i===e?Fu(n,t):Ai(e,i,vt|yt)}}function Xi(t,e,n,i,r){t!==e&&mf(e,function(o,a){if(au(o))r||(r=new jn),zi(t,e,a,n,Xi,i,r);else{var s=i?i(t[a],o,a+"",t,e,r):ot;s===ot&&(s=o),Kn(t,a,s)}},Vu)}function zi(t,e,n,i,r,o,a){var s=t[n],u=e[n],l=a.get(u);if(l)return void Kn(t,n,l);var c=o?o(s,u,n+"",t,e,a):ot,f=c===ot;if(f){var h=mh(u),d=!h&&wh(u),p=!h&&!d&&kh(u);c=u,h||d||p?mh(s)?c=s:$s(s)?c=Ur(s):d?(f=!1,c=Sr(u,!0)):p?(f=!1,c=Ir(u,!0)):c=[]:vu(u)||_h(u)?(c=s,_h(s)?c=Su(s):(!au(s)||i&&iu(s))&&(c=Lo(u))):f=!1}f&&(a.set(u,c),r(c,u,i,o,a),a["delete"](u)),Kn(t,n,c)}function Yi(t,e){var n=t.length;if(n)return e+=0>e?n:0,Ro(e,n)?t[e]:ot}function $i(t,e,n){var i=-1;return e=y(e.length?e:[Dl],N(Oo())),D(Vi(t,function(t,n,r){return{criteria:y(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return Nr(t,e,n)})}function Ki(t,e){return Zi(t,e,function(e,n){return Fu(t,n)})}function Zi(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=_i(t,a);n(s,a)&&sr(o,Pr(a,t),s)}return o}function Qi(t){return function(e){return _i(e,t)}}function Ji(t,e,n,i){var r=i?k:P,o=-1,a=e.length,s=t;for(t===e&&(e=Ur(e)),n&&(s=y(t,N(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=r(s,c,u,i))>-1;)s!==t&&Dc.call(s,u,1),Dc.call(t,u,1);return t}function tr(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;Ro(r)?Dc.call(t,r,1):gr(t,r)}}return t}function er(t,e){return t+Fc(Zc()*(e-t+1))}function nr(t,e,n,i){for(var r=-1,o=zc(Hc((e-t)/(n||1)),0),a=rc(o);o--;)a[i?o:++r]=t,t+=n;return a}function ir(t,e){var n="";if(!t||1>e||e>It)return n;do{e%2&&(n+=t),(e=Fc(e/2))&&(t+=t)}while(e);return n}function rr(t,e){return Lf($o(t,e,Dl),t+"")}function or(t){return zn(el(t))}function ar(t,e){var n=el(t);return ta(n,ri(e,0,n.length))}function sr(t,e,n,i){if(!au(t))return t;e=Pr(e,t);for(var r=-1,o=e.length,a=o-1,s=t;null!=s&&++r<o;){var u=ea(e[r]),l=n;if(r!=a){var c=s[u];l=i?i(c,u,s):ot,l===ot&&(l=au(c)?c:Ro(e[r+1])?[]:{})}Zn(s,u,l),s=s[u]}return t}function ur(t){return ta(el(t))}function lr(t,e,n){var i=-1,r=t.length;0>e&&(e=-e>r?0:r+e),n=n>r?r:n,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=rc(r);++i<r;)o[i]=t[i+e];return o}function cr(t,e){var n;return gf(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function fr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&Ut>=r){for(;r>i;){var o=i+r>>>1,a=t[o];null===a||_u(a)||(n?a>e:a>=e)?r=o:i=o+1}return r}return hr(t,e,Dl,n)}function hr(t,e,n,i){e=n(e);for(var r=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=_u(e),l=e===ot;o>r;){var c=Fc((r+o)/2),f=n(t[c]),h=f!==ot,d=null===f,p=f===f,v=_u(f);if(a)var y=i||p;else y=l?p&&(i||h):s?p&&h&&(i||!d):u?p&&h&&!d&&(i||!v):!d&&!v&&(i?e>=f:e>f);y?r=c+1:o=c}return Yc(o,Bt)}function dr(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!zs(s,u)){var u=s;o[r++]=0===a?0:a}}return o}function pr(t){return"number"==typeof t?t:_u(t)?Nt:+t}function vr(t){if("string"==typeof t)return t;if(mh(t))return y(t,vr)+"";if(_u(t))return vf?vf.call(t):"";var e=t+"";return"0"==e&&1/t==-Lt?"-0":e}function yr(t,e,n){var i=-1,r=p,o=t.length,a=!0,s=[],u=s;if(n)a=!1,r=v;else if(o<at)u=e?[]:s;else{var l=e?null:Pf(t);if(l)return K(l);a=!1,r=B,u=new Pn}t:for(;++i<o;){var c=t[i],f=e?e(c):c;if(c=n||0!==c?c:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(c)}else r(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function gr(t,e){return e=Pr(e,t),null==(t=Ko(t,e))||delete t[ea(xa(e))]}function _r(t,e,n,i){return sr(t,e,n(_i(t,e)),i)}function mr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?lr(t,i?0:o,i?o+1:r):lr(t,i?o+1:0,i?r:o)}function br(t,e){var n=t;return n instanceof w&&(n=n.value()),_(e,function(t,e){return e.func.apply(e.thisArg,g([t],e.args))},n)}function wr(t,e,n){var i=t.length;if(2>i)return i?yr(t[0]):[];for(var r=-1,o=rc(i);++r<i;)for(var a=t[r],s=-1;++s<i;)s!=r&&(o[r]=li(o[r]||a,t[s],e,n));return yr(pi(o,1),e,n)}function Er(t,e,n){for(var i=-1,r=t.length,o=e.length,a={};++i<r;){n(a,t[i],o>i?e[i]:ot)}return a}function xr(t){return $s(t)?t:[]}function Or(t){return"function"==typeof t?t:Dl}function Pr(t,e){return mh(t)?t:Uo(t,e)?[t]:If(Mu(t))}function kr(t,e,n){var i=t.length;return n=n===ot?i:n,e||i>n?lr(t,e,n):t}function Sr(t,e){if(e)return t.slice();var n=t.length,i=Cc?Cc(n):new t.constructor(n);return t.copy(i),i}function Cr(t){var e=new t.constructor(t.byteLength);return new Sc(e).set(new Sc(t)),e}function Mr(t,e){return new t.constructor(e?Cr(t.buffer):t.buffer,t.byteOffset,t.byteLength)}function Tr(t,e,n){return _(e?n(z(t),ht):z(t),a,new t.constructor)}function Ar(t){var e=new t.constructor(t.source,We.exec(t));return e.lastIndex=t.lastIndex,e}function Dr(t,e,n){return _(e?n(K(t),ht):K(t),s,new t.constructor)}function Lr(t){return pf?lc(pf.call(t)):{}}function Ir(t,e){return new t.constructor(e?Cr(t.buffer):t.buffer,t.byteOffset,t.length)}function jr(t,e){if(t!==e){var n=t!==ot,i=null===t,r=t===t,o=_u(t),a=e!==ot,s=null===e,u=e===e,l=_u(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||i&&a&&u||!n&&u||!r)return 1;if(!i&&!o&&!l&&e>t||l&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!u)return-1}return 0}function Nr(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var u=jr(r[i],o[i]);if(u){if(i>=s)return u;return u*("desc"==n[i]?-1:1)}}return t.index-e.index}function Rr(t,e,n,i){for(var r=-1,o=t.length,a=n.length,s=-1,u=e.length,l=zc(o-a,0),c=rc(u+l),f=!i;++s<u;)c[s]=e[s];for(;++r<a;)(f||o>r)&&(c[n[r]]=t[r]);for(;l--;)c[s++]=t[r++];return c}function Br(t,e,n,i){for(var r=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=zc(o-s,0),f=rc(c+l),h=!i;++r<c;)f[r]=t[r];for(var d=r;++u<l;)f[d+u]=e[u];for(;++a<s;)(h||o>r)&&(f[d+n[a]]=t[r++]);return f}function Ur(t,e){var n=-1,i=t.length;for(e||(e=rc(i));++n<i;)e[n]=t[n];return e}function Hr(t,e,n,i){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=i?i(n[s],t[s],s,n,t):ot;u===ot&&(u=t[s]),r?ni(n,s,u):Zn(n,s,u)}return n}function Fr(t,e){return Hr(t,Sf(t),e)}function Gr(t,e){return Hr(t,Cf(t),e)}function Vr(t,e){return function(n,i){var r=mh(n)?l:Jn,o=e?e():{};return r(n,t,Oo(i,2),o)}}function Wr(t){return rr(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:ot,a=r>2?n[2]:ot;for(o=t.length>3&&"function"==typeof o?(r--,o):ot,a&&Bo(n[0],n[1],a)&&(o=3>r?ot:o,r=1),e=lc(e);++i<r;){var s=n[i];s&&t(e,s,i,o)}return e})}function qr(t,e){return function(n,i){if(null==n)return n;if(!Ys(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=lc(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function Xr(t){return function(e,n,i){for(var r=-1,o=lc(e),a=i(e),s=a.length;s--;){var u=a[t?s:++r];if(!1===n(o[u],u,o))break}return e}}function zr(t,e,n){function i(){return(this&&this!==xn&&this instanceof i?o:t).apply(r?n:this,arguments)}var r=e&gt,o=Kr(t);return i}function Yr(t){return function(e){e=Mu(e);var n=W(e)?et(e):ot,i=n?n[0]:e.charAt(0),r=n?kr(n,1).join(""):e.slice(1);return i[t]()+r}}function $r(t){return function(e){return _(Sl(sl(e).replace(on,"")),t,"")}}function Kr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=yf(t.prototype),i=t.apply(n,e);return au(i)?i:n}}function Zr(t,e,n){function i(){for(var o=arguments.length,a=rc(o),s=o,l=xo(i);s--;)a[s]=arguments[s];var c=3>o&&a[0]!==l&&a[o-1]!==l?[]:$(a,l);return o-=c.length,n>o?uo(t,e,to,i.placeholder,ot,a,c,ot,ot,n-o):u(this&&this!==xn&&this instanceof i?r:t,this,a)}var r=Kr(t);return i}function Qr(t){return function(e,n,i){var r=lc(e);if(!Ys(e)){var o=Oo(n,3);e=Gu(e),n=function(t){return o(r[t],t,r)}}var a=t(e,n,i);return a>-1?r[o?e[a]:a]:ot}}function Jr(t){return mo(function(e){var n=e.length,i=n,o=r.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new hc(ut);if(o&&!s&&"wrapper"==Eo(a))var s=new r([],!0)}for(i=s?i:n;++i<n;){a=e[i];var u=Eo(a),l="wrapper"==u?kf(a):ot;s=l&&Fo(l[0])&&l[1]==(Ot|bt|Et|Pt)&&!l[4].length&&1==l[9]?s[Eo(l[0])].apply(s,l[3]):1==a.length&&Fo(a)?s[u]():s.thru(a)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&mh(i))return s.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}})}function to(t,e,n,i,r,o,a,s,u,l){function c(){for(var g=arguments.length,_=rc(g),m=g;m--;)_[m]=arguments[m];if(p)var b=xo(c),w=F(_,b);if(i&&(_=Rr(_,i,r,p)),o&&(_=Br(_,o,a,p)),g-=w,p&&l>g){var E=$(_,b);return uo(t,e,to,c.placeholder,n,_,E,s,u,l-g)}var x=h?n:this,O=d?x[t]:t;return g=_.length,s?_=Zo(_,s):v&&g>1&&_.reverse(),f&&g>u&&(_.length=u),this&&this!==xn&&this instanceof c&&(O=y||Kr(O)),O.apply(x,_)}var f=e&Ot,h=e&gt,d=e&_t,p=e&(bt|wt),v=e&kt,y=d?ot:Kr(t);return c}function eo(t,e){return function(n,i){return ki(n,t,e(i),{})}}function no(t,e){return function(n,i){var r;if(n===ot&&i===ot)return e;if(n!==ot&&(r=n),i!==ot){if(r===ot)return i;"string"==typeof n||"string"==typeof i?(n=vr(n),i=vr(i)):(n=pr(n),i=pr(i)),r=t(n,i)}return r}}function io(t){return mo(function(e){return e=y(e,N(Oo())),rr(function(n){var i=this;return t(e,function(t){return u(t,i,n)})})})}function ro(t,e){e=e===ot?" ":vr(e);var n=e.length;if(2>n)return n?ir(e,t):e;var i=ir(e,Hc(t/tt(e)));return W(e)?kr(et(i),0,t).join(""):i.slice(0,t)}function oo(t,e,n,i){function r(){for(var e=-1,s=arguments.length,l=-1,c=i.length,f=rc(c+s),h=this&&this!==xn&&this instanceof r?a:t;++l<c;)f[l]=i[l];for(;s--;)f[l++]=arguments[++e];return u(h,o?n:this,f)}var o=e&gt,a=Kr(t);return r}function ao(t){return function(e,n,i){return i&&"number"!=typeof i&&Bo(e,n,i)&&(n=i=ot),e=xu(e),n===ot?(n=e,e=0):n=xu(n),i=i===ot?n>e?1:-1:xu(i),nr(e,n,i,t)}}function so(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ku(e),n=ku(n)),t(e,n)}}function uo(t,e,n,i,r,o,a,s,u,l){var c=e&bt,f=c?a:ot,h=c?ot:a,d=c?o:ot,p=c?ot:o;e|=c?Et:xt,(e&=~(c?xt:Et))&mt||(e&=~(gt|_t));var v=[t,e,r,d,f,p,h,s,u,l],y=n.apply(ot,v);return Fo(t)&&Af(y,v),y.placeholder=i,Qo(y,t,e)}function lo(t){var e=uc[t];return function(t,n){if(t=ku(t),n=null==n?0:Yc(Ou(n),292)){var i=(Mu(t)+"e").split("e");return i=(Mu(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function co(t){return function(e){var n=Mf(e);return n==Kt?z(e):n==ne?Z(e):j(e,t(e))}}function fo(t,e,n,i,r,o,a,s){var u=e&_t;if(!u&&"function"!=typeof t)throw new hc(ut);var l=i?i.length:0;if(l||(e&=~(Et|xt),i=r=ot),a=a===ot?a:zc(Ou(a),0),s=s===ot?s:Ou(s),l-=r?r.length:0,e&xt){var c=i,f=r;i=r=ot}var h=u?ot:kf(t),d=[t,e,n,i,r,c,f,o,a,s];if(h&&Xo(d,h),t=d[0],e=d[1],n=d[2],i=d[3],r=d[4],s=d[9]=d[9]===ot?u?0:t.length:zc(d[9]-l,0),!s&&e&(bt|wt)&&(e&=~(bt|wt)),e&&e!=gt)p=e==bt||e==wt?Zr(t,e,s):e!=Et&&e!=(gt|Et)||r.length?to.apply(ot,d):oo(t,e,n,i);else var p=zr(t,e,n);return Qo((h?wf:Af)(p,d),t,e)}function ho(t,e,n,i){return t===ot||zs(t,vc[n])&&!_c.call(i,n)?e:t}function po(t,e,n,i,r,o){return au(t)&&au(e)&&(o.set(e,t),Xi(t,e,ot,po,o),o["delete"](e)),t}function vo(t){return vu(t)?ot:t}function yo(t,e,n,i,r,o){var a=n&vt,s=t.length,u=e.length;if(!(s==u||a&&u>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,f=!0,h=n&yt?new Pn:ot;for(o.set(t,e),o.set(e,t);++c<s;){var d=t[c],p=e[c];if(i)var v=a?i(p,d,c,e,t,o):i(d,p,c,t,e,o);if(v!==ot){if(v)continue;f=!1;break}if(h){if(!b(e,function(t,e){if(!B(h,e)&&(d===t||r(d,t,n,i,o)))return h.push(e)})){f=!1;break}}else if(d!==p&&!r(d,p,n,i,o)){f=!1;break}}return o["delete"](t),o["delete"](e),f}function go(t,e,n,i,r,o,a){switch(n){case le:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ue:return!(t.byteLength!=e.byteLength||!o(new Sc(t),new Sc(e)));case Wt:case qt:case Zt:return zs(+t,+e);case zt:return t.name==e.name&&t.message==e.message;case ee:case ie:return t==e+"";case Kt:var s=z;case ne:var u=i&vt;if(s||(s=K),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;i|=yt,a.set(t,e);var c=yo(s(t),s(e),i,r,o,a);return a["delete"](t),c;case re:if(pf)return pf.call(t)==pf.call(e)}return!1}function _o(t,e,n,i,r,o){var a=n&vt,s=bo(t),u=s.length;if(u!=bo(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:_c.call(e,c)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var h=!0;o.set(t,e),o.set(e,t);for(var d=a;++l<u;){c=s[l];var p=t[c],v=e[c];if(i)var y=a?i(v,p,c,e,t,o):i(p,v,c,t,e,o);if(!(y===ot?p===v||r(p,v,n,i,o):y)){h=!1;break}d||(d="constructor"==c)}if(h&&!d){var g=t.constructor,_=e.constructor;g!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _)&&(h=!1)}return o["delete"](t),o["delete"](e),h}function mo(t){return Lf($o(t,ot,va),t+"")}function bo(t){return mi(t,Gu,Sf)}function wo(t){return mi(t,Vu,Cf)}function Eo(t){for(var e=t.name+"",n=sf[e],i=_c.call(sf,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function xo(t){return(_c.call(n,"placeholder")?n:t).placeholder}function Oo(){var t=n.iteratee||Ll;return t=t===Ll?Ui:t,arguments.length?t(arguments[0],arguments[1]):t}function Po(t,e){var n=t.__data__;return Ho(e)?n["string"==typeof e?"string":"hash"]:n.map}function ko(t){for(var e=Gu(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Wo(r)]}return e}function So(t,e){var n=V(t,e);return ji(n)?n:ot}function Co(t){var e=_c.call(t,jc),n=t[jc];try{t[jc]=ot;var i=!0}catch(e){}var r=wc.call(t);return i&&(e?t[jc]=n:delete t[jc]),r}function Mo(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Yc(e,t+a);break;case"takeRight":t=zc(t,e-a)}}return{start:t,end:e}}function To(t){var e=t.match(Ue);return e?e[1].split(He):[]}function Ao(t,e,n){e=Pr(e,t);for(var i=-1,r=e.length,o=!1;++i<r;){var a=ea(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ou(r)&&Ro(a,r)&&(mh(t)||_h(t))}function Do(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&_c.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Lo(t){return"function"!=typeof t.constructor||Vo(t)?{}:yf(Mc(t))}function Io(t,e,n,i){var r=t.constructor;switch(e){case ue:return Cr(t);case Wt:case qt:return new r(+t);case le:return Mr(t,i);case ce:case fe:case he:case de:case pe:case ve:case ye:case ge:case _e:return Ir(t,i);case Kt:return Tr(t,i,n);case Zt:case ie:return new r(t);case ee:return Ar(t);case ne:return Dr(t,i,n);case re:return Lr(t)}}function jo(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Be,"{\n/* [wrapped with "+e+"] */\n")}function No(t){return mh(t)||_h(t)||!!(Lc&&t&&t[Lc])}function Ro(t,e){return!!(e=null==e?It:e)&&("number"==typeof t||$e.test(t))&&t>-1&&t%1==0&&e>t}function Bo(t,e,n){if(!au(n))return!1;var i=ot===e?"undefined":o(e);return!!("number"==i?Ys(n)&&Ro(e,n.length):"string"==i&&e in n)&&zs(n[e],t)}function Uo(t,e){if(mh(t))return!1;var n=ot===t?"undefined":o(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!_u(t))||(Te.test(t)||!Me.test(t)||null!=e&&t in lc(e))}function Ho(t){var e=ot===t?"undefined":o(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Fo(t){var e=Eo(t),i=n[e];if("function"!=typeof i||!(e in w.prototype))return!1;if(t===i)return!0;var r=kf(i);return!!r&&t===r[0]}function Go(t){return!!bc&&bc in t}function Vo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||vc)}function Wo(t){return t===t&&!au(t)}function qo(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==ot||t in lc(n)))}}function Xo(t,e){var n=t[1],i=e[1],r=n|i,o=(gt|_t|Ot)>r,a=i==Ot&&n==bt||i==Ot&&n==Pt&&e[8]>=t[7].length||i==(Ot|Pt)&&e[8]>=e[7].length&&n==bt;if(!o&&!a)return t;i&gt&&(t[2]=e[2],r|=n&gt?0:mt);var s=e[3];if(s){var u=t[3];t[3]=u?Rr(u,s,e[4]):s,t[4]=u?$(t[3],ft):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Br(u,s,e[6]):s,t[6]=u?$(t[5],ft):e[6]),s=e[7],s&&(t[7]=s),i&Ot&&(t[8]=null==t[8]?e[8]:Yc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function zo(t){var e=[];if(null!=t)for(var n in lc(t))e.push(n);return e}function Yo(t){return wc.call(t)}function $o(t,e,n){return e=zc(e===ot?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=zc(i.length-e,0),a=rc(o);++r<o;)a[r]=i[e+r];r=-1;for(var s=rc(e+1);++r<e;)s[r]=i[r];return s[e]=n(a),u(t,this,s)}}function Ko(t,e){return 2>e.length?t:_i(t,lr(e,0,-1))}function Zo(t,e){for(var n=t.length,i=Yc(e.length,n),r=Ur(t);i--;){var o=e[i];t[i]=Ro(o,n)?r[o]:ot}return t}function Qo(t,e,n){var i=e+"";return Lf(t,jo(i,ia(To(i),n)))}function Jo(t){var e=0,n=0;return function(){var i=$c(),r=Tt-(i-n);if(n=i,r>0){if(++e>=Mt)return arguments[0]}else e=0;return t.apply(ot,arguments)}}function ta(t,e){var n=-1,i=t.length,r=i-1;for(e=e===ot?i:e;++n<e;){var o=er(n,r),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function ea(t){if("string"==typeof t||_u(t))return t;var e=t+"";return"0"==e&&1/t==-Lt?"-0":e}function na(t){if(null!=t){try{return gc.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function ia(t,e){return c(Ht,function(n){var i="_."+n[0];e&n[1]&&!p(t,i)&&t.push(i)}),t.sort()}function ra(t){if(t instanceof w)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=Ur(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function oa(t,e,n){e=(n?Bo(t,e,n):e===ot)?1:zc(Ou(e),0);var i=null==t?0:t.length;if(!i||1>e)return[];for(var r=0,o=0,a=rc(Hc(i/e));i>r;)a[o++]=lr(t,r,r+=e);return a}function aa(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r}function sa(){var t=arguments.length;if(!t)return[];for(var e=rc(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return g(mh(n)?Ur(n):[n],pi(e,1))}function ua(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===ot?1:Ou(e),lr(t,0>e?0:e,i)):[]}function la(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===ot?1:Ou(e),e=i-e,lr(t,0,0>e?0:e)):[]}function ca(t,e){return t&&t.length?mr(t,Oo(e,3),!0,!0):[]}function fa(t,e){return t&&t.length?mr(t,Oo(e,3),!0):[]}function ha(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Bo(t,e,n)&&(n=0,i=r),hi(t,e,n,i)):[]}function da(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Ou(n);return 0>r&&(r=zc(i+r,0)),O(t,Oo(e,3),r)}function pa(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==ot&&(r=Ou(n),r=0>n?zc(i+r,0):Yc(r,i-1)),O(t,Oo(e,3),r,!0)}function va(t){return(null==t?0:t.length)?pi(t,1):[]}function ya(t){return(null==t?0:t.length)?pi(t,Lt):[]}function ga(t,e){return(null==t?0:t.length)?(e=e===ot?1:Ou(e),pi(t,e)):[]}function _a(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function ma(t){return t&&t.length?t[0]:ot}function ba(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Ou(n);return 0>r&&(r=zc(i+r,0)),P(t,e,r)}function wa(t){return(null==t?0:t.length)?lr(t,0,-1):[]}function Ea(t,e){return null==t?"":qc.call(t,e)}function xa(t){var e=null==t?0:t.length;return e?t[e-1]:ot}function Oa(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==ot&&(r=Ou(n),r=0>r?zc(i+r,0):Yc(r,i-1)),e===e?J(t,e,r):O(t,S,r,!0)}function Pa(t,e){return t&&t.length?Yi(t,Ou(e)):ot}function ka(t,e){return t&&t.length&&e&&e.length?Ji(t,e):t}function Sa(t,e,n){return t&&t.length&&e&&e.length?Ji(t,e,Oo(n,2)):t}function Ca(t,e,n){return t&&t.length&&e&&e.length?Ji(t,e,ot,n):t}function Ma(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Oo(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return tr(t,r),n}function Ta(t){return null==t?t:Qc.call(t)}function Aa(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Bo(t,e,n)?(e=0,n=i):(e=null==e?0:Ou(e),n=n===ot?i:Ou(n)),lr(t,e,n)):[]}function Da(t,e){return fr(t,e)}function La(t,e,n){return hr(t,e,Oo(n,2))}function Ia(t,e){var n=null==t?0:t.length;if(n){var i=fr(t,e);if(n>i&&zs(t[i],e))return i}return-1}function ja(t,e){return fr(t,e,!0)}function Na(t,e,n){return hr(t,e,Oo(n,2),!0)}function Ra(t,e){if(null==t?0:t.length){var n=fr(t,e,!0)-1;if(zs(t[n],e))return n}return-1}function Ba(t){return t&&t.length?dr(t):[]}function Ua(t,e){return t&&t.length?dr(t,Oo(e,2)):[]}function Ha(t){var e=null==t?0:t.length;return e?lr(t,1,e):[]}function Fa(t,e,n){return t&&t.length?(e=n||e===ot?1:Ou(e),lr(t,0,0>e?0:e)):[]}function Ga(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===ot?1:Ou(e),e=i-e,lr(t,0>e?0:e,i)):[]}function Va(t,e){return t&&t.length?mr(t,Oo(e,3),!1,!0):[]}function Wa(t,e){return t&&t.length?mr(t,Oo(e,3)):[]}function qa(t){return t&&t.length?yr(t):[]}function Xa(t,e){return t&&t.length?yr(t,Oo(e,2)):[]}function za(t,e){return e="function"==typeof e?e:ot,t&&t.length?yr(t,ot,e):[]}function Ya(t){if(!t||!t.length)return[];var e=0;return t=d(t,function(t){if($s(t))return e=zc(t.length,e),!0}),I(e,function(e){return y(t,M(e))})}function $a(t,e){if(!t||!t.length)return[];var n=Ya(t);return null==e?n:y(n,function(t){return u(e,ot,t)})}function Ka(t,e){return Er(t||[],e||[],Zn)}function Za(t,e){return Er(t||[],e||[],sr)}function Qa(t){var e=n(t);return e.__chain__=!0,e}function Ja(t,e){return e(t),t}function ts(t,e){return e(t)}function es(){return Qa(this)}function ns(){return new r(this.value(),this.__chain__)}function is(){this.__values__===ot&&(this.__values__=Eu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?ot:this.__values__[this.__index__++]}}function rs(){return this}function os(t){for(var e,n=this;n instanceof i;){var r=ra(n);r.__index__=0,r.__values__=ot,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e}function as(){var t=this.__wrapped__;if(t instanceof w){var e=t;return this.__actions__.length&&(e=new w(this)),e=e.reverse(),e.__actions__.push({func:ts,args:[Ta],thisArg:ot}),new r(e,this.__chain__)}return this.thru(Ta)}function ss(){return br(this.__wrapped__,this.__actions__)}function us(t,e,n){var i=mh(t)?h:ci;return n&&Bo(t,e,n)&&(e=ot),i(t,Oo(e,3))}function ls(t,e){return(mh(t)?d:di)(t,Oo(e,3))}function cs(t,e){return pi(ys(t,e),1)}function fs(t,e){return pi(ys(t,e),Lt)}function hs(t,e,n){return n=n===ot?1:Ou(n),pi(ys(t,e),n)}function ds(t,e){return(mh(t)?c:gf)(t,Oo(e,3))}function ps(t,e){return(mh(t)?f:_f)(t,Oo(e,3))}function vs(t,e,n,i){t=Ys(t)?t:el(t),n=n&&!i?Ou(n):0;var r=t.length;return 0>n&&(n=zc(r+n,0)),gu(t)?r>=n&&t.indexOf(e,n)>-1:!!r&&P(t,e,n)>-1}function ys(t,e){return(mh(t)?y:Vi)(t,Oo(e,3))}function gs(t,e,n,i){return null==t?[]:(mh(e)||(e=null==e?[]:[e]),n=i?ot:n,mh(n)||(n=null==n?[]:[n]),$i(t,e,n))}function _s(t,e,n){var i=mh(t)?_:A,r=3>arguments.length;return i(t,Oo(e,4),n,r,gf)}function ms(t,e,n){var i=mh(t)?m:A,r=3>arguments.length;return i(t,Oo(e,4),n,r,_f)}function bs(t,e){return(mh(t)?d:di)(t,Is(Oo(e,3)))}function ws(t){return(mh(t)?zn:or)(t)}function Es(t,e,n){return e=(n?Bo(t,e,n):e===ot)?1:Ou(e),(mh(t)?Yn:ar)(t,e)}function xs(t){return(mh(t)?$n:ur)(t)}function Os(t){if(null==t)return 0;if(Ys(t))return gu(t)?tt(t):t.length;var e=Mf(t);return e==Kt||e==ne?t.size:Hi(t).length}function Ps(t,e,n){var i=mh(t)?b:cr;return n&&Bo(t,e,n)&&(e=ot),i(t,Oo(e,3))}function ks(t,e){if("function"!=typeof e)throw new hc(ut);return t=Ou(t),function(){if(1>--t)return e.apply(this,arguments)}}function Ss(t,e,n){return e=n?ot:e,e=t&&null==e?t.length:e,fo(t,Ot,ot,ot,ot,ot,e)}function Cs(t,e){var n;if("function"!=typeof e)throw new hc(ut);return t=Ou(t),function(){return--t>0&&(n=e.apply(this,arguments)),t>1||(e=ot),n}}function Ms(t,e,n){e=n?ot:e;var i=fo(t,bt,ot,ot,ot,ot,ot,e);return i.placeholder=Ms.placeholder,i}function Ts(t,e,n){e=n?ot:e;var i=fo(t,wt,ot,ot,ot,ot,ot,e);return i.placeholder=Ts.placeholder,i}function As(t,e,n){function i(e){var n=h,i=d;return h=d=ot,_=e,v=t.apply(i,n)}function r(t){return _=t,y=Df(s,e),m?i(t):v}function o(t){var n=t-g,i=t-_,r=e-n;return b?Yc(r,p-i):r}function a(t){var n=t-g,i=t-_;return g===ot||n>=e||0>n||b&&i>=p}function s(){var t=sh();if(a(t))return u(t);y=Df(s,o(t))}function u(t){return y=ot,w&&h?i(t):(h=d=ot,v)}function l(){y!==ot&&Of(y),_=0,h=g=d=y=ot}function c(){return y===ot?v:u(sh())}function f(){var t=sh(),n=a(t);if(h=arguments,d=this,g=t,n){if(y===ot)return r(g);if(b)return y=Df(s,e),i(g)}return y===ot&&(y=Df(s,e)),v}var h,d,p,v,y,g,_=0,m=!1,b=!1,w=!0;if("function"!=typeof t)throw new hc(ut);return e=ku(e)||0,au(n)&&(m=!!n.leading,b="maxWait"in n,p=b?zc(ku(n.maxWait)||0,e):p,w="trailing"in n?!!n.trailing:w),f.cancel=l,f.flush=c,f}function Ds(t){return fo(t,kt)}function Ls(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new hc(ut);var n=function i(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var a=t.apply(this,n);return i.cache=o.set(r,a)||o,a};return n.cache=new(Ls.Cache||yn),n}function Is(t){if("function"!=typeof t)throw new hc(ut);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function js(t){return Cs(2,t)}function Ns(t,e){if("function"!=typeof t)throw new hc(ut);return e=e===ot?e:Ou(e),rr(t,e)}function Rs(t,e){if("function"!=typeof t)throw new hc(ut);return e=null==e?0:zc(Ou(e),0),rr(function(n){var i=n[e],r=kr(n,0,e);return i&&g(r,i),u(t,this,r)})}function Bs(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new hc(ut);return au(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),As(t,e,{leading:i,maxWait:e,trailing:r})}function Us(t){return Ss(t,1)}function Hs(t,e){return dh(Or(e),t)}function Fs(){if(!arguments.length)return[];var t=arguments[0];return mh(t)?t:[t]}function Gs(t){return oi(t,pt)}function Vs(t,e){return e="function"==typeof e?e:ot,oi(t,pt,e)}function Ws(t){return oi(t,ht|pt)}function qs(t,e){return e="function"==typeof e?e:ot,oi(t,ht|pt,e)}function Xs(t,e){return null==e||si(t,e,Gu(e))}function zs(t,e){return t===e||t!==t&&e!==e}function Ys(t){return null!=t&&ou(t.length)&&!iu(t)}function $s(t){return su(t)&&Ys(t)}function Ks(t){return!0===t||!1===t||su(t)&&bi(t)==Wt}function Zs(t){return su(t)&&1===t.nodeType&&!vu(t)}function Qs(t){if(null==t)return!0;if(Ys(t)&&(mh(t)||"string"==typeof t||"function"==typeof t.splice||wh(t)||kh(t)||_h(t)))return!t.length;var e=Mf(t);if(e==Kt||e==ne)return!t.size;if(Vo(t))return!Hi(t).length;for(var n in t)if(_c.call(t,n))return!1;return!0}function Js(t,e){return Ai(t,e)}function tu(t,e,n){n="function"==typeof n?n:ot;var i=n?n(t,e):ot;return i===ot?Ai(t,e,ot,n):!!i}function eu(t){if(!su(t))return!1;var e=bi(t);return e==zt||e==Xt||"string"==typeof t.message&&"string"==typeof t.name&&!vu(t)}function nu(t){return"number"==typeof t&&Wc(t)}function iu(t){if(!au(t))return!1;var e=bi(t);return e==Yt||e==$t||e==Vt||e==te}function ru(t){return"number"==typeof t&&t==Ou(t)}function ou(t){return"number"==typeof t&&t>-1&&t%1==0&&It>=t}function au(t){var e=ot===t?"undefined":o(t);return null!=t&&("object"==e||"function"==e)}function su(t){return null!=t&&"object"==(ot===t?"undefined":o(t))}function uu(t,e){return t===e||Ii(t,e,ko(e))}function lu(t,e,n){return n="function"==typeof n?n:ot,Ii(t,e,ko(e),n)}function cu(t){return pu(t)&&t!=+t}function fu(t){if(Tf(t))throw new ac(st);return ji(t)}function hu(t){return null===t}function du(t){return null==t}function pu(t){return"number"==typeof t||su(t)&&bi(t)==Zt}function vu(t){if(!su(t)||bi(t)!=Jt)return!1;var e=Mc(t);if(null===e)return!0;var n=_c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&gc.call(n)==Ec}function yu(t){return ru(t)&&t>=-It&&It>=t}function gu(t){return"string"==typeof t||!mh(t)&&su(t)&&bi(t)==ie}function _u(t){return"symbol"==(ot===t?"undefined":o(t))||su(t)&&bi(t)==re}function mu(t){return t===ot}function bu(t){return su(t)&&Mf(t)==ae}function wu(t){return su(t)&&bi(t)==se}function Eu(t){if(!t)return[];if(Ys(t))return gu(t)?et(t):Ur(t);if(Ic&&t[Ic])return X(t[Ic]());var e=Mf(t);return(e==Kt?z:e==ne?K:el)(t)}function xu(t){if(!t)return 0===t?t:0;if((t=ku(t))===Lt||t===-Lt){return(0>t?-1:1)*jt}return t===t?t:0}function Ou(t){var e=xu(t),n=e%1;return e===e?n?e-n:e:0}function Pu(t){return t?ri(Ou(t),0,Rt):0}function ku(t){if("number"==typeof t)return t;if(_u(t))return Nt;if(au(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=au(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(je,"");var n=Xe.test(t);return n||Ye.test(t)?bn(t.slice(2),n?2:8):qe.test(t)?Nt:+t}function Su(t){return Hr(t,Vu(t))}function Cu(t){return t?ri(Ou(t),-It,It):0===t?t:0}function Mu(t){return null==t?"":vr(t)}function Tu(t,e){var n=yf(t);return null==e?n:ti(n,e)}function Au(t,e){return x(t,Oo(e,3),vi)}function Du(t,e){return x(t,Oo(e,3),yi)}function Lu(t,e){return null==t?t:mf(t,Oo(e,3),Vu)}function Iu(t,e){return null==t?t:bf(t,Oo(e,3),Vu)}function ju(t,e){return t&&vi(t,Oo(e,3))}function Nu(t,e){return t&&yi(t,Oo(e,3))}function Ru(t){return null==t?[]:gi(t,Gu(t))}function Bu(t){return null==t?[]:gi(t,Vu(t))}function Uu(t,e,n){var i=null==t?ot:_i(t,e);return i===ot?n:i}function Hu(t,e){return null!=t&&Ao(t,e,Ei)}function Fu(t,e){return null!=t&&Ao(t,e,xi)}function Gu(t){return Ys(t)?Xn(t):Hi(t)}function Vu(t){return Ys(t)?Xn(t,!0):Fi(t)}function Wu(t,e){var n={};return e=Oo(e,3),vi(t,function(t,i,r){ni(n,e(t,i,r),t)}),n}function qu(t,e){var n={};return e=Oo(e,3),vi(t,function(t,i,r){ni(n,i,e(t,i,r))}),n}function Xu(t,e){return zu(t,Is(Oo(e)))}function zu(t,e){if(null==t)return{};var n=y(wo(t),function(t){return[t]});return e=Oo(e),Zi(t,n,function(t,n){return e(t,n[0])})}function Yu(t,e,n){e=Pr(e,t);var i=-1,r=e.length;for(r||(r=1,t=ot);++i<r;){var o=null==t?ot:t[ea(e[i])];o===ot&&(i=r,o=n),t=iu(o)?o.call(t):o}return t}function $u(t,e,n){return null==t?t:sr(t,e,n)}function Ku(t,e,n,i){return i="function"==typeof i?i:ot,null==t?t:sr(t,e,n,i)}function Zu(t,e,n){var i=mh(t),r=i||wh(t)||kh(t);if(e=Oo(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:au(t)&&iu(o)?yf(Mc(t)):{}}return(r?c:vi)(t,function(t,i,r){return e(n,t,i,r)}),n}function Qu(t,e){return null==t||gr(t,e)}function Ju(t,e,n){return null==t?t:_r(t,e,Or(n))}function tl(t,e,n,i){return i="function"==typeof i?i:ot,null==t?t:_r(t,e,Or(n),i)}function el(t){return null==t?[]:R(t,Gu(t))}function nl(t){return null==t?[]:R(t,Vu(t))}function il(t,e,n){return n===ot&&(n=e,e=ot),n!==ot&&(n=ku(n),n=n===n?n:0),e!==ot&&(e=ku(e),e=e===e?e:0),ri(ku(t),e,n)}function rl(t,e,n){return e=xu(e),n===ot?(n=e,e=0):n=xu(n),t=ku(t),Oi(t,e,n)}function ol(t,e,n){if(n&&"boolean"!=typeof n&&Bo(t,e,n)&&(e=n=ot),n===ot&&("boolean"==typeof e?(n=e,e=ot):"boolean"==typeof t&&(n=t,t=ot)),t===ot&&e===ot?(t=0,e=1):(t=xu(t),e===ot?(e=t,t=0):e=xu(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Zc();return Yc(t+r*(e-t+mn("1e-"+((r+"").length-1))),e)}return er(t,e)}function al(t){return Qh(Mu(t).toLowerCase())}function sl(t){return(t=Mu(t))&&t.replace(Ke,Nn).replace(an,"")}function ul(t,e,n){t=Mu(t),e=vr(e);var i=t.length;n=n===ot?i:ri(Ou(n),0,i);var r=n;return(n-=e.length)>=0&&t.slice(n,r)==e}function ll(t){return t=Mu(t),t&&Pe.test(t)?t.replace(xe,Rn):t}function cl(t){return t=Mu(t),t&&Ie.test(t)?t.replace(Le,"\\$&"):t}function fl(t,e,n){t=Mu(t),e=Ou(e);var i=e?tt(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return ro(Fc(r),n)+t+ro(Hc(r),n)}function hl(t,e,n){t=Mu(t),e=Ou(e);var i=e?tt(t):0;return e&&e>i?t+ro(e-i,n):t}function dl(t,e,n){t=Mu(t),e=Ou(e);var i=e?tt(t):0;return e&&e>i?ro(e-i,n)+t:t}function pl(t,e,n){return n||null==e?e=0:e&&(e=+e),Kc(Mu(t).replace(Ne,""),e||0)}function vl(t,e,n){return e=(n?Bo(t,e,n):e===ot)?1:Ou(e),ir(Mu(t),e)}function yl(){var t=arguments,e=Mu(t[0]);return 3>t.length?e:e.replace(t[1],t[2])}function gl(t,e,n){return n&&"number"!=typeof n&&Bo(t,e,n)&&(e=n=ot),(n=n===ot?Rt:n>>>0)?(t=Mu(t),t&&("string"==typeof e||null!=e&&!Oh(e))&&!(e=vr(e))&&W(t)?kr(et(t),0,n):t.split(e,n)):[]}function _l(t,e,n){return t=Mu(t),n=null==n?0:ri(Ou(n),0,t.length),e=vr(e),t.slice(n,n+e.length)==e}function ml(t,e,i){var r=n.templateSettings;i&&Bo(t,e,i)&&(e=ot),t=Mu(t),e=Ah({},e,r,ho);var o,a,s=Ah({},e.imports,r.imports,ho),u=Gu(s),l=R(s,u),c=0,f=e.interpolate||Ze,h="__p += '",d=cc((e.escape||Ze).source+"|"+f.source+"|"+(f===Ce?Ve:Ze).source+"|"+(e.evaluate||Ze).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++hn+"]")+"\n";t.replace(d,function(e,n,i,r,s,u){return i||(i=r),h+=t.slice(c,u).replace(Qe,G),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),h+="';\n";var v=e.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(me,""):h).replace(be,"$1").replace(we,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Jh(function(){return sc(u,p+"return "+h).apply(ot,l)});if(y.source=h,eu(y))throw y;return y}function bl(t){return Mu(t).toLowerCase()}function wl(t){return Mu(t).toUpperCase()}function El(t,e,n){if((t=Mu(t))&&(n||e===ot))return t.replace(je,"");if(!t||!(e=vr(e)))return t;var i=et(t),r=et(e);return kr(i,U(i,r),H(i,r)+1).join("")}function xl(t,e,n){if((t=Mu(t))&&(n||e===ot))return t.replace(Re,"");if(!t||!(e=vr(e)))return t;var i=et(t);return kr(i,0,H(i,et(e))+1).join("")}function Ol(t,e,n){if((t=Mu(t))&&(n||e===ot))return t.replace(Ne,"");if(!t||!(e=vr(e)))return t;var i=et(t);return kr(i,U(i,et(e))).join("")}function Pl(t,e){var n=St,i=Ct;if(au(e)){var r="separator"in e?e.separator:r;n="length"in e?Ou(e.length):n,i="omission"in e?vr(e.omission):i}t=Mu(t);var o=t.length;if(W(t)){var a=et(t);o=a.length}if(n>=o)return t;var s=n-tt(i);if(1>s)return i;var u=a?kr(a,0,s).join(""):t.slice(0,s);if(r===ot)return u+i;if(a&&(s+=u.length-s),Oh(r)){if(t.slice(s).search(r)){var l,c=u;for(r.global||(r=cc(r.source,Mu(We.exec(r))+"g")),r.lastIndex=0;l=r.exec(c);)var f=l.index;u=u.slice(0,f===ot?s:f)}}else if(t.indexOf(vr(r),s)!=s){var h=u.lastIndexOf(r);h>-1&&(u=u.slice(0,h))}return u+i}function kl(t){return t=Mu(t),t&&Oe.test(t)?t.replace(Ee,Bn):t}function Sl(t,e,n){return t=Mu(t),e=n?ot:e,e===ot?q(t)?rt(t):E(t):t.match(e)||[]}function Cl(t){var e=null==t?0:t.length,n=Oo();return t=e?y(t,function(t){if("function"!=typeof t[1])throw new hc(ut);return[n(t[0]),t[1]]}):[],rr(function(n){for(var i=-1;++i<e;){var r=t[i];if(u(r[0],this,n))return u(r[1],this,n)}})}function Ml(t){return ai(oi(t,ht))}function Tl(t){return function(){return t}}function Al(t,e){return null==t||t!==t?e:t}function Dl(t){return t}function Ll(t){return Ui("function"==typeof t?t:oi(t,ht))}function Il(t){return Wi(oi(t,ht))}function jl(t,e){return qi(t,oi(e,ht))}function Nl(t,e,n){var i=Gu(e),r=gi(e,i);null!=n||au(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=gi(e,Gu(e)));var o=!(au(n)&&"chain"in n&&!n.chain),a=iu(t);return c(r,function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ur(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,g([this.value()],arguments))})}),t}function Rl(){return xn._===this&&(xn._=xc),this}function Bl(){}function Ul(t){return t=Ou(t),rr(function(e){return Yi(e,t)})}function Hl(t){return Uo(t)?M(ea(t)):Qi(t)}function Fl(t){return function(e){return null==t?ot:_i(t,e)}}function Gl(){return[]}function Vl(){return!1}function Wl(){return{}}function ql(){return""}function Xl(){return!0}function zl(t,e){if(1>(t=Ou(t))||t>It)return[];var n=Rt,i=Yc(t,Rt);e=Oo(e),t-=Rt;for(var r=I(i,e);++n<t;)e(n);return r}function Yl(t){return mh(t)?y(t,ea):_u(t)?[t]:Ur(If(Mu(t)))}function $l(t){var e=++mc;return Mu(t)+e}function Kl(t){return t&&t.length?fi(t,Dl,wi):ot}function Zl(t,e){return t&&t.length?fi(t,Oo(e,2),wi):ot}function Ql(t){return C(t,Dl)}function Jl(t,e){return C(t,Oo(e,2))}function tc(t){return t&&t.length?fi(t,Dl,Gi):ot}function ec(t,e){return t&&t.length?fi(t,Oo(e,2),Gi):ot}function nc(t){return t&&t.length?L(t,Dl):0}function ic(t,e){return t&&t.length?L(t,Oo(e,2)):0}t=null==t?xn:Un.defaults(xn.Object(),t,Un.pick(xn,fn));var rc=t.Array,oc=t.Date,ac=t.Error,sc=t.Function,uc=t.Math,lc=t.Object,cc=t.RegExp,fc=t.String,hc=t.TypeError,dc=rc.prototype,pc=sc.prototype,vc=lc.prototype,yc=t["__core-js_shared__"],gc=pc.toString,_c=vc.hasOwnProperty,mc=0,bc=function(){var t=/[^.]+$/.exec(yc&&yc.keys&&yc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),wc=vc.toString,Ec=gc.call(lc),xc=xn._,Oc=cc("^"+gc.call(_c).replace(Le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pc=kn?t.Buffer:ot,kc=t.Symbol,Sc=t.Uint8Array,Cc=Pc?Pc.allocUnsafe:ot,Mc=Y(lc.getPrototypeOf,lc),Tc=lc.create,Ac=vc.propertyIsEnumerable,Dc=dc.splice,Lc=kc?kc.isConcatSpreadable:ot,Ic=kc?kc.iterator:ot,jc=kc?kc.toStringTag:ot,Nc=function(){try{var t=So(lc,"defineProperty");return t({},"",{}),t}catch(e){}}(),Rc=t.clearTimeout!==xn.clearTimeout&&t.clearTimeout,Bc=oc&&oc.now!==xn.Date.now&&oc.now,Uc=t.setTimeout!==xn.setTimeout&&t.setTimeout,Hc=uc.ceil,Fc=uc.floor,Gc=lc.getOwnPropertySymbols,Vc=Pc?Pc.isBuffer:ot,Wc=t.isFinite,qc=dc.join,Xc=Y(lc.keys,lc),zc=uc.max,Yc=uc.min,$c=oc.now,Kc=t.parseInt,Zc=uc.random,Qc=dc.reverse,Jc=So(t,"DataView"),tf=So(t,"Map"),ef=So(t,"Promise"),nf=So(t,"Set"),rf=So(t,"WeakMap"),of=So(lc,"create"),af=rf&&new rf,sf={},uf=na(Jc),lf=na(tf),cf=na(ef),ff=na(nf),hf=na(rf),df=kc?kc.prototype:ot,pf=df?df.valueOf:ot,vf=df?df.toString:ot,yf=function(){function t(){}return function(e){if(!au(e))return{};if(Tc)return Tc(e);t.prototype=e;var n=new t;return t.prototype=ot,n}}();n.templateSettings={escape:ke,evaluate:Se,interpolate:Ce,variable:"",imports:{_:n}},n.prototype=i.prototype,n.prototype.constructor=n,r.prototype=yf(i.prototype),r.prototype.constructor=r,w.prototype=yf(i.prototype),w.prototype.constructor=w,it.prototype.clear=Fe,it.prototype["delete"]=Je,it.prototype.get=tn,it.prototype.has=en,it.prototype.set=nn,rn.prototype.clear=sn,rn.prototype["delete"]=un,rn.prototype.get=ln,rn.prototype.has=cn,rn.prototype.set=vn,yn.prototype.clear=gn,yn.prototype["delete"]=_n,yn.prototype.get=wn,yn.prototype.has=En,yn.prototype.set=On,Pn.prototype.add=Pn.prototype.push=Sn,Pn.prototype.has=Cn,jn.prototype.clear=Fn,jn.prototype["delete"]=Gn,jn.prototype.get=Vn,jn.prototype.has=Wn,jn.prototype.set=qn;var gf=qr(vi),_f=qr(yi,!0),mf=Xr(),bf=Xr(!0),wf=af?function(t,e){return af.set(t,e),t}:Dl,Ef=Nc?function(t,e){return Nc(t,"toString",{configurable:!0,enumerable:!1,value:Tl(e),writable:!0})}:Dl,xf=rr,Of=Rc||function(t){return xn.clearTimeout(t)},Pf=nf&&1/K(new nf([,-0]))[1]==Lt?function(t){return new nf(t)}:Bl,kf=af?function(t){return af.get(t)}:Bl,Sf=Gc?function(t){return null==t?[]:(t=lc(t),d(Gc(t),function(e){return Ac.call(t,e)}))}:Gl,Cf=Gc?function(t){for(var e=[];t;)g(e,Sf(t)),t=Mc(t);return e}:Gl,Mf=bi;(Jc&&Mf(new Jc(new ArrayBuffer(1)))!=le||tf&&Mf(new tf)!=Kt||ef&&"[object Promise]"!=Mf(ef.resolve())||nf&&Mf(new nf)!=ne||rf&&Mf(new rf)!=ae)&&(Mf=function(t){var e=bi(t),n=e==Jt?t.constructor:ot,i=n?na(n):"";if(i)switch(i){case uf:return le;case lf:return Kt;case cf:return"[object Promise]";case ff:return ne;case hf:return ae}return e});var Tf=yc?iu:Vl,Af=Jo(wf),Df=Uc||function(t,e){return xn.setTimeout(t,e)},Lf=Jo(Ef),If=function(t){var e=Ls(t,function(t){return n.size===ct&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return Ae.test(t)&&e.push(""),t.replace(De,function(t,n,i,r){e.push(i?r.replace(Ge,"$1"):n||t)}),e}),jf=rr(function(t,e){return $s(t)?li(t,pi(e,1,$s,!0)):[]}),Nf=rr(function(t,e){var n=xa(e);return $s(n)&&(n=ot),$s(t)?li(t,pi(e,1,$s,!0),Oo(n,2)):[]}),Rf=rr(function(t,e){var n=xa(e);return $s(n)&&(n=ot),$s(t)?li(t,pi(e,1,$s,!0),ot,n):[]}),Bf=rr(function(t){var e=y(t,xr);return e.length&&e[0]===t[0]?Pi(e):[]}),Uf=rr(function(t){var e=xa(t),n=y(t,xr);return e===xa(n)?e=ot:n.pop(),n.length&&n[0]===t[0]?Pi(n,Oo(e,2)):[]}),Hf=rr(function(t){var e=xa(t),n=y(t,xr);return e="function"==typeof e?e:ot,e&&n.pop(),n.length&&n[0]===t[0]?Pi(n,ot,e):[]}),Ff=rr(ka),Gf=mo(function(t,e){var n=null==t?0:t.length,i=ii(t,e);return tr(t,y(e,function(t){return Ro(t,n)?+t:t}).sort(jr)),i}),Vf=rr(function(t){return yr(pi(t,1,$s,!0))}),Wf=rr(function(t){var e=xa(t);return $s(e)&&(e=ot),yr(pi(t,1,$s,!0),Oo(e,2))}),qf=rr(function(t){var e=xa(t);return e="function"==typeof e?e:ot,yr(pi(t,1,$s,!0),ot,e)}),Xf=rr(function(t,e){return $s(t)?li(t,e):[]}),zf=rr(function(t){return wr(d(t,$s))}),Yf=rr(function(t){var e=xa(t);return $s(e)&&(e=ot),wr(d(t,$s),Oo(e,2))}),$f=rr(function(t){var e=xa(t);return e="function"==typeof e?e:ot,wr(d(t,$s),ot,e)}),Kf=rr(Ya),Zf=rr(function(t){var e=t.length,n=e>1?t[e-1]:ot;return n="function"==typeof n?(t.pop(),n):ot,$a(t,n)}),Qf=mo(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return ii(e,t)};return 1>=e&&!this.__actions__.length&&i instanceof w&&Ro(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:ts,args:[o],thisArg:ot}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(ot),t})):this.thru(o)}),Jf=Vr(function(t,e,n){_c.call(t,n)?++t[n]:ni(t,n,1)}),th=Qr(da),eh=Qr(pa),nh=Vr(function(t,e,n){_c.call(t,n)?t[n].push(e):ni(t,n,[e])}),ih=rr(function(t,e,n){var i=-1,r="function"==typeof e,o=Ys(t)?rc(t.length):[];return gf(t,function(t){o[++i]=r?u(e,t,n):Si(t,e,n)}),o}),rh=Vr(function(t,e,n){ni(t,n,e)}),oh=Vr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ah=rr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Bo(t,e[0],e[1])?e=[]:n>2&&Bo(e[0],e[1],e[2])&&(e=[e[0]]),$i(t,pi(e,1),[])}),sh=Bc||function(){return xn.Date.now()},uh=rr(function(t,e,n){var i=gt;if(n.length){var r=$(n,xo(uh));i|=Et}return fo(t,i,e,n,r)}),lh=rr(function(t,e,n){var i=gt|_t;if(n.length){var r=$(n,xo(lh));i|=Et}return fo(e,i,t,n,r)}),ch=rr(function(t,e){return ui(t,1,e)}),fh=rr(function(t,e,n){return ui(t,ku(e)||0,n)});Ls.Cache=yn;var hh=xf(function(t,e){e=1==e.length&&mh(e[0])?y(e[0],N(Oo())):y(pi(e,1),N(Oo()));var n=e.length;return rr(function(i){for(var r=-1,o=Yc(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return u(t,this,i)})}),dh=rr(function(t,e){var n=$(e,xo(dh));return fo(t,Et,ot,e,n)}),ph=rr(function(t,e){var n=$(e,xo(ph));return fo(t,xt,ot,e,n)}),vh=mo(function(t,e){return fo(t,Pt,ot,ot,ot,e)}),yh=so(wi),gh=so(function(t,e){return t>=e}),_h=Ci(function(){return arguments}())?Ci:function(t){return su(t)&&_c.call(t,"callee")&&!Ac.call(t,"callee")},mh=rc.isArray,bh=Mn?N(Mn):Mi,wh=Vc||Vl,Eh=Tn?N(Tn):Ti,xh=An?N(An):Li,Oh=Dn?N(Dn):Ni,Ph=Ln?N(Ln):Ri,kh=In?N(In):Bi,Sh=so(Gi),Ch=so(function(t,e){return e>=t}),Mh=Wr(function(t,e){if(Vo(e)||Ys(e))return void Hr(e,Gu(e),t);for(var n in e)_c.call(e,n)&&Zn(t,n,e[n])}),Th=Wr(function(t,e){Hr(e,Vu(e),t)}),Ah=Wr(function(t,e,n,i){Hr(e,Vu(e),t,i)}),Dh=Wr(function(t,e,n,i){Hr(e,Gu(e),t,i)}),Lh=mo(ii),Ih=rr(function(t){return t.push(ot,ho),u(Ah,ot,t)}),jh=rr(function(t){return t.push(ot,po),u(Hh,ot,t)}),Nh=eo(function(t,e,n){t[e]=n},Tl(Dl)),Rh=eo(function(t,e,n){_c.call(t,e)?t[e].push(n):t[e]=[n]},Oo),Bh=rr(Si),Uh=Wr(function(t,e,n){Xi(t,e,n)}),Hh=Wr(function(t,e,n,i){Xi(t,e,n,i)}),Fh=mo(function(t,e){var n={};if(null==t)return n;var i=!1;e=y(e,function(e){return e=Pr(e,t),i||(i=e.length>1),e}),Hr(t,wo(t),n),i&&(n=oi(n,ht|dt|pt,vo));for(var r=e.length;r--;)gr(n,e[r]);return n}),Gh=mo(function(t,e){return null==t?{}:Ki(t,e)}),Vh=co(Gu),Wh=co(Vu),qh=$r(function(t,e,n){return e=e.toLowerCase(),t+(n?al(e):e)}),Xh=$r(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),zh=$r(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Yh=Yr("toLowerCase"),$h=$r(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Kh=$r(function(t,e,n){return t+(n?" ":"")+Qh(e)}),Zh=$r(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Qh=Yr("toUpperCase"),Jh=rr(function(t,n){try{return u(t,ot,n)}catch(e){return eu(e)?e:new ac(e)}}),td=mo(function(t,e){return c(e,function(e){e=ea(e),ni(t,e,uh(t[e],t))}),t}),ed=Jr(),nd=Jr(!0),id=rr(function(t,e){return function(n){return Si(n,t,e)}}),rd=rr(function(t,e){return function(n){return Si(t,n,e)}}),od=io(y),ad=io(h),sd=io(b),ud=ao(),ld=ao(!0),cd=no(function(t,e){return t+e},0),fd=lo("ceil"),hd=no(function(t,e){return t/e},1),dd=lo("floor"),pd=no(function(t,e){return t*e},1),vd=lo("round"),yd=no(function(t,e){return t-e},0);return n.after=ks,n.ary=Ss,n.assign=Mh,n.assignIn=Th,n.assignInWith=Ah,n.assignWith=Dh,n.at=Lh,n.before=Cs,n.bind=uh,n.bindAll=td,n.bindKey=lh,n.castArray=Fs,n.chain=Qa,n.chunk=oa,n.compact=aa,n.concat=sa,n.cond=Cl,n.conforms=Ml,n.constant=Tl,n.countBy=Jf,n.create=Tu,n.curry=Ms,n.curryRight=Ts,n.debounce=As,n.defaults=Ih,n.defaultsDeep=jh,n.defer=ch,n.delay=fh,n.difference=jf,n.differenceBy=Nf,n.differenceWith=Rf,n.drop=ua,n.dropRight=la,n.dropRightWhile=ca,n.dropWhile=fa,n.fill=ha,n.filter=ls,n.flatMap=cs,n.flatMapDeep=fs,n.flatMapDepth=hs,n.flatten=va,n.flattenDeep=ya,n.flattenDepth=ga,n.flip=Ds,n.flow=ed,n.flowRight=nd,n.fromPairs=_a,n.functions=Ru,n.functionsIn=Bu,n.groupBy=nh,n.initial=wa,n.intersection=Bf,n.intersectionBy=Uf,n.intersectionWith=Hf,n.invert=Nh,n.invertBy=Rh,n.invokeMap=ih,n.iteratee=Ll,n.keyBy=rh,n.keys=Gu,n.keysIn=Vu,n.map=ys,n.mapKeys=Wu,n.mapValues=qu,n.matches=Il,n.matchesProperty=jl,n.memoize=Ls,n.merge=Uh,n.mergeWith=Hh,n.method=id,n.methodOf=rd,n.mixin=Nl,n.negate=Is,n.nthArg=Ul,n.omit=Fh,n.omitBy=Xu,n.once=js,n.orderBy=gs,n.over=od,n.overArgs=hh,n.overEvery=ad,n.overSome=sd,n.partial=dh,n.partialRight=ph,n.partition=oh,n.pick=Gh,n.pickBy=zu,n.property=Hl,n.propertyOf=Fl,n.pull=Ff,n.pullAll=ka,n.pullAllBy=Sa,n.pullAllWith=Ca,n.pullAt=Gf,n.range=ud,n.rangeRight=ld,n.rearg=vh,n.reject=bs,n.remove=Ma,n.rest=Ns,n.reverse=Ta,n.sampleSize=Es,n.set=$u,n.setWith=Ku,n.shuffle=xs,n.slice=Aa,n.sortBy=ah,n.sortedUniq=Ba,n.sortedUniqBy=Ua,n.split=gl,n.spread=Rs,n.tail=Ha,n.take=Fa,n.takeRight=Ga,n.takeRightWhile=Va,n.takeWhile=Wa,n.tap=Ja,n.throttle=Bs,n.thru=ts,n.toArray=Eu,n.toPairs=Vh,n.toPairsIn=Wh,n.toPath=Yl,n.toPlainObject=Su,n.transform=Zu,n.unary=Us,n.union=Vf,n.unionBy=Wf,n.unionWith=qf,n.uniq=qa,n.uniqBy=Xa,n.uniqWith=za,n.unset=Qu,n.unzip=Ya,n.unzipWith=$a,n.update=Ju,n.updateWith=tl,n.values=el,n.valuesIn=nl,n.without=Xf,n.words=Sl,n.wrap=Hs,n.xor=zf,n.xorBy=Yf,n.xorWith=$f,n.zip=Kf,n.zipObject=Ka,n.zipObjectDeep=Za,n.zipWith=Zf,n.entries=Vh,n.entriesIn=Wh,n.extend=Th,n.extendWith=Ah,Nl(n,n),n.add=cd,n.attempt=Jh,n.camelCase=qh,n.capitalize=al,n.ceil=fd,n.clamp=il,n.clone=Gs,n.cloneDeep=Ws,n.cloneDeepWith=qs,n.cloneWith=Vs,n.conformsTo=Xs,n.deburr=sl,n.defaultTo=Al,n.divide=hd,n.endsWith=ul,n.eq=zs,n.escape=ll,n.escapeRegExp=cl,n.every=us,n.find=th,n.findIndex=da,n.findKey=Au,n.findLast=eh,n.findLastIndex=pa,n.findLastKey=Du,n.floor=dd,n.forEach=ds,n.forEachRight=ps,n.forIn=Lu,n.forInRight=Iu,n.forOwn=ju,n.forOwnRight=Nu,n.get=Uu,n.gt=yh,n.gte=gh,n.has=Hu,n.hasIn=Fu,n.head=ma,n.identity=Dl,n.includes=vs,n.indexOf=ba,n.inRange=rl,n.invoke=Bh,n.isArguments=_h,n.isArray=mh,n.isArrayBuffer=bh,n.isArrayLike=Ys,n.isArrayLikeObject=$s,n.isBoolean=Ks,n.isBuffer=wh,n.isDate=Eh,n.isElement=Zs,n.isEmpty=Qs,n.isEqual=Js,n.isEqualWith=tu,n.isError=eu,n.isFinite=nu,n.isFunction=iu,n.isInteger=ru,n.isLength=ou,n.isMap=xh,n.isMatch=uu,n.isMatchWith=lu,n.isNaN=cu,n.isNative=fu,n.isNil=du,n.isNull=hu,n.isNumber=pu,n.isObject=au,n.isObjectLike=su,n.isPlainObject=vu,n.isRegExp=Oh,n.isSafeInteger=yu,n.isSet=Ph,n.isString=gu,n.isSymbol=_u,n.isTypedArray=kh,n.isUndefined=mu,n.isWeakMap=bu,n.isWeakSet=wu,n.join=Ea,n.kebabCase=Xh,n.last=xa,n.lastIndexOf=Oa,n.lowerCase=zh,n.lowerFirst=Yh,n.lt=Sh,n.lte=Ch,n.max=Kl,n.maxBy=Zl,n.mean=Ql,n.meanBy=Jl,n.min=tc,n.minBy=ec,n.stubArray=Gl,n.stubFalse=Vl,n.stubObject=Wl,n.stubString=ql,n.stubTrue=Xl,n.multiply=pd,n.nth=Pa,n.noConflict=Rl,n.noop=Bl,n.now=sh,n.pad=fl,n.padEnd=hl,n.padStart=dl,n.parseInt=pl,n.random=ol,n.reduce=_s,n.reduceRight=ms,n.repeat=vl,n.replace=yl,n.result=Yu,n.round=vd,n.runInContext=Hn,n.sample=ws,n.size=Os,n.snakeCase=$h,n.some=Ps,n.sortedIndex=Da,n.sortedIndexBy=La,n.sortedIndexOf=Ia,n.sortedLastIndex=ja,n.sortedLastIndexBy=Na,n.sortedLastIndexOf=Ra,n.startCase=Kh,n.startsWith=_l,n.subtract=yd,n.sum=nc,n.sumBy=ic,n.template=ml,n.times=zl,n.toFinite=xu,n.toInteger=Ou,n.toLength=Pu,n.toLower=bl,n.toNumber=ku,n.toSafeInteger=Cu,n.toString=Mu,n.toUpper=wl,n.trim=El,n.trimEnd=xl,n.trimStart=Ol,n.truncate=Pl,n.unescape=kl,n.uniqueId=$l,n.upperCase=Zh,n.upperFirst=Qh,n.each=ds,n.eachRight=ps,n.first=ma,Nl(n,function(){var t={};return vi(n,function(e,i){_c.call(n.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),n.VERSION="4.17.4",c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),c(["drop","take"],function(t,e){w.prototype[t]=function(n){n=n===ot?1:zc(Ou(n),0);var i=this.__filtered__&&!e?new w(this):this.clone();return i.__filtered__?i.__takeCount__=Yc(n,i.__takeCount__):i.__views__.push({size:Yc(n,Rt),type:t+(0>i.__dir__?"Right":"")}),i},w.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),c(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==At||3==n;w.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Oo(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),c(["head","last"],function(t,e){var n="take"+(e?"Right":"");w.prototype[t]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");w.prototype[t]=function(){return this.__filtered__?new w(this):this[n](1)}}),w.prototype.compact=function(){return this.filter(Dl)},w.prototype.find=function(t){return this.filter(t).head()},w.prototype.findLast=function(t){return this.reverse().find(t)},w.prototype.invokeMap=rr(function(t,e){return"function"==typeof t?new w(this):this.map(function(n){return Si(n,t,e)})}),w.prototype.reject=function(t){return this.filter(Is(Oo(t)))},w.prototype.slice=function(t,e){t=Ou(t);var n=this;return n.__filtered__&&(t>0||0>e)?new w(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==ot&&(e=Ou(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},w.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},w.prototype.toArray=function(){return this.take(Rt)},vi(w.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,l=e instanceof w,c=u[0],f=l||mh(e),h=function(t){var e=a.apply(n,g([t],u));return o&&d?e[0]:e};f&&i&&"function"==typeof c&&1!=c.length&&(l=f=!1);var d=this.__chain__,p=!!this.__actions__.length,v=s&&!d,y=l&&!p;if(!s&&f){e=y?e:new w(this);var _=t.apply(e,u);return _.__actions__.push({func:ts,args:[h],thisArg:ot}),new r(_,d)}return v&&y?t.apply(this,u):(_=this.thru(h),v?o?_.value()[0]:_.value():_)})}),c(["pop","push","shift","sort","splice","unshift"],function(t){var e=dc[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var n=this.value();return e.apply(mh(n)?n:[],t)}return this[i](function(n){return e.apply(mh(n)?n:[],t)})}}),vi(w.prototype,function(t,e){var i=n[e];if(i){var r=i.name+"";(sf[r]||(sf[r]=[])).push({name:e,func:i})}}),sf[to(ot,_t).name]=[{name:"wrapper",func:ot}],w.prototype.clone=T,w.prototype.reverse=Q,w.prototype.value=nt,n.prototype.at=Qf,n.prototype.chain=es,n.prototype.commit=ns,n.prototype.next=is,n.prototype.plant=os,n.prototype.reverse=as,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=ss,n.prototype.first=n.prototype.head,Ic&&(n.prototype[Ic]=rs),n}();"object"==o(i(158))&&i(158)?(xn._=Un,(r=function(){return Un}.call(n,i,n,t))!==ot&&(t.exports=r)):Pn?((Pn.exports=Un)._=Un,On._=Un):xn._=Un}).call(undefined)}).call(n,i(36)(t))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(362),s=i(a),u=n(363),l=i(u),c=n(364),f=i(c),h=n(365),d=i(h),p=n(366),v=i(p),y=n(367),g=i(y),_=n(95),m=i(_),b=n(368),w=i(b),E=n(94),x=i(E),O=n(369),P=i(O),k=n(371),S=i(k),C=n(372),M=i(C),T=n(373),A=i(T),D=n(374),L=i(D),I=n(375),j=i(I),N=n(376),R=i(N),B=n(377),U=i(B),H=n(378),F=i(H),G=n(379),V=i(G),W=n(381),q=i(W),X=n(382),z=i(X),Y=n(385),$=i(Y),K=n(387),Z=i(K),Q=n(386),J=i(Q),tt=n(388),et=i(tt),nt=n(384),it=i(nt),rt=n(370),ot=i(rt),at=n(383),st=i(at),ut=n(380),lt=i(ut),ct=function(){function t(){r(this,t)}return o(t,null,[{key:"registerCommand",value:function(e){e.registerCommand(t.ADD_EQUIPMENT,s["default"]),e.registerCommand(t.ANALYTICS,l["default"]),e.registerCommand(t.COPY_EQ,f["default"]),e.registerCommand(t.DELETE_EQUIPMENT,d["default"]),e.registerCommand(t.ENABLED_RIGHT_CLICK,v["default"]),e.registerCommand(t.GET_CHILDREN_JSON,g["default"]),e.registerCommand(t.interactive.MOUSE_CURSOR_ENABLED,m["default"]),e.registerCommand(t.KEYBOARD,w["default"]),e.registerCommand(t.LOCK_MOVE_SCALE,x["default"]),e.registerCommand(t.MEC_TOOL,P["default"]),e.registerCommand(t.MOUSE_WHEEL,S["default"]),e.registerCommand(t.NAPE_KEYBOARD,M["default"]),e.registerCommand(t.PASTE_EQ,A["default"]),e.registerCommand(t.PLAY_AND_PAUSE,L["default"]),e.registerCommand(t.REDO_UNDO,j["default"]),e.registerCommand(t.SELECT_ALL,R["default"]),e.registerCommand(t.SELECT_CLICK_ONE,U["default"]),e.registerCommand(t.SELECT_MOVE_BODY_FILTER,F["default"]),e.registerCommand(t.SETTING_ITEM,V["default"]),e.registerCommand(t.STOP_SELECT,q["default"]),e.registerCommand(t.SWITCH_XK,z["default"]),e.registerCommand(t.undo.ADD_EQUIPMENT_UNDO,$["default"]),e.registerCommand(t.undo.NAPE_PROP_UNDO,Z["default"]),e.registerCommand(t.undo.NBDRAG_UNDO,J["default"]),e.registerCommand(t.undo.SELECT_MOVE,et["default"]),e.registerCommand(t.ZOOM_IN_OUT,it["default"]),e.registerCommand(t.MOUSE_EVENT_CONTROL_COMMAND,ot["default"]),e.registerCommand(t.TAKESCREENSHOT_SMALL_COMMAND,st["default"]),e.registerCommand(t.SHOW_ALL_EQUIPMENTS_COMMAND,lt["default"])}}]),t}();ct.ADD_EQUIPMENT="ac9d902f1b9249b7b3c34c1d51b8c9a3",ct.ANALYTICS="68c4283db8074b12df1660b31c0220a9",ct.COPY_EQ="5be133b47e8cc50e0f0facaee840143a",ct.DELETE_EQUIPMENT="459e9a120494e97d1f7f9925e349502e",ct.ENABLED_RIGHT_CLICK="22fa3ed743bb7ca04733d061040aeac1",ct.GET_CHILDREN_JSON="7f0c1564a73fbf00023c8b4c9a698d69",ct.TAKESCREENSHOT_SMALL_COMMAND="f5a35ffbc55e7a9b302d924ec1f42c07",ct.SHOW_ALL_EQUIPMENTS_COMMAND="f63ceebb3ab3c50801617261c153fe46",ct.interactive={},ct.interactive.MOUSE_CURSOR_ENABLED="4bf40f70152cf061641bddd4dba69303",ct.KEYBOARD="388a56dbb62a010dc26a378981346247",ct.LOCK_MOVE_SCALE="569752f96e3ffbe747ff89ddccf51990",ct.MEC_TOOL="e65c9480daf9b530f0d789c8144d11c5",ct.MOUSE_WHEEL="3bbbb45f1132e99c6666d093f0d1d687",ct.NAPE_KEYBOARD="40638a8f2a9400806b76e3b4d333c572",ct.PASTE_EQ="74e9b99180ef7a540bbc2de804e48069",ct.PLAY_AND_PAUSE="9abae87e06ebfc7c5b8efaee243f062d",ct.REDO_UNDO="19ce4d14df0707fab7e06a4650821158",ct.SELECT_ALL="d40dca8f15a41825a96e2d6969673297",ct.SELECT_CLICK_ONE="b24645d7f5aabf04113b1ff740595fb1",ct.SELECT_MOVE_BODY_FILTER="71b5b8ffdab19aec6f97086cfbc927e5",ct.SETTING_ITEM="ecc75c3791d6efae0396a51747648014",ct.STOP_SELECT="22fd8643b8a48d175208456fee3463cf",ct.SWITCH_XK="e9286c3d280abef28ade0a4dd0bb38eb",ct.undo={},ct.undo.ADD_EQUIPMENT_UNDO="523685f586a3b52bcbe48f828e7c614d",ct.undo.NAPE_PROP_UNDO="0a04c9193a138b435e25eecd3f85a593",ct.undo.NBDRAG_UNDO="a405d69232dd01d84614869376eb99f4",ct.undo.SELECT_MOVE="173eb060d294bb714c8c14122f2c92e8",ct.ZOOM_IN_OUT="43c3eb6fae01cdc2d394dd9fea4c2264",ct.MOUSE_EVENT_CONTROL_COMMAND="97c5d45e144579c0e04c1d54d72a435b",e["default"]=ct},function(t,e,n){"use strict";var i=n(3);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=n(20),s=function(){function t(e){i(this,t),this.DEBUG=!1,this.DEBUG_DP=!1,this.DEBUG_SHOW_UNNODE=!1,this.DEBUG_SHOW_UNNODE_WANG=!1,this.DEBUG_GLOW=!1,this.main=e,this.version=-1,this._grade=3,this.pMode=0,this.RESOLUTION=.6,this.confVer="1.0.0",this._versionMap={1:"electrical",2:"optical",3:"acoustic",4:"thermal",5:"mechanics",6:"magnetism",7:"elecfamily",9:"atomicPhysics"},this._packageMap={1:"elec",2:"opt",3:"acoustic",4:"thermal",5:"mec",6:"mag",7:"elecfamily",9:"atomicPhysics"},this.DEFAULT_TXT_COLOR=0,this.ADD_POSITION=new o.Point(500,500),this.__firstSetData_temp=null,this.lockMove=!1,this.TXT_COLOR="#000000",this.isBlackMoveEnable=!0,this.connectMinDistanceNumber=100,this.groundElec=null,this.canCanvasDrag=!0,this.SoundTool=null,this.canvasHeight=0,this.canvasWidth=0,this.zeroPoint={x:0,y:0},this.canvasMaxP={x:0,y:0},this.sendDataToMain=null,this.saveFile="saveFile",this.rsaveFile="rsaveFile",this.localSaveFileExt=".nbx",this.localSaveFileName=null,this.loadFile="loadFile",this.loadFileList="loadFileList",this.preView="preView",this.returnMain="returnMain",this.loadComplete="loadComplete",this.ALL_LABS="ALL_LABS",this.NEW_EXPERIMENT="new_experiment",this.OPEN_HERF="openHerf",this.DENCRYPT_TOOL_JSON="DEncrypt_tool_json",this.GET_SCENE_TOOL="get_scene_tool",this.winresize=!0,this.CommonData={},this.TAKE_SCREENSHOT=!1,this.CUT_IMG_AREA=!0,this.MENU_LOCATION=0,this.SELECTION_ROTATION_BTN_DIS=30,this.SELECTION_RADIUS=15,this.SELECTION_PADDING=20,this.setDefault()}return r(t,[{key:"setDefault",value:function(){this.showElecLine=!0,this.SHOWEQUVALUE=!0,this.SHOWTIPPAO=!0,this.SHOW_FLAG_LABEL=!0,this.SHOW_DIAN_CHANG=!1,this.SHOW_CIGAN=!1,this.SHOW_DENG_SHI=!1,this.VOLUME=1,this.OPEN_NORMAL=!1,this.OPEN_ANGLE=!1,this.SHOW_REFLECT=!1,this.SHOW_DIRECTION=!1,this.LIGHT_DIS_VISIBLE=!1,this.SHOW_ZULI=!1,this.BULB_SHINE_VISIBLE=!1,this.COMP_MESS=!0,this.SENSING_AREA=!0,this.BTN_NAME=!0,this.ZULI_NUM=9.8,this.napeWallW=5e3,this.SHOW_GLOW=!1,this.CIGAN_MODEL=1,this.PaperClipNum=5,this.PinNum=5,this.IronNailNum=5}},{key:"getVersionName",value:function(t){return this._versionMap[t]}},{key:"get_version_from_versionName",value:function(t){for(var e in this._versionMap)if(this._versionMap[e]===t)return e}},{key:"get_versionName_from_version",value:function(t){return this._versionMap[t]}},{key:"getPackageFrom_versionName",value:function(t){var e=void 0;for(e=1;7>=e;e++)if(this._versionMap[e]===t)return this._packageMap[e]}},{key:"isMec",value:function(){return 5===this.version}},{key:"isForceAndMotion",value:function(){return 8===this.version}},{key:"isGradeValid",value:function(t){return t===this.grade||3===t||3===this.grade}},{key:"curModule",get:function(){return this.main.physicsModules.moduleInstances.get(a.Modules[this.version])}},{key:"versionName",get:function(){return this.getVersionName(this.version)}},{key:"grade",get:function(){return this._grade}}]),t}();s.cdn_static="",s.isWinXP=!1,s.MIN_SCALE_VALUE=.5,s.MAX_SCALE_VALUE=4,s.INT_MAX_VALUE=2147483647,s.physics="physics",e["default"]=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.PHY_EVENTS=e.EVENT_TYPES=e.$NAMESPACE=e.EVENT_NAMESPACE=undefined;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(159),a=function(t){return t&&t.__esModule?t:{"default":t}}(o),s=window.TouchEvent||{};s.TOUCH_BEGIN="pointerdown",s.TOUCH_MOVE="pointermove",s.TOUCH_END="pointerup",s.TAP="tap",s.TOUCH_END_OUTSIDE="pointerupoutside",window.TouchEvent=s;var u=e.EVENT_NAMESPACE=".EVENT.PHYSICS.LAB.NB";e.$NAMESPACE=".PHYSICS",e.EVENT_TYPES={CANVAS_INITED:"CANVAS_INITED"+u,CANVAS_LOADED:"CANVAS_LOADED"+u,MODULE_LOADED:"MODULE_LOADED"+u,LOAD_MODULES:"LOAD_MODULES"+u,LIBRARY_LOADED:"nb.phys.library.loaded"};e["default"]=function(){function t(e){i(this,t),this.rootElement=e,this.init()}return r(t,null,[{key:"create",value:function(t){if(!t)throw Error("You must specify the event scope element for safety usage.");return(0,a["default"])(t)}}]),r(t,[{key:"init",value:function(){}}]),t}();e.PHY_EVENTS={CANVAS_START:"CANVAS_START"+u,CANVAS_MOVE:"CANVAS_MOVE"+u,CANVAS_END:"CANVAS_END"+u,DOCUMENT_END:"DOCUMENT_END"+u,BLACK_TOUCH_BEGIN:"blackTouchBegin",BLACK_TOUCH_MOVE:"blackTouchMove",BLACK_TOUCH_END:"blackTouchEnd",BLACK_TOUCH_STOP:"blackTouchStop",BLACK_CLICK:"clickBlanck",FRESH_EQUIP_DATA:"freshEquipData",LOAD_EQ_COMPLETE:"freshToolBoxOK",BPOSTER_DPSP_DOWN:"bposter_dpSP_down",BPOSTER_DPSP_MOVE:"bposter_dpSP_move",SET_WORK_POWER_REPAIR:"setWorkPowerRepair",SET_WORK_POWER_BREAK:"setWorkPowerBreak",CREATION_COMPLETE:"creationComplete",ADD_CREATION_COMPLETE:"added_creationComplete",DATA_CHANGES:"dataChanges",LISTEN_FRAME_2_CALLBACK:"listenFrame2CallBack",TIP_TOP_BEGIN:"tipTopBegin"}},function(t,e,n){"use strict";var i=n(8),r=n(111),o=n(83),a=Object.defineProperty;e.f=n(13)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(140),o="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self;t.exports=r||o||Function("return this")()},function(t,e,n){"use strict";t.exports=!n(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){"use strict";var i=n(1),r=n(33),o=n(14);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){"use strict";var i=n(75),r=n(27);t.exports=function(t){return i(r(t))}},function(t,e,n){"use strict";var i=n(59),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){"use strict";var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,n){"use strict";function i(t){var e=void 0===t?"undefined":r(t);return null!=t&&("object"==e||"function"==e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(){}e.__esModule=!0,e.VersionModules=e.Modules=e.dataVersion=undefined,e.updateSettings=r;var o=n(103),a=i(o),s=n(94),u=(i(s),e.dataVersion=3,e.Modules={LOADING:"LOADING",ELECTRICITY:"ELECTRICITY",OPTICAL:"OPTICAL",ACOUSTIC:"ACOUSTIC",THERMAL:"THERMAL",MECHANICS:"MECHANICS",ELECFAMILY:"ELECFAMILY",FORCEANDMOTION:"FORCEANDMOTION",ATOMICPHYSICS:"ATOMICPHYSICS",NAPELIB:"NAPELIB",dependModule:{MECHANICS:"NAPELIB",OPTICAL:"NAPELIB"}});(0,a["default"])(u,e.VersionModules={1:u.ELECTRICITY,2:u.OPTICAL,3:u.ACOUSTIC,4:u.THERMAL,5:u.MECHANICS,7:u.ELECFAMILY,8:u.FORCEANDMOTION,9:u.ATOMICPHYSICS,10:u.NAPELIB}),e["default"]={modules:[u.ELECTRICITY],defaultModule:null,width:-1,height:-1,allowEdit:!0,editRectEnabled:!1,isPlayer:!1,preventDefault:!0,isLockMove:!0,preventCursor:!1}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(94);e["default"]={del:{PREPARE_DELETE:"del.prepareDelete",DELETE:"del.delete",ADDED:"del.added"},change:{ZOOM:"change.zoom",ZOOM_COMPLETE:"change.zoom.complete"},communicate:{angular:{CHANGE_PANEL_STATUS:"communicate.angular.changePanelStatus",KEYBOARD_CHANGE_STATUS:"communicate.angular.keyboardChangeStatus",MOVE_SCALE:"communicate.angular.phy.moveScale"}},ADDED_TO_STAGE:"addedToStage",REMOEVD_FROM_STAGE:"removedFromStage",DATA_CHANGES:"dataChanges",CANVAS_RUN:"CANVAS_RUN",COMPONENT_INITED:"componentInited"}},function(t,e,n){"use strict";var i=n(48);t.exports=function(t,e,n){if(i(t),e===undefined)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";var i=n(11),r=n(41);t.exports=n(13)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(43)("meta"),o=n(3),a=n(18),s=n(11).f,u=0,l=Object.isExtensible||function(){return!0},c=!n(14)(function(){return l(Object.preventExtensions({}))}),f=function(t){s(t,r,{value:{i:"O"+ ++u,w:{}}})},h=function(t,e){if(!o(t))return"symbol"==(void 0===t?"undefined":i(t))?t:("string"==typeof t?"S":"P")+t;if(!a(t,r)){if(!l(t))return"F";if(!e)return"E";f(t)}return t[r].i},d=function(t,e){if(!a(t,r)){if(!l(t))return!0;if(!e)return!1;f(t)}return t[r].w},p=function(t){return c&&v.NEED&&l(t)&&!a(t,r)&&f(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:d,onFreeze:p}},function(t,e,n){"use strict";var i=n(5),r=n(23),o=n(18),a=n(43)("src"),s=Function.toString,u=(""+s).split("toString");n(33).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(l&&(o(n,a)||r(n,a,t[e]?""+t[e]:u.join(e+""))),t===i?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,n){"use strict";var i=n(27);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var i=n(123),r=n(73);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);t.length>e;e++)n[e]=t[e];return n}return Array.from(t)}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){var n;console&&console[t]&&(n=console)[t].apply(n,r(e))}};e["default"]=new(function(){function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i(this,t),this.init(e,n)}return t.prototype.init=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||a,this.options=e,this.debug=e.debug},t.prototype.setDebug=function(t){this.debug=t},t.prototype.log=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)},t.prototype.warn=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)},t.prototype.error=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return this.forward(e,"error","")},t.prototype.deprecate=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)},t.prototype.forward=function(t,e,n,i){return i&&!this.debug?null:("string"==typeof t[0]&&(t[0]=""+n+this.prefix+" "+t[0]),this.logger[e](t))},t.prototype.create=function(e){return new t(this.logger,o({prefix:this.prefix+":"+e+":"},this.options))},t}())},function(t,e,n){"use strict";function i(t,e){var n=o(t,e);return r(n)?n:undefined}var r=n(275),o=n(301);t.exports=i},function(t,e,n){"use strict";var i=n(4)("unscopables"),r=Array.prototype;r[i]==undefined&&n(23)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){"use strict";var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,n){"use strict";var i=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=i)},function(t,e,n){"use strict";var i=n(3);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";function i(t){return null==t?t===undefined?u:s:l&&l in Object(t)?o(t):a(t)}var r=n(85),o=n(299),a=n(326),s="[object Null]",u="[object Undefined]",l=r?r.toStringTag:undefined;t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(9),a=function(t){return t&&t.__esModule?t:{"default":t}}(o),s=function(){function t(){i(this,t)}return r(t,null,[{key:"load",value:function(e,n,i){t.queue.push({main:e,pathArr:n,complete:i}),t.__loadNext()}},{key:"__loadNext",value:function(){if(!t.isLoading&&t.queue.length){t.isLoading=!0;var e=t.queue.shift(),n=e.main,i=e.pathArr,r=e.complete,o=0,s=0,u=i.length,l=function(){o===u&&s===u&&(t.isLoading=!1,null!==r&&undefined!==r&&r(),t.__loadNext())};i.forEach(function(e){t.equipmentConfMap[e]?(o++,s++,l()):(n.registerEquipment(e).then(function(){o++,l()}),PIXI.loader.add(a["default"].cdn_static+e+".json").load(function(){s++,l()}))})}}}]),t}();s.equipmentConfMap={},s.queue=[],s.isLoading=!1,e["default"]=s},function(t,e,n){"use strict";e.__esModule=!0,e["default"]={REMOVE_EQUIPMENT_END:"removeEquipmentEnd",REMOVE_EQUIPMENT:"removeEquipment",SET_DATA_COMPLETE:"setDataComplete",CANVAS_DOM_CLICK:"canvasDomClick",BIND_ELEC_WIRE:"bindElecWire",UNBIND_ELEC_WIRE:"unBindElecWire",xxxxxxxxxxx:"xxxxxxxxxxxxxxx"}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var i=n(11).f,r=n(18),o=n(4)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";var i=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++i+r).toString(36))}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e["default"]=function(){function t(){i(this,t),this.observers={}}return t.prototype.on=function(t,e){var n=this;t.split(" ").forEach(function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})},t.prototype.off=function(t,e){var n=this;this.observers[t]&&this.observers[t].forEach(function(){if(e){var i=n.observers[t].indexOf(e);i>-1&&n.observers[t].splice(i,1)}else delete n.observers[t]})},t.prototype.emit=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];if(this.observers[t]){[].concat(this.observers[t]).forEach(function(t){t.apply(undefined,n)})}if(this.observers["*"]){[].concat(this.observers["*"]).forEach(function(e){var i;e.apply(e,(i=[t]).concat.apply(i,n))})}},t}()},function(t,e,n){"use strict";function i(t,e,n,i){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=i?i(n[l],t[l],l,n,t):undefined;c===undefined&&(c=t[l]),a?o(n,l,c):r(n,l,c)}return n}var r=n(136),o=n(137);t.exports=i},function(t,e,n){"use strict";function i(t){return null!=t&&"object"==(void 0===t?"undefined":r(t))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=i},function(t,e,n){"use strict";function i(){}e.__esModule=!0,e["default"]=i},function(t,e,n){"use strict";t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";t.exports=function(t,e,n,i){if(!(t instanceof e)||i!==undefined&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){"use strict";var i=n(22),r=n(75),o=n(26),a=n(17),s=n(228);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,f=6==t,h=5==t||f,d=e||s;return function(e,s,p){for(var v,y,g=o(e),_=r(g),m=i(s,p,3),b=a(_.length),w=0,E=n?d(e,b):u?d(e,0):undefined;b>w;w++)if((h||w in _)&&(v=_[w],y=m(v,w,g),t))if(n)E[w]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:E.push(v)}else if(c)return!1;return f?-1:l||c?c:E}}},function(t,e,n){"use strict";var i=n(5),r=n(1),o=n(25),a=n(57),s=n(24),u=n(53),l=n(49),c=n(3),f=n(14),h=n(76),d=n(42),p=n(231);t.exports=function(t,e,n,v,y,g){var _=i[t],m=_,b=y?"set":"add",w=m&&m.prototype,E={},x=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!c(t)?undefined:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof m&&(g||w.forEach&&!f(function(){(new m).entries().next()}))){var O=new m,P=O[b](g?{}:-0,1)!=O,k=f(function(){O.has(1)}),S=h(function(t){new m(t)}),C=!g&&f(function(){for(var t=new m,e=5;e--;)t[b](e,e);return!t.has(-0)});S||(m=e(function(e,n){l(e,m,t);var i=p(new _,e,m);return n!=undefined&&u(n,y,i[b],i),i}),m.prototype=w,w.constructor=m),(k||C)&&(x("delete"),x("has"),y&&x("get")),(C||P)&&x(b),g&&w.clear&&delete w.clear}else m=v.getConstructor(e,t,y,b),a(m.prototype,n),s.NEED=!0;return d(m,t),E[t]=m,r(r.G+r.W+r.F*(m!=_),E),g||v.setStrong(m,t,y),m}},function(t,e,n){"use strict";var i=n(23),r=n(25),o=n(14),a=n(27),s=n(4);t.exports=function(t,e,n){var u=s(t),l=n(a,u,""[t]),c=l[0],f=l[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,c),i(RegExp.prototype,u,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)}))}},function(t,e,n){"use strict";var i=n(22),r=n(116),o=n(112),a=n(8),s=n(17),u=n(131),l={},c={},f=t.exports=function(t,e,n,f,h){var d,p,v,y,g=h?function(){return t}:u(t),_=i(n,f,e?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=s(t.length);d>m;m++)if((y=e?_(a(p=t[m])[0],p[1]):_(t[m]))===l||y===c)return y}else for(v=g.call(t);!(p=v.next()).done;)if((y=r(v,_,p.value,e))===l||y===c)return y};f.BREAK=l,f.RETURN=c},function(t,e,n){"use strict";t.exports=!1},function(t,e,n){"use strict";var i=n(40),r=n(41),o=n(16),a=n(83),s=n(18),u=n(111),l=Object.getOwnPropertyDescriptor;e.f=n(13)?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(e){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){"use strict";e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var i=n(25);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){"use strict";var i=n(59),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),0>t?r(t+e,0):o(t,e)}},function(t,e,n){"use strict";var i=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:i)(t)}},function(t,e,n){"use strict";function i(t){return null==t?"":""+t}function r(t,e,n){t.forEach(function(t){e[t]&&(n[t]=e[t])})}function o(t,e,n){function i(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function r(){return!t||"string"==typeof t}for(var o="string"!=typeof e?[].concat(e):e.split(".");o.length>1;){if(r())return{};var a=i(o.shift());!t[a]&&n&&(t[a]=new n),t=t[a]}return r()?{}:{obj:t,k:i(o.shift())}}function a(t,e,n){var i=o(t,e,Object);i.obj[i.k]=n}function s(t,e,n,i){var r=o(t,e,Object),a=r.obj,s=r.k;a[s]=a[s]||[],i&&(a[s]=a[s].concat(n)),i||a[s].push(n)}function u(t,e){var n=o(t,e),i=n.obj,r=n.k;return i?i[r]:undefined}function l(t,e,n){for(var i in e)i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof e[i]||e[i]instanceof String?n&&(t[i]=e[i]):l(t[i],e[i],n):t[i]=e[i];return t}function c(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function f(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return h[t]}):t}e.__esModule=!0,e.makeString=i,e.copy=r,e.setPath=a,e.pushPath=s,e.getPath=u,e.deepExtend=l,e.regexEscape=c,e.escape=f;var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}},function(t,e,n){"use strict";function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=n(312),o=n(313),a=n(314),s=n(315),u=n(316);i.prototype.clear=r,i.prototype["delete"]=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=u,t.exports=i},function(t,e,n){"use strict";function i(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}var r=n(89);t.exports=i},function(t,e,n){"use strict";function i(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}var r=n(310);t.exports=i},function(t,e,n){"use strict";t.exports=n(30)(Object,"create")},function(t,e,n){"use strict";t.exports=Array.isArray},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(413),o=i(r),a=n(7),s=i(a),u=n(9),l=(i(u),{});l.event={PREPARE_DRAG:"prepareDrag",STOP_DRAG:"stopDrag",START_DRAG:"startDrag",DRAG_MOVE:"dragMove"},l.idMap={},l.napeDragMap={},l.addDrag=function(t,e,n,i,r,a){n=n||{};var u=t.dragArea||t;l.removeDrag(t),t.dragFuncObj=i,t.__$conf=n,t.dragFuncObj&&(t.dragFuncObj["this"]=r||t),t.dragFuncObj&&(t.dragFuncObj.dis=t),t.identifier=null;var c=function(i){var r=null;if(!(t.__$conf&&t.__$conf.isLock||t.dragIdentifier!==undefined)){i.stopPropagation();var c=void 0,f=void 0;if(i.data.originalEvent.changedTouches){var h=i.data.originalEvent.changedTouches;$.each(h,function(e,n){if(t.dragIdentifier===undefined)return t.dragIdentifier=n.identifier,l.idMap[n.identifier]=t,c={x:n.globalX,y:n.globalY},!1})}else c={x:i.data.global.x,y:i.data.global.y};if(c&&(t._lastTouchPoint_={x:t.x,y:t.y},t.emit(l.event.PREPARE_DRAG,{target:t,data:i.data}),f=t.parent.worldTransform.applyInverse(c),i.globalP=new PIXI.Point(c.x,c.y),t.isTouchDown=!0,!i.data.isPropagationStopped&&(!t.dragFuncObj||!t.dragFuncObj.beginFore||t.dragFuncObj.beginFore.call(t.dragFuncObj["this"],i)))){!1===t.cantToTop&&t.parent.addChild(t);var d=t.toLocal(c,t.stage),p={x:d.x,y:d.y};p=o["default"].rotaPoint(p,{x:0,y:0},t.rotation),p.x*=t.scale.x,p.y*=t.scale.y,n.bringToFront&&t.parent.addChild(t);var v=function(n){if(!t.__$conf||!t.__$conf.isLock){var i=void 0,o=null;if(n.data.originalEvent.changedTouches){var s=n.data.originalEvent.changedTouches;if($.each(s,function(e,n){if(n.identifier===t.dragIdentifier)return o=n,!1}),!o)return;i={x:o.globalX,y:o.globalY}}else i=n.data.global;if(i&&i.x!==undefined&&(n.globalP=new PIXI.Point(i.x,i.y),t.isTouchDown&&!n.data.isPropagationStopped&&(!t.dragFuncObj||!t.dragFuncObj.moveFore||t.dragFuncObj.moveFore.call(t.dragFuncObj["this"],n))&&!0!==t.cannotSystemDrag)){var u=t.parent.worldTransform.applyInverse(i),c={};t.dragRect?c=t.dragRect:!e||!0!==e.enabled&&e.enabled!==undefined?t.root.globalConfig.isMec()&&(c={x:-t.root.limitW,y:-t.root.limitW,width:2*t.root.limitW,height:2*t.root.limitW,global:!0}):c={x:e.x,y:e.y,width:e.width,height:e.height};var h=u.x-f.x,d=u.y-f.y;!a||a.enabled!==undefined&&!0!==a.enabled||(Math.abs(h)<a.x&&(h=0),Math.abs(d)<a.y&&(d=0));var p=t.x+h,v=t.y+d;if(t.notLimitRect);else if(c.global){var y={x:p,y:v};t.root.view.toLocal(y,t.parent),p=y.x,v=y.y,c.x>p?p=c.x:p>c.x+c.width&&(p=c.x+c.width),c.y>v?v=c.y:v>c.y+c.height&&(v=c.y+c.height),y.x=p,y.y=v;var g=t.parent.toLocal(y,t.root.view);p=g.x,v=g.y}else c.x>p?(p=c.x,t.emit("outLeftBounds")):p>c.x+c.width&&(p=c.x+c.width,t.emit("outRightBounds")),c.y>v?(v=c.y,t.emit("outTopBounds")):v>c.y+c.height&&(v=c.y+c.height,t.emit("outBottomBounds"));f.x=u.x,f.y=u.y,t.napeBody?r.func_touchMove(i):(t.x=p,t.y=v,t.component&&(t.component.propertyChange=!0)),t.emit(l.event.DRAG_MOVE,{target:t,data:n.data}),t.dragFuncObj&&t.dragFuncObj.moveEnd&&t.dragFuncObj.moveEnd.call(t.dragFuncObj["this"],n)}}},y=function(e){_.apply(t,e)},g=function(e){_.apply(t,e)},_=function(){u.removeListener(TouchEvent.TOUCH_MOVE,v),u.removeListener(TouchEvent.TOUCH_END,g),u.removeListener(TouchEvent.TOUCH_END_OUTSIDE,y);var e=void 0;if(i.data.originalEvent.changedTouches){var n=i.data.originalEvent.changedTouches;if($.each(n,function(n,i){if(i.identifier===t.dragIdentifier)return e={x:i.globalX,y:i.globalY},delete l.idMap[t.dragIdentifier],delete t.dragIdentifier,!1}),t.dragIdentifier!==undefined)return}else e=i.data.global;delete t.__touchEnd__,t.napeBody&&r.func_touchEnd(),t.component&&t.component.isMechanics||t.root.execute(s["default"].undo.NBDRAG_UNDO,{dis:t}),t.isTouchDown=!1,t.dragFuncObj&&t.dragFuncObj.endFore&&!t.dragFuncObj.endFore.call(t.dragFuncObj["this"],i)||(t.root.emit("endFore",{target:t.dragFuncObj["this"]}),i.data.isPropagationStopped||e&&e.x!==undefined&&(i.globalP=new PIXI.Point(e.x,e.y),t.emit(l.event.STOP_DRAG,{target:this,evt:i,data:i.data}),t.isDragging=!1,t.dragFuncObj&&t.dragFuncObj.endEnd&&t.dragFuncObj.endEnd.call(t.dragFuncObj["this"],i),t.root.emit("endEnd",{target:t.dragFuncObj["this"]})))};u.addEventListener(TouchEvent.TOUCH_MOVE,v),u.addEventListener(TouchEvent.TOUCH_END_OUTSIDE,y),u.addEventListener(TouchEvent.TOUCH_END,g),t.emit(l.event.START_DRAG,{target:t,data:i.data}),t.isDragging=!0,t.__touchEnd__=g,t.dragFuncObj&&t.dragFuncObj.beginEnd&&t.dragFuncObj.beginEnd.call(t.dragFuncObj["this"],i)}}};u.addEventListener(TouchEvent.TOUCH_BEGIN,c),t.__touchBegin__=c},l.removeDrag=function(t){t.removeListener(TouchEvent.TOUCH_BEGIN,t.__touchBegin__),t.__touchEnd__&&(t.__touchEnd__(),t.__touchEnd__=null),t.dragFuncObj=null,delete t.__touchBegin__},l.hasDrag=function(t){return t.__touchBegin__!==undefined},e["default"]=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function i(r,o){try{var a=e[r](o),s=a.value}catch(u){return void n(u)}if(!a.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}return i("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(105),l=i(u),c=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=function N(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:N(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},h=n(0),d=n(159),p=i(d),v=n(6),y=n(10),g=n(10),_=i(g),m=n(68),b=n(415),w=i(b),E=n(7),x=i(E),O=n(21),P=i(O),k=n(359),S=i(k),C=n(70),M=i(C),T=n(37),A=i(T),D=n(38),L=i(D),I=n(20),j=function(t){function e(t,n){o(this,e);var i=(0,v.extend)({},m.DefaultSettings,n||{}),r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.rootElement=t,PIXI.settings.RESOLUTION=r.globalConfig.RESOLUTION,PIXI.settings.FILTER_RESOLUTION=.5,r.canvas=document.createElement("canvas"),r.eventManager=_["default"].create(r.canvas),r.context={eventManager:r.eventManager,settings:i},i.yndingzhi&&(r.yndingzhi=!0),r.ngZone=i.ngZone,r.init(),window.__nshow=function(){(0,p["default"])(".nb-phy-editor").show(),(0,p["default"])(".phy-modal").show(),(0,p["default"])("#phyEditorFrame").hide(),window.nmain&&window.nmain.run()},window.__nhide=function(){(0,p["default"])(".nb-phy-editor").hide(),(0,p["default"])(".phy-modal").hide(),(0,p["default"])("#phyEditorFrame").show(),window.nmain&&window.nmain.stop()},r}return s(e,t),c(e,[{key:"init",value:function(){function t(){return n.apply(this,arguments)}var n=r(l["default"].mark(function i(){var t=this;return l["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this._isInited=!1,this.isPlayer=this.context.settings.isPlayer,this.editRectEnabled=this.context.settings.editRectEnabled,this.labEditRect.enabled=this.editRectEnabled,this.globalConfig._grade=this.context.settings.grade||3,this.eventManager.on(g.EVENT_TYPES.MODULE_LOADED,function(){t.dispatchEvent(g.EVENT_TYPES.CANVAS_LOADED,{target:t}),t._isInited||(t._isInited=!0,t.dispatchEvent(g.EVENT_TYPES.CANVAS_INITED,{target:t}),t.editRectEnabled&&t.showLabEditRect({outWidth:(0,p["default"])(t.canvas).width(),outHeight:(0,p["default"])(t.canvas).height(),width:640,height:360}),t.sendShaderAnalytics())}),n.next=9,this.initCanvas();case 9:this.viewScale=2,this.mouseManager.init(),this.dispatchEvent(g.EVENT_TYPES.LIBRARY_LOADED),this.loadModules();case 13:case"end":return n.stop()}},i,this)}));return t}()},{key:"sendShaderAnalytics",value:function(){this.execute(x["default"].ANALYTICS,{type:"shader",name:this.globalConfig.main.renderer.type===PIXI.RENDERER_TYPE.WEBG?"支持":"不支持"})}},{key:"getLibraryData",value:function(){var t=this,e=(0,v.cloneDeep)(this.toolBox.originData);if(!e)return null;var n={};return e.forEach(function(e){var i=[];t.globalConfig.isGradeValid(e.grade)&&e.list&&e.list.length&&e.list.forEach(function(e){e.visible&&t.globalConfig.isGradeValid(e.grade)&&(e.lan_key&&(e.name=t.language.getLocaleStr(e.lan_key)),i.push(e))}),n[e.id]={grade:e.grade,className:e.type,equipments:i,toolsName:e.name}}),n}},{key:"initCanvas",value:function(){function t(){return n.apply(this,arguments)}var n=r(l["default"].mark(function i(){var t;return l["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isDestroy){n.next=2;break}return n.abrupt("return");case 2:return this.freshUserSettings(),this.origonPosition=null,this.setIsWinXP(),this.multiMove=!1,this.rootElement&&this.switchPareDom(this.rootElement),this._canvasWHArr=[0,0],this.renderer=PIXI.autoDetectRenderer(e.W,e.H,{view:this.canvas,transparent:!0,antialias:!1,preserveDrawingBuffer:!1}),this.surpportWebgl=this.renderer.type===PIXI.RENDERER_TYPE.WEBGL&&this.supportWebGl2(),t=this.renderer.view,t.width=e.W,t.height=e.H,this.stage.addChild(this.backG),this.stage.addChild(this.schoolNameTxt),this.stage.addChild(this.view),this.stage.addChild(this.skinview),this.stage.addChild(this.labEditRect),this.view.init(),this.skinview.init(),m.ParticleUtil.init(),this.phyTool.init(),this.startLoadTool.init(),this.backgroundManager.init(),this.glowManager.init(),this.initListenHandle(),this.execute(x["default"].ENABLED_RIGHT_CLICK,{enabled:!1}),this.execute(x["default"].KEYBOARD),this.context.settings.preventDefault&&this.execute(x["default"].MOUSE_EVENT_CONTROL_COMMAND),this.drawStack.addChild(this.arcShape),this.arcTxt=new PIXI.Text("0°",{font:"30px 微软雅黑",fill:this.globalConfig.DEFAULT_TXT_COLOR,align:"left"}),this.drawStack.addChild(this.arcTxt),this.arcTxt.visible=!1,this.otherContainer.addChild(this.magDraw),this._renderProx=this._render.bind(this),this._renderProx(),this.resizeCanvasWH(),n.abrupt("return",Promise.all([this.globalConfig.dataTool.init(),this.globalConfig.SoundTool.init(),this.addCompManager.init(),M["default"].loadLanguage(this.context.settings.useLan),this.loadSkin()]));case 39:case"end":return n.stop()}},i,this)}));return t}()},{key:"loadSkin",value:function(){var t=this;return new Promise(function(e){return A["default"].load(t,["skin"],e)})}},{key:"hasPropertyChange",value:function(){for(var t=this.getEquipmentArr(!0),e=t.length,n=0;e>n;n++){if(t[n].propertyChange)return!0}return!1}},{key:"hadSavePropertyComplete",value:function(){for(var t=this.getEquipmentArr(!0),e=t.length,n=0;e>n;n++){t[n].propertyChange=!1}}},{key:"setIsWinXP",value:function(){try{if(window.cordova)return;if(this.globalConfig.isWinXP=h.M.checkIsWinXP())return;if(window.ActiveXObject||"ActiveXObject"in window)return;var t=this.getBrowserInfo(),e=t[0].split("/");if(!e||2!==e.length)return;if("chrome"===e[0]){if(50>/\d./.exec(e[1])[0]-0)return void(this.globalConfig.isWinXP=!0)}else(window.ActiveXObject||"ActiveXObject"in window)&&(this.globalConfig.isWinXP=!0)}catch(n){}}},{key:"supportWebGl2",value:function(){var t=document.createElement("canvas");return!(!t.getContext("webgl2")&&!t.getContext("experimental-webgl2"))}},{key:"getBrowserInfo",value:function(){var t=navigator.userAgent.toLowerCase(),e=/msie [\d.]+;/gi,n=/firefox\/[\d.]+/gi,i=/chrome\/[\d.]+/gi,r=/safari\/[\d.]+/gi;return t.indexOf("msie")>0?t.match(e):t.indexOf("firefox")>0?t.match(n):t.indexOf("chrome")>0?t.match(i):t.indexOf("safari")>0&&0>t.indexOf("chrome")?t.match(r):void 0}},{key:"loadModules",value:function(){function t(t){return n.apply(this,arguments)}var n=r(l["default"].mark(function i(t){var n;return l["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.dispatchEvent(e.LOAD_MODULES,{type:"begin"}),!this.isDestroy){i.next=4;break}return this.dispatchEvent(e.LOAD_MODULES,{type:"end"}),i.abrupt("return",1);case 4:return this.clear(),this.context.settings.defaultModule=null,(0,v.extend)(this.context.settings,t),this.context.settings.main=this,n=void 0,this.physicsModules?n=this.context.settings:this.physicsModules=new w["default"](this.context),i.next=12,this.physicsModules.loadModules(n);case 12:return this.dispatchEvent(e.LOAD_MODULES,{type:"end"}),i.abrupt("return",1);case 14:case"end":return i.stop()}},i,this)}));return t}()},{key:"render",value:function(t){this.setData(t)}},{key:"renderComponent",value:function(t){this.physicsData&&t&&this.physicsData.components.map(function(e){return e._id===t._id&&(e=t),e})}},{key:"initListenHandle",value:function(){var t=this,e=void 0;this.backGTouchId=h.M.addTouch(this.backG,{tab:function(t){},begin:function(n){e=h.M.getMouseXY(n),t.isBlackDown=!0,t.dispatchEvent(y.PHY_EVENTS.BLACK_CLICK,n),t.dispatchEvent(y.PHY_EVENTS.BLACK_TOUCH_BEGIN,n)},move:function(e){e.outData.canTab||t.dispatchEvent(y.PHY_EVENTS.BLACK_TOUCH_MOVE,e)},end:function(n){var i=h.M.getMouseXY(n);e&&i&&5>h.M.getPointLen(e,i)&&t.deSelected(),t.dispatchEvent(y.PHY_EVENTS.BLACK_TOUCH_END,n)}},this,{time:300,dis:10}),this.mousewheelHandleProx=function(e){t.mousewheelHandle(e)},(0,p["default"])(this.canvas).on("mousewheel"+y.$NAMESPACE,this.mousewheelHandleProx),this.resizeHandleProx=function(){t.resize()},this._canvasDomClickHandleProx=function(e){t._canvasDomClickHandle(e)},this.globalConfig.winresize&&(0,p["default"])(window).on("resize"+y.$NAMESPACE,this.resizeHandleProx),(0,p["default"])(document).on("mousedown"+y.$NAMESPACE+" touchstart"+y.$NAMESPACE,this._canvasDomClickHandleProx),this._canvasDomUpHandleProx=this._canvasDomUpHandle.bind(this),(0,p["default"])(document).on("mouseup"+y.$NAMESPACE+" touchend"+y.$NAMESPACE,this._canvasDomUpHandleProx),this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.addEventListener(P["default"].CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"_canvasDomUpHandle",value:function(){this.isBlackDown=!1}},{key:"canvasRunHandle",value:function(t){t.isRunning?this.loopId||this._renderProx():(cancelAnimationFrame(this.loopId),this.loopId=null)}},{key:"mousewheelHandle",value:function(t){this.execute(x["default"].MOUSE_WHEEL,t),t.preventDefault()}},{key:"resize",value:function(){this.canRender&&this.resizeCanvasWH()}},{key:"getViewRect",value:function(t){var e=t.toLocal(this.globalConfig.zeroPoint,this.stage),n=t.toLocal(this.globalConfig.canvasMaxP,this.stage);return new h.Rectangle(e.x,e.y,n.x-e.x,n.y-e.y)}},{key:"getCanvasPToView",value:function(t,e){var n=new h.Point(0,0);return this.mapPositionToPoint(n,t,e),n=this.view.toLocal(n,this.stage)}},{key:"resizeCanvasWH",value:function(){if(!this.isDestroy&&(0,p["default"])(window).width()){var t=PIXI.settings.RESOLUTION,n=this.canvas,i=this.globalConfig.canvasStyleW>0?this.globalConfig.canvasStyleW:(0,p["default"])(window).width(),r=this.globalConfig.canvasStyleH>0?this.globalConfig.canvasStyleH:(0,p["default"])(window).height();if(i||i){i===r&&(r=i-1);var o=i/r,a=e.W/e.H;o>a?(n.width=e.W*(o/a),n.height=e.H):(n.height=e.H/(o/a),n.width=e.W),this.renderer.resize(n.width,n.height),n.style.width=i+"px",n.style.height=r+"px",this.W=n.width/t,this.H=n.height/t,this.globalConfig.canvasMaxP={x:this.W,y:this.H},this.canvasDomWidth=i,this.canvasDomHeight=r,this.canvasDomOffset=(0,p["default"])(n).offset(),this.backG.clear(),this.backG.beginFill(0),this.backG.drawRect(0,0,this.W,this.H),this.backG.endFill(),this.globalConfig.canvasWidth=i,this.globalConfig.canvasHeight=r,this._canvasWHArr[0]=this.globalConfig.canvasWidth,this._canvasWHArr[1]=this.globalConfig.canvasHeight,this.freshSchoolNameLocation(r),this.labEditRect.resize()}}}},{key:"_canvasDomClickHandle",value:function(t){this.canRender&&(this.curElec&&this._checkClickSetting((0,p["default"])(t.target)),this.dispatchEvent(MouseEvent.CANVAS_DOM_CLICK,t))}},{key:"_checkClickSetting",value:function(t){for(var e=!1,n=0;20>n++;){var i=(0,v.get)(t,"0.tagName");if(i=i?i.toLowerCase():i,t.hasClass("lab-canvas-click-flag")){e=!0;break}if("canvas"===i){e=!0;break}if("phy-app"===i||"body"===i)break;if(!t)break;t=t.parent()}e||this.deSelected()}},{key:"execute",value:function(t,e){if(this.manager){var n=void 0;try{n=this.manager.execute(t,e)}catch(e){}return n}}},{key:"freshRender",value:function(){this.isDestroy||this.renderer.render(this)}},{key:"_render",value:function(){this.canRender&&(this.view.selectionLayer.zoom.update(),5===this.globalConfig.version&&this.view.activeZoomGesture&&(this.activeModule.napeEngine.floor.nochange=!1),this.requestAnimationLoop(),this.freshRender()),this.loopId=requestAnimationFrame(this._renderProx)}},{key:"switchToFamilyOKHandle",value:function(){this.dispatchEvent(y.PHY_EVENTS.LOAD_EQ_COMPLETE)}},{key:"setngZone",value:function(t){this.ngZone=t}},{key:"_setWorkPowerBreakHandle",value:function(t){this.dispatchEvent(y.PHY_EVENTS.FRESH_EQUIP_DATA,t)}},{key:"_setWorkPowerRepairHandle",value:function(t){this.dispatchEvent(y.PHY_EVENTS.FRESH_EQUIP_DATA,t)}},{key:"removeListeners",value:function(){(0,p["default"])(this.canvas).unbind()}},{key:"run",value:function(){var t=f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"run",this).call(this);return this.resizeCanvasWH(),t}},{key:"stop",value:function(){return f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this)}},{key:"destroy",value:function(){h.M.removeTouch(this.backG,this.backGTouchId),this.clear(),this.renderer&&(this.renderer.destroy(),this.renderer=null,this.removeEventListener(P["default"].CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandleProxy=null,this._canvasDomClickHandleProx=null,this.mousewheelHandleProx=null,this._renderProx=null,this.resizeHandleProx=null,this.labEditRect.destroy(),this.removeChild(this.labEditRect),this.labEditRect=null,cancelAnimationFrame(this.loopId),this.loopId=null,this.removeListeners(),this.physicsModules&&(this.physicsModules.destroy(),this.physicsModules=null),(0,p["default"])(window).off(y.$NAMESPACE),(0,p["default"])(document).off(y.$NAMESPACE),(0,p["default"])(this.canvas).off(y.$NAMESPACE),this.eventManager=null,f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroyfindBindEA",this).call(this))}},{key:"cachePool",get:function(){return this.activeModule?this.activeModule.cachePool:null}}]),e}(S["default"]);j.W=2048,j.H=1536,j.PHY_EVENTS=y.PHY_EVENTS,j.NBCommand=x["default"],j.NBEvent=P["default"],j.ModuleEvent=L["default"],j.LOAD_MODULES=g.EVENT_TYPES.LOAD_MODULES,j.CANVAS_INITED=g.EVENT_TYPES.CANVAS_INITED,j.CANVAS_LOADED=g.EVENT_TYPES.CANVAS_LOADED,j.CANVAS_SHOW_MESS="canvasShowMess",j.SAVE_USER_DATA="setUserData",j.HOCK_CHANGE="hockChange",j.VersionModules=I.VersionModules,e["default"]=j},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.ModuleClassUtil=e.UploadSkinTool=e.SoundStr=e.Phy=e.ParticleUtil=e.GlobalConfig=e.EquipmentUtil=e.ComponentProperty=e.Check=e.Button=e.Others=e.Modules=e.updateSettings=e.DefaultSettings=undefined;var r=n(20),o=i(r),a=n(357),s=i(a),u=n(153),l=i(u),c=n(352),f=i(c),h=n(154),d=i(h),p=n(155),v=i(p),y=n(9),g=i(y),_=n(355),m=i(_),b=n(93),w=i(b),E=n(47),x=i(E),O=n(37),P=i(O),k=n(354),S=i(k);e.DefaultSettings=o["default"],e.updateSettings=r.updateSettings,e.Modules=r.Modules,e.Others=s["default"],e.Button=l["default"],e.Check=f["default"],e.ComponentProperty=d["default"],e.EquipmentUtil=v["default"],e.GlobalConfig=g["default"],e.ParticleUtil=m["default"],e.Phy=w["default"],e.SoundStr=x["default"],e.UploadSkinTool=P["default"],e.ModuleClassUtil=S["default"]},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);e["default"]=new(function(){function t(){i(this,t),this.k=1,this.ki=1,this.type=1,this.currentArr=[],this.elecArr=[],this.magArr=[],this.wireArr=[],this.elecArr3D=[],this.magArr3D=[],this.eleLineNumSca=1.1,this.magLineNumSca=1.1,this.gridE={sx:0,ex:100,stepx:1,sy:0,ey:100,stepy:1,mm:100,nn:100,data:[]},this.gridU={sx:0,ex:100,stepx:1,sy:0,ey:100,stepy:1,mm:100,nn:100,data:[]}}return r(t,[{key:"setType",value:function(t){1==t?(this.type=1,this.currentArr=this.elecArr):2==t&&(this.type=2,this.currentArr=this.magArr)}},{key:"getTotalElecLineNum",value:function(t,e){var n=e||this.type,i=5;return i=1==n?Math.round(5*this.eleLineNumSca*Math.sqrt(Math.abs(t/10))):Math.abs(Math.round(this.magLineNumSca*this.k*t*.6)),i>30&&(i=30),i}},{key:"getTotalElecNum",value:function(){var t=0;return this.currentArr.forEach(function(e){t+=e.elecNum},this),t}},{key:"removeEmptyObject",value:function(t,e){for(var n=t.length,i=n-1;i>=0;i--){0==t[i][e]&&t.splice(i,1)}}},{key:"getTotalU",value:function(t){for(var e=this.elecArr.length,n=0,i=0;e>i;i++){var r=this.elecArr[i],a=r.elecPoint,s=o.Point.distance(a,t);if(0==s)return Infinity;n+=this.k*r.elecNum/s}return n}},{key:"getWireTotalForce",value:function(t){for(var e=this.wireArr.length,n=new o.Point(0,0),i=0;e>i;i++){var r=this.wireArr[i],a=r.p1,s=r.p2,u=this.getDistanceToLine(t,a,s),l=this.getVerticalVec(t,a,s);if(0>=u.x){var c=-this.ki*r.I/u.y;n.x+=c*l.x,n.y+=c*l.y}}return n}},{key:"getTotalForce",value:function(t){for(var e=this.currentArr.length,n=new o.Point(0,0),i=0;e>i;i++){var r=this.currentArr[i],a=r.elecPoint,s=o.Point.distance(a,t);if(0==s){n.x=n.y=0;break}var u=this.k*r.elecNum/(s*s*s),l=(t.x-a.x)*u,c=(t.y-a.y)*u;n.x+=l,n.y+=c}var f=this.getWireTotalForce(t);return n.x+=f.x,n.y+=f.y,n}},{key:"getZeroEPoint",value:function(t,e){var n=t.elecPoint,i=e.elecPoint,r=t.elecNum,a=e.elecNum,s=o.Point.distance(n,i),u=r+a,l=2*s*r,c=s*s*r,f=l*l-4*u*c,h=void 0;if(f>=0&&0!=u){var d=(-l+Math.sqrt(f))/(2*u),p=(-l-Math.sqrt(f))/(2*u),v=void 0;v=(s+d)*d>0?d:p;var y=n.sub(i);y.normalize(v),h=n.add(y)}return h}},{key:"getMagTotalForce3D",value:function(t){for(var e=this.magArr3D,n=e.length,i=new o.Point(0,0),r=0;n>r;r++){var a=e[r],s=a.p,u=a.I,l=a.dir,c=o.Point.distance(s,t),f=l*u/(c*c*c),h=(t.x-s.x)*f;i.x+=-((t.y-s.y)*f),i.y+=h}return i}},{key:"getDir",value:function(t){var e=t.elecNum;return e>0?1:0>e?-1:0}},{key:"isEqualU",value:function(t,e,n){return Math.abs(t-e)<Math.abs(n)}},{key:"getTotalForceByGrid",value:function(t){var e=this.gridE.sx,n=this.gridE.stepx,i=this.gridE.sy,r=this.gridE.stepy,a=this.gridE.mm,s=this.gridE.nn,u=this.gridE.data,l=(t.x-e)/n,c=(t.y-i)/r,f=parseInt(l),h=parseInt(c);if(0>f||0>h||f>=a||h>=s)return{x:0,y:0};var d=f==a-1?f:f+1,p=h==s-1?h:h+1,v=u[f][h],y=u[d][h],g=u[f][p],_=u[d][p],m=l-f,b=c-h,w=o.Point.interpolate(v,y,m),E=o.Point.interpolate(g,_,m);return o.Point.interpolate(w,E,b)}},{key:"updateGridE",value:function(t,e){this.gridE.sx=t.left,this.gridE.ex=t.right,this.gridE.stepx=e,this.gridE.sy=t.top,this.gridE.ey=t.bottom,this.gridE.stepy=e,this.gridE.mm=parseInt((this.gridE.ex-this.gridE.sx)/this.gridE.stepx),this.gridE.nn=parseInt((this.gridE.ey-this.gridE.sy)/this.gridE.stepy),this.gridE.data=this.getMeshGridE(this.gridE.sx,this.gridE.ex,this.gridE.stepx,this.gridE.sy,this.gridE.ey,this.gridE.stepy)}},{key:"getMeshGridE",value:function(t,e,n,i,r,a){for(var s=[];e>=t;){for(var u=i,l=[];r>=u;){l.push(this.getTotalForce(new o.Point(t,u))),u+=a}s.push(l),t+=n}return s}},{key:"updateGridU",value:function(t,e){this.gridU.sx=t.left,this.gridU.ex=t.right,this.gridU.stepx=e,this.gridU.sy=t.top,this.gridU.ey=t.bottom,this.gridU.stepy=e,this.gridU.mm=parseInt((this.gridU.ex-this.gridU.sx)/this.gridU.stepx),this.gridU.nn=parseInt((this.gridU.ey-this.gridU.sy)/this.gridU.stepy),this.gridU.data=this.getMeshGridU(this.gridU.sx,this.gridU.ex,this.gridU.stepx,this.gridU.sy,this.gridU.ey,this.gridU.stepy)}},{key:"getMeshGridU",value:function(t,e,n,i,r,a){for(var s=[];e>=t;){for(var u=i,l=[];r>=u;){l.push(this.getTotalU(new o.Point(t,u))),u+=a}s.push(l),t+=n}return s}},{key:"getPointInLineByU",value:function(t,e,n,i,r,a){if(this.isEqualU(r,n,i))return t.clone();if(this.isEqualU(a,n,i))return e.clone();var s=(n-r)/(a-r);if(0>s||s>1)return null;var u=o.Point.interpolate(t,e,s);if(1>o.Point.distance(t,e))return u.clone();var l=this.getTotalU(u);return(l-n)*(a-n)>0?this.getPointInLineByU.call(this,t,u,n,i,r,l):this.getPointInLineByU.call(this,e,u,n,i,a,l)}},{key:"getpInEdge",value:function(t,e,n,i,r,o){if(0>=(t-r)*(e-r)){return this.getPointInLineByU(n,i,r,o,t,e)}return null}},{key:"getForce",value:function(t,e,n){var i=o.Point.distance(e,t);if(0==i)return 0;var r=this.k*n/(i*i*i);return new o.Point((t.x-e.x)*r,(t.y-e.y)*r)}},{key:"identity",value:function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return new o.Point(t.x/e,t.y/e)}},{key:"getAngle",value:function(t){return Math.atan2(t.y,t.x)}},{key:"getAngle2",value:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},{key:"checkBiheTo",value:function(t,e,n){return n>=o.Point.distance(t,e)}},{key:"distance",value:function(t,e){return Math.sqrt(t*t+e*e)}},{key:"getDistanceToLine",value:function(t,e,n){var i=new o.Point(n.x-e.x,n.y-e.y);i.normalize(1);var r=new o.Point(-i.y,i.x),a=new o.Point(t.x-e.x,t.y-e.y),s=new o.Point(t.x-n.x,t.y-n.y),u=a.x*r.x+a.y*r.y;return new o.Point(0>(a.x*i.x+a.y*i.y)*(s.x*i.x+s.y*i.y)?-1:1,u)}},{key:"getVerticalLine",value:function(t,e,n){var i=new o.Point(n.x-e.x,n.y-e.y);i.normalize(1);var r=new o.Point(-i.y,i.x),a=new o.Point(t.x-e.x,t.y-e.y),s=a.x*r.x+a.y*r.y;return{p:new o.Point(t.x-r.x*s,t.y-r.y*s),len:s,dir:r}}},{key:"getVerticalVec",value:function(t,e,n){var i=new o.Point(n.x-e.x,n.y-e.y);i.normalize(1);var r=new o.Point(-i.y,i.x),a=new o.Point(t.x-e.x,t.y-e.y);return 0>a.x*r.x+a.y*r.y&&(r.x*=-1,r.y*=-1),r}},{key:"dotProduct",value:function(t,e){return t.x*e.x+t.y+e.y}},{key:"gradient",value:function(t,e,n){for(var i=[],r=0;e>r;r++){i[r]=[];for(var a=0;n>a;a++){var s=new o.Point;s.x=0==r?t[1][a]-t[0][a]:r==e-1?t[r][a]-t[r-1][a]:(t[r+1][a]-t[r-1][a])/2,s.y=0==a?t[r][1]-t[r][0]:a==n-1?t[r][a]-t[r][a-1]:(t[r][a+1]-t[r][a-1])/2,i[r][a]=s}}return i}},{key:"getIntCountableSet",value:function(t,e){if(t=t||0,0==(t=parseInt(t)))return[];if(1==t)return[0];e=e||-1;for(var n=[0],i=1,r=1,o=0;t>i;)n[i]=e*r,i++,o++,2==o&&(o=0,r++),e=-e;return n}},{key:"interpolate",value:function(t,e,n,i,r){var a=new o.Point(t,e),s=new o.Point(n,i);return o.Point.interpolate(a,s,(r-t)/(n-t)).y}}]),t}())},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(256),s=i(a),u=n(246),l=i(u),c=n(9),f=i(c),h=function(){function t(){r(this,t)}return o(t,[{key:"getLocaleStr",value:function(e){return t.getLocaleStr(e)}},{key:"changeLocale",value:function(e){t.changeLocale(e)}}],[{key:"changeLocale",value:function(t){s["default"].changeLanguage(t)}},{key:"loadLanguage",value:function(e){return e||(e="zh"),new Promise(function(n,i){if(t.isinit)return void n();t.isinit=!0,s["default"].use(l["default"]).init({lng:e,debug:!0,fallbackLng:["zh"],backend:{loadPath:f["default"].cdn_static+"languages/{{lng}}.json",crossDomain:!0}},function(t,e){t?i():n()})})}},{key:"getLocaleStr",value:function(t){return s["default"].t(t)}}]),t}();h.isinit=!1,e["default"]=h},function(t,e,n){"use strict";var i=n(11),r=n(41);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){"use strict";var i=n(3),r=n(5).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){"use strict";t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){"use strict";var i=n(4)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(e){try{return e[i]=!1,!"/./"[t](e)}catch(n){}}return!0}},function(t,e,n){"use strict";var i=n(32);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var i=n(4)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},t(o)}catch(e){}return n}},function(t,e,n){"use strict";var i=n(8),r=n(235),o=n(73),a=n(79)("IE_PROTO"),s=function(){},u=function(){var t,e=n(72)("iframe"),i=o.length;for(e.style.display="none",n(110).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=u(),e===undefined?n:r(n,e)}},function(t,e,n){"use strict";var i=n(123),r=n(73).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){"use strict";var i=n(80)("keys"),r=n(43);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){"use strict";var i=n(5),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,n){"use strict";var i=n(115),r=n(27);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return r(t)+""}},function(t,e,n){"use strict";var i,r,o,a=n(22),s=n(232),u=n(110),l=n(72),c=n(5),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,y=0,g={},_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},m=function(t){_.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){s("function"==typeof t?t:Function(t),e)},i(y),y},d=function(t){delete g[t]},"process"==n(32)(f)?i=function(t){f.nextTick(a(_,t,1))}:v&&v.now?i=function(t){v.now(a(_,t,1))}:p?(r=new p,o=r.port2,r.port1.onmessage=m,i=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",m,!1)):i="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:h,clear:d}},function(t,e,n){"use strict";var i=n(3);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";t.exports=n(30)(n(12),"Map")},function(t,e,n){"use strict";t.exports=n(12).Symbol},function(t,e,n){"use strict";function i(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}var r=n(263);t.exports=i},function(t,e,n){"use strict";var i=n(269),r=n(151),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols;t.exports=s?function(t){return null==t?[]:(t=Object(t),i(s(t),function(e){return a.call(t,e)}))}:r},function(t,e,n){"use strict";function i(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=i},function(t,e,n){"use strict";function i(t,e){return t===e||t!==t&&e!==e}t.exports=i},function(t,e,n){"use strict";function i(t){return null!=t&&o(t.length)&&!r(t)}var r=n(149),o=n(150);t.exports=i},function(t,e,n){"use strict";function i(t){return a(t)?r(t):o(t)}var r=n(133),o=n(277),a=n(90);t.exports=i},function(t,e,n){"use strict";function i(t){return a(t)?r(t,!0):o(t)}var r=n(133),o=n(278),a=n(90);t.exports=i},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);t.length>e;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0);e["default"]=function(){function t(e){r(this,t),this.main=e,this.domID=null,this.domID$=null}return o(t,[{key:"initNapeDist",value:function(t){this.napebox=t,this.nape=t.nape,window.nape=this.nape}},{key:"getCanvasP",value:function(t,e,n){var i=new a.Point(0,0),r=void 0,o=void 0;if(t.touches){var s=t.changedTouches[0];r=s.clientX,o=s.clientY}else r=t.clientX,o=t.clientY;return this.main.renderer.plugins.interaction.mapPositionToPoint(i,r,o),i=this.main.viewStack.toLocal(i,this.main.stage)}},{key:"getMouseXY",value:function(t,e,n){var i=this.main,r=a.M.getMouseXY(t,e,n);return i.viewStack.parent.updateTransform(),r=i.viewStack.toLocal(r)}},{key:"addRotateTool",value:function(t){this._addRotateTool_touchHandle=this._addRotateTool.bind(this),t.addEventListener(TouchEvent.TOUCH_BEGIN,this._addRotateTool_touchHandle),t.addEventListener(TouchEvent.TOUCH_MOVE,this._addRotateTool_touchHandle),t.addEventListener(TouchEvent.TOUCH_END,this._addRotateTool_touchHandle),t.addEventListener(TouchEvent.TOUCH_END_OUTSIDE,this._addRotateTool_touchHandle),t.rotateData.isRotateToolDown=!1,t.rotateData.downP=t.rotateData.downP||new a.Point,t.rotateData.checkDownSP&&(t.__rotateMTouchID=a.M.addTouch(t.rotateData.checkDownSP,{begin:function(t){this.isDown=!0},end:function(t){this.isDown=!1}}))}},{key:"removeRotateTool",value:function(t){if(t.removeEventListener(TouchEvent.TOUCH_BEGIN,this._addRotateTool_touchHandle),t.removeEventListener(TouchEvent.TOUCH_MOVE,this._addRotateTool_touchHandle),t.removeEventListener(TouchEvent.TOUCH_END,this._addRotateTool_touchHandle),t.removeEventListener(TouchEvent.TOUCH_END_OUTSIDE,this._addRotateTool_touchHandle),a.M.removeTouch(t,t.__rotateMTouchID),t.rotateData){var e=!0,n=!1,i=undefined;try{for(var r,o=Object.keys(t.rotateData)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){t.rotateData[r.value]=null}}catch(s){n=!0,i=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw i}}}}},{key:"_addRotateTool",value:function(t){var e=t.target.rotateData;if(a.M.touchIsType(t.type,TouchEvent.TOUCH_BEGIN))e.isRotateToolDown=!0,e.pareComp&&!e.canSysDrag&&(e.pareComp.cannotSystemDrag=!0),a.M.setSPPoint(e.downP,this.getMouseXY(t)),e.downHandleFunc&&(e.pareComp?e.downHandleFunc.call(e.pareComp,t.target):e.downHandleFunc.call(t.target)),e._startP=e.downP.clone(),e._maxX=0,e._maxY=0,e._addAngle=0,e.dragType=-1;else if(a.M.touchIsType(t.type,TouchEvent.TOUCH_MOVE)){var n=!0;if(a.M._checkIsDBMC(this)&&(n=!1),e.checkDownSP&&!e.checkDownSP.isDown&&(n=!1),e.isRotateToolDown||(n=!1),n){var i=this.getMouseXY(t),r=e.cenP();r=this.main.viewStack.toLocal(r);var o=new a.Point(i.x-r.x,i.y-r.y),s=new a.Point(e.downP.x-r.x,e.downP.y-r.y),u=void 0;if(0===e.dragType)u=a.M.getAngleP1(o,s);else if(1===e.dragType){var l=i.x-e.downP.x;u=1*l}else if(2===e.dragType){var c=-(i.y-e.downP.y);u=1*c}if(-1!==e.dragType){if(e.rotateHandleFunc){var f=a.M.toHu(u);f>Math.PI?f-=2*Math.PI:f<-Math.PI&&(f+=2*Math.PI),e.pareComp?e.rotateHandleFunc.call(e.pareComp,t.target,f):e.rotateHandleFunc.call(t.target,f)}}else{var h=Math.abs(e._startP.x-i.x),d=Math.abs(e._startP.y-i.y);e._maxX=Math.max(e._maxX,h),e._maxY=Math.max(e._maxY,d),e._addAngle+=u,e.dragType=0}a.M.setSPPoint(e.downP,this.getMouseXY(t))}}else(a.M.touchIsType(t.type,TouchEvent.TOUCH_END)||a.M.touchIsType(t.type,TouchEvent.TOUCH_END_OUTSIDE))&&(e._maxX=0,e._maxY=0,e._addAngle=0,e.dragType=-1,e.isRotateToolDown=!1,e.pareComp&&!e.canSysDrag&&(e.pareComp.cannotSystemDrag=!1),e.upHandleFunc&&(e.pareComp?e.upHandleFunc.call(e.pareComp,t.target):e.upHandleFunc.call(t.target)))}},{key:"destroy",value:function(){this.main=null}},{key:"removeTextTexture",value:function(t){for(var e=[t],n=[];e.length;){var r=e.shift();r&&(r.constructor===PIXI.Text&&n.push(r),r.children&&r.children.length&&e.push.apply(e,i(r.children)))}n.length&&n.forEach(function(t){t.destroy()})}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){var n=[],i=!0,r=!1,o=undefined;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),c=n(347),f=i(c),h=n(2),d=i(h),p=n(21),v=i(p);e["default"]=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"execute",value:function(t){var e=this;if(this.root.emit(v["default"].communicate.angular.MOVE_SCALE),(5===this.root.globalConfig.version||2===this.root.globalConfig.version)&&this.root.context.settings.isLockMove&&!this.root.editRectEnabled){var n=!1;t&&(n=t.tween),this.root.__lockMoveScaleFunc?this.root.__lockMoveScaleFunc():(this.root.__lockMoveScaleFunc=(0,f["default"])(function(){e.freshLimit(n)},100),this.freshLimit(n))}}},{key:"freshLimit",value:function(t){var e=this.root,n=this.root.view,i=!1,r=e.globalConfig.lockMove?e.globalConfig.__firstSetData_temp.view:null,o=0,a=0;if(r){if(r.scaleX>e.view.scale.x){var u=r.scaleX,c=this.root.W,f=this.root.H,h={x:c/2,y:f/2},d=u/n.scale.x,p=(n.x-h.x)*d+h.x,v=(n.y-h.y)*d+h.y;n.scale.x=u,n.scale.y=u,n.x=p,n.y=v,i=!0}var y=this.root.globalConfig.__firstSetData_temp.sp1,g=this.root.globalConfig.__firstSetData_temp.sp2,_=this.root.getScreenToViewP(),m=_.p1,b=_.p2;if(y.x>m.x?o=m.x-y.x:b.x>g.x&&(o=b.x-g.x),y.y>m.y?a=m.y-y.y:b.y>g.y&&(a=b.y-g.y),t||i||o||a){var w=e.view.x+o*this.root.view.scale.x,E=e.view.y+a*this.root.view.scale.x;t||!i?TweenMax.to(e.view,.3,{x:w,y:E}):(e.view.x=w,e.view.y=E)}}else{var x=this.root.getScreenToViewP(),O=x.p1,P=x.p2,k=this.root.globalConfig.napeWallW+0/this.root.view.scale.x,S=this.root.globalConfig.napeWallW+200/this.root.view.scale.x;if(-k>O.x?o=O.x+k:P.x>k&&(o=P.x-k),-S>O.y?a=O.y+S:P.y>S&&(a=P.y-S),t||i||o||a){var C=e.view.x+o*this.root.view.scale.x,M=e.view.y+a*this.root.view.scale.x;if(e.W>2*this.root.globalConfig.napeWallW*e.view.scale.x){var T=e.getWindowDoorSize(),A=s(T,2),D=A[0],L=new l.Point;e.renderer.plugins.interaction.mapPositionToPoint(L,D/2,0),C=L.x}t||!i?TweenMax.to(e.view,.3,{x:C,y:M}):(e.view.x=C,e.view.y=M)}}}}]),e}(d["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n=t.getLocalBounds().clone();t.updateTransform();var i=t.scale.x,r=t.scale.y;e.toLocal(n,t),Math.abs(n.width*i),Math.abs(n.height*r)}function u(t){return t&&t.parent&&t.root?t.parent===t.root.viewStack||t.renderable&&0!==t.alpha?t:u(t.parent):null}e.__esModule=!0;var l=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(6),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(c),h=n(9),d=i(h),p=n(2),v=i(p);(new PIXI.Graphics).allowGetBounds=!1;var y={0:["default"],1:["rotate",12,12],2:["drag",12,12],3:["open",15,12],4:["close",15,12],5:["pinch",12,12],6:["pluck",15,12],7:["pan",12,12],8:["shake",12,12],9:["chilun",12,12,"chilunhuizhi"],10:["shangxia",12,12,"chuizhi"],11:["huizhi",12,12,"huizhi"],12:["shengzi",1,1,"shengzihuizhi"],14:["zuoyou",12,12,"shuiping"],15:["xuanzhuan",12,12,"xuanzhuan"],16:["yidong",12,12,"yidong"],17:["ziyouhuizhi",1,1,"ziyouhuizhi"],18:["tuozhuai",12,12,"hand"],19:["qingxie",12,12,"hand"],20:["rect",12,12,"huizhi"],21:["circle",12,12,"huizhi"],22:["motor",12,12,"motor"],23:["spring",12,12,"huizhi"],24:["guding",12,12,"guding"],25:["force",12,12,"force"],26:["cutting",1,24,"cutting"],27:["rotatebtn",12,12,"xuanzhuan"],28:["hand",12,4,"pinch"]},g={};for(var _ in y)g[_]=y[_],g[_][3]||(g[_][3]=""+g[_][0]),g[y[_][0]]=g[_],g[y[_][0]].code=_;y=g;var m=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return e.current={code:-1,obj:null},e.obj=null,t}return a(e,t),l(e,[{key:"execute",value:function(t){this.root.context.settings.preventCursor||(e.current=t,this.root.mouseDown||e.changeStyle(t))}}],[{key:"changeStyle",value:function(t){if(f.hasIn(t,"obj.root.context.settings")){var e=t.obj;if(!e.root.context.settings.preventCursor){var n=u(e);n&&n!==e.root.viewStack&&-1!==t.code&&(n.isRubberCatheter||s(e,n));var i=document.body,r=d["default"].cdn_static,o=y[t.code];i.style.cursor=o&&"default"!=o[0]?"url("+r+"images/cursor/"+o[3]+".cur) "+o[1]+" "+o[2]+", auto":"default"}}}}]),e}(v["default"]);m.cursorConfig=y,e["default"]=m},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(){i(this,t);var e={};Object.defineProperty(this,"map",{get:function(){return e}})}return r(t,[{key:"setData",value:function(t,e){this.map[t]=e}},{key:"getData",value:function(t){return this.map[t]}}]),t}();o.tag={CLIP_BOARD:"clipboard"},e["default"]=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(7),s=i(a),u=n(95),l=i(u),c=function(){function t(e){r(this,t),t.isLockMouse=!1,t.lastObj=null,this.main=e,this.eventObjArr=[]}return o(t,[{key:"init",value:function(){this.canvasUpHandleProx=this.canvasUpHandle.bind(this),$(this.main.canvas).on("mouseup"+this.main.$NAMESPACE,this.canvasUpHandleProx)}},{key:"destroy",value:function(){$(this.main.canvas).off("mouseup"+this.main.$NAMESPACE,this.canvasUpHandleProx),this.main=null,t.isLockMouse=!1,t.lastObj=null}},{key:"canvasUpHandle",value:function(){var e=this;this.eventObjArr.forEach(function(n){var i=n.code,r=n.obj;t.__isDown__&&(t.__isDown__=!1,e.changeMouseStatus(i,r.__isIn__,r))})}},{key:"changeMouseStatus",value:function(e,n,i,r){function o(t){if(!t||!t.children)return null;var e=!0,n=!1,i=undefined;try{for(var r,a=t.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;if(!0===s.mouseIn&&s.alpha>0)return o(s)}}catch(u){n=!0,i=u}finally{try{!e&&a["return"]&&a["return"]()}finally{if(n)throw i}}return t}function a(t){return t?t.parent===l?t:t.parent&&!0===t.parent.mouseIn&&t.parent.alpha>0&&!0===t.parent.visible?t.parent:t.rubber&&!0===t.rubber.mouseIn?t.rubber:a(t.parent):null}function u(t,e){return!(e.parent===l||!e.parent)&&(e.parent===t||u(t,e.parent))}if(!this.main||!this.main.context.settings.preventCursor){if(r)return void this.main.execute(s["default"].interactive.MOUSE_CURSOR_ENABLED,{code:-1,obj:i});var l=this.main.viewStack;i&&(i.mouseIn=n,i.mouseStateCode=n?e:t.status.DRAG);var c=n?o(i):a(i),f=-1;c&&c.mouseIn&&(f=c.mouseStateCode),n?(null===t.lastObj?t.lastObj=c:u(c,t.lastObj)?(c=t.lastObj,f=t.lastObj.mouseStateCode):t.lastObj=c,c===l&&(t.lastObj=null)):t.lastObj=t.lastObj===c?null:c,this.main.execute(s["default"].interactive.MOUSE_CURSOR_ENABLED,{code:parseInt(f),obj:c})}}},{key:"changeMouseStatusName",value:function(t,e,n,i){if(isNaN(t)){t=l["default"].cursorConfig[t].code}this.changeMouseStatus(t,!0,n)}}],[{key:"__changeMouseStatus",value:function(e,n,i){t.isLockMouse||t.__isDown__||e.changeMouseStatus(i,n.__isIn__,n)}},{key:"addMouseEvent",value:function(e,n,i){if(isNaN(i)){i=l["default"].cursorConfig[i].code}e.eventObjArr.push({code:i,obj:n}),n.__main=e.main,n.__mouseoverfunc=function(){n.__isIn__=!0,t.__changeMouseStatus(e,n,i)},n.__mouseoutfunc=function(){n.__isIn__=!1,t.__changeMouseStatus(e,n,i)},n.__mousedownfunc=function(){t.__isDown__=!0},n.addEventListener("mouseover",n.__mouseoverfunc),n.addEventListener("mouseout",n.__mouseoutfunc),n.addEventListener("mousedown",n.__mousedownfunc)}},{key:"removeMouseEvent",value:function(t,e){if(e){for(var n=0;t.eventObjArr.length>n;n++){if(e===t.eventObjArr[n].obj){t.eventObjArr.splice(n,1);break}}e.removeEventListener("mouseover",e.__mouseoverfunc),e.removeEventListener("mouseout",e.__mouseoutfunc),e.removeEventListener("mousedown",e.__mousedownfunc),e.__mouseoverfunc=null,e.__mouseoutfunc=null,e.__mouseupfunc=null,e.__mousedownfunc=null,e.__main=null}}},{key:"lockMouse",value:function(e){t.isLockMouse=e}}]),t}();c.status={STRETCH:0,ROTATE:1,DRAG:2,OPEN:3,CLOSE:4,PINCH:5,PLUCK:6,PAN:7,SHAKE:8},e["default"]=c},function(t,e,n){"use strict";var i=n(31),r=n(118),o=n(39),a=n(16);t.exports=n(117)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return t&&t.length>n?"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]]):(this._t=undefined,r(1))},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n){function i(t,e,n,i){var r=e&&e.prototype instanceof o?e:o,a=Object.create(r.prototype);return a._invoke=c(t,n,new p(i||[])),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}function o(){}function a(){}function s(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function n(i,o,a,s){var u=r(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"===(g===c?"undefined":e(c))&&m.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):Promise.resolve(c).then(function(t){l.value=t,a(l)},s)}s(u.arg)}function i(t,e){function i(){return new Promise(function(i,r){n(t,e,i,r)})}return o=o?o.then(i,i):i()}var o;this._invoke=i}function c(t,e,n){var i=k;return function(o,a){if(i===C)throw Error("Generator is already running");if(i===M){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=f(s,n);if(u){if(u===T)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===k)throw i=M,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=C;var l=r(t,e,n);if("normal"===l.type){if(i=n.done?M:S,l.arg===T)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=M,n.method="throw",n.arg=l.arg)}}}function f(t,e){var n=t.iterator[e.method];if(n===g){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=g,f(t,e),"throw"===e.method))return T;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,T;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,T):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,T)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function v(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(m.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=g,r.done=!0,r};return i.next=i}}return{next:y}}function y(){return{value:g,done:!0}}var g,_=Object.prototype,m=_.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",E=b.asyncIterator||"@@asyncIterator",x=b.toStringTag||"@@toStringTag",O="object"===e(t),P=n.regeneratorRuntime;if(P)return void(O&&(t.exports=P));P=n.regeneratorRuntime=O?t.exports:{},P.wrap=i;var k="suspendedStart",S="suspendedYield",C="executing",M="completed",T={},A={};A[w]=function(){return this};var D=Object.getPrototypeOf,L=D&&D(D(v([])));L&&L!==_&&m.call(L,w)&&(A=L);var I=s.prototype=o.prototype=Object.create(A);a.prototype=I.constructor=s,s.constructor=a,s[x]=a.displayName="GeneratorFunction",P.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},P.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(I),t},P.awrap=function(t){return{__await:t}},u(l.prototype),l.prototype[E]=function(){return this},P.AsyncIterator=l,P.async=function(t,e,n,r){var o=new l(i(t,e,n,r));return P.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},u(I),I[x]="Generator",I[w]=function(){return this},I.toString=function(){return"[object Generator]"},P.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},P.values=v,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,i&&(n.method="next",n.arg=g),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return e("end");if(this.prev>=r.tryLoc){var a=m.call(r,"catchLoc"),s=m.call(r,"finallyLoc");if(a&&s){if(r.catchLoc>this.prev)return e(r.catchLoc,!0);if(r.finallyLoc>this.prev)return e(r.finallyLoc)}else if(a){if(r.catchLoc>this.prev)return e(r.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(r.finallyLoc>this.prev)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(this.prev>=i.tryLoc&&m.call(i,"finallyLoc")&&i.finallyLoc>this.prev){var r=i;break}}!r||"break"!==t&&"continue"!==t||r.tryLoc>e||e>r.finallyLoc||(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,T):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),T},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),T}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;d(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),T}}}(function(){return this}()||Function("return this")())}).call(e,n(36)(t))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=n(6),l=n(10);e["default"]=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.paramObj=t,n._addJnjection(!0),n._elecLable="",n._rootData=null,n.UID=s.M.getUnique(),n.classname=null,n.cateid=1,n.canDel=!0,n.canReversal=!1,n.canReset=!1,n.canShowRepairBtn=!0,n.hasReversal=!1,n.canShowDragRect=!0,n.canShowConfPan=!0,n.canShowAngleShape=!0,n.canRotate=!1,n.allowMultiSelected=!0,n.cantToTop=!1,n.fromEquTools=!0,n.level=5,n.loadLevel=5,n.resetDisLoadComp=!1,n.allowSave=!0,n.canCopy=!0,n.canLeveling=!1,n.canRandom=!1,n.canShowNei=!1,n.componentBox=new PIXI.Sprite,n.definitionName=null,n.addChild(n.componentBox),n.setData_obj=null,n._selected=!1,n.noRenderSelected=!1,n.getConfJumpTarget=null,n.hadDestory=!1,n.canCurSelect=!0,n.notAnalytics=!1,n.hasAddCompComplete=!1,n.glowSPArr=null,n.glowIndex=0,n.propertyChange=!1,n}return o(e,t),a(e,[{key:"addCompComplete",value:function(){if(!this.hadDestory&&!this._destroyed){if(this.hasAddCompComplete=!0,this.addedFore(),this.added(),this.globalConfig.SHOW_GLOW&&this.afterAddedGlowShow(),this.addedEnd(),this.addDragHandle(),this.visible=!0,this.parent&&this.parent.dataObj&&!this.parent.dataObj.isAddNew)this.parent.x=this.parent.dataObj.positionX,this.parent.y=this.parent.dataObj.positionY,this.setData(this.parent.dataObj);else{var t=this.getElecSetting();t&&this.setDefaultSetting(t),this.defaultSettingChanged()}this.viewZoomComplete(),this.main.addEventListener(this.main.constructor.HOCK_CHANGE,this.hockChangeHandleProxy=this.hockChangeHandle.bind(this)),this.parent.dispatchEvent(this.NBEvent.COMPONENT_INITED,{target:this.parent}),this.resetDisLoadComp||this.dispatchLoadedComplete()}}},{key:"hideGlow",value:function(){this.glowSPArr&&this.glowSPArr.forEach(function(t){t.forEach(function(t){t.visible=!1})})}},{key:"showGlowIndex",value:function(t){if(this.glowSPArr||this.createGlowSPArr(),this.glowIndex=t,this.hideGlow(),this.globalConfig.SHOW_GLOW){var e=this.glowSPArr[t];e&&e.length&&e.forEach(function(t){t.visible=!0})}}},{key:"afterAddedGlowShow",value:function(){this.showGlowSP(!0)}},{key:"isCanShowCir",value:function(){var t=this.main.glowManager.getConfig(this.classname);return t&&t.arr.length>0}},{key:"createGlowSPArr",value:function(){var t=this;if(this.main&&this.globalConfig.SHOW_GLOW){this.glowSPArr=[];for(var e=this.main.glowManager.getConfig(this.classname),n=0;e&&e.arr.length>n;n++){for(var i=e.arr[n],r=[],o=0;i.length>o;o++)!function(e){var o=i[e],a=(0,u.get)(t,o.parent,t),l=PIXI.Sprite.fromFrame("glowskin/"+o.glow);a.addChild(l),l.visible=!1,l.name="glowSP_"+n+"_"+e,o.x&&(l.x=o.x),o.y&&(l.y=o.y),r.push(l),t.globalConfig.DEBUG_GLOW?(l.getMScale=function(){return t.main.view.scale},s.M.addDrag(l,null,{begin:function(e){t.cannotSystemDrag=!0,window._se_glowSP=e.target},move:function(){},end:function(e){t.cannotSystemDrag=!1}})):(l.interactive=!1,l.interactiveChildren=!1)}(o);this.glowSPArr.push(r)}}}},{key:"_addJnjection",value:function(t){t?(this.moduleMain=this.paramObj.moduleMain,this.NBEvent=this.moduleMain.NBEvent,this.NBCommand=this.moduleMain.NBCommand,this.main=this.moduleMain.main,this.equipmentUtil=this.main.equipmentUtil,this.MouseManager=this.moduleMain.MouseManager,this.phy=this.main.phy,this.globalConfig=this.moduleMain.globalConfig,this.SoundTool=this.globalConfig.SoundTool,this.language=this.moduleMain.language,this.ParticleUtil=this.moduleMain.ParticleUtil,this.SoundStr=this.moduleMain.SoundStr,this.Button=this.moduleMain.Button,this.HoverButton=this.moduleMain.HoverButton,this.ComponentProperty=this.moduleMain.ComponentProperty,this.NBDrag=this.moduleMain.NBDrag,this.UploadSkinTool=this.moduleMain.UploadSkinTool):(this.moduleMain=null,this.NBEvent=null,this.NBCommand=null,this.main=null,this.equipmentUtil=null,this.MouseManager=null,this.phy=null,this.globalConfig=null,this.SoundTool=null,this.ParticleUtil=null,this.SoundStr=null,this.Button=null,this.ComponentProperty=null,this.NBDrag=null,this.UploadSkinTool=null)}},{key:"getLocaleStr",value:function(t){return this.main.getLocaleStr(t)}},{key:"dispatchLoadedComplete",value:function(){this.parent&&this.parent.dispatchEvent(l.PHY_EVENTS.ADD_CREATION_COMPLETE,{target:this.parent})}},{key:"childSetSelected",value:function(t){this._selected!==t&&(this._selected=t,this.setSelected(this._selected))}},{key:"setSelected",value:function(t){}},{key:"getMain",value:function(){return this.main}},{key:"hitTestViewPoint",value:function(t,e){var n=this.getMain(),i=n.view.toGlobal(e),r=t.getBounds();return r.width>0&&r.height>0&&(i.x>=r.x&&r.x+r.width>i.x&&i.y>=r.y&&r.y+r.height>i.y)}},{key:"getMouseXY",value:function(t){var e=void 0;return e=t.data&&t.data.global?t.data.global:new s.Point(t.clientX,t.clientY),e=this.main.view.toLocal(e,this.main.stage),e.clone()}},{key:"getViewMouseXY",value:function(t){var e=void 0;return e=t.data&&t.data.global?t.data.global:new s.Point(t.clientX,t.clientY),e.clone()}},{key:"getLocalMouseXY",value:function(t,e){return e.toLocal(this.getMouseXY(t),this.main.view)}},{key:"getGlobalScale",value:function(){return this.main.view.scale.x}},{key:"getMScale",value:function(){return this.main.view.scale.clone()}},{key:"toGlobalView",value:function(t,e){return this.hadDestory||!this.main?new s.Point:this.main.view.toLocal(t,e)}},{key:"setElecToLocalP",value:function(t,e,n){var i=this.toGlobalView(new s.Point(e,n),this);s.M.setSPPoint(t.parent,i)}},{key:"showToolDatas",value:function(t){}},{key:"freshLibPan",value:function(){this.main.startLoadTool.setConfPan(!0)}},{key:"addedFore",value:function(){}},{key:"added",value:function(){this.upToTop.call(this),this.hideTips&&this.hideTips()}},{key:"addedEnd",value:function(){}},{key:"addDragHandle",value:function(){this.parent.addEventListener(this.NBDrag.event.START_DRAG,this._prox_start_dragHandle=this.startDragHandle.bind(this)),this.parent.addEventListener(this.NBDrag.event.DRAG_MOVE,this._prox_move_dragHandle=this.moveDragHandle.bind(this)),this.parent.addEventListener(this.NBDrag.event.STOP_DRAG,this._prox_end_dragHandle=this.endDragHandle.bind(this))}},{key:"startDragHandle",value:function(t){this.beginEnd(t)}},{key:"moveDragHandle",value:function(t){this.moveEnd(t)}},{key:"endDragHandle",value:function(t){this.endEnd(t)}},{key:"freshEquipShows",value:function(t){}},{key:"freshElecLineVisible",value:function(){}},{key:"hockChangeHandle",value:function(t){this.freshGlow()}},{key:"removed",value:function(){this.main.removeEventListener(this.main.constructor.HOCK_CHANGE,this.hockChangeHandleProxy),this.hockChangeHandleProxy=null,this.getConfJumpTarget=null,this.removeAllListeners(l.PHY_EVENTS.SET_WORK_POWER_BREAK),this.removeAllListeners(l.PHY_EVENTS.SET_WORK_POWER_REPAIR),this.removeAllListeners(l.PHY_EVENTS.CREATION_COMPLETE),this.parent&&(this.parent.removeAllListeners(this.NBDrag.event.STOP_DRAG),this.parent.removeAllListeners(this.NBDrag.event.DRAG_MOVE),this.parent.removeAllListeners(this.NBDrag.event.START_DRAG)),this.main&&this.main.curElec===this&&(this.main.curElec=null),this._rotaSP_ID&&(this.phy&&this.phy.removeRotateTool(this.rotaSP),s.M.removeTouch(this.rotaSP,this._rotaSP_ID),this._rotaSP_ID=null),this.phy&&this.phy.removeTextTexture(this.parent?this.parent:this),this.parent&&(this.NBDrag.removeDrag(this.parent),this.parent.component=null),s.M.removeDenyDB(this.rotaSP),this.xuSP&&(this.xuSP.parent=null,this.xuSP["this"]=null,this.xuSP=null),this.rotaSP&&(this.rotaSP.parent=null,this.rotaSP["this"]=null,this.rotaSP=null),this.__NBTouchId&&(s.M.removeTouch(this.parent,this.__NBTouchId),this.__NBTouchId=null),this.captureSound&&(this.captureSound=null,this.next_instance=null),this.componentBox=null,this.hadDestory=!0,this.__downoffP=null,this._prox_start_dragHandle=null,this._prox_move_dragHandle=null,this._prox_end_dragHandle=null,this.paramObj=null,this._addJnjection(!1)}},{key:"getData",value:function(){var t={uid:this.UID,classname:this.classname,cateid:this.cateid,positionX:this.parent.x,positionY:this.parent.y,rotation:this.componentBox.rotation,loadLevel:this.loadLevel};return this.rootData&&(t.notexture=this.rootData.notexture),t}},{key:"setData",value:function(t){this.setData_obj=t,this.UID=t.uid,this.classname=t.classname,this.parent.x=t.positionX,this.parent.y=t.positionY,this.componentBox.rotation=t.rotation}},{key:"setDataOver",value:function(t){}},{key:"getMyIndex",value:function(){return this.main.viewContainer.getChildIndex(this.parent)}},{key:"upToTop",value:function(){var t=this;if(!this.hadDestory&&this.main){var e=void 0,n=this.main.viewStack.children.length,i=[],r=[];for(this.main.viewStack.setChildIndex(this.parent,n-1),e=n-1;e>=0;e--){var o=this.main.viewStack.getChildAt(e);o&&i.push(o)}for(var a=20,s=0;i.length>r.length;)if(i.forEach(function(t){var e=t.component;e&&e.level===a&&r.push(t)}),a--,++s>50)return;r.reverse(),(0,u.forEach)(r,function(e,n){t.main.viewStack.setChildIndex(e,n)}),i=null,r=null}}},{key:"getConf",value:function(){return{"this":this,confArr:[]}}},{key:"getConfEnd",value:function(t){return t}},{key:"rotateChange",value:function(t,e){}},{key:"rotateA",value:function(t){var e=void 0,n=-t;this.componentBox&&(e=n-s.M.toAngle(this.componentBox.rotation),this.componentBox.rotation=s.M.toHu(-t),this.rotateChange(s.M.toHu(e),s.M.toHu(n)))}},{key:"rotatedConf",value:function(t){this.rotateA(t.value)}},{key:"add2component",value:function(t,e){t&&(t.parent&&t.parent.removeChild(t),e===undefined?this.componentBox.addChild(t):this.componentBox.addChildAt(t,e))}},{key:"startDragRect",value:function(){}},{key:"endDragRect",value:function(){}},{key:"showDragRect",value:function(){this.canShowDragRect&&(this.rotaSP&&(this.rotaSP.visible=!0,this.rotaSP.alpha=1),this.xuSP&&(this.xuSP.visible=!0,this.xuSP.alpha=1))}},{key:"hideDragRect",value:function(){}},{key:"addComp",value:function(t,e){return this.main.addComp(t,!1,e)}},{key:"reversal",value:function(){this.canReversal&&(this.hasReversal=!this.hasReversal)}},{key:"reset",value:function(){}},{key:"clickLeveling",value:function(){}},{key:"clickRandom",value:function(){}},{key:"clickShowNei",value:function(){}},{key:"revokeOver",value:function(){}},{key:"beginFore",value:function(t){}},{key:"moveFore",value:function(t){}},{key:"endFore",value:function(t){}},{key:"beginEnd",value:function(t){}},{key:"moveEnd",value:function(t){}},{key:"endEnd",value:function(t){}},{key:"getChildByClassInRadius",value:function(t,e,n,i){var r=this;i||(i=new s.Point);var o=[];return this.main.getEquipmentArr().forEach(function(a){var u=a.component;if(u!==t&&u.classname===e){var l=r.toGlobalView(new s.Point,t),c=r.toGlobalView(i,u);s.M.getPointLen(l,c)<n&&o.push(u)}}),o}},{key:"confType",value:function(t,e){4===t&&this.freshVolume()}},{key:"freshVolume",value:function(){}},{key:"setDragRect",value:function(t){this.parent.dragRect=t}},{key:"getSpriteFromFrame",value:function(t){return PIXI.Sprite.fromFrame(t)}},{key:"getThisCanvas",value:function(){return this.main.canvas}},{key:"getChildrenByClass",value:function(t){for(var e=this.main.viewStack,n=e.children.length,i=[],r=0;n>r;r++){var o=e.getChildAt(r).component;!o||o.classType!==t&&o.classname!==t||i.push(o)}return i}},{key:"getCurrentTime",value:function(){return this.moduleMain.napeEngine.getNapeTimer()}},{key:"freshTxtColor",value:function(){this.backgroundColorChange(this.globalConfig.TXT_COLOR)}},{key:"backgroundColorChange",value:function(t){}},{key:"removeFromFramework",value:function(t){this.main.removeEquipment(t)}},{key:"getTextureFromName",value:function(t,e,n,i){var r=this;return this.UploadSkinTool.equipmentConfMap[t]?PIXI.Texture.fromFrame(t):(this.UploadSkinTool.equipmentConfMap.isLoading&&this.UploadSkinTool.equipmentConfMap.isLoading[t]?this.UploadSkinTool.equipmentConfMap.isLoading[t].push({cb:e,th:n,par:i}):(this.UploadSkinTool.equipmentConfMap.isLoading||(this.UploadSkinTool.equipmentConfMap.isLoading={},this.UploadSkinTool.equipmentConfMap.isLoading[t]=[]),this.UploadSkinTool.equipmentConfMap.isLoading[t]||(this.UploadSkinTool.equipmentConfMap.isLoading[t]=[]),this.UploadSkinTool.equipmentConfMap.isLoading[t]=[{cb:e,th:n,par:i}],PIXI.loader.add(t).load(function(){if(!r.hadDestory){var e=r.UploadSkinTool.equipmentConfMap.isLoading[t];delete r.UploadSkinTool.equipmentConfMap.isLoading[t],r.UploadSkinTool.equipmentConfMap[t]=!0;var n=void 0;for(n=0;e.length>n;n++)e[n].cb.call(e[n].th,e[n].par)}})),null)}},{key:"getEffectiveRange",value:function(){return[this.parent.getBounds()]}},{key:"undoRemoved",value:function(){this.main.viewStack.removeChild(this.parent)}},{key:"undoAdded",value:function(){this.main.viewStack.addChild(this.parent)}},{key:"selectRenderChild",value:function(){return null}},{key:"unionRects",value:function(t){for(var e=void 0,n=0;t.length>n;n++)e=e?e.union(t[n]):t[n];return e}},{key:"addCursor",value:function(t,e){this.MouseManager.addMouseEvent(this.main.mouseManager,t,e)}},{key:"removedCursor",value:function(t){this.MouseManager.removeMouseEvent(this.main.mouseManager,t)}},{key:"getChildByUID",value:function(t){if(!t)return null;for(var e=null,n=this.main.getEquipmentArr(!0),i=0;n&&n.length>i;i++){var r=n[i];if(r&&r.UID===t){e=r;break}}return e}},{key:"getTipMess",value:function(t){return'    <font class="pre-tipmess-title">'+(t||this.elecLable)+"</font>"}},{key:"freshTipMess",value:function(){this.main.showElecTipMess()}},{key:"getDefaultSetting",value:function(){return{}}},{key:"setDefaultSetting",value:function(t){(0,u.merge)(this,t)}},{key:"setDefaultOrigin",value:function(){}},{key:"defaultSettingChanged",value:function(){}},{key:"saveElecSetting",value:function(){this.main.userDataTool.saveElecSetting(this.classname,this.getDefaultSetting())}},{key:"deleteElecSetting",value:function(){this.main.userDataTool.deleteElecSetting(this.classname),this.setDefaultOrigin()}},{key:"getElecSetting",value:function(){return this.main.userDataTool.getElecSetting(this.classname)}},{key:"showGlowSP",value:function(t){t?this.showGlowIndex(this.glowIndex):this.hideGlow()}},{key:"getLocalBoundsElecs",value:function(){return this.canRotate?[this.componentBox]:[this]}},{key:"_getElecChildRect",value:function(t){var e=t.getLocalBounds();if(t===this)return e;var n=new s.Point(e.x,e.y),i=new s.Point(e.x+e.width,e.y),r=new s.Point(e.x,e.y+e.height),o=new s.Point(e.x+e.width,e.y+e.height);return this.canRotate||(n=this.toLocal(n,t),i=this.toLocal(i,t),r=this.toLocal(r,t),o=this.toLocal(o,t)),s.M.getPArrRect([n,i,r,o])}},{key:"getSelectionPoints",value:function(){var t=this,e=void 0;return this.getLocalBoundsElecs().forEach(function(n){n&&(e=e?e.union(t._getElecChildRect(n)):t._getElecChildRect(n))}),{tl:{x:e.x-this.globalConfig.SELECTION_PADDING,y:e.y-this.globalConfig.SELECTION_PADDING},tr:{x:e.x+e.width+this.globalConfig.SELECTION_PADDING,y:e.y-this.globalConfig.SELECTION_PADDING},bl:{x:e.x-this.globalConfig.SELECTION_PADDING,y:e.y+e.height+this.globalConfig.SELECTION_PADDING},br:{x:e.x+e.width+this.globalConfig.SELECTION_PADDING,y:e.y+e.height+this.globalConfig.SELECTION_PADDING}}}},{key:"getElecGlobalBounds",value:function(){var t=this,e=this.getSelectionPoints(),n=e.tl,i=e.tr,r=e.bl,o=e.br;return n=t.toGlobal(n),i=t.toGlobal(i),r=t.toGlobal(r),o=t.toGlobal(o),s.M.getPArrRect([n,i,r,o])}},{key:"getRealRotation",value:function(){return this.componentBox.rotation}},{key:"update",value:function(){}},{key:"getTextZoomScale",value:function(){return s.M.range(this.main.view.scale.x,1.5,3)}},{key:"viewZoomComplete",value:function(){}},{key:"freshGlow",value:function(){this.globalConfig.SHOW_GLOW&&this.showGlowSP(this.globalConfig.SHOW_GLOW)}},{key:"getElecBounds",value:function(){return this.getBounds()}},{key:"elecLable",get:function(){return this._elecLable},set:function(t){this._elecLable=t}},{key:"rootData",get:function(){return this.hadDestory||this._rootData||!this.main.toolBox.nameMap[this.cateid]||(this._rootData=this.main.toolBox.nameMap[this.cateid].get(this.classname)),this._rootData}},{key:"equIslocked",get:function(){return!!this.rootData&&this.rootData.isLock}},{key:"uid",get:function(){return this.UID},set:function(t){this.UID=t}},{key:"cannotSystemDrag",get:function(){return this.parent.cannotSystemDrag},set:function(t){this.parent.cannotSystemDrag=t}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);t.length>e;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function y(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:y(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},c=n(0),f=n(219),h=i(f),d=n(220),p=i(d),v=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.iElecInter=t.iElecInter,n._FONT_SIZE=40,n._FONT_SIZE_SUB=30,n.magnet=null,n.terminalL=null,n.terminalR=null,n.canMagReversal=!1,n.hasMagReversal=!1,n.ratedV=0,n.ratedP=0,n.isZuHe||(n.bposter0=new p["default"]("bposter0",n),n.bposter1=new p["default"]("bposter1",n),c.M.setSPPointXY(n.bposter0,-5e3,-5e3),c.M.setSPPointXY(n.bposter1,-5e3,-5e3)),n}return s(e,t),u(e,[{key:"addedFore",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addTisi(),this.addLabel(),this.addLabelP(),this.bp0&&c.M.setSPPointXY(this.bposter0,this.bp0.x+this.bp0.width/2,this.bp0.y),this.bp1&&c.M.setSPPointXY(this.bposter1,this.bp1.x+this.bp1.width/2,this.bp1.y),!this.globalConfig.DEBUG){var t=void 0;for(t=0;8>t;t++){var n=this["bp"+t];n&&this.removeChild(n)}}this.freshTxtColor(),this.updateTerminal(),this.updateMagnet()}},{key:"addTisi",value:function(){var t=this;if(this.proSet){this.tisi=new this.HoverButton({"default":"skin/icon_repair_default",hover:"skin/icon_repair_hover",pressed:"skin/icon_repair_pressed",tab:function(){t.repair()}}),this.tisi.pivot.x=this.tisi.width/2,this.tisi.pivot.y=this.tisi.height;var e=new c.Point(this.proSet.x+this.proSet.width/2,this.proSet.y+this.proSet.height);this.tisiBox=new PIXI.Sprite,this.tisiBox.addChild(this.tisi),this.tisi.scale.x=.9,this.tisi.scale.y=.9,this.main.skinview.add(this.tisiBox,function(){return{p:e,fromTar:t}}),TweenMax.to(this.tisi,1,{y:-50,yoyo:!0,repeat:-1}),this.globalConfig.DEBUG||(this.removeChild(this.proSet),this.proSet=null),this.tisi.visible=!1,this.addCursor(this.tisi,"hand")}}},{key:"addLabel",value:function(){var t=this;if(this.labelP){this.label=new PIXI.Text("",{font:this._FONT_SIZE+'px "Microsoft Yahei"',fill:this.globalConfig.DEFAULT_TXT_COLOR,align:"left"}),this.label.pivot.y=this.label.height;var e=new c.Point(this.labelP.x,this.labelP.y+this.labelP.height);this.main.skinview.add(this.label,function(){return{p:e,fromTar:t}}),this.globalConfig.DEBUG||(this.removeChild(this.labelP),this.labelP=null),this.label.visible=this.globalConfig.SHOWEQUVALUE}}},{key:"addLabelP",value:function(){var t=this;if(this.flabelP){this.flabel1=new PIXI.Text("L",{font:this._FONT_SIZE+'px "Microsoft Yahei"',fill:this.globalConfig.DEFAULT_TXT_COLOR,align:"right"}),this.flabel2=new PIXI.Text("123",{font:this._FONT_SIZE_SUB+'px "Microsoft Yahei"',fill:this.globalConfig.DEFAULT_TXT_COLOR,align:"left"}),this.flabel2.pivot.y=this.flabel2.height-this.flabel1.height,this.flabel12Box=new PIXI.Sprite,this.flabel12Box.addChild(this.flabel1),this.flabel12Box.addChild(this.flabel2);var e=new c.Point(this.flabelP.x+this.flabelP.width/2,this.flabelP.y);this.main.skinview.add(this.flabel12Box,function(){return{p:e,fromTar:t}}),this.flagLabel=this.elecUtil.getNextName(this);var n=c.M.getNumStr(this.flagLabel);this.flabel1.text=this.flagLabel.split(n)[0],this.flabel2.text=n,this.freshFLablePos(),this.globalConfig.DEBUG||(this.flabelP.visible=!1),this.flabel1.visible=this.flabel2.visible=this.globalConfig.SHOW_FLAG_LABEL}}},{key:"addedEnd",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this),this.freshGlow()}},{key:"freshGlow",value:function(){if(this.canReversal){this.showGlowIndex(this.hasReversal?1:0)}else l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshGlow",this).call(this)}},{key:"freshFLablePos",value:function(){this.flabelP&&this.flabel1&&this.flabel2&&(this.flabel1.x=-this.flabel1.width-2)}},{key:"freshTxtColor",value:function(){var t=this.globalConfig.TXT_COLOR;this.label&&(this.label.style.fill=t,this.label.updateText()),this.flabel1&&(this.flabel1.style.fill=t,this.flabel2.style.fill=t,this.flabel1.updateText(),this.flabel2.updateText())}},{key:"addedEnd",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"rotateChange",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t),this._fresh_from_componentBox_rotation()}},{key:"_fresh_from_componentBox_rotation",value:function(){if(this.canRotate&&this.bp0&&this.bp1){this.bposter0.oriPosition||(this.bposter0.oriPosition=this.bposter0.position.clone(),this.bposter1.oriPosition=this.bposter1.position.clone());var t=c.M.rotaPointFromP(this.bposter0.oriPosition,this.componentBox,this.componentBox.rotation),e=c.M.rotaPointFromP(this.bposter1.oriPosition,this.componentBox,this.componentBox.rotation);c.M.setSPPoint(this.bposter0,t),c.M.setSPPoint(this.bposter1,e),this.updateBinds(),this.globalConfig.DEBUG&&(this.bp0.x=t.x-this.bp0.width/2,this.bp0.y=t.y,this.bp1.x=e.x-this.bp1.width/2,this.bp1.y=e.y)}}},{key:"rotatedConf",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotatedConf",this).call(this,t),this._fresh_from_componentBox_rotation()}},{key:"freshLabel",value:function(t){this.label&&(this.label.text=t)}},{key:"repair",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this),this.tisi&&(this.tisi.visible=!1),this.freshLibPan(),setTimeout(function(){t.freshLibPan()},100)}},{key:"break",value:function(){var t=this;this.isBreak||(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this),setTimeout(function(){t.hadDestory||(t.tisi&&t.globalConfig.SHOWTIPPAO&&(t.tisi.gotoDefault(),t.tisi.visible=!0,t.globalConfig.SoundTool.registAndPlay("ElecLampAndHolder"===t.classname||"ElecLampAndHolderRes"===t.classname?t.SoundStr.LAMP_BURN_OUT:t.SoundStr.BURN_OUT)),t.diyChanged())},0))}},{key:"set_bposter",value:function(t,e,n){this.bposter0=t,this.bposter1=e,this.Resistance=n,this.bposter0.bindinger.set_myroad(this.bposter1.bindinger,this.Resistance)}},{key:"setWorkPower",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t)}},{key:"updateMagnet",value:function(){this.magnet&&this.magnet.gotoAndStop(this.hasMagReversal?1:0)}},{key:"magReversal",value:function(){this.updateMagnet()}},{key:"updateTerminal",value:function(){this.hasReversal?(this.terminalL&&this.terminalL.gotoAndStop(1),this.terminalR&&this.terminalR.gotoAndStop(0)):(this.terminalL&&this.terminalL.gotoAndStop(0),this.terminalR&&this.terminalR.gotoAndStop(1))}},{key:"reversal",value:function(t,e){if(this.canReversal){t||(this.hasReversal=!this.hasReversal);var n=c.M.getSPPoint(this.bposter0),i=c.M.getSPPoint(this.bposter1);c.M.setSPPoint(this.bposter0,i),c.M.setSPPoint(this.bposter1,n),this.hasReversal?(this.bposter0.bindinger.linkWireType=2,this.bposter1.bindinger.linkWireType=1):(this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2),e||this.reversalBposter01(),this.updateBinds(!0),this.freshGlow()}this.branchChange=!0,this.updateTerminal()}},{key:"reversalBposter01",value:function(){var t,e,n=this,i=this.bposter0.bindinger.friendPostersArr.slice(),o=this.bposter1.bindinger.friendPostersArr.slice();(t=this.bposter0.bindinger.friendPostersArr).splice.apply(t,[0,this.bposter0.bindinger.friendPostersArr.length].concat(r(o))),(e=this.bposter1.bindinger.friendPostersArr).splice.apply(e,[0,this.bposter1.bindinger.friendPostersArr.length].concat(r(i))),this.bposter0.bindinger.friendPostersArr.forEach(function(t){c.ArrayUtil.removeValueFromArray(t.friendPostersArr,n.bposter1.bindinger),t.friendPostersArr.push(n.bposter0.bindinger),t.BindMC.wire_h_mc.linkBposter=n.bposter0.bindinger}),this.bposter1.bindinger.friendPostersArr.forEach(function(t){c.ArrayUtil.removeValueFromArray(t.friendPostersArr,n.bposter0.bindinger),t.friendPostersArr.push(n.bposter1.bindinger),t.BindMC.wire_h_mc.linkBposter=n.bposter1.bindinger})}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.hasReversal=this.hasReversal,t.hasMagReversal=this.hasMagReversal,this.flabel1&&(t.flabel1txt=this.flabel1.text,t.flabel2txt=this.flabel2.text),t}},{key:"setData",value:function(t){if(this.hasReversal=!!t.hasReversal,this.hasMagReversal=!!t.hasMagReversal,t.isBreak&&this.tisi&&(this.tisi.visible=this.globalConfig.SHOWTIPPAO,this.tisi.gotoDefault()),!t.iscopy){if(t.flabel1txt)this.flabel1.text=t.flabel1txt,this.flabel2.text=t.flabel2txt;else if(t.flagLabel){this.flagLabel=t.flagLabel;var n=c.M.getNumStr(this.flagLabel),i=this.flagLabel.split(n)[0];this.flabel1.text=i,this.flabel2.text=n}this.freshFLablePos()}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this._fresh_from_componentBox_rotation(),this.hasReversal&&this.reversal(!0),this.updateTerminal(),this.updateMagnet()}},{key:"setDataOver",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),!this.canReversal&&this.canRotate&&this._fresh_from_componentBox_rotation()}},{key:"loopHandle",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"loopHandle",this).call(this)}},{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this)}},{key:"caculateOver",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"caculateOver",this).call(this)}},{key:"revokeOver",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revokeOver",this).call(this)}},{key:"beginFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t)}},{key:"moveFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t)}},{key:"endFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t)}},{key:"getConfEnd",value:function(t){var n=this;return t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConfEnd",this).call(this,t),this.flabel1&&t.confArr.push({type:this.ComponentProperty.DOUBLE_INPUT,name:this.language.getLocaleStr("name"),showValue:{valueA:this.flabel1.text,valueB:this.flabel2.text},callBack:function(t){n.flabel1.text=t.showValue.valueA,n.flabel2.text=t.showValue.valueB,n.freshFLablePos()}}),t}},{key:"checkIsInOneHui",value:function(){return this.elecUtil.checkBindMCInElec([this.bposter0,this.bposter1])}},{key:"removed",value:function(){this.tisiBox&&this.main.skinview.remove(this.tisiBox),this.label&&this.main.skinview.remove(this.label),this.flabel12Box&&this.main.skinview.remove(this.flabel12Box),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"freshTxtSize",value:function(){}},{key:"viewZoomComplete",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"viewZoomComplete",this).call(this),this.freshTxtSize()}},{key:"defaultSettingChanged",value:function(){this.branchChange=!0}}]),e}(h["default"]);v.elecNumLabel=0,e["default"]=v},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function o(){i(this,o)};r.MIN_DRAW_ELEC_NUM=5e-4,r.BINDMC_POTISON_CHANGED="bindMCPotisonChanged",r.ELEC_WIRE_THICK_ALPHA=10,r.ELEC__GUAI_DIS_THICK=r.ELEC_WIRE_THICK_ALPHA,r.ELEC_BREAK_BEI=1.1,r.ELEC_BREAK_BEI2=1.25,r.MIN_RESISTANCE=1e-6,r.MAX_RESISTANCE=-1,r.DAMAGE_A=50,e["default"]=r},function(t,e,n){"use strict";t.exports=n(336)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=n(69),s=function(t){return t&&t.__esModule?t:{"default":t}}(a),u=function(){function t(e){i(this,t);n(215);this.classname="MagElecPoint",this.points=[],this.angles=[],this.startAngle=0,this.r=20,this.symmetric=!1,this.showFlag=e,this.oppsite=null}return r(t,[{key:"init",value:function(e,n){var i=(this.id=e.id||0,this.elecNum=e.elecNum,this.elecPoint=new o.Point(e.elecPoint.x,e.elecPoint.y),this.type=e.type||t.TYPE_NORMAL),r=(this.n=e.n,e.angle||0);this.r=e.r||20,this.symmetric=n||!1,this.dir=s["default"].getDir(this),this.angles=[],(n&&this.n%2!=0&&i==t.TYPE_LEFT||i==t.TYPE_RIGHT)&&(this.n+=1),this.step=2*Math.PI/this.n,this.startAngle=r-Math.PI/2+this.step/2,e.notHalfStep&&(this.startAngle-=this.step/2);for(var a=0;this.n>a;a++)this.angles.push({angle:this.startAngle+a*this.step,flag:!1});switch(i){case t.TYPE_NORMAL:break;case t.TYPE_LEFT:for(var u=parseInt(this.n/2),l=0;u>l;l++)this.angles[l].flag=!0;break;case t.TYPE_RIGHT:for(var c=parseInt(this.n/2),f=c;this.n>f;f++)this.angles[f].flag=!0;break;default:this.type=t.TYPE_NORMAL}}},{key:"getPoints",value:function(){for(var t=[],e=0;this.n>e;e++){var n=this.angles[e];if(!n.flag){var i=new o.Point;i.x=this.elecPoint.x+this.r*Math.cos(n.angle),i.y=this.elecPoint.y+this.r*Math.sin(n.angle),i.index=e,t.push(i)}}return t}},{key:"closeByIndex",value:function(t){var e=this.angles[t];e&&(e.flag=!0)}},{key:"getOppositeIndex",value:function(t){var e=parseInt(this.n/2);return e>t?e-1-t:this.n-1+e-t}},{key:"checkSimpleClose",value:function(t,e){return e=Math.max(this.r,e),!!new o.Rectangle(this.elecPoint.x-e,this.elecPoint.y-e,2*e,2*e).containsPoint(t)}},{key:"checkClose",value:function(t,e,n){if(o.Point.distance(this.elecPoint,t)<this.r){var i=this.n,r=s["default"].getAngle(e)+Math.PI,a=Math.round((r-this.startAngle)/this.step);for(a%=i;0>a;)a+=i;for(var u=s["default"].getIntCountableSet(i,-1),l=0;i>l;l++){var c=a+u[l];c=(c+i)%i;var f=this.angles[c];if(!f.flag)return f.flag=!0,1}return 2}return 0}}]),t}();u.TYPE_NORMAL=1,u.TYPE_LEFT=2,u.TYPE_RIGHT=3,e["default"]=u},function(t,e,n){"use strict";t.exports=n(351)},function(t,e,n){"use strict";var i=n(16),r=n(17),o=n(58);t.exports=function(t){return function(e,n,a){var s,u=i(e),l=r(u.length),c=o(a,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){"use strict";var i=n(32),r=n(4)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(e){}};t.exports=function(t){var e,n,s;return t===undefined?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){"use strict";var i=n(11).f,r=n(77),o=n(57),a=n(22),s=n(49),u=n(53),l=n(117),c=n(118),f=n(126),h=n(13),d=n(24).fastKey,p=n(34),v=h?"_s":"size",y=function(t,e){var n,i=d(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var c=t(function(t,i){s(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=undefined,t._l=undefined,t[v]=0,i!=undefined&&u(i,n,t[l],t)});return o(c.prototype,{clear:function(){for(var t=p(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=undefined),delete n[i.i];t._f=t._l=undefined,t[v]=0},"delete":function(t){var n=p(this,e),i=y(n,t);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[v]--}return!!i},forEach:function(t){p(this,e);for(var n,i=a(t,arguments.length>1?arguments[1]:undefined,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(p(this,e),t)}}),h&&i(c.prototype,"size",{get:function(){return p(this,e)[v]}}),c},def:function(t,e,n){var i,r,o=y(t,e);return o?o.v=n:(t._l=o={i:r=d(e,!0),k:e,v:n,p:i=t._l,n:undefined,r:!1},t._f||(t._f=o),i&&(i.n=o),t[v]++,"F"!==r&&(t._i[r]=o)),t},getEntry:y,setStrong:function(t,e,n){l(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=undefined},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=undefined,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var i=n(57),r=n(24).getWeak,o=n(8),a=n(3),s=n(49),u=n(53),l=n(50),c=n(18),f=n(34),h=l(5),d=l(6),p=0,v=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return h(t.a,function(t){return t[0]===e})};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var l=t(function(t,i){s(t,l,e,"_i"),t._t=e,t._i=p++,t._l=undefined,i!=undefined&&u(i,n,t[o],t)});return i(l.prototype,{"delete":function(t){if(!a(t))return!1;var n=r(t);return!0===n?v(f(this,e))["delete"](t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=r(t);return!0===n?v(f(this,e)).has(t):n&&c(n,this._i)}}),l},def:function(t,e,n){var i=r(o(e),!0);return!0===i?v(t).set(e,n):i[t._i]=n,t},ufstore:v}},function(t,e,n){"use strict";var i=n(5).document;t.exports=i&&i.documentElement},function(t,e,n){"use strict";t.exports=!n(13)&&!n(14)(function(){return 7!=Object.defineProperty(n(72)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";var i=n(39),r=n(4)("iterator"),o=Array.prototype;t.exports=function(t){return t!==undefined&&(i.Array===t||o[r]===t)}},function(t,e,n){"use strict";var i=n(32);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){"use strict";var i=n(3),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){"use strict";var i=n(3),r=n(32),o=n(4)("match");t.exports=function(t){var e;return i(t)&&((e=t[o])!==undefined?!!e:"RegExp"==r(t))}},function(t,n,i){"use strict";var r=i(8);t.exports=function(t,n,i,o){try{return o?n(r(i)[0],i[1]):n(i)}catch(e){var a=t["return"];throw a!==undefined&&r(a.call(t)),e}}},function(t,e,n){"use strict";var i=n(54),r=n(1),o=n(25),a=n(23),s=n(18),u=n(39),l=n(233),c=n(42),f=n(122),h=n(4)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,y,g,_){l(n,e,v);var m,b,w,E=function(t){if(!d&&t in k)return k[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},x=e+" Iterator",O="values"==y,P=!1,k=t.prototype,S=k[h]||k["@@iterator"]||y&&k[y],C=!d&&S||E(y),M=y?O?E("entries"):C:undefined,T="Array"==e?k.entries||S:S;if(T&&(w=f(T.call(new t)))!==Object.prototype&&w.next&&(c(w,x,!0),i||s(w,h)||a(w,h,p)),O&&S&&"values"!==S.name&&(P=!0,C=function(){return S.call(this)}),i&&!_||!d&&!P&&k[h]||a(k,h,C),u[e]=C,u[x]=p,y)if(m={values:O?C:E("values"),keys:g?C:E("keys"),entries:M},_)for(b in m)b in k||o(k,b,m[b]);else r(r.P+r.F*(d||P),e,m);return m}},function(t,e,n){"use strict";t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(e!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(48);t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var i=n(28),r=n(56),o=n(40),a=n(26),s=n(75),u=Object.assign;t.exports=!u||n(14)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=a(t),u=arguments.length,l=1,c=r.f,f=o.f;u>l;)for(var h,d=s(arguments[l++]),p=c?i(d).concat(c(d)):i(d),v=p.length,y=0;v>y;)f.call(d,h=p[y++])&&(n[h]=d[h]);return n}:u},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(16),o=n(78).f,a={}.toString,s="object"==("undefined"==typeof window?"undefined":i(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return o(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==a.call(t)?u(t):o(r(t))}},function(t,e,n){"use strict";var i=n(18),r=n(26),o=n(79)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";var i=n(18),r=n(16),o=n(106)(!1),a=n(79)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,l=[];for(n in s)n!=a&&i(s,n)&&l.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){"use strict";var i=n(28),r=n(16),o=n(40).f;t.exports=function(t){return function(e){for(var n,a=r(e),s=i(a),u=s.length,l=0,c=[];u>l;)o.call(a,n=s[l++])&&c.push(t?[n,a[n]]:a[n]);return c}}},function(t,e,n){"use strict";var i=n(3),r=n(8),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(22)(Function.call,n(55).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(e){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):undefined),check:o}},function(t,e,n){"use strict";var i=n(5),r=n(11),o=n(13),a=n(4)("species");t.exports=function(t){var e=i[t];o&&e&&!e[a]&&r.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(17),r=n(128),o=n(27);t.exports=function(t,e,n,a){var s=o(t)+"",u=s.length,l=n===undefined?" ":n+"",c=i(e);if(u>=c||""==l)return s;var f=c-u,h=r.call(l,Math.ceil(f/l.length));return h.length>f&&(h=h.slice(0,f)),a?h+s:s+h}},function(t,e,n){"use strict";var i=n(59),r=n(27);t.exports=function(t){var e=r(this)+"",n="",o=i(t);if(0>o||o==Infinity)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";var i=n(5),r=i.navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";e.f=n(4)},function(t,e,n){"use strict";var i=n(107),r=n(4)("iterator"),o=n(39);t.exports=n(33).getIteratorMethod=function(t){if(t!=undefined)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){"use strict";e.__esModule=!0,e["default"]={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,i,r){var o=this;return t.forEach(function(t){o.processors[t]&&(e=o.processors[t].process(e,n,i,r))}),e}}},function(t,e,n){"use strict";function i(t,e){var n=a(t),i=!n&&o(t),c=!n&&!i&&s(t),h=!n&&!i&&!c&&l(t),d=n||i||c||h,p=d?r(t.length,String):[],v=p.length;for(var y in t)!e&&!f.call(t,y)||d&&("length"==y||c&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||u(y,v))||p.push(y);return p}var r=n(282),o=n(339),a=n(65),s=n(148),u=n(143),l=n(343),c=Object.prototype,f=c.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function i(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}t.exports=i},function(t,e,n){"use strict";function i(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}t.exports=i},function(t,e,n){"use strict";function i(t,e,n){var i=t[e];s.call(t,e)&&o(i,n)&&(n!==undefined||e in t)||r(t,e,n)}var r=n(137),o=n(89),a=Object.prototype,s=a.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function i(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var r=n(139);t.exports=i},function(t,e,n){"use strict";function i(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}var r=n(134),o=n(65);t.exports=i},function(t,e,n){"use strict";var i=n(30);t.exports=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(e){}}()},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports="object"==("undefined"==typeof global?"undefined":i(global))&&global&&global.Object===Object&&global},function(t,e,n){"use strict";t.exports=n(145)(Object.getPrototypeOf,Object)},function(t,e,n){"use strict";var i=n(134),r=n(141),o=n(87),a=n(151);t.exports=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,o(t)),t=r(t);return e}:a},function(t,e,n){"use strict";function i(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||o.test(t))&&t>-1&&t%1==0&&e>t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=i},function(t,e,n){"use strict";function i(t,e,n){if(!u(n))return!1;var i=void 0===e?"undefined":r(e);return!!("number"==i?a(n)&&s(e,n.length):"string"==i&&e in n)&&o(n[e],t)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(89),a=n(90),s=n(143),u=n(19);t.exports=i},function(t,e,n){"use strict";function i(t,e){return function(n){return t(e(n))}}t.exports=i},function(t,e,n){"use strict";function i(t){if(null!=t){try{return o.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;t.exports=i},function(t,e,n){"use strict";function i(t){return t}t.exports=i},function(t,e,n){"use strict";(function(t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(12),o=n(346),a="object"==i(e)&&e&&!e.nodeType&&e,s=a&&"object"==i(t)&&t&&!t.nodeType&&t,u=s&&s.exports===a,l=u?r.Buffer:undefined;t.exports=(l?l.isBuffer:undefined)||o}).call(e,n(36)(t))},function(t,e,n){"use strict";function i(t){if(!o(t))return!1;var e=r(t);return e==s||e==u||e==a||e==l}var r=n(35),o=n(19),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";t.exports=i},function(t,e,n){"use strict";function i(t){return"number"==typeof t&&t>-1&&t%1==0&&r>=t}var r=9007199254740991;t.exports=i},function(t,e,n){"use strict";function i(){return[]}t.exports=i},function(t,e,n){"use strict";function i(t){if("number"==typeof t)return t;if(o(t))return a;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=l.test(t);return n||c.test(t)?f(t.slice(2),n?2:8):u.test(t)?a:+t}var r=n(19),o=n(342),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;t.exports=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=n(6);e["default"]=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.label="",n.color=16711680,n.w=110,n.h=55,n.scaleNum=1,n._fontColor=16777215,n.fontSize=30,n.tab=null,n.begin=null,n.end=null,n["this"]=n,n.disabledSkin=null,n.downSkin=null,n.upSkin=null,n._text="",t){var o="";(0,u.forEach)(t,function(t,e){if("text"===e)return void(o=t);n[e]=t}),n.label=new PIXI.Text("",{fill:n._fontColor,font:n.fontSize+"px 微软雅黑",align:"left"}),n.text=o,n.touchBeginFunc=null,n.touchEndFunc=null}return n.init(),n}return o(e,t),a(e,[{key:"init",value:function(){var t=this;this.g=new PIXI.Graphics,this.g.beginFill(this.color),this.g.drawRect(0,0,this.w,this.h),this.g.endFill(),this.g.pivot.x=this.w/2,this.g.pivot.y=this.h/2,this.box=new PIXI.Container,this.addChild(this.box),this.box.addChild(this.g),this.disabledSkin&&this.changebg(this.disabledSkin),this.box.x=this.w/2,this.box.y=this.h/2,this.box.addChild(this.label),this.touchBeginFunc=function(e){t.beginHandle(e)},this.touchEndFunc=function(e){t.endHandle(e)},this.addEventListener(TouchEvent.TOUCH_BEGIN,this.touchBeginFunc),this.addEventListener(TouchEvent.TOUCH_END,this.touchEndFunc)}},{key:"changebg",value:function(t){t?(this.box.removeChildAt(0),t.pivot.x=t.width/2,t.pivot.y=t.height/2,this.box.addChildAt(t,0)):this.disabledSkin?this.box.addChildAt(this.disabledSkin,0):this.bg&&this.box.addChildAt(this.bg,0)}},{key:"beginHandle",value:function(t){this.changebg(this.downSkin),this.box.scale.x=this.scaleNum,this.box.scale.y=this.scaleNum,this.begin&&this.begin.call(this["this"],t)}},{key:"endHandle",value:function(t){this.changebg(this.upSkin),this.box.scale.x=1,this.box.scale.y=1,this.end&&this.end.call(this["this"],t),this.tabHandle(t)}},{key:"tabHandle",value:function(t){this.dispatchEvent("tab",{target:this}),this.tab&&this.tab.call(this["this"],t)}},{key:"dispose",value:function(){this.removeEventListener(TouchEvent.TOUCH_BEGIN,this.touchBeginFunc),this.removeEventListener(TouchEvent.TOUCH_END,this.touchEndFunc),this["this"]&&(this["this"]=null,delete this["this"]),this.tab=null,this.begin=null,this.end=null,this.disabledSkin=null,this.downSkin=null,this.upSkin=null,this.beginHandle=null,this.endHandle=null,this.removeChildren()}},{key:"destroy",value:function(){this.dispose()}},{key:"fontColor",get:function(){return this._fontColor},set:function(t){if(this._fontColor=t,this.label){this.label.style.fill=s.StringUtil.contains(""+t,"#")?t:s.M.getDomColor(t);var e=this.label.text;this.label.text="",this.label.text=e}}},{key:"text",get:function(){return this.label.text},set:function(t){this.label.text=t,this.label.pivot.x=this.label.width/2,this.label.pivot.y=this.label.height/2}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(n(0),n(224)),a=(function(t){}(o),function(){function t(){i(this,t)}return r(t,null,[{key:"getAngle",value:function(e,n,i,r){var o={type:t.ANGLE};return o.name=e,o.value=n,o.callBack=i,o["this"]=r,o}},{key:"getCheckBox",value:function(e,n,i,r,o,a,s,u,l){var c={type:t.CHECKBOX};return c.name=e,c.canEnter=n,c.enterUnit=i,c.maxValue=u,c.minValue=l,c.showValue=r,c.value=o,c["this"]=a,c.callBack=s,c}},{key:"getLabel",value:function(e,n){var i={type:t.LABEL};return i.name=e,i.text=n,i}},{key:"getScrollBar",value:function(e,n,i,r,o,a,s,u,l){var c={type:t.DRAG};if(c.name=e,c.canEnter=n,c.enterUnit=i,c.maxValue=r,c.minValue=o,c.step=s,s>0){for(var f=0;1>s;)s*=10,f++;c.precision=f}return c.callBack=u,c["this"]=l,"[object Object]"===Object.prototype.toString.call(a)?Object.defineProperty(c,"showValue",{get:function(){return a.value},set:function(t){a.value=t}}):c.showValue=a,c}},{key:"getSwitch",value:function(e,n,i,r){var o={type:t.BOOL};return o.name=e,o.checked=n,o.callBack=i,o["this"]=r,o}},{key:"getDropMenu",value:function(e,n,i,r,o,a,s,u,l){var c={type:t.SELECT};return c.name=e,c.canEnter=n,c.enterUnit=i,c.maxValue=u,c.minValue=l,c.showValue=r,c.value=o,c["this"]=a,c.callBack=s,c}},{key:"getRadio",value:function(e,n,i,r,o){var a={type:t.RADIO};return a.name=e,a.checked=n,a.value=i,a.callBack=r,a["this"]=o,a}},{key:"getButton",value:function(e,n,i,r){var o={type:t.BUTTON};return o.name=e,o.text=n,o.callBack=i,o["this"]=r,o}},{key:"getTextInput",value:function(e,n,i,r,o){var a={type:t.INPUT};return a.name=e,a.showValue=n,a.enterUnit=i,a.callBack=r,a["this"]=o,a}}]),t}());a.RADIO=1,a.CHECKBOX=2,a.SELECT=3,a.BOOL=4,a.INPUT=5,a.LABEL=6,a.DRAG=7,a.BUTTON=8,a.ANGLE=9,a.TEXT=13,a.DOUBLE_INPUT=14,a.DOUBLE_BUTTON=15,a.SIMULATED_ELECTRIC_FIELD=16,a.TYPE_LIST_BATTERY_HOLDER=17,a.TYPE_LIST_BATTERY=18,a.TYPE_LIST_WAX_BLOCK=19,a.TYPE_LIST_RULER=20,e["default"]=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e["default"]=function(){function t(e){i(this,t),this.main=e}return r(t,[{key:"getEquipmentArr",value:function(t){var e=this.main.getEquipmentArr(),n=[];if(!(t&&t instanceof Array&&0!==t.length))return n;var i=!0,r=!1,o=undefined;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value;u.component&&-1!==t.indexOf(u.component.classname)&&n.push(u.component)}}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}},{key:"getEquiFromUID",value:function(t){if(!t)return null;var e=this.main.getEquipmentArr(),n=null,i=!0,r=!1,o=undefined;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value,l=u.component;if(l&&l.UID===t){n=l;break}}}catch(c){r=!0,o=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}},{key:"destroy",value:function(){this.main=null}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e["default"]=function(){function t(){i(this,t)}return r(t,[{key:"execute",value:function(t){throw"必须重写该方法"}}]),t}()},function(t,e,n){"use strict";e.__esModule=!0;var i=function r(){var t=-1;this.animationSpeed=1;var e=r.ticker;this.totalFrames=0,this._currentTime=0,this.loop=!0,this.playing=!1,this.play=function(){this.playing&&(this.playing=!1,e.remove(this.update,this))},this.stop=function(){this.playing&&(e.remove(this.update,this),this.playing=!1)},this.update=function(e){this.__end__&&(this.__end__=!1,this.__gotoAndStop__(0)),(this.__floor__=t+this.animationSpeed+(this.__decimal__||0))>this.totalFrames-1&&(this.__floor__=this.totalFrames-1);var n=Math.floor(this.__floor__);this.__decimal__=this.__floor__%1,0>n?this.loop?this.__gotoAndStop__(n):(this.__gotoAndStop__(0),this.onComplete&&this.onComplete()):n>this.totalFrames-1?n>this.totalFrames-1&&(this.__gotoAndStop__(this.totalFrames-1),this.onComplete&&this.onComplete(),this.stop()):(this.loop?this.__gotoAndStop__(n):(this.__gotoAndStop__(n),n===this.totalFrames-1&&this.stop()),n===this.totalFrames-1&&(this.onComplete&&this.onComplete(),this.loop&&(this.__end__=!0)))},this.insertDisplayObjectToFrame=function(t,e){this[e]===undefined&&(this[e]=[],this.totalFrames>e||(this.totalFrames=e+1)),this[e].push(t),t.visible=!1},this.gotoAndStop=function(t){t=Math.round(t),this._currentTime=t,this.stop(),this.__gotoAndStop__(t)},this.gotoAndPlay=function(t){t=Math.round(t),this._currentTime=t,this.gotoAndStop(t),this.play()},this.__gotoAndStop__=function(e){if(-1!==t){var n=this[t];if(n!==undefined)for(var i=0;n.length>i;i++)n[i].visible=!1}this.totalFrames>e||(e=this.totalFrames-1),t=e;var n=this[e];if(n!==undefined)for(var i=0;n.length>i;i++)n[i].visible=!0},this.play=function(){this.playing||(this.playing=!0,e.add(this.update,this))},this.stop=function(){this.playing&&(this.playing=!1,e.remove(this.update,this))},Object.defineProperty(this,"currentFrame",{get:function(){return t},set:function(t){this.gotoAndStop(Math.floor(t))}});var n=!1;Object.defineProperty(this,"reverse",{get:function(){return n},set:function(e){if(n!==e){-1!==t&&this.__gotoAndStop__(this.totalFrames-1-t);for(var i=Math.floor(this.totalFrames/2),r=0;i>r;r++){var o=this[r];this[r]=this[this.totalFrames-1-r],this[this.totalFrames-1-r]=o}n=e}}})};i.ticker=new PIXI.ticker.Ticker,i.ticker.start(),e["default"]=i},function(t,e){(function(e){t.exports=e}).call(e,{})},function(e,n){e.exports=t},function(t,e,n){"use strict";var i=n(1);i(i.P,"Array",{copyWithin:n(225)}),n(31)("copyWithin")},function(t,e,n){"use strict";var i=n(1);i(i.P,"Array",{fill:n(226)}),n(31)("fill")},function(t,e,n){"use strict";var i=n(1),r=n(50)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:undefined)}}),n(31)(o)},function(t,e,n){"use strict";var i=n(1),r=n(50)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:undefined)}}),n(31)("find")},function(t,e,n){"use strict";var i=n(22),r=n(1),o=n(26),a=n(116),s=n(112),u=n(17),l=n(71),c=n(131);r(r.S+r.F*!n(76)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,f,h=o(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:undefined,y=v!==undefined,g=0,_=c(h);if(y&&(v=i(v,p>2?arguments[2]:undefined,2)),_==undefined||d==Array&&s(_))for(e=u(h.length),n=new d(e);e>g;g++)l(n,g,y?v(h[g],g):h[g]);else for(f=_.call(h),n=new d;!(r=f.next()).done;g++)l(n,g,y?a(f,v,[r.value,g],!0):r.value);return n.length=g,n}})},function(t,e,n){"use strict";var i=n(1),r=n(71);i(i.S+i.F*n(14)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)r(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(11).f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||n(13)&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(t,e,n){"use strict";var i=n(108),r=n(34);t.exports=n(51)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:undefined)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(1);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){"use strict";var i=n(1),r=n(5).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){"use strict";var i=n(1);i(i.S,"Number",{isInteger:n(114)})},function(t,e,n){"use strict";var i=n(1);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){"use strict";var i=n(1),r=n(114),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return r(t)&&9007199254740991>=o(t)}})},function(t,e,n){"use strict";var i=n(1);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){"use strict";var i=n(1);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){"use strict";var i=n(1);i(i.S+i.F,"Object",{assign:n(120)})},function(t,e,n){"use strict";var i=n(3),r=n(24).onFreeze;n(15)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){"use strict";var i=n(16),r=n(55).f;n(15)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){"use strict";n(15)("getOwnPropertyNames",function(){return n(121).f})},function(t,e,n){"use strict";var i=n(26),r=n(122);n(15)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){"use strict";var i=n(3);n(15)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){"use strict";var i=n(3);n(15)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){"use strict";var i=n(3);n(15)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){"use strict";var i=n(1);i(i.S,"Object",{is:n(239)})},function(t,e,n){"use strict";var i=n(26),r=n(28);n(15)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){"use strict";var i=n(3),r=n(24).onFreeze;n(15)("preventExtensions",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){"use strict";var i=n(3),r=n(24).onFreeze;n(15)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){"use strict";var i=n(1);i(i.S,"Object",{setPrototypeOf:n(125).set})},function(t,n,i){"use strict";var r,o,a,s,u=i(54),l=i(5),c=i(22),f=i(107),h=i(1),d=i(3),p=i(48),v=i(49),y=i(53),g=i(240),_=i(82).set,m=i(234)(),b=i(119),w=i(237),E=i(238),x=l.TypeError,O=l.process,P=l.Promise,k="process"==f(O),S=function(){},C=o=b.f,M=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[i(4)("species")]=function(t){t(S,S)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(S)instanceof e}catch(e){}}(),T=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},A=function(t,n){if(!t._n){t._n=!0;var i=t._c;m(function(){for(var r=t._v,o=1==t._s,a=0;i.length>a;)!function(n){var i,a,s=o?n.ok:n.fail,u=n.resolve,l=n.reject,c=n.domain;try{s?(o||(2==t._h&&I(t),t._h=1),!0===s?i=r:(c&&c.enter(),i=s(r),c&&c.exit()),i===n.promise?l(x("Promise-chain cycle")):(a=T(i))?a.call(i,u,l):u(i)):l(r)}catch(e){l(e)}}(i[a++]);t._c=[],t._n=!1,n&&!t._h&&D(t)})}},D=function(t){_.call(l,function(){var e,n,i,r=t._v,o=L(t);if(o&&(e=w(function(){k?O.emit("unhandledRejection",r,t):(n=l.onunhandledrejection)?n({promise:t,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=k||L(t)?2:1),t._a=undefined,o&&e.e)throw e.v})},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},I=function(t){_.call(l,function(){var e;k?O.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},j=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},N=function R(t){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw x("Promise can't be resolved itself");(n=T(t))?m(function(){var r={_w:i,_d:!1};try{n.call(t,c(R,r,1),c(j,r,1))}catch(e){j.call(r,e)}}):(i._v=t,i._s=1,A(i,!1))}catch(e){j.call({_w:i,_d:!1},e)}}};M||(P=function(t){v(this,P,"Promise","_h"),p(t),r.call(this);try{t(c(N,this,1),c(j,this,1))}catch(e){j.call(this,e)}},r=function(t){this._c=[],this._a=undefined,this._s=0,this._d=!1,this._v=undefined,this._h=0,this._n=!1},r.prototype=i(57)(P.prototype,{then:function(t,e){var n=C(g(this,P));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=k?O.domain:undefined,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},"catch":function(t){return this.then(undefined,t)}}),a=function(){var t=new r;this.promise=t,this.resolve=c(N,t,1),this.reject=c(j,t,1)},b.f=C=function(t){return t===P||t===s?new a(t):o(t)}),h(h.G+h.W+h.F*!M,{Promise:P}),i(42)(P,"Promise"),i(126)("Promise"),s=i(33).Promise,h(h.S+h.F*!M,"Promise",{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(u||!M),"Promise",{resolve:function(t){return E(u&&this===s?P:this,t)}}),h(h.S+h.F*!(M&&i(76)(function(t){P.all(t)["catch"](S)})),"Promise",{all:function(t){var e=this,n=C(e),i=n.resolve,r=n.reject,o=w(function(){var n=[],o=0,a=1;y(t,!1,function(t){var s=o++,u=!1;n.push(undefined),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=C(e),i=n.reject,r=w(function(){y(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e,n){"use strict";n(13)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(230)})},function(t,e,n){"use strict";n(52)("match",1,function(t,e,n){return[function(n){var i=t(this),r=n==undefined?undefined:n[e];return r!==undefined?r.call(n,i):RegExp(n)[e](i+"")},n]})},function(t,e,n){"use strict";n(52)("replace",2,function(t,e,n){return[function(i,r){var o=t(this),a=i==undefined?undefined:i[e];return a!==undefined?a.call(i,o,r):n.call(o+"",i,r)},n]})},function(t,e,n){"use strict";n(52)("search",1,function(t,e,n){return[function(n){var i=t(this),r=n==undefined?undefined:n[e];return r!==undefined?r.call(n,i):RegExp(n)[e](i+"")},n]})},function(t,e,n){"use strict";n(52)("split",2,function(t,e,i){var r=n(115),o=i,a=[].push,s="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[s]||2!="ab".split(/(?:ab)*/)[s]||4!=".".split(/(.?)(.?)/)[s]||".".split(/()()/)[s]>1||"".split(/.?/)[s]){var u=/()??/.exec("")[1]===undefined;i=function(t,e){var n=this+"";if(t===undefined&&0===e)return[];if(!r(t))return o.call(n,t,e);var i,l,c,f,h,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,y=e===undefined?4294967295:e>>>0,g=RegExp(t.source,p+"g");for(u||(i=RegExp("^"+g.source+"$(?!\\s)",p));(l=g.exec(n))&&((c=l.index+l[0][s])<=v||(d.push(n.slice(v,l.index)),!u&&l[s]>1&&l[0].replace(i,function(){for(h=1;arguments[s]-2>h;h++)arguments[h]===undefined&&(l[h]=undefined)}),l[s]>1&&n[s]>l.index&&a.apply(d,l.slice(1)),f=l[0][s],v=c,y>d[s]));)g.lastIndex===l.index&&g.lastIndex++;return v===n[s]?!f&&g.test("")||d.push(""):d.push(n.slice(v)),d[s]>y?d.slice(0,y):d}}else"0".split(undefined,0)[s]&&(i=function(t,e){return t===undefined&&0===e?[]:o.call(this,t,e)});return[function(n,r){var o=t(this),a=n==undefined?undefined:n[e];return a!==undefined?a.call(n,o,r):i.call(o+"",n,r)},i]})},function(t,e,n){"use strict";var i=n(108),r=n(34);t.exports=n(51)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:undefined)}},{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i=n(1),r=n(241)(!1);i(i.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(1),r=n(17),o=n(81),a="".endsWith;i(i.P+i.F*n(74)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:undefined,i=r(e.length),s=n===undefined?i:Math.min(r(n),i),u=t+"";return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,n){"use strict";var i=n(1),r=n(58),o=String.fromCharCode,a=String.fromCodePoint;i(i.S+i.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,a=0;i>a;){if(e=+arguments[a++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(65536>e?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var i=n(1),r=n(81);i(i.P+i.F*n(74)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:undefined)}})},function(t,e,n){"use strict";var i=n(1),r=n(16),o=n(17);i(i.S,"String",{raw:function(t){for(var e=r(t.raw),n=o(e.length),i=arguments.length,a=[],s=0;n>s;)a.push(e[s++]+""),i>s&&a.push(arguments[s]+"");return a.join("")}})},function(t,e,n){"use strict";var i=n(1);i(i.P,"String",{repeat:n(128)})},function(t,e,n){"use strict";var i=n(1),r=n(17),o=n(81),a="".startsWith;i(i.P+i.F*n(74)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:undefined,e.length)),i=t+"";return a?a.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(5),o=n(18),a=n(13),s=n(1),u=n(25),l=n(24).KEY,c=n(14),f=n(80),h=n(42),d=n(43),p=n(4),v=n(130),y=n(242),g=n(229),_=n(113),m=n(8),b=n(3),w=n(16),E=n(83),x=n(41),O=n(77),P=n(121),k=n(55),S=n(11),C=n(28),M=k.f,T=S.f,A=P.f,D=r.Symbol,L=r.JSON,I=L&&L.stringify,j=p("_hidden"),N=p("toPrimitive"),R={}.propertyIsEnumerable,B=f("symbol-registry"),U=f("symbols"),H=f("op-symbols"),F=Object.prototype,G="function"==typeof D,V=r.QObject,W=!V||!V.prototype||!V.prototype.findChild,q=a&&c(function(){return 7!=O(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=M(F,e);i&&delete F[e],T(t,e,n),i&&t!==F&&T(F,e,i)}:T,X=function(t){var e=U[t]=O(D.prototype);return e._k=t,e},z=G&&"symbol"==i(D.iterator)?function(t){return"symbol"==(void 0===t?"undefined":i(t))}:function(t){return t instanceof D},Y=function(t,e,n){return t===F&&Y(H,e,n),m(t),e=E(e,!0),m(n),o(U,e)?(n.enumerable?(o(t,j)&&t[j][e]&&(t[j][e]=!1),n=O(n,{enumerable:x(0,!1)})):(o(t,j)||T(t,j,x(1,{})),t[j][e]=!0),q(t,e,n)):T(t,e,n)},$=function(t,e){m(t);for(var n,i=g(e=w(e)),r=0,o=i.length;o>r;)Y(t,n=i[r++],e[n]);return t},K=function(t,e){return e===undefined?O(t):$(O(t),e)},Z=function(t){var e=R.call(this,t=E(t,!0));return!(this===F&&o(U,t)&&!o(H,t))&&(!(e||!o(this,t)||!o(U,t)||o(this,j)&&this[j][t])||e)},Q=function(t,e){if(t=w(t),e=E(e,!0),t!==F||!o(U,e)||o(H,e)){var n=M(t,e);return!n||!o(U,e)||o(t,j)&&t[j][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=A(w(t)),i=[],r=0;n.length>r;)o(U,e=n[r++])||e==j||e==l||i.push(e);return i},tt=function(t){for(var e,n=t===F,i=A(n?H:w(t)),r=[],a=0;i.length>a;)!o(U,e=i[a++])||n&&!o(F,e)||r.push(U[e]);return r};G||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:undefined),e=function n(e){this===F&&n.call(H,e),o(this,j)&&o(this[j],t)&&(this[j][t]=!1),q(this,t,x(1,e))};return a&&W&&q(F,t,{configurable:!0,set:e}),X(t)},u(D.prototype,"toString",function(){return this._k}),k.f=Q,S.f=Y,n(78).f=P.f=J,n(40).f=Z,n(56).f=tt,a&&!n(54)&&u(F,"propertyIsEnumerable",Z,!0),v.f=function(t){return X(p(t))}),s(s.G+s.W+s.F*!G,{Symbol:D});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var it=C(p.store),rt=0;it.length>rt;)y(it[rt++]);s(s.S+s.F*!G,"Symbol",{"for":function(t){return o(B,t+="")?B[t]:B[t]=D(t)},keyFor:function(t){if(!z(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!G,"Object",{create:K,defineProperty:Y,defineProperties:$,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:tt}),L&&s(s.S+s.F*(!G||c(function(){var t=D();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(b(e)||t!==undefined)&&!z(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!z(e))return e}),i[1]=e,I.apply(L,i)}}),D.prototype[N]||n(23)(D.prototype,N,D.prototype.valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){"use strict";var i,r=n(50)(0),o=n(25),a=n(24),s=n(120),u=n(109),l=n(3),c=n(14),f=n(34),h=a.getWeak,d=Object.isExtensible,p=u.ufstore,v={},y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:undefined)}},g={get:function(t){if(l(t)){var e=h(t);return!0===e?p(f(this,"WeakMap")).get(t):e?e[this._i]:undefined}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},_=t.exports=n(51)("WeakMap",y,g,u,!0,!0);c(function(){return 7!=(new _).set((Object.freeze||Object)(v),7).get(v)})&&(i=u.getConstructor(y,"WeakMap"),s(i.prototype,g),a.NEED=!0,r(["delete","has","get","set"],function(t){var e=_.prototype,n=e[t];o(e,t,function(e,r){if(l(e)&&!d(e)){this._f||(this._f=new i);var o=this._f[t](e,r);return"set"==t?this:o}return n.call(this,e,r)})}))},function(t,e,n){"use strict";var i=n(109),r=n(34);n(51)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:undefined)}},{add:function(t){return i.def(r(this,"WeakSet"),t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(1),r=n(106)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:undefined)}}),n(31)("includes")},function(t,e,n){"use strict";var i=n(1),r=n(124)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(1),r=n(236),o=n(16),a=n(55),s=n(71);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=o(t),u=a.f,l=r(i),c={},f=0;l.length>f;)(n=u(i,e=l[f++]))!==undefined&&s(c,e,n);return c}})},function(t,e,n){"use strict";var i=n(1),r=n(124)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(1),r=n(127);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(n(129)),"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:undefined,!1)}})},function(t,e,n){"use strict";var i=n(1),r=n(127);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(n(129)),"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:undefined,!0)}})},function(t,e,n){"use strict";for(var i=n(98),r=n(28),o=n(25),a=n(5),s=n(23),u=n(39),l=n(4),c=l("iterator"),f=l("toStringTag"),h=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(d),v=0;p.length>v;v++){var y,g=p[v],_=d[g],m=a[g],b=m&&m.prototype;if(b&&(b[c]||s(b,c,h),b[f]||s(b,f,g),u[g]=h,_))for(y in i)b[y]||o(b,y,i[y],!0)}},function(t,e,n){"use strict";var i=n(1),r=n(82);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,n){"use strict";var i=n(6),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(i);window.global=window.global||window;var o=r.get(document.querySelector('meta[name="cdnhost"]'),"content","");"/"===(n.p=/[\\|\/]$/.test(o)?o:o+"/")&&(n.p="")},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function g(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:g(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},l=n(0),c=n(222),f=i(c),h=n(104),d=i(h),p=n(69),v=i(p),y=function(t){function e(t){r(this,e),t.magType=2;var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._leftMagNum=isNaN(t.leftMagNum)?0:t.leftMagNum,n._rightMagNum=isNaN(t.rightMagNum)?0:t.rightMagNum,n.is_hitPoints_debug=!1,n.isYuan=!0,n.isLock=!1,n.allCompArr=[],n.staCompArr=[],n.friendArr=[],n.thisObj=null,n.magPoint=new l.Point,n.gan_magPoint=null,n.gan_magPointSP=null,n.isZuHeMag=!1,n.zuheCompArrMag=[],n.hitRect=null,n.hitPoints=null,n._magDotBMDArr_=[],n._magDotRadius=null,n.hitSP=null,n.canCreateGanYingMag=!1,n.txtNum=0,n.ciji=1,n.has_initFirst=!1,n.magNumTxt=new PIXI.Text("0",{font:"30px 微软雅黑",fill:0,align:"left"}),n.GAN_VALID_MAXDIS=120,n.GAN_VALID_MINDIS=40,n.shiDis_=50,n.xiItemArr=new l.HashMap,n.xiPareObj=null,n.xiPareP=new l.Point,n.QU_DUI_NUM=5,n._shiDis=50,n._ganNum=0,n._magNum=0,n.showMagLine=!0,n.coilArr=[],n.I=1,n.hasIronCore=!1,n}return a(e,t),s(e,[{key:"initFirst",value:function(){}},{key:"init",value:function(t,e,n,i,r,o){this.initFirst(),this.ciji=o,this.ciji||(this.ciji=0!==e?e/Math.abs(e):1),this.canRotate=n,this.magNum=e,this.hitPoints=t,this.hitRect=l.M.getPArrRect(t),this.add_hitSP(),this.is_hitPoints_debug&&this.add_magNumTxt(),this.gan_magPoint_&&this.add_gan_magPointSP(this.gan_magPoint_),this.freshDotFrom_magNum(),this.fresh_magPoint()}},{key:"add_hitSP",value:function(){var t=0;this.is_hitPoints_debug&&(t=.4);var e=new PIXI.Graphics;e.beginFill(65280,t),e.drawRect(0,0,this.hitRect.width,this.hitRect.height),e.endFill(),e.beginFill(16711680,t),e.drawCircle(this.hitRect.width/2,this.hitRect.height/2,4),e.endFill(),this.hitSP=new PIXI.Sprite,this.hitSP.addChild(e),this.hitSP.x=this.hitRect.x,this.hitSP.y=this.hitRect.y,this.componentBox.addChild(this.hitSP)}},{key:"freshDotFrom_magNum",value:function(){}},{key:"txtNumChanged",value:function(){}},{key:"getRandPoint",value:function(){}},{key:"add_magNumTxt",value:function(){}},{key:"add_gan_magPointSP",value:function(t){}},{key:"diyChangedMag",value:function(){this.hadDestory||(this.elecUtil.magneticField_Update.checkAllChanged(),this.globalConfig.main.dispatchEvent("magElecChanged2",this))}},{key:"setMagNumOnly",value:function(){}},{key:"setGanYingMag",value:function(t){}},{key:"fresh_magPoint",value:function(){this.left&&this.right&&(this.left._fresh_magPointTar(this.left),this.right._fresh_magPointTar(this.right))}},{key:"_fresh_magPointTar",value:function(t){var e=new l.Point(t.hitRect.x+t.hitRect.width/2,t.hitRect.y+t.hitRect.height/2);e=this.toGlobalView(e,t.hitSP),l.M.setSPPoint(t.magPoint,e)}},{key:"addedFore",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.lr0&&this.lr1&&(this.removeChild(this.lr0),this.removeChild(this.lr1),this.addLR01(this._leftMagNum,this._rightMagNum))}},{key:"addedEnd",value:function(){var t=this;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this),setTimeout(function(){t.hadDestory||t.endFore()})}},{key:"removed",value:function(){l.ArrayUtil.removeValueFromArray(this.allCompArr,this),l.ArrayUtil.removeValueFromArray(this.staCompArr,this),this.allCompArr=null,this.staCompArr=null,this.left&&this.left.removed(),this.right&&this.right.removed(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"caculateBegin",value:function(){}},{key:"caculateOver",value:function(){var t=this;this.zuheCompArrMag.length>0&&$.each(this.zuheCompArrMag,function(e,n){t._shifang(n)})}},{key:"_shifang",value:function(t){var e=this,n=Math.floor(Math.abs(t.magNum)/this.QU_DUI_NUM);if(t.xiItemArr.length()>n){var i=t.xiItemArr.length()-n,r=t.xiItemArr.getKeyValyeArray(),o=r.splice(t.xiItemArr.length()-i,i);t.xiItemArr.clear(),$.each(r,function(e,n){t.xiItemArr.put(n.key,n.value)}),$.each(o,function(t,n){var i=n.value,r=l.M.getSPPoint(i.parent),o=r.clone();o.x+=e._shiDis;var a=2*Math.PI*Math.random(),s=l.M.rotaPointFromP(o,r,a);l.M.setSPPoint(i.parent,s)})}}},{key:"addLR01",value:function(t,n){var i=e.zhClassMap.BaseMagLR;t=t||0,n=n||0,this.left=new i(this.paramObj),this.left.initLRData(t,this.lr0.width,this.lr0.height),this.left.x=this.lr0.x,this.left.y=this.lr0.y,this.left.lrname="left",this.left.thisObj=this,this.right=new i(this.paramObj),this.right.initLRData(n,this.lr1.width,this.lr1.height),this.right.x=this.lr1.x,this.right.y=this.lr1.y,this.right.lrname="right",this.right.thisObj=this,this.isZuHeMag=!0,this.zuheCompArrMag.push(this.left),this.zuheCompArrMag.push(this.right),this.add2component(this.left),this.add2component(this.right)}},{key:"rotateChange",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t),this.rotate_xiItem_change(t),this.move_xiItem_change(),this.fresh_magPoint(),this.diyChangedMag()}},{key:"updateMagnet",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateMagnet",this).call(this),this.updateMagNum()}},{key:"updateMagNum",value:function(){this.hasMagReversal?(this.left&&(this.left.magNum=this._rightMagNum),this.right&&(this.right.magNum=this._leftMagNum)):(this.left&&(this.left.magNum=this._leftMagNum),this.right&&(this.right.magNum=this._rightMagNum)),this.diyChangedMag(),this.diyChanged()}},{key:"isFull",value:function(){var t=Math.floor(Math.abs(this.magNum)/this.QU_DUI_NUM);return this.xiItemArr.length()>=t}},{key:"toXiItem",value:function(t){this.xiPareObj=t,this.xiPareObj.xiItemArr.put(this.UID,this)}},{key:"removeXi",value:function(t){this.xiItemArr.remove(t.UID)}},{key:"clearXi",value:function(t){this.xiItemArr.clear()}},{key:"hasXi",value:function(t){return this.xiItemArr.containsKey(t.UID)}},{key:"fresh_xiItem_move_Arr",value:function(){this.left.xiItemArr.forEach(function(t,e){this.fresh_xiItem_move_A_Item(t,e)},this),this.right.xiItemArr.forEach(function(t,e){this.fresh_xiItem_move_A_Item(t,e)},this)}},{key:"fresh_xiItem_move_A_Item",value:function(t,e){if(t.parent&&t.parent.parent){t.parent.parent.updateTransform();var n=t.parent.parent.toLocal(t.xiPareP,t.xiPareObj);l.M.setSPPoint(t.parent,n),t.fresh_magPoint()}}},{key:"fresh_xiItem_rotate_Arr",value:function(t){this.left.xiItemArr.forEach(function(e,n){e.componentBox.rotation+=t},this),this.right.xiItemArr.forEach(function(e,n){e.componentBox.rotation+=t},this)}},{key:"rotate_xiItem_change",value:function(t){this.left&&this.right&&0!==t&&this.fresh_xiItem_rotate_Arr(t)}},{key:"move_xiItem_change",value:function(){this.left&&this.right&&this.fresh_xiItem_move_Arr()}},{key:"beginFore",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t)}},{key:"moveFore",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t),this.fresh_magPoint(),this.move_xiItem_change(),this.diyChangedMag()}},{key:"endFore",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t),this.fresh_magPoint(),this.move_xiItem_change(),this.diyChangedMag()}},{key:"setWorkPower",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"setWorkElec",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t)}},{key:"showMagLineCallBack",value:function(t){this.showMagLine=t.checked}},{key:"getData",value:function(){var t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.showMagLine=this.showMagLine,t.hasIronCore=this.hasIronCore,t}},{key:"setData",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.hasIronCore=!!t.hasIronCore,this.showMagLine=!!t.showMagLine}},{key:"getConf",value:function(){var t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return this.hasMagLine&&t.confArr.push(this.ComponentProperty.getSwitch(this.language.getLocaleStr("magnetic_field"),this.showMagLine,this.showMagLineCallBack,this)),t}},{key:"getElecs",value:function(){if(!this.lr0||!this.lr1)return[];var t=new l.Point(this.lr0.x+this.lr0.width/2,this.lr0.y+this.lr0.height/2);t=this.toGlobalView(t,this.componentBox);var e=new l.Point(this.lr1.x+this.lr1.width/2,this.lr1.y+this.lr1.height/2);return e=this.toGlobalView(e,this.componentBox),[{elecNum:this.left.magNum,elecPoint:t},{elecNum:this.right.magNum,elecPoint:e}]}},{key:"getComps",value:function(){if(!this.lr0||!this.lr1)return[];var t=new l.Point(this.lr0.x+this.lr0.width/2,this.lr0.y+this.lr0.height/2);t=this.toGlobalView(t,this.componentBox);var e=new l.Point(this.lr1.x+this.lr1.width/2,this.lr1.y+this.lr1.height/2);e=this.toGlobalView(e,this.componentBox);var n=this._magDotRadius||20,i=this.getMagLineStartAngle(),r=v["default"].getTotalElecLineNum(this.left.magNum,2),o=v["default"].getTotalElecLineNum(this.right.magNum,2);return[this.pointComp(this.left.magNum,r,t,n,d["default"].TYPE_NORMAL,i),this.pointComp(this.right.magNum,o,e,n,d["default"].TYPE_NORMAL,i+Math.PI)]}},{key:"createMagComp3D",value:function(t,e,n,i){return{p:{x:t,y:e},dir:n,I:i}}},{key:"getMagComps3D",value:function(){if(!this.showMagLine)return[];for(var t=[],e=this.hasIronCore?1.6:1,n=this.hasMagReversal?-1:1,i=this.I*n*e,r=0;this.coilArr.length>r;r++){var o=this.coilArr[r],a=this.toParentP(new PIXI.Point(o.x,o.y));t.push(this.createMagComp3D(a.x,a.y,o.dir,i))}return t}},{key:"getBarArr",value:function(t,e,n,i,r,o){o=o||0;for(var a=[],s=t/(e-1),u=(e-1)/2,l=0;e>l;l++){var c=void 0,f=void 0,h=void 0,d=void 0;0===o?(h=c=(l-u)*s+i,f=r+n,d=r-n):(c=i+n,h=i-n,d=f=(l-u)*s+r),a.push({x:c,y:f,dir:1},{x:h,y:d,dir:-1})}return a}},{key:"getUArr",value:function(t,e,n,i,r,o,a,s){a=a||0,s=s||0,o=o||0;for(var u=[],l=2*e/i,c=0;i>=c;c++){var f=s-e+l*c,h=a+t,d=a-t;u.push({x:h+n,y:f,dir:-1},{x:h-n,y:f,dir:1},{x:d+n,y:f,dir:1},{x:d-n,y:f,dir:-1})}for(var p=Math.PI/(r+1),v=t-n,y=t+n,g=1;r>=g;g++){var _=p*g,m=Math.cos(_),b=Math.sin(_);u.push({x:a+v*m,y:s+e+v*b,dir:1},{x:a+y*m,y:s+e+y*b,dir:-1})}var w=Math.cos(o),E=Math.sin(o);return u.forEach(function(t){var e=t.x*w+t.y*E,n=-t.x*E+t.y*w;t.x=e,t.y=n}),u}},{key:"toParentP",value:function(t){var e=this.parent.x,n=this.parent.y,i=-this.componentBox.rotation,r=Math.cos(i),o=Math.sin(i);return new PIXI.Point(e+t.x*r+t.y*o,n-t.x*o+t.y*r)}},{key:"getMagLineStartAngle",value:function(){return this.componentBox.rotation}},{key:"getDefaultSetting",value:function(){var t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return this.hasMagLine&&(t.showMagLine=this.showMagLine),t}},{key:"setDefaultOrigin",value:function(){this.hasMagLine&&(this.showMagLine=!0)}},{key:"ganNum",get:function(){return this.canCreateGanYingMag?this._ganNum:0},set:function(t){this._ganNum=this.isLock?0:this.canCreateGanYingMag?t:0}},{key:"magNum",get:function(){return this._magNum},set:function(t){this._magNum=t,this._magNum=Math.max(-100,this._magNum),this._magNum=Math.min(100,this._magNum),this.freshDotFrom_magNum()}}]),e}(f["default"]);!function(){Promise.all([n.e(0).then(n.bind(null,420))]).then(function(t){y.zhClassMap={BaseMagLR:t[0]["default"]}})}(),e["default"]=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(38),s=i(a),u=n(358),l=i(u),c=void 0,f=function(){function t(e){r(this,t),this.config=e,this.config.moduleMain=this,c=this,this.active=!1,this.hasInit=!1,this.cachePool=new l["default"]}return o(t,[{key:"getModuleType",value:function(){return this.constructor.MODULE_TYPE}},{key:"init",value:function(){this.hasInit=!0}},{key:"addPhysicsCanvasListeners",value:function(){var t=this.config.main;this.onRemoveEquipmentProx||(this.onRemoveEquipmentProx=this.onRemoveEquipment.bind(this),this.onCanvasDomClickProx=this.onCanvasDomClick.bind(this),this.onSetDataCompleteProx=this.onSetDataComplete.bind(this)),t.addEventListener(s["default"].REMOVE_EQUIPMENT,this.onRemoveEquipmentProx),t.addEventListener(s["default"].CANVAS_DOM_CLICK,this.onCanvasDomClickProx),t.addEventListener(s["default"].SET_DATA_COMPLETE,this.onSetDataCompleteProx)}},{key:"removePhysicsCanvasListeners",value:function(){var t=this.config.main;t.removeEventListener(s["default"].REMOVE_EQUIPMENT,this.onRemoveEquipmentProx),t.removeEventListener(s["default"].CANVAS_DOM_CLICK,this.onCanvasDomClickProx),t.removeEventListener(s["default"].SET_DATA_COMPLETE,this.onSetDataCompleteProx)}},{key:"onRemoveEquipment",value:function(){}},{key:"onCanvasDomClick",value:function(t){}},{key:"onSetDataComplete",value:function(){}},{key:"onShowAllEquip",value:function(){}},{key:"setActive",value:function(t){this.active=t,t?this.addPhysicsCanvasListeners():this.removePhysicsCanvasListeners()}},{key:"enterModule",value:function(t){return Promise.resolve()}},{key:"destroy",value:function(){this.removePhysicsCanvasListeners(),this.config.moduleMain=null,this.config=null,this.onRemoveEquipmentProx=null,this.onCanvasDomClickProx=null,this.onSetDataCompleteProx=null,this.hasInit=null,this.active=null}},{key:"updateEqu",value:function(){for(var t=this.main.getEquipmentArr(!0),e=0;t.length>e;e++){var n=t[e];if(n.update)try{n.update()}catch(i){}}}},{key:"getData",value:function(){return{}}},{key:"setData",value:function(t){}},{key:"setDataBefore",value:function(){return Promise.resolve()}},{key:"requestAnimationLoop",value:function(){this.updateEqu()}},{key:"main",get:function(){return this.config?this.config.main:null}},{key:"equipmentUtil",get:function(){return this.main.equipmentUtil}},{key:"globalConfig",get:function(){return this.main.globalConfig}},{key:"language",get:function(){return this.main.language}},{key:"SoundTool",get:function(){return this.main.globalConfig.SoundTool}},{key:"phy",get:function(){return this.main.phy}},{key:"ParticleUtil",get:function(){return this.config.ParticleUtil}},{key:"SoundStr",get:function(){return this.config.SoundStr}},{key:"Button",get:function(){return this.config.Button}},{key:"HoverButton",get:function(){return this.config.HoverButton}},{key:"ComponentProperty",get:function(){return this.config.ComponentProperty}},{key:"NBCommand",get:function(){return this.config.NBCommand}},{key:"MouseManager",get:function(){return this.config.MouseManager}},{key:"NBDrag",get:function(){return this.config.NBDrag}},{key:"UploadSkinTool",get:function(){return this.config.UploadSkinTool}},{key:"NBEvent",get:function(){return this.config.NBEvent}}],[{key:"getInstance",value:function(){return c}}]),t}();window.each=function(t,e,n){var i=void 0;for(i=0;t&&t.length>i;i++){if(!1===(n?e.call(n,i,t[i]):e.call(t[i],i,t[i])))break}},e["default"]=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=void 0,s=void 0,u=void 0,l=void 0;e["default"]=function(){function t(e){i(this,t),a=e.geom.AABB,s=e.geom.Vec2,u=e.geom.Vec2List,l=e.shape.EdgeList}return r(t,[{key:"angle",value:function(t,e){var n=t.get_length(),i=e.get_length(),r=t.cross(e),o=r/(n*i);return Math.acos(o)}},{key:"vec3ToVec2",value:function(t){return t&&t.get_x&&t.get_y?s.get(t.get_x(),t.get_y()):s.get(0,0)}},{key:"vec2ToPoint",value:function(t){return t&&t.get_x&&t.get_y?new o.Point(t.get_x(),t.get_y()):new o.Point(0,0)}},{key:"pointToVec2",value:function(t){return new s(t.x,t.y)}},{key:"getAABBFromVec",value:function(t,e){var n=new a(Math.min(t.get_x(),e.get_x()),Math.min(t.get_y(),e.get_y()),Math.abs(t.get_x()-e.get_x()),Math.abs(t.get_y()-e.get_y()));return 0==n.zpp_inner.width()&&(n.zpp_inner.minx=1,n.zpp_inner.validate()),0==n.zpp_inner.height()&&(n.zpp_inner.miny=1,n.zpp_inner.validate()),n}},{key:"getWorldVec2ListFromCircle",value:function(t,e){var n=6/180*Math.PI,i=t.get_radius();20>i&&(n=30/180*Math.PI);for(var r=[],o=e.get_x?e.get_x():e.x,a=e.get_y?e.get_y():e.y,l=0;l<=2*Math.PI;l+=n)r.push(s.get(o+Math.cos(l)*i,a+Math.sin(l)*i));return u.fromArray(r)}},{key:"getPointsFromGeomPoly",value:function(t,e,n){var i=t.zpp_inner.vertices;e||(e=0),n||(n=0);for(var r=i,o=[];i;)o.push({x:i.x-e,y:i.y-n}),i=i.next==r?null:i.next;return o}},{key:"getBodyEdge",value:function(t){var e=t.get_shapes();if(1!=e.get_length()){var n=(new l,[]);return e.foreach(function(t){t.get_edges().foreach(function(t){var e=t.get_worldVertex1(),i=t.get_worldVertex2(),r=void 0,o=!1;for(r=0;n.length>r;r++){var a=n[r],s=a.v1.get_x()==e.get_x()&&a.v1.get_y()==e.get_y()&&a.v2.get_x()==i.get_x()&&a.v2.get_y()==i.get_y(),u=a.v1.get_x()==i.get_x()&&a.v1.get_y()==i.get_y()&&a.v2.get_x()==e.get_x()&&a.v2.get_y()==e.get_y();if(s||u){n.splice(r,1),o=!0;break}}o||n.push({v1:e,v2:i})})}),{compound:!0,list:n}}var i=e.at(0);return i.isPolygon()?i.get_worldVerts():i.isCircle()?{radius:i.get_radius(),pos:i.get_worldCOM()}:void 0}},{key:"vec2ArrArrToPointArrArr",value:function(t){for(var e=t.length,n=[],i=0;e>i;i++){n.push(this.vec2ArrToPointArr(t[i]))}return n}},{key:"vec2ArrToPointArr",value:function(t){for(var e=[],n=t.length,i=0;n>i;i++){e.push(this.vec2ToPoint(t[i]))}return e}},{key:"pointArrArrToVec2ArrArr",value:function(t){for(var e=t.length,n=[],i=0;e>i;i++){n.push(this.pointArrToVec2Arr(t[i]))}return n}},{key:"pointArrToVec2Arr",value:function(t){for(var e=[],n=t.length,i=0;n>i;i++){e.push(this.pointToVec2(t[i]))}return e}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e["default"]=function r(){i(this,r),this.DRAG="drag",this.MOVE="move",this.SLICE="slice",this.SPRING="spring",this.CIRCLE="circle",this.TRIANGLE="triangle",this.RECT="rect",this.POLY="poly",this.PEN="pen",this.FIXED="fixed",this.BEARING="bearing",this.GEAR="gear",this.ROPE="rope",this.THRUSTER="thruster",this.ROTA="rota",this.DRAG_OR_MOVE="dragOrMove"}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);e["default"]=function(){function t(){i(this,t)}return r(t,null,[{key:"createBtn",value:function(e,n){var i=PIXI.MovieClip.fromFrames(e),r=new PIXI.Sprite,a=new PIXI.Sprite;if(r.addChild(a),n){var s=t.createCir(4473924,n,.9),u=t.createCir(16777215,n,.9);a.addChild(s),a.addChild(u),a.bgDown=s,s.visible=!1,a.bgUp=u}return a.addChild(i),a.mc=i,i.x=-i.width/2,i.y=-i.height/2,o.M.addTouch(a,{begin:function(t){t.target.mc.totalFrames>1&&t.target.mc.gotoAndStop(1),t.target.bgDown&&(t.target.bgDown.visible=!0,t.target.bgUp.visible=!1)},end:function(t){t.target.mc.totalFrames>1&&t.target.mc.gotoAndStop(0),t.target.bgDown&&(t.target.bgDown.visible=!1,t.target.bgUp.visible=!0)}}),r}},{key:"createCir",value:function(t,e,n){n===undefined&&(n=1);var i=new PIXI.Graphics;return i.beginFill(t,n),i.drawCircle(0,0,e),i.endFill(),i}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function w(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:w(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},l=n(0),c=n(6),f=n(221),h=i(f),d=n(102),p=i(d),v=n(100),y=i(v),g=n(10),_=n(101),m=i(_),b=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.elecUtil=n.moduleMain.elecUtil,n.iElecInter=0,n.flagLabel="",n.canStartDrawElecWire=!0,n.loop=!1,n.curPower=0,n.curElec=0,n._Resistance=p["default"].MIN_RESISTANCE,n.Power=0,n.Source=0,n.huiUID="0",n.allCompArrT=[],n.staCompArrT=[],n.huiArr=[],n.bPsArr=[],n.isLock=!1,n.isZuHe=!1,n.zuheBox=null,n.zuheCompArr=[],n.ratedV=0,n.ratedP=0,n.ratedI=0,n.valid=!1,n._isBreak=!1,n.isShortCircuit=!1,n.elecConnect=!0,n.drawDis=37,n.branchChange=!1,n.isReLoopElec=!1,n}return a(e,t),s(e,[{key:"reLoop",value:function(){return!1}},{key:"moveDragHandle",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveDragHandle",this).call(this,t),this.updateBinds()}},{key:"configBPosters",value:function(t){var e=this;l.ArrayUtil.clear(this.bPsArr),l.ArrayUtil.clear(this.owenBindingers),$.each(t,function(t,n){l.StringUtil.contains(t,"bposter")&&(e[t]=n,n.bodyBposterName=t,e.addBinPoster(n,n.bindinger.body))})}},{key:"createZuhe",value:function(t){var e=this;if(!this.hadDestory){this.isZuHe=!0;var n=[],i=[],r=[],o=void 0,a=t.bar||0,s=t.inductor||0,u=t.capacitance||0;for(o=1;a>=o;o++)n.push("bar"+o);for(this.createBRes(n),o=a+1;a+s>=o;o++)i.push("bar"+o);for(this.createBInductor(i),o=a+s+1;a+s+u>=o;o++)r.push("bar"+o);this.createBCapacitance(r);var l={};$.each(t.pos,function(t,n){l["bposter"+t]=e["bar"+n[0]]["bposter"+n[1]]}),this.configBPosters(l),t.wire&&$.each(t.wire,function(t,n){e["wire"+(t+1)]=e.createBWire(e["bar"+n[0][0]]["bposter"+n[0][1]],e["bar"+n[1][0]]["bposter"+n[1][1]])}),t.res&&$.each(t.res,function(t,n){e["bar"+n[0]].Resistance=n[1]}),$.each(t.pos,function(t,n){e.elecUtil.setBindXY(e["bposter"+t],e["bp"+t]),e["bposter"+t].ind=t})}}},{key:"createBRes",value:function(t){var n=this;$.each(t,function(t,i){var r=(0,c.extend)({name:i,zuheBox:n},n.paramObj),o=new e.zhClassMap.BaseElecResistance(r);n[i]=o,o.bposter0.x=o.bposter0.y=-5e4,o.bposter1.x=o.bposter1.y=-5e4,n.zuheCompArr.push(o)})}},{key:"createBInductor",value:function(t){var n=this;$.each(t,function(t,i){var r=(0,c.extend)({name:i,zuheBox:n},n.paramObj),o=new e.zhClassMap.BaseInductor(r);n[i]=o,o.bposter0.x=o.bposter0.y=-5e4,o.bposter1.x=o.bposter1.y=-5e4,n.zuheCompArr.push(o)})}},{key:"createBCapacitance",value:function(t){var n=this;$.each(t,function(t,i){var r=(0,c.extend)({name:i,zuheBox:n},n.paramObj),o=new e.zhClassMap.BaseCapacitance(r);n[i]=o,o.bposter0.x=o.bposter0.y=-5e4,o.bposter1.x=o.bposter1.y=-5e4,n.zuheCompArr.push(o)})}},{key:"createBWire",value:function(t,n){var i=(0,c.extend)({zuheBox:this},this.paramObj),r=new e.zhClassMap.BaseElecWire(i);return r.linkTwoBindMC(t,n),this.zuheCompArr.push(r),r.zuheBox=this,r}},{key:"addBinPoster",value:function(t,e){e||(e=this);var n=new h["default"](e,t,t.name);return this.bPsArr.push(n),null!==t&&(t.alpha=0),n}},{key:"addBinWirePoster",value:function(t){var e=new h["default"](this,t,t.name);return this.bPsArr.push(e),e}},{key:"diyChanged",value:function(){this.elecUtil&&this.elecUtil.diyChanged()}},{key:"initZuhe",value:function(){}},{key:"addedFore",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.initZuhe()}},{key:"freshDp",value:function(){var t=this;if(!this.elecUtil.checkIsWire(this))for(var e=0;this.bPsArr.length>e;e++){var n=this["bposter"+e];if(!n)break;var i=n.position;if(!i)break;if(i=i.add(n.dp),!n.dpSP){var r=new PIXI.Graphics,o=this.globalConfig.DEBUG_DP?.5:0;r.beginFill(16711680,o),r.drawCircle(0,0,this.drawDis),r.endFill(),this.canRotate?this.componentBox.addChild(r):this.addChild(r),n.dpSP=r,n.dpSP.touchId=l.M.addTouch(r,{begin:function(e){if(t.canStartDrawElecWire&&1!==t.iElecInter)if(t.ori_cannotSystemDrag=t.cannotSystemDrag,t.cannotSystemDrag=!0,-3===t.iElecInter)t.main.dispatchEvent(g.PHY_EVENTS.BPOSTER_DPSP_DOWN,e);else{t.main.viewStack.parent.updateTransform();var n=t.main.viewStack.toLocal(new l.Point,e.target);t.moduleMain.drawLineComp.startDrawElecWire.call(t.moduleMain.drawLineComp,n,e)}},move:function(e){t.main.dispatchEvent(g.PHY_EVENTS.BPOSTER_DPSP_MOVE,e)}}),this.globalConfig.DEBUG_GLOW&&(r.visible=!1)}l.M.setSPPoint(n.dpSP,i)}}},{key:"addBposterMouseStatus",value:function(t){if(t){if(!this._hasAddBposterMouseStatus){this._hasAddBposterMouseStatus=!0;for(var e=0;this.bPsArr.length>e;e++){var n=this["bposter"+e];this.addCursor(n.dpSP,"huizhi")}}}else if(this._hasAddBposterMouseStatus){this._hasAddBposterMouseStatus=!1;for(var i=0;this.bPsArr.length>i;i++){var r=this["bposter"+i];this.removedCursor(r.dpSP)}}}},{key:"addedEnd",value:function(){if(this.freshDp(),this.globalConfig.DEBUG_SHOW_UNNODE&&!this.elecUtil.checkIsWire(this)){for(var t=0;this.bPsArr.length>t;t++){var e=this["bposter"+t],n=new PIXI.Sprite;this.addChild(n),e.unNodeSP=n,l.M.setSPPointXY(n,e.dpSP.x,e.dpSP.y+20);var i=new PIXI.Text("0",{font:'30px "Microsoft Yahei"',fill:13421568,align:"left"});n.addChild(i),n.unLabel=i,i.y=30*t;var r=new PIXI.Text("",{font:'30px "Microsoft Yahei"',fill:16737792,align:"left"});n.addChild(r),n.numberLabel=r,r.y=i.y+30;var o=new PIXI.Text("",{font:'30px "Microsoft Yahei"',fill:16711680,align:"left"});n.addChild(o),n.wangLabel=o,o.y=r.y+30,o.visible=this.globalConfig.DEBUG_SHOW_UNNODE_WANG}var a=new PIXI.Text("",{font:'34px "Microsoft Yahei"',fill:10027008,align:"left"});this.addChild(a),this.elecNumLabel=a,a.text="编号: "+m["default"].elecNumLabel++;var s=this.getLocalBounds();a.x=s.x+s.width/2,a.y=s.y-30}this.elecUtil.checkIsWire(this)||this.addBposterMouseStatus(!0)}},{key:"removed",value:function(){var t=this;if(this.addBposterMouseStatus(!1),this.isZuHe&&each(this.zuheCompArr,function(t,e){e.removed.call(e),e.zuheBox=null}),this.zuheCompArr=null,this.elecUtil.checkIsWire(this))for(var n=this.bPsArr.length,i=0;n>i;i++){var r=this.bPsArr[i];r.clear_friend.call(r)}var o=this.elecUtil.getAllElecWires(this);this.bPsArr&&$.each(this.bPsArr,function(e,n){n.body&&(n.BindMC&&(n.BindMC.body=null,n.BindMC.dpSP&&(l.M.removeTouch(n.BindMC.dpSP,n.BindMC.dpSP.touchId),n.BindMC.dpSP=null)),each(n.friendPostersArr,function(t,e){"ElecWire"===e.body.classname&&(e.BindMC.wire_h_mc.linkBposter=null)}),n.desdroy.call(n),t["bposter"+e]&&(t["bposter"+e]=null))}),each(o,function(t,e){e.freshTouDirect.call(e),e.show_h_mc.call(e,!0)}),this.bPsArr=null,l.ArrayUtil.removeValueFromArray(this.allCompArrT,this),l.ArrayUtil.removeValueFromArray(this.staCompArrT,this),this.allCompArrT=null,this.staCompArrT=null,this.huiArr=null,this.elecUtil=null,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"repair",value:function(){this.isBreak=!1,this.diyChanged(),this.dispatchEvent(g.PHY_EVENTS.SET_WORK_POWER_REPAIR)}},{key:"break",value:function(){this.isBreak=!0,this.dispatchEvent(g.PHY_EVENTS.SET_WORK_POWER_BREAK)}},{key:"bindWire",value:function(t,e){}},{key:"setWorkElec",value:function(t){}},{key:"setWorkPower",value:function(t){}},{key:"setWorkElecDel",value:function(t){}},{key:"setWorkPowerDel",value:function(t){}},{key:"caculateOver",value:function(){}},{key:"getData",value:function(){var t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.uid=this.UID,t.isBreak=this.isBreak,t.flagLabel=this.flagLabel,t.Resistance=this.Resistance,t.Power=this.Power,t}},{key:"setData",value:function(t){this.UID=t.uid,this.isBreak=t.isBreak,this.flagLabel=t.flagLabel,this.Resistance=t.Resistance,this.Power=t.Power,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t)}},{key:"setDataOver",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.freshDp()}},{key:"getConf",value:function(){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}},{key:"loopHandle",value:function(){}},{key:"rotateChange",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t)}},{key:"checkHasPower",value:function(t){if(t&&t.huiArr){t=t||this;var e=void 0,n=t.huiArr.length;for(e=0;n>e;e++){var i=t.huiArr[e];if("ElecNo"!==i.classname&&i.Power>0)return!0}}return!1}},{key:"revokeOver",value:function(){var t=this;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"revokeOver",this).call(this),setTimeout(function(){t.hadDestory||t.updateBinds()},50)}},{key:"beginFore",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t)}},{key:"moveFore",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t)}},{key:"endFore",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t),1!==this.iElecInter&&"ElecWire"!==this.classname&&this.ori_cannotSystemDrag!==undefined&&(this.cannotSystemDrag=this.ori_cannotSystemDrag,delete this.ori_cannotSystemDrag)}},{key:"getLocalBoundsElecs",value:function(){return this.canRotate?[this.componentBox]:this.bg?[this.bg]:[this]}},{key:"freshEquipShows",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshEquipShows",this).call(this,t),this.label&&(this.label.visible=t)}},{key:"updateBinds",value:function(t,e){if(!this.elecUtil.checkIsWire(this)){for(var n=0;this.bPsArr.length>n;n++)this.bPsArr[n].bindingFllowIng(t);e&&this.elecUtil.getAllElecWires(this).forEach(function(t){t.freshTouDirect.call(t)})}}},{key:"beginEnd",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginEnd",this).call(this,t),this.main.dispatchEvent(g.PHY_EVENTS.TIP_TOP_BEGIN,{target:this.bPsArr,type:2})}},{key:"endEnd",value:function(t){var n=this;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),"ElecWire"!==this.classname&&this.bPsArr.forEach(function(t){n.elecUtil.getNearWireBinding(t).forEach(function(e){e.body.linkWireBindMC.call(e.body,e.BindMC,t.BindMC)})})}},{key:"startStep",value:function(){}},{key:"endStep",value:function(){}},{key:"overStep",value:function(){this.caculateOver()}},{key:"Resistance",set:function(t){this._Resistance=t},get:function(){return this._Resistance}},{key:"elecType",get:function(){var t=void 0;switch(this.iElecInter){case 2:t=3;break;case 11:t=2;break;case 9:case 10:t=this.iElecInter;break;case 12:t=12;break;default:t=1}return t}},{key:"elect_Update",get:function(){return this.elecUtil.elect_Update}},{key:"electricField_Update",get:function(){return this.elecUtil.electricField_Update}},{key:"magneticField_Update",get:function(){return this.elecUtil.magneticField_Update}},{key:"isBreak",get:function(){return this._isBreak},set:function(t){this._isBreak=t}},{key:"numLabel",get:function(){return this.elecNumLabel.text}}]),e}(y["default"]);!function(){Promise.all([n.e(0).then(n.bind(null,418)),n.e(0).then(n.bind(null,419)),n.e(0).then(n.bind(null,425)),n.e(0).then(n.bind(null,424))]).then(function(t){b.zhClassMap={BaseElecWire:t[0]["default"],BaseElecResistance:t[1]["default"],BaseInductor:t[2]["default"],BaseCapacitance:t[3]["default"]}})}(),e["default"]=b},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=n(102),l=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t,n){i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.body=n,n&&(o.moduleMain=n.moduleMain),o.UID=s.M.getUniqueID(),o.position=new s.Point(0,0),o.dp=new s.Point(0,0),o.isWireBind=!1,o.downFunc=null,o.upHandleFunc=null,o.wire_h_mc=null,o.name=t,o.initBindinger(),o}return o(e,t),a(e,[{key:"initBindinger",value:function(){this.body&&(this.moduleMain.elecUtil.checkIsWire(this.body)?(this.bindinger=this.body.addBinWirePoster(this),this.isWireBind=!0):(this.bindinger=this.body.addBinPoster(this),this.isWireBind=!1))}},{key:"freshPosition",value:function(t,e){this.position.x=t,this.position.y=e,this.isWireBind&&this.dispatchEvent(l["default"].BINDMC_POTISON_CHANGED)}},{key:"toGlobal",value:function(){var t=null;return this.bindinger&&this.bindinger.body?("BaseElecResistance"===this.bindinger.body.classname||"BaseInductor"===this.bindinger.body.classname||"BaseCapacitance"===this.bindinger.body.classname?(this.bindinger.body.zuheBox.parent.updateTransform(),t=this.bindinger.body.zuheBox.toGlobal(this.position)):(this.bindinger.body.parent.updateTransform(),t=this.bindinger.body.toGlobal(this.position)),t):null}},{key:"getGlobalBp",value:function(){var t=this.position.add(this.dp),e=null;return this.bindinger&&this.bindinger.body?("BaseElecResistance"===this.bindinger.body.classname?(this.bindinger.body.zuheBox.parent.updateTransform(),e=this.bindinger.body.zuheBox.toGlobal(t)):(this.bindinger.body.parent.updateTransform(),e=this.bindinger.body.toGlobal(t)),e):null}},{key:"x",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y=t}},{key:"alpha",get:function(){return this.isWireBind&&this.wire_h_mc?this.wire_h_mc.alpha:1},set:function(t){this.isWireBind&&this.wire_h_mc&&(this.wire_h_mc.alpha=t)}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);e["default"]=function(){function t(e,n,r){if(i(this,t),this.UID=o.M.getUniqueID(),this.name="",this.myroad_arr=[],this._Un=0,this.unNode=null,this.body=e,e&&(this.globalConfig=e.moduleMain.globalConfig,this.elecUtil=e.elecUtil),this.BindMC=n,this.BindMC.bindinger&&this.BindMC.bindinger.body){this.BindMC.bindinger.body.bPsArr.splice(o.ArrayUtil.getIndexFromValue(this.BindMC.bindinger.body.bPsArr,this.BindMC.bindinger),1,this)}this.BindMC.bindinger=this,this.name=r,this.friendPostersArr=[],this.linkPostersArr=[],this.linkWireType=0}return r(t,[{key:"clear_friend",value:function(){for(var t=this.friendPostersArr.length,e=0;t>e;e++){var n=this.friendPostersArr[e],i=0;if(n){for(var r=n.friendPostersArr.length,a=0;r>a;a++){if(n.friendPostersArr[a]===this){n.friendPostersArr.splice(i,1);break}i++}this.elecUtil.checkIsWire(n.body)&&(n.BindMC.alpha=1)}}o.ArrayUtil.clear(this.friendPostersArr)}},{key:"desdroy",value:function(){$.each(this.friendPostersArr,function(t,e){o.ArrayUtil.clear(e.friendPostersArr)}),this.friendPostersArr=null,this.BindMC.bindinger=null,this.BindMC.wire_h_mc=null,this.BindMC=null,this.body=null,o.ArrayUtil.clear(this.myroad_arr),this.myroad_arr=null}},{key:"set_myroad",value:function(t,e){void 0===e&&(e=1e-6);var n=void 0,i=this.myroad_arr.length,r=!1;for(n=0;i>n;n++){if(this.myroad_arr[n].to==t){r=!0;break}}if(!r){this.myroad_arr.push({to:t,zu:e});t.myroad_arr.push({to:this,zu:e})}}},{key:"clear_myroad",value:function(){var t=void 0,e=void 0,n=void 0,i=void 0;for(n=this.myroad_arr.length,t=0;n>t;t++){var r=this.myroad_arr[t],a=0;for(i=r.to.myroad_arr.length,e=0;i>e;e++){if(r.to.myroad_arr[e].to==this){r.to.myroad_arr.splice(a,1);break}a++}}o.ArrayUtil.clear(this.myroad_arr)}},{key:"nearToBinding",value:function(){this.globalConfig.main.view.updateTransform();var t=this.globalConfig.main.view.toLocal(new o.Point,this.BindMC),e=void 0,n=void 0,i=void 0,r=[],a=this.globalConfig.main.getEquipmentArr(),s=a.length;for(n=0;s>n;n++)if((e=a[n].component)&&!this.elecUtil.checkIsWire(e)&&e.bPsArr&&(!e.showLineType||1===e.showLineType)){var u=e.bPsArr.length;for(i=0;u>i;i++){var l=e.bPsArr[i];if(!l.body.isZuHe&&!l.BindMC.cannotBindWire){var c=this.globalConfig.main.view.toLocal(new o.Point,l.BindMC);if(0!==c.x||0!==c.y){var f=o.M.getPointLen(t,c);f>this.globalConfig.connectMinDistanceNumber||r.push({distance:f,component:l.body,bPsIt:l})}}}}var h=!1;return r.length&&(r.sort(function(t,e){return e.distance>t.distance?-1:1}),h=this.nearToBinding__0(r[0])),h}},{key:"nearToBinding__0",value:function(t){var e=t.component,n=t.bPsIt,i=n;if(this.elecUtil.getWireLinkBposter("bposter0"===this.BindMC.name?this.BindMC.body.bposter1:this.BindMC.body.bposter0)===n)return!1;this.elecUtil.linkWireBindMC(this.BindMC,n.BindMC);var r=this.body.toLocal(i.BindMC.position,i.BindMC);return this.BindMC.freshPosition(r.x,r.y),e.bindWire(n,this.BindMC),this.body._drawLine.call(this.body),!0}},{key:"breakBinding",value:function(){var t=this.elecUtil.checkIsWire(this.body),e=this.UID;$.each(this.friendPostersArr,function(n,i){i&&i.friendPostersArr&&$.each(i.friendPostersArr,function(n,r){if(r.UID===e)return o.ArrayUtil.removeValueFromIndex(i.friendPostersArr,n),t||(i.BindMC.alpha=1),!1})}),o.ArrayUtil.clear(this.friendPostersArr),t||(this.BindMC.alpha=1)}},{key:"bindingFllowIng",value:function(t){if(this.BindMC){new o.Point(this.BindMC.x,this.BindMC.y);if(this.body){var e=void 0,n=void 0;for(n=0;this.friendPostersArr.length>n;n++)if(e=this.friendPostersArr[n],"ElecWire"===e.body.classname||"ElecFamilyWire"===e.body.classname){var i=e.body.toLocal(this.BindMC.position,this.BindMC);e.BindMC.freshPosition(i.x,i.y),e.body._drawLine.call(e.body,!1,t)}else"SElecWire"===e.body.classname?(o.M.setSPPoint(e.BindMC.position,this.BindMC.position),e.body.caculateAndDraw.call(e.body)):"BaseElecWire"===e.body.classname&&e.body.dispatchEvent(e.body.constructor.UPDATE_POSTER_POSITION)}}}},{key:"Un",set:function(t){this._Un=t,this.BindMC.unNodeSP&&(this.BindMC.unNodeSP.unLabel.text=t)},get:function(){return this._Un}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(0),l=n(104),c=i(l),f=n(69),h=i(f),d=n(101),p=i(d);e["default"]=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.magType=t.magType,n.startPRadius=20,n.showElecMagLine=0,n}return a(e,t),s(e,[{key:"getElecs",value:function(){return[]}},{key:"getComps",value:function(){return[]}},{key:"getComps3D",value:function(){return[]}},{key:"getComp01",value:function(t,e,n,i){var r=this.startPRadius,o=new u.Point(e.x-n/2+r,e.y);o=this.toGlobalView(o,this.componentBox);var a=new u.Point(e.x+n/2-r,e.y);a=this.toGlobalView(a,this.componentBox);var s=h["default"].getTotalElecLineNum(t,1),l=this.getPointCompStartAngle()+i;return[this.pointComp(t/2,Math.ceil(s/2),o,r,c["default"].TYPE_LEFT,l),this.rodComp(t/2,Math.ceil(s/2),o,a,r),this.pointComp(t/2,Math.ceil(s/2),a,r,c["default"].TYPE_RIGHT,l)]}},{key:"getComp3D",value:function(t,e,n,i){return{type:2,name:this.classname,UID:this.UID,elecNum:t,angle:i,elecPoint:this.toGlobalView(e,this.componentBox),length:n}}},{key:"getPointCompStartAngle",value:function(){return this.componentBox.rotation}},{key:"rodComp",value:function(t,e,n,i,r,o){return{type:2,data:{id:o||0,elecNum:t,n:e,p1:n.clone(),p2:i.clone(),d:r}}}},{key:"pointComp",value:function(t,e,n,i,r,o,a){return{type:1,data:{id:a||0,elecNum:t,n:e,elecPoint:n.clone(),r:i,type:r,angle:o}}}},{key:"createElecs",value:function(t,e,n,i,r,o,a){for(var s=[],l=(e-2*i)/(n-1),c=0;n>c;c++){var f=void 0;f=1===a?new u.Point(r+i+l*c,o):new u.Point(r,o+i+l*c),f=this.toGlobalView(f,this.componentBox);s.push({elecNum:t/n,elecPoint:f,showFlag:this.showElecMagLine})}return s}},{key:"selectRenderChild",value:function(){return this.bg?this.bg.getBounds():null}}]),e}(p["default"])},function(t,e,n){"use strict";function i(t,e,n){function i(e){var n=_,i=m;return _=m=undefined,O=e,w=t.apply(i,n)}function c(t){return O=t,E=setTimeout(d,e),P?i(t):w}function f(t){var n=t-x,i=t-O,r=e-n;return k?l(r,b-i):r}function h(t){var n=t-x,i=t-O;return x===undefined||n>=e||0>n||k&&i>=b}function d(){var t=o();if(h(t))return p(t);E=setTimeout(d,f(t))}function p(t){return E=undefined,S&&_?i(t):(_=m=undefined,w)}function v(){E!==undefined&&clearTimeout(E),O=0,_=x=m=E=undefined}function y(){return E===undefined?w:p(o())}function g(){var t=o(),n=h(t);if(_=arguments,m=this,x=t,n){if(E===undefined)return c(x);if(k)return E=setTimeout(d,e),i(x)}return E===undefined&&(E=setTimeout(d,e)),w}var _,m,b,w,E,x,O=0,P=!1,k=!1,S=!0;if("function"!=typeof t)throw new TypeError(s);return e=a(e)||0,r(n)&&(P=!!n.leading,k="maxWait"in n,b=k?u(a(n.maxWait)||0,e):b,S="trailing"in n?!!n.trailing:S),g.cancel=v,g.flush=y,g}var r=n(19),o=n(344),a=n(152),s="Expected a function",u=Math.max,l=Math.min;t.exports=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function f(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},u=n(0),l=n(214),c=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){i(this,e),t.iElecInter=-1;var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.Resistance=1e6,n.type=0,n.curDot=null,n.curLink=null,n.oriP2=null,n.mapfind=[],n.linkArr=[n.language.getLocaleStr("connection")+" 1",n.language.getLocaleStr("connection")+" 2",n.language.getLocaleStr("connection")+" 3",n.language.getLocaleStr("connection")+" 4",n.language.getLocaleStr("connection")+" 5"],n}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this);var t=void 0;for(t=0;5>t;t++)this["link"+(t+1)].visible=!1;for(t=0;10>t;t++)this["dot"+(t+1)].visible=!1,this["dot"+(t+1)].animationSpeed=.1;this.oriP2=u.M.getSPPoint(this.bposter1),this.bposter1.visible=!0,this.drawDis=45,this.freshType(),this.bposter0.dp.setTo(0,-15),this.bposter1.dp.setTo(0,-15)}},{key:"freshType",value:function(){this.curDot&&(this.curDot.visible=!1),this.curLink&&(this.curLink.visible=!1);var t=this.findEAb(this.bposter0),e=this.findEAb(this.bposter1),n=!1;switch(this.type){case 0:t&&e&&t.body.Power>100&&t.UID!==e.UID&&(n=!0),this.curDot=this.dot1,this.curLink=this.link1;break;case 1:t&&e?t.body.Power>100&&(this.curDot=t.UID!==e.UID?this.dot3:this.dot2,n=!0):(t||e)&&(t&&t.body.Power>100?(n=!0,this.curDot=this.dot1):e&&e.body.Power>100&&(n=!0,this.curDot=this.dot9)),this.curLink=this.link2;break;case 2:t&&e?t.body.Power>100&&(this.curDot=t.UID!==e.UID?this.dot4:this.dot7,n=!0):(t||e)&&(t&&t.body.Power>100?(n=!0,this.curDot=this.dot1):e&&e.body.Power>100&&(n=!0,this.curDot=this.dot10)),this.curLink=this.link3;break;case 3:t&&e?t.body.Power>100&&(this.curDot=t.UID!==e.UID?this.dot6:this.dot5,n=!0):(t||e)&&(t&&t.body.Power>100?(n=!0,this.curDot=this.dot8):e&&e.body.Power>100&&(n=!0,this.curDot=this.dot10)),this.curLink=this.link4;break;case 4:t&&e&&t.body.Power>100&&t.UID!==e.UID&&(n=!0),this.curDot=this.dot8,this.curLink=this.link5}this.curDot.visible=!0,this.curLink.visible=!0,n?(this.curDot.loop=!1,this.curDot.play()):this.curDot.currentFrame=0}},{key:"bindWire",value:function(t,e){}},{key:"overStep",value:function(){this.freshType()}},{key:"findEAb",value:function(t){return u.ArrayUtil.clear(this.mapfind),t.bindinger?this.findBindEA(t.bindinger.friendPostersArr):null}},{key:"findBindEA",value:function(t){var e=void 0,n=t.length;for(e=0;n>e;e++)if(-1===this.mapfind.indexOf(t[e]))if(this.mapfind.push(t[e]),this.elecUtil.checkIsWire(t[e].body)){var i=0;if(0!==(i=this.findBindEA("bposter0"===t[e].name?t[e].body.bposter1.bindinger.friendPostersArr:t[e].body.bposter0.bindinger.friendPostersArr)))return i}else{if("ElectricAppliance"===t[e].body.classname)return t[e];if(t[e].body.isBreak)return 0;for(var r=[],o=0;;){if(!t[e].body["bposter"+o])break;t[e].body["bposter"+o].UID!==t[e].UID&&r.push(t[e].body["bposter"+o]),o++}var a=void 0,s=r.length;for(a=0;s>a;a++){if("ElectricAppliance"===r[a].bindinger.body.classname)return r[a];var u=this.findBindEA(r[a].bindinger.friendPostersArr);if(0!==u)return u}}return 0}},{key:"getConf",value:function(){for(var t=this,n=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),i=[],r=0;5>r;r++)i.push(this.language.getLocaleStr("connection")+(r+1));return n.confArr.push({type:this.ComponentProperty.SIMULATED_ELECTRIC_FIELD,name:this.language.getLocaleStr("connection"),value:i,checked:this.type,callBack:function(e){t.type=e.checked,t.freshType()}}),n}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("connection")+": "+this.linkArr[this.type]+"\n    "}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.type=this.type,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.type=t.type,this.freshType()}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.type=this.type,t}},{key:"setDefaultOrigin",value:function(){this.type=0}},{key:"defaultSettingChanged",value:function(){this.freshType()}}]),e}(c["default"])},function(t,e,n){"use strict";var i=n(26),r=n(58),o=n(17);t.exports=[].copyWithin||function(t,e){var n=i(this),a=o(n.length),s=r(t,a),u=r(e,a),l=arguments.length>2?arguments[2]:undefined,c=Math.min((l===undefined?a:r(l,a))-u,a-s),f=1;for(s>u&&u+c>s&&(f=-1,u+=c-1,s+=c-1);c-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(t,e,n){"use strict";var i=n(26),r=n(58),o=n(17);t.exports=function(t){for(var e=i(this),n=o(e.length),a=arguments.length,s=r(a>1?arguments[1]:undefined,n),u=a>2?arguments[2]:undefined,l=u===undefined?n:r(u,n);l>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var i=n(3),r=n(113),o=n(4)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=undefined),i(e)&&null===(e=e[o])&&(e=undefined)),e===undefined?Array:e}},function(t,e,n){"use strict";var i=n(227);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){"use strict";var i=n(28),r=n(56),o=n(40);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var a,s=n(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,n){"use strict";var i=n(8);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var i=n(3),r=n(125).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&i(o)&&r&&r(t,o),t}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=n===undefined;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";var i=n(77),r=n(41),o=n(42),a={};n(23)(a,n(4)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,n,i){"use strict";var r=i(5),o=i(82).set,a=r.MutationObserver||r.WebKitMutationObserver,s=r.process,u=r.Promise,l="process"==i(32)(s);t.exports=function(){var t,n,i,c=function(){var r,o;for(l&&(r=s.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(e){throw t?i():n=undefined,e}}n=undefined,r&&r.enter()};if(l)i=function(){s.nextTick(c)};else if(!a||r.navigator&&r.navigator.standalone)if(u&&u.resolve){var f=u.resolve();i=function(){f.then(c)}}else i=function(){o.call(r,c)};else{var h=!0,d=document.createTextNode("");new a(c).observe(d,{characterData:!0}),i=function(){d.data=h=!h}}return function(e){var r={fn:e,next:undefined};n&&(n.next=r),t||(t=r,i()),n=r}}},function(t,e,n){"use strict";var i=n(11),r=n(8),o=n(28);t.exports=n(13)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,u=0;s>u;)i.f(t,n=a[u++],e[n]);return t}},function(t,e,n){"use strict";var i=n(78),r=n(56),o=n(8),a=n(5).Reflect;t.exports=a&&a.ownKeys||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,n,i){"use strict";t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},function(t,e,n){"use strict";var i=n(8),r=n(3),o=n(119);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var i=n(8),r=n(48),o=n(4)("species");t.exports=function(t,e){var n,a=i(t).constructor;return a===undefined||(n=i(a)[o])==undefined?e:r(n)}},function(t,e,n){"use strict";var i=n(59),r=n(27);t.exports=function(t){return function(e,n){var o,a,s=r(e)+"",u=i(n),l=s.length;return 0>u||u>=l?t?"":undefined:(o=s.charCodeAt(u),55296>o||o>56319||u+1===l||56320>(a=s.charCodeAt(u+1))||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var i=n(5),r=n(33),o=n(54),a=n(130),s=n(11).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){"use strict";function i(t,e){if(e&&"object"===(void 0===e?"undefined":a(e))){var n="",i=encodeURIComponent;for(var r in e)n+="&"+i(r)+"="+i(e[r]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t}function r(t,e,n,r,o){r&&"object"===(void 0===r?"undefined":a(r))&&(o||(r._t=new Date),r=i("",r).slice(1)),e.queryStringParams&&(t=i(t,e.queryStringParams));try{var s;s=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0"),s.open(r?"POST":"GET",t,1),e.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!e.withCredentials,r&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var u=e.customHeaders;if(u)for(var l in u)s.setRequestHeader(l,u[l]);s.onreadystatechange=function(){s.readyState>3&&n&&n(s.responseText,s)},s.send(r)}catch(e){console}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":o(t)};e["default"]=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:l["default"]}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(245),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(a),u=n(243),l=function(t){return t&&t.__esModule?t:{"default":t}}(u),c=function(){function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i(this,t),this.init(e,n),this.type="backend"}return o(t,[{key:"init",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.services=t,this.options=s.defaults(e,this.options||{},r())}},{key:"readMulti",value:function(t,e,n){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath(t,e)),this.loadUrl(this.services.interpolator.interpolate(i,{lng:t.join("+"),ns:e.join("+")}),n)}},{key:"read",value:function(t,e,n){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath([t],[e])),this.loadUrl(this.services.interpolator.interpolate(i,{lng:t,ns:e}),n)}},{key:"loadUrl",value:function(t,e){var n=this;this.options.ajax(t,this.options,function(i,r){if(r.status>=500&&600>r.status)return e("failed loading "+t,!0);if(r.status>=400&&500>r.status)return e("failed loading "+t,!1);var o=void 0,a=void 0;try{o=n.options.parse(i,t)}catch(e){a="failed parsing "+t+" to json"}if(a)return e(a,!1);e(null,o)})}},{key:"create",value:function(t,e,n,i){var r=this;"string"==typeof t&&(t=[t]);var o={};o[n]=i||"",t.forEach(function(t){var n=r.services.interpolator.interpolate(r.options.addPath,{lng:t,ns:e});r.options.ajax(n,r.options,function(t,e){},o)})}}]),t}();c.type="backend",e["default"]=c},function(t,e,n){"use strict";function i(t){return a.call(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]===undefined&&(t[n]=e[n])}),t}function r(t){return a.call(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.defaults=i,e.extend=r;var o=[],a=o.forEach,s=o.slice},function(t,e,n){"use strict";t.exports=n(244)["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;n.length>i;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&t[r]===undefined&&Object.defineProperty(t,r,o)}return t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":l(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):r(t,e))}function u(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}e.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=n(60),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(c),h=n(29),d=i(h),p=n(44),v=i(p),y=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},g=function(){function t(t,e){var n=[],i=!0,r=!1,o=undefined;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e["default"]=function(t){function e(n,i,r){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};o(this,e);var u=a(this,t.call(this));return u.backend=n,u.store=i,u.languageUtils=r.languageUtils,u.options=s,u.logger=d["default"].create("backendConnector"),u.state={},u.queue=[],u.backend&&u.backend.init&&u.backend.init(r,s.backend,s),u}return s(e,t),e.prototype.queueLoad=function(t,e,n){var i=this,r=[],o=[],a=[],s=[];return t.forEach(function(t){var n=!0;e.forEach(function(e){var a=t+"|"+e;i.store.hasResourceBundle(t,e)?i.state[a]=2:0>i.state[a]||(1===i.state[a]?0>o.indexOf(a)&&o.push(a):(i.state[a]=1,n=!1,0>o.indexOf(a)&&o.push(a),0>r.indexOf(a)&&r.push(a),0>s.indexOf(e)&&s.push(e)))}),n||a.push(t)}),(r.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:n}),{toLoad:r,pending:o,toLoadLanguages:a,toLoadNamespaces:s}},e.prototype.loaded=function(t,e,n){var i=this,r=t.split("|"),o=g(r,2),a=o[0],s=o[1];e&&this.emit("failedLoading",a,s,e),n&&this.store.addResourceBundle(a,s,n),this.state[t]=e?-1:2,this.queue.forEach(function(n){f.pushPath(n.loaded,[a],s),u(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(i.emit("loaded",n.loaded),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.queue=this.queue.filter(function(t){return!t.done})},e.prototype.read=function(t,e,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,r=this,o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:250,a=arguments[5];return t.length?this.backend[n](t,e,function(s,u){if(s&&u&&5>i)return void setTimeout(function(){r.read.call(r,t,e,n,i+1,2*o,a)},o);a(s,u)}):a(null,{})},e.prototype.load=function(t,e,n){var i=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();var r=y({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var o=this.queueLoad(t,e,n);if(!o.toLoad.length)return o.pending.length||n(),null;r.allowMultiLoading&&this.backend.readMulti?this.read(o.toLoadLanguages,o.toLoadNamespaces,"readMulti",null,null,function(t,e){t&&i.logger.warn("loading namespaces "+o.toLoadNamespaces.join(", ")+" for languages "+o.toLoadLanguages.join(", ")+" via multiloading failed",t),!t&&e&&i.logger.log("successfully loaded namespaces "+o.toLoadNamespaces.join(", ")+" for languages "+o.toLoadLanguages.join(", ")+" via multiloading",e),o.toLoad.forEach(function(n){var r=n.split("|"),o=g(r,2),a=o[0],s=o[1],u=f.getPath(e,[a,s]);if(u)i.loaded(n,t,u);else{var l="loading namespace "+s+" for language "+a+" via multiloading failed";i.loaded(n,l),i.logger.error(l)}})}):o.toLoad.forEach(function(t){i.loadOne(t)})},e.prototype.reload=function(t,e){var n=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources.");var i=y({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]),i.allowMultiLoading&&this.backend.readMulti?this.read(t,e,"readMulti",null,null,function(i,r){i&&n.logger.warn("reloading namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading failed",i),!i&&r&&n.logger.log("successfully reloaded namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading",r),t.forEach(function(t){e.forEach(function(e){var o=f.getPath(r,[t,e]);if(o)n.loaded(t+"|"+e,i,o);else{var a="reloading namespace "+e+" for language "+t+" via multiloading failed";n.loaded(t+"|"+e,a),n.logger.error(a)}})})}):t.forEach(function(t){e.forEach(function(e){n.loadOne(t+"|"+e,"re")})})},e.prototype.loadOne=function(t){var e=this,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",i=t.split("|"),r=g(i,2),o=r[0],a=r[1];this.read(o,a,"read",null,null,function(i,r){i&&e.logger.warn(n+"loading namespace "+a+" for language "+o+" failed",i),!i&&r&&e.logger.log(n+"loaded namespace "+a+" for language "+o,r),e.loaded(t,i,r)})},e.prototype.saveMissing=function(t,e,n,i,r){this.backend&&this.backend.create&&this.backend.create(t,e,n,i,null,{isUpdate:r}),t&&t[0]&&this.store.addResource(t[0],e,n,i)},e}(v["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;n.length>i;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&t[r]===undefined&&Object.defineProperty(t,r,o)}return t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):r(t,e))}e.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=n(29),c=i(l),f=n(44),h=i(f),d=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e["default"]=function(t){function e(n,i,r){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};o(this,e);var u=a(this,t.call(this));return u.cache=n,u.store=i,u.services=r,u.options=s,u.logger=c["default"].create("cacheConnector"),u.cache&&u.cache.init&&u.cache.init(r,s.cache,s),u}return s(e,t),e.prototype.load=function(t,e,n){var i=this;if(!this.cache)return n&&n();var r=d({},this.cache.options,this.options.cache),o="string"==typeof t?this.services.languageUtils.toResolveHierarchy(t):t;r.enabled?this.cache.load(o,function(t,e){if(t&&i.logger.error("loading languages "+o.join(", ")+" from cache failed",t),e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))for(var a in e[r])if(Object.prototype.hasOwnProperty.call(e[r],a)&&"i18nStamp"!==a){var s=e[r][a];s&&i.store.addResourceBundle(r,a,s)}n&&n()}):n&&n()},e.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},e}(h["default"])},function(t,n,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=i(60),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(o),s=i(29),u=function(t){return t&&t.__esModule?t:{"default":t}}(s),l=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};n["default"]=function(){function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};r(this,t),this.logger=u["default"].create("interpolator"),this.init(e,!0)}return t.prototype.init=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};arguments[1]&&(this.options=t,this.format=t.interpolation&&t.interpolation.format||function(t){return t},this.escape=t.interpolation&&t.interpolation.escape||a.escape),t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escapeValue=e.escapeValue===undefined||e.escapeValue,this.prefix=e.prefix?a.regexEscape(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?a.regexEscape(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?a.regexEscape(e.nestingPrefix):e.nestingPrefixEscaped||a.regexEscape("$t("),this.nestingSuffix=e.nestingSuffix?a.regexEscape(e.nestingSuffix):e.nestingSuffixEscaped||a.regexEscape(")"),this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.resetRegExp()},t.prototype.reset=function(){this.options&&this.init(this.options)},t.prototype.resetRegExp=function(){var t=this.prefix+"(.+?)"+this.suffix;this.regexp=RegExp(t,"g");var e=""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=RegExp(e,"g");var n=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=RegExp(n,"g")},t.prototype.interpolate=function(t,e,n){function i(t){return t.replace(/\$/g,"$$$$")}var r=this,o=void 0,s=void 0,u=void 0,l=function(t){if(0>t.indexOf(r.formatSeparator))return a.getPath(e,t);var i=t.split(r.formatSeparator),o=i.shift().trim(),s=i.join(r.formatSeparator).trim();return r.format(a.getPath(e,o),s,n)};for(this.resetRegExp(),u=0;(o=this.regexpUnescape.exec(t))&&(s=l(o[1].trim()),t=t.replace(o[0],s),this.regexpUnescape.lastIndex=0,++u<this.maxReplaces););for(u=0;(o=this.regexp.exec(t))&&(s=l(o[1].trim()),"string"!=typeof s&&(s=a.makeString(s)),s||(this.logger.warn("missed to pass in variable "+o[1]+" for interpolating "+t),s=""),s=i(this.escapeValue?this.escape(s):s),t=t.replace(o[0],s),this.regexp.lastIndex=0,++u<this.maxReplaces););return t},t.prototype.nest=function(t,n){function i(t){if(0>t.indexOf(","))return t;var n=t.split(",");t=n.shift();var i=n.join(",");i=this.interpolate(i,u),i=i.replace(/'/g,'"');try{u=JSON.parse(i)}catch(e){this.logger.error("failed parsing options string in nesting for key "+t,e)}return t}var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},o=void 0,s=void 0,u=l({},r);for(u.applyPostProcessor=!1;o=this.nestingRegexp.exec(t);){if((s=n(i.call(this,o[1].trim()),u))&&o[0]===t&&"string"!=typeof s)return s;"string"!=typeof s&&(s=a.makeString(s)),s||(this.logger.warn("missed to resolve "+o[1]+" for nesting "+t),s=""),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t},t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}e.__esModule=!0;var o=n(29),a=function(t){return t&&t.__esModule?t:{"default":t}}(o);e["default"]=function(){function t(e){i(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=a["default"].create("languageUtils")}return t.prototype.getScriptPartFromCode=function(t){if(!t||0>t.indexOf("-"))return null;var e=t.split("-");return 2===e.length?null:(e.pop(),this.formatLanguageCode(e.join("-")))},t.prototype.getLanguagePartFromCode=function(t){return!t||0>t.indexOf("-")?t:this.formatLanguageCode(t.split("-")[0])},t.prototype.formatLanguageCode=function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(function(t){return t.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=r(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=r(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=r(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t},t.prototype.isWhitelisted=function(t){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1},t.prototype.getFallbackCodes=function(t,e){if(!t)return[];if("string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t["default"]||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t["default"]),n||[]},t.prototype.toResolveHierarchy=function(t,e){var n=this,i=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],o=function(t){t&&(n.isWhitelisted(t)?r.push(t):n.logger.warn("rejecting non-whitelisted language code: "+t))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"==typeof t&&o(this.formatLanguageCode(t)),i.forEach(function(t){0>r.indexOf(t)&&o(n.formatLanguageCode(t))}),r},t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){var t={};return s.forEach(function(e){e.lngs.forEach(function(n){t[n]={numbers:e.nr,plurals:u[e.fc]}})}),t}e.__esModule=!0;var o=n(29),a=function(t){return t&&t.__esModule?t:{"default":t}}(o),s=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],u={1:function(t){return+(t>1)},2:function(t){return+(1!=t)},3:function(t){return 0},4:function(t){return+(t%10==1&&t%100!=11?0:2>t%10||t%10>4||t%100>=10&&20>t%100?2:1)},5:function(t){return+(0===t?0:1==t?1:2==t?2:3>t%100||t%100>10?11>t%100?5:4:3)},6:function(t){return+(1==t?0:2>t||t>4?2:1)},7:function(t){return+(1==t?0:2>t%10||t%10>4||t%100>=10&&20>t%100?2:1)},8:function(t){return+(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return+(t>=2)},10:function(t){return+(1==t?0:2==t?1:7>t?2:11>t?3:4)},11:function(t){return+(1==t||11==t?0:2==t||12==t?1:t>2&&20>t?2:3)},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(0!==t)},14:function(t){return+(1==t?0:2==t?1:3==t?2:3)},15:function(t){return+(t%10==1&&t%100!=11?0:2>t%10||t%100>=10&&20>t%100?2:1)},16:function(t){return+(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return+(1==t||t%10==1?0:1)},18:function(t){return+(0==t?0:1==t?1:2)},19:function(t){return+(1==t?0:0===t||t%100>1&&11>t%100?1:t%100>10&&20>t%100?2:3)},20:function(t){return+(1==t?0:0===t||t%100>0&&20>t%100?1:2)},21:function(t){return+(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)}};e["default"]=function(){function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i(this,t),this.languageUtils=e,this.options=n,this.logger=a["default"].create("pluralResolver"),this.rules=r()}return t.prototype.addRule=function(t,e){this.rules[t]=e},t.prototype.getRule=function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]},t.prototype.needsPlural=function(t){var e=this.getRule(t);return e&&e.numbers.length>1},t.prototype.getSuffix=function(t,e){var n=this,i=this.getRule(t);if(i){var r=i.plurals(i.noAbs?e:Math.abs(e)),o=i.numbers[r];this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return n.options.prepend&&""+o?n.options.prepend+""+o:""+o};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_"+o:a():"v2"===this.options.compatibilityJSON||2===i.numbers.length&&1===i.numbers[0]?a():2===i.numbers.length&&1===i.numbers[0]?a():this.options.prepend&&""+r?this.options.prepend+""+r:""+r}return this.logger.warn("no plural rule found for: "+t),""},t}()},function(t,e,n){"use strict";function i(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;n.length>i;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&t[r]===undefined&&Object.defineProperty(t,r,o)}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):i(t,e))}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=n(44),l=function(t){return t&&t.__esModule?t:{"default":t}}(u),c=n(60),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(c),h=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e["default"]=function(t){function e(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{ns:["translation"],defaultNS:"translation"};r(this,e);var a=o(this,t.call(this));return a.data=n||{},a.options=i,a}return a(e,t),e.prototype.addNamespaces=function(t){0>this.options.ns.indexOf(t)&&this.options.ns.push(t)},e.prototype.removeNamespaces=function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)},e.prototype.getResource=function(t,e,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},r=i.keySeparator||this.options.keySeparator;r===undefined&&(r=".");var o=[t,e];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(r?n.split(r):n)),t.indexOf(".")>-1&&(o=t.split(".")),f.getPath(this.data,o)},e.prototype.addResource=function(t,e,n,i){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{silent:!1},o=this.options.keySeparator;o===undefined&&(o=".");var a=[t,e];n&&(a=a.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(a=t.split("."),i=e,e=a[1]),this.addNamespaces(e),f.setPath(this.data,a,i),r.silent||this.emit("added",t,e,n,i)},e.prototype.addResources=function(t,e,n){for(var i in n)"string"==typeof n[i]&&this.addResource(t,e,i,n[i],{silent:!0});this.emit("added",t,e,n)},e.prototype.addResourceBundle=function(t,e,n,i,r){var o=[t,e];t.indexOf(".")>-1&&(o=t.split("."),i=n,n=e,e=o[1]),this.addNamespaces(e);var a=f.getPath(this.data,o)||{};i?f.deepExtend(a,n,r):a=h({},a,n),f.setPath(this.data,o,a),this.emit("added",t,e,n)},e.prototype.removeResourceBundle=function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)},e.prototype.hasResourceBundle=function(t,e){return this.getResource(t,e)!==undefined},e.prototype.getResourceBundle=function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?h({},this.getResource(t,e)):this.getResource(t,e)},e.prototype.toJSON=function(){return this.data},e}(l["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;n.length>i;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&t[r]===undefined&&Object.defineProperty(t,r,o)}return t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):r(t,e))}e.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=n(29),c=i(l),f=n(44),h=i(f),d=n(132),p=i(d),v=n(60),y=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(v),g=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":u(t)};e["default"]=function(t){function e(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};o(this,e);var r=a(this,t.call(this));return y.copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],n,r),r.options=i,r.logger=c["default"].create("translator"),r}return s(e,t),e.prototype.changeLanguage=function(t){t&&(this.language=t)},e.prototype.exists=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&n.res!==undefined},e.prototype.extractFromKey=function(t,e){var n=e.nsSeparator||this.options.nsSeparator;n===undefined&&(n=":");var i=e.keySeparator||this.options.keySeparator||".",r=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var o=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(o[0])>-1)&&(r=o.shift()),t=o.join(i)}return"string"==typeof r&&(r=[r]),{key:t,namespaces:r}},e.prototype.translate=function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if("object"!==(void 0===e?"undefined":_(e))&&(e=this.options.overloadTranslationOptionHandler(arguments)),t===undefined||null===t||""===t)return"";"number"==typeof t&&(t+=""),"string"==typeof t&&(t=[t]);var n=e.keySeparator||this.options.keySeparator||".",i=this.extractFromKey(t[t.length-1],e),r=i.key,o=i.namespaces,a=o[o.length-1],s=e.lng||this.language,u=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(s&&"cimode"===s.toLowerCase()){if(u){return a+(e.nsSeparator||this.options.nsSeparator)+r}return r}var l=this.resolve(t,e),c=l&&l.res,f=l&&l.usedKey||r,h=Object.prototype.toString.apply(c),d=["[object Number]","[object Function]","[object RegExp]"],p=e.joinArrays!==undefined?e.joinArrays:this.options.joinArrays,v="string"!=typeof c&&"boolean"!=typeof c&&"number"!=typeof c;if(c&&v&&0>d.indexOf(h)&&(!p||"[object Array]"!==h)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,c,e):"key '"+r+" ("+this.language+")' returned an object instead of string.";if(e.keySeparator||this.options.keySeparator){var y="[object Array]"===h?[]:{};for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(y[m]=this.translate(""+f+n+m,g({},e,{joinArrays:!1,ns:o})));c=y}}else if(p&&"[object Array]"===h)(c=c.join(p))&&(c=this.extendTranslation(c,t,e));else{var b=!1,w=!1;this.isValidLookup(c)||e.defaultValue===undefined||(b=!0,c=e.defaultValue),this.isValidLookup(c)||(w=!0,c=r);var E=e.defaultValue&&e.defaultValue!==c&&this.options.updateMissing;if(w||b||E){this.logger.log(E?"updateKey":"missingKey",s,a,r,E?e.defaultValue:c);var x=[],O=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&O&&O[0])for(var P=0;O.length>P;P++)x.push(O[P]);else"all"===this.options.saveMissingTo?x=this.languageUtils.toResolveHierarchy(e.lng||this.language):x.push(e.lng||this.language);this.options.saveMissing&&(this.options.missingKeyHandler?this.options.missingKeyHandler(x,a,r,E?e.defaultValue:c,E):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(x,a,r,E?e.defaultValue:c,E)),this.emit("missingKey",x,a,r,c)}c=this.extendTranslation(c,t,e),w&&c===r&&this.options.appendNamespaceToMissingKey&&(c=a+":"+r),w&&this.options.parseMissingKeyHandler&&(c=this.options.parseMissingKeyHandler(c))}return c},e.prototype.extendTranslation=function(t,e,n){var i=this;n.interpolation&&this.interpolator.init(g({},n,{interpolation:g({},this.options.interpolation,n.interpolation)}));var r=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(r=g({},this.options.interpolation.defaultVariables,r)),t=this.interpolator.interpolate(t,r,n.lng||this.language),!1!==n.nest&&(t=this.interpolator.nest(t,function(){return i.translate.apply(i,arguments)},n)),n.interpolation&&this.interpolator.reset();var o=n.postProcess||this.options.postProcess,a="string"==typeof o?[o]:o;return t!==undefined&&a&&a.length&&!1!==n.applyPostProcessor&&(t=p["default"].handle(a,t,e,n,this)),t},e.prototype.resolve=function(t){var e=this,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=void 0,r=void 0;return"string"==typeof t&&(t=[t]),t.forEach(function(t){if(!e.isValidLookup(i)){var o=e.extractFromKey(t,n),a=o.key;r=a;var s=o.namespaces;e.options.fallbackNS&&(s=s.concat(e.options.fallbackNS));var u=n.count!==undefined&&"string"!=typeof n.count,l=n.context!==undefined&&"string"==typeof n.context&&""!==n.context,c=n.lngs?n.lngs:e.languageUtils.toResolveHierarchy(n.lng||e.language);s.forEach(function(t){e.isValidLookup(i)||c.forEach(function(r){if(!e.isValidLookup(i)){var o=a,s=[o],c=void 0;u&&(c=e.pluralResolver.getSuffix(r,n.count)),u&&l&&s.push(o+c),l&&s.push(o+=""+e.options.contextSeparator+n.context),u&&s.push(o+=c);for(var f=void 0;f=s.pop();)e.isValidLookup(i)||(i=e.getResource(r,t,f,n))}})})}}),{res:i,usedKey:r}},e.prototype.isValidLookup=function(t){return!(t===undefined||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)},e.prototype.getResource=function(t,e,n){return this.resourceStore.getResource(t,e,n,arguments.length>3&&arguments[3]!==undefined?arguments[3]:{})},e}(h["default"])},function(t,e,n){"use strict";function i(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){return{defaultValue:t[1]}},interpolation:{escapeValue:!0,format:function(t,e,n){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}}}function r(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&0>t.whitelist.indexOf("cimode")&&t.whitelist.push("cimode"),t}e.__esModule=!0,e.transformOptions=r,e.get=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;n.length>i;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&t[r]===undefined&&Object.defineProperty(t,r,o)}return t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":l(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):r(t,e))}function u(){}e.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=n(29),f=i(c),h=n(44),d=i(h),p=n(252),v=i(p),y=n(253),g=i(y),_=n(250),m=i(_),b=n(251),w=i(b),E=n(249),x=i(E),O=n(247),P=i(O),k=n(248),S=i(k),C=n(254),M=n(132),T=i(M),A="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(t){return void 0===t?"undefined":l(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":l(t)},D=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e["default"]=new(function(t){function e(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=arguments[1];o(this,e);var r=a(this,t.call(this));if(r.options=(0,C.transformOptions)(n),r.services={},r.logger=f["default"],r.modules={external:[]},i&&!r.isInitialized&&!n.isClone){var s;if(!r.options.initImmediate)return s=r.init(n,i),a(r,s);setTimeout(function(){r.init(n,i)},0)}return r}return s(e,t),e.prototype.init=function(){function t(t){return t?"function"==typeof t?new t:t:null}var e=this,n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=arguments[1];if("function"==typeof n&&(i=n,n={}),this.options=D({},(0,C.get)(),this.options,(0,C.transformOptions)(n)),this.format=this.options.interpolation.format,i||(i=u),!this.options.isClone){this.modules.logger?f["default"].init(t(this.modules.logger),this.options):f["default"].init(null,this.options);var r=new m["default"](this.options);this.store=new v["default"](this.options.resources,this.options);var o=this.services;o.logger=f["default"],o.resourceStore=this.store,o.resourceStore.on("added removed",function(t,e){o.cacheConnector.save()}),o.languageUtils=r,o.pluralResolver=new w["default"](r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new x["default"](this.options),o.backendConnector=new P["default"](t(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))}),o.backendConnector.on("loaded",function(t){o.cacheConnector.save()}),o.cacheConnector=new S["default"](t(this.modules.cache),o.resourceStore,o,this.options),o.cacheConnector.on("*",function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))}),this.modules.languageDetector&&(o.languageDetector=t(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.translator=new g["default"](this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];e.emit.apply(e,[t].concat(i))}),this.modules.external.forEach(function(t){t.init&&t.init(e)})}["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}});var a=function(){e.changeLanguage(e.options.lng,function(t,n){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),i(t,n)})};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),this},e.prototype.loadResources=function(){var t=this,e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:u;if(this.options.resources)e(null);else{if(this.language&&"cimode"===this.language.toLowerCase())return e();var n=[],i=function(e){if(e){t.services.languageUtils.toResolveHierarchy(e).forEach(function(t){0>n.indexOf(t)&&n.push(t)})}};if(this.language)i(this.language);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(t){return i(t)})}this.options.preload&&this.options.preload.forEach(function(t){return i(t)}),this.services.cacheConnector.load(n,this.options.ns,function(){t.services.backendConnector.load(n,t.options.ns,e)})}},e.prototype.reloadResources=function(t,e){t||(t=this.languages),e||(e=this.options.ns),this.services.backendConnector.reload(t,e)},e.prototype.use=function(t){return"backend"===t.type&&(this.modules.backend=t),"cache"===t.type&&(this.modules.cache=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"postProcessor"===t.type&&T["default"].addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this},e.prototype.changeLanguage=function(t,e){var n=this,i=function(t,i){n.translator.changeLanguage(i),i&&(n.emit("languageChanged",i),n.logger.log("languageChanged",i)),e&&e(t,function(){return n.t.apply(n,arguments)})},r=function(t){t&&(n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t),n.translator.language||n.translator.changeLanguage(t),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(t)),n.loadResources(function(e){i(e,t)})};t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(t):r(this.services.languageDetector.detect())},e.prototype.getFixedT=function(t,e){var n=this,i=function r(t,e){for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;i>a;a++)o[a-2]=arguments[a];var s=D({},e);return"object"!==(void 0===e?"undefined":A(e))&&(s=n.options.overloadTranslationOptionHandler([t,e].concat(o))),s.lng=s.lng||r.lng,s.lngs=s.lngs||r.lngs,s.ns=s.ns||r.ns,n.t(t,s)};return"string"==typeof t?i.lng=t:i.lngs=t,i.ns=e,i},e.prototype.t=function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)},e.prototype.exists=function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)},e.prototype.setDefaultNamespace=function(t){this.options.defaultNS=t},e.prototype.loadNamespaces=function(t,e){var n=this;if(!this.options.ns)return e&&e();"string"==typeof t&&(t=[t]),t.forEach(function(t){0>n.options.ns.indexOf(t)&&n.options.ns.push(t)}),this.loadResources(e)},e.prototype.loadLanguages=function(t,e){"string"==typeof t&&(t=[t]);var n=this.options.preload||[],i=t.filter(function(t){return 0>n.indexOf(t)});if(!i.length)return e();this.options.preload=n.concat(i),this.loadResources(e)},e.prototype.dir=function(t){return t||(t=this.languages&&this.languages.length>0?this.languages[0]:this.language),t&&0>["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))?"ltr":"rtl"},e.prototype.createInstance=function(){return new e(arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},arguments[1])},e.prototype.cloneInstance=function(){var t=this,n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:u,r=D({},this.options,n,{isClone:!0}),o=new e(r);return["store","services","language"].forEach(function(e){o[e]=t[e]}),o.translator=new g["default"](o.services,o.options),o.translator.on("*",function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];o.emit.apply(o,[t].concat(n))}),o.init(r,i),o.translator.options=o.options,o},e}(d["default"]))},function(t,e,n){"use strict";e.__esModule=!0,e.use=e.t=e.setDefaultNamespace=e.on=e.off=e.loadResources=e.loadNamespaces=e.loadLanguages=e.init=e.getFixedT=e.exists=e.dir=e.createInstance=e.cloneInstance=e.changeLanguage=undefined;var i=n(255),r=function(t){return t&&t.__esModule?t:{"default":t}}(i);e["default"]=r["default"];e.changeLanguage=r["default"].changeLanguage.bind(r["default"]),e.cloneInstance=r["default"].cloneInstance.bind(r["default"]),e.createInstance=r["default"].createInstance.bind(r["default"]),e.dir=r["default"].dir.bind(r["default"]),e.exists=r["default"].exists.bind(r["default"]),e.getFixedT=r["default"].getFixedT.bind(r["default"]),e.init=r["default"].init.bind(r["default"]),e.loadLanguages=r["default"].loadLanguages.bind(r["default"]),e.loadNamespaces=r["default"].loadNamespaces.bind(r["default"]),e.loadResources=r["default"].loadResources.bind(r["default"]),e.off=r["default"].off.bind(r["default"]),e.on=r["default"].on.bind(r["default"]),e.setDefaultNamespace=r["default"].setDefaultNamespace.bind(r["default"]),e.t=r["default"].t.bind(r["default"]),e.use=r["default"].use.bind(r["default"])},function(t,e,n){"use strict";t.exports=n(30)(n(12),"DataView")},function(t,e,n){"use strict";function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=n(302),o=n(303),a=n(304),s=n(305),u=n(306);i.prototype.clear=r,i.prototype["delete"]=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=u,t.exports=i},function(t,e,n){"use strict";function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=n(317),o=n(318),a=n(319),s=n(320),u=n(321);i.prototype.clear=r,i.prototype["delete"]=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=u,t.exports=i},function(t,e,n){"use strict";t.exports=n(30)(n(12),"Promise")},function(t,e,n){"use strict";t.exports=n(30)(n(12),"Set")},function(t,e,n){"use strict";function i(t){this.size=(this.__data__=new r(t)).size}var r=n(61),o=n(331),a=n(332),s=n(333),u=n(334),l=n(335);i.prototype.clear=o,i.prototype["delete"]=a,i.prototype.get=s,i.prototype.has=u,i.prototype.set=l,t.exports=i},function(t,e,n){"use strict";t.exports=n(12).Uint8Array},function(t,e,n){"use strict";t.exports=n(30)(n(12),"WeakMap")},function(t,e,n){"use strict";function i(t,e){return t.set(e[0],e[1]),t}t.exports=i},function(t,e,n){"use strict";function i(t,e){return t.add(e),t}t.exports=i},function(t,e,n){"use strict";function i(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=i},function(t,e,n){"use strict";function i(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}t.exports=i},function(t,e,n){"use strict";function i(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}t.exports=i},function(t,e,n){"use strict";function i(t,e){return t&&r(e,o(e),t)}var r=n(45),o=n(91);t.exports=i},function(t,e,n){"use strict";function i(t,e){return t&&r(e,o(e),t)}var r=n(45),o=n(92);t.exports=i},function(t,e,n){"use strict";function i(t,e,n,A,D,L){var I,j=e&x,N=e&O,R=e&P;if(n&&(I=D?n(t,A,D,L):n(t)),I!==undefined)return I;if(!w(t))return t;var B=m(t);if(B){if(I=y(t),!j)return c(t,I)}else{var U=v(t),H=U==S||U==C;if(b(t))return l(t,j);if(U==M||U==k||H&&!D){if(I=N||H?{}:_(t),!j)return N?h(t,u(I,t)):f(t,s(I,t))}else{if(!T[U])return D?t:{};I=g(t,U,i,j)}}L||(L=new r);var F=L.get(t);if(F)return F;L.set(t,I);var G=R?N?p:d:N?keysIn:E,V=B?undefined:G(t);return o(V||t,function(r,o){V&&(o=r,r=t[o]),a(I,o,i(r,e,n,o,t,L))}),I}var r=n(262),o=n(268),a=n(136),s=n(270),u=n(271),l=n(284),c=n(291),f=n(292),h=n(293),d=n(297),p=n(298),v=n(300),y=n(307),g=n(308),_=n(309),m=n(65),b=n(148),w=n(19),E=n(91),x=1,O=2,P=4,k="[object Arguments]",S="[object Function]",C="[object GeneratorFunction]",M="[object Object]",T={};T[k]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[M]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[S]=T["[object WeakMap]"]=!1,t.exports=i},function(t,e,n){"use strict";var i=n(19),r=Object.create;t.exports=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=undefined,n}}()},function(t,e,n){"use strict";function i(t){return o(t)&&r(t)==a}var r=n(35),o=n(46),a="[object Arguments]";t.exports=i},function(t,e,n){"use strict";function i(t){return!(!a(t)||o(t))&&(r(t)?p:l).test(s(t))}var r=n(149),o=n(311),a=n(19),s=n(146),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,f=Object.prototype,h=c.toString,d=f.hasOwnProperty,p=RegExp("^"+h.call(d).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},function(t,e,n){"use strict";function i(t){return a(t)&&o(t.length)&&!!s[r(t)]}var r=n(35),o=n(150),a=n(46),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=i},function(t,e,n){"use strict";function i(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}var r=n(88),o=n(323),a=Object.prototype,s=a.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function i(t){if(!r(t))return a(t);var e=o(t),n=[];for(var i in t)("constructor"!=i||!e&&u.call(t,i))&&n.push(i);return n}var r=n(19),o=n(88),a=n(324),s=Object.prototype,u=s.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function i(t,e,n,i){for(var a=-1,s=o(r((e-t)/(n||1)),0),u=Array(s);s--;)u[i?s:++a]=t,t+=n;return u}var r=Math.ceil,o=Math.max;t.exports=i},function(t,e,n){"use strict";function i(t,e){return a(o(t,e,r),t+"")}var r=n(147),o=n(327),a=n(329);t.exports=i},function(t,e,n){"use strict";var i=n(338),r=n(139),o=n(147);t.exports=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:o},function(t,e,n){"use strict";function i(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}t.exports=i},function(t,e,n){"use strict";function i(t){return function(e){return t(e)}}t.exports=i},function(t,e,n){"use strict";(function(t){function i(t,e){if(e)return t.slice();var n=t.length,i=c?c(n):new t.constructor(n);return t.copy(i),i}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(12),a="object"==r(e)&&e&&!e.nodeType&&e,s=a&&"object"==r(t)&&t&&!t.nodeType&&t,u=s&&s.exports===a,l=u?o.Buffer:undefined,c=l?l.allocUnsafe:undefined;t.exports=i}).call(e,n(36)(t))},function(t,e,n){"use strict";function i(t,e){return new t.constructor(e?r(t.buffer):t.buffer,t.byteOffset,t.byteLength)}var r=n(86);t.exports=i},function(t,e,n){"use strict";function i(t,e,n){var i=e?n(a(t),s):a(t);return o(i,r,new t.constructor)}var r=n(265),o=n(135),a=n(322),s=1;t.exports=i},function(t,e,n){"use strict";function i(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}var r=/\w*$/;t.exports=i},function(t,e,n){"use strict";function i(t,e,n){var i=e?n(a(t),s):a(t);return o(i,r,new t.constructor)}var r=n(266),o=n(135),a=n(328),s=1;t.exports=i},function(t,e,n){"use strict";function i(t){return a?Object(a.call(t)):{}}var r=n(85),o=r?r.prototype:undefined,a=o?o.valueOf:undefined;t.exports=i},function(t,e,n){"use strict";function i(t,e){return new t.constructor(e?r(t.buffer):t.buffer,t.byteOffset,t.length)}var r=n(86);t.exports=i},function(t,e,n){"use strict";function i(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}t.exports=i},function(t,e,n){"use strict";function i(t,e){return r(t,o(t),e)}var r=n(45),o=n(87);t.exports=i},function(t,e,n){"use strict";function i(t,e){return r(t,o(t),e)}var r=n(45),o=n(142);t.exports=i},function(t,e,n){"use strict";t.exports=n(12)["__core-js_shared__"]},function(t,e,n){"use strict";function i(t){return r(function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:undefined,s=r>2?n[2]:undefined;for(a=t.length>3&&"function"==typeof a?(r--,a):undefined,s&&o(n[0],n[1],s)&&(a=3>r?undefined:a,r=1),e=Object(e);++i<r;){var u=n[i];u&&t(e,u,i,a)}return e})}var r=n(280),o=n(144);t.exports=i},function(t,e,n){"use strict";function i(t){return function(e,n,i){return i&&"number"!=typeof i&&o(e,n,i)&&(n=i=undefined),e=a(e),n===undefined?(n=e,e=0):n=a(n),i=i===undefined?n>e?1:-1:a(i),r(e,n,i,t)}}var r=n(279),o=n(144),a=n(348);t.exports=i},function(t,e,n){"use strict";function i(t){return r(t,a,o)}var r=n(138),o=n(87),a=n(91);t.exports=i},function(t,e,n){"use strict";function i(t){return r(t,a,o)}var r=n(138),o=n(142),a=n(92);t.exports=i},function(t,e,n){"use strict";function i(t){var e=a.call(t,u),n=t[u];try{t[u]=undefined;var i=!0}catch(e){}var r=s.call(t);return i&&(e?t[u]=n:delete t[u]),r}var r=n(85),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=r?r.toStringTag:undefined;t.exports=i},function(t,e,n){"use strict";var i=n(257),r=n(84),o=n(260),a=n(261),s=n(264),u=n(35),l=n(146),c=l(i),f=l(r),h=l(o),d=l(a),p=l(s),v=u;(i&&"[object DataView]"!=v(new i(new ArrayBuffer(1)))||r&&"[object Map]"!=v(new r)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||s&&"[object WeakMap]"!=v(new s))&&(v=function(t){var e=u(t),n="[object Object]"==e?t.constructor:undefined,i=n?l(n):"";if(i)switch(i){case c:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){"use strict";function i(t,e){return null==t?undefined:t[e]}t.exports=i},function(t,e,n){"use strict";function i(){this.__data__=r?r(null):{},this.size=0}var r=n(64);t.exports=i},function(t,e,n){"use strict";function i(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=i},function(t,e,n){"use strict";function i(t){var e=this.__data__;if(r){var n=e[t];return n===o?undefined:n}return s.call(e,t)?e[t]:undefined}var r=n(64),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function i(t){var e=this.__data__;return r?e[t]!==undefined:a.call(e,t)}var r=n(64),o=Object.prototype,a=o.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function i(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&e===undefined?o:e,this}var r=n(64),o="__lodash_hash_undefined__";t.exports=i},function(t,e,n){"use strict";function i(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,o=r.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function i(t,e,n,i){var T=t.constructor;switch(e){case m:return r(t);case f:case h:return new T(+t);case b:return o(t,i);case w:case E:case x:case O:case P:case k:case S:case C:case M:return c(t,i);case d:return a(t,i,n);case p:case g:return new T(t);case v:return s(t);case y:return u(t,i,n);case _:return l(t)}}var r=n(86),o=n(285),a=n(286),s=n(287),u=n(288),l=n(289),c=n(290),f="[object Boolean]",h="[object Date]",d="[object Map]",p="[object Number]",v="[object RegExp]",y="[object Set]",g="[object String]",_="[object Symbol]",m="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",x="[object Int8Array]",O="[object Int16Array]",P="[object Int32Array]",k="[object Uint8Array]",S="[object Uint8ClampedArray]",C="[object Uint16Array]",M="[object Uint32Array]";t.exports=i},function(t,e,n){"use strict";function i(t){return"function"!=typeof t.constructor||a(t)?{}:r(o(t))}var r=n(273),o=n(141),a=n(88);t.exports=i},function(t,e,n){"use strict";function i(t){var e=void 0===t?"undefined":r(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=i},function(t,e,n){"use strict";function i(t){return!!o&&o in t}var r=n(294),o=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=i},function(t,e,n){"use strict";function i(){this.__data__=[],this.size=0}t.exports=i},function(t,e,n){"use strict";function i(t){var e=this.__data__,n=r(e,t);return n>=0&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)}var r=n(62),o=Array.prototype,a=o.splice;t.exports=i},function(t,e,n){"use strict";function i(t){var e=this.__data__,n=r(e,t);return 0>n?undefined:e[n][1]}var r=n(62);t.exports=i},function(t,e,n){"use strict";function i(t){return r(this.__data__,t)>-1}var r=n(62);t.exports=i},function(t,e,n){"use strict";function i(t,e){var n=this.__data__,i=r(n,t);return 0>i?(++this.size,n.push([t,e])):n[i][1]=e,this}var r=n(62);t.exports=i},function(t,e,n){"use strict";function i(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}var r=n(258),o=n(61),a=n(84);t.exports=i},function(t,e,n){"use strict";function i(t){var e=r(this,t)["delete"](t);return this.size-=e?1:0,e}var r=n(63);t.exports=i},function(t,e,n){"use strict";function i(t){return r(this,t).get(t)}var r=n(63);t.exports=i},function(t,e,n){"use strict";function i(t){return r(this,t).has(t)}var r=n(63);t.exports=i},function(t,e,n){"use strict";function i(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var r=n(63);t.exports=i},function(t,e,n){"use strict";function i(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}t.exports=i},function(t,e,n){"use strict";t.exports=n(145)(Object.keys,Object)},function(t,e,n){"use strict";function i(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=i},function(t,e,n){"use strict";(function(t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(140),o="object"==i(e)&&e&&!e.nodeType&&e,a=o&&"object"==i(t)&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s&&r.process;t.exports=function(){try{return u&&u.binding&&u.binding("util")}catch(e){}}()}).call(e,n(36)(t))},function(t,e,n){"use strict";function i(t){return o.call(t)}var r=Object.prototype,o=r.toString;t.exports=i},function(t,e,n){"use strict";function i(t,e,n){return e=o(e===undefined?t.length-1:e,0),function(){for(var i=arguments,a=-1,s=o(i.length-e,0),u=Array(s);++a<s;)u[a]=i[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=i[a];return l[e]=n(u),r(t,this,l)}}var r=n(267),o=Math.max;t.exports=i},function(t,e,n){"use strict";function i(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}t.exports=i},function(t,e,n){"use strict";var i=n(281);t.exports=n(330)(i)},function(t,e,n){"use strict";function i(t){var e=0,n=0;return function(){var i=a(),s=o-(i-n);if(n=i,s>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(undefined,arguments)}}var r=800,o=16,a=Date.now;t.exports=i},function(t,e,n){"use strict";function i(){this.__data__=new r,this.size=0}var r=n(61);t.exports=i},function(t,e,n){"use strict";function i(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}t.exports=i},function(t,e,n){"use strict";function i(t){return this.__data__.get(t)}t.exports=i},function(t,e,n){"use strict";function i(t){return this.__data__.has(t)}t.exports=i},function(t,e,n){"use strict";function i(t,e){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||s-1>i.length)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(t,e),this.size=n.size,this}var r=n(61),o=n(84),a=n(259),s=200;t.exports=i},function(t,e,n){"use strict";var i=n(45),r=n(295),o=n(92);t.exports=r(function(t,e){i(e,o(e),t)})},function(t,e,n){"use strict";function i(t){return r(t,o|a)}var r=n(272),o=1,a=4;t.exports=i},function(t,e,n){"use strict";function i(t){return function(){return t}}t.exports=i},function(t,e,n){"use strict";var i=n(274),r=n(46),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable;t.exports=i(function(){return arguments}())?i:function(t){return r(t)&&a.call(t,"callee")&&!s.call(t,"callee")}},function(t,e,n){"use strict";function i(t){return null==t}t.exports=i},function(t,e,n){"use strict";function i(t){return"string"==typeof t||!o(t)&&a(t)&&r(t)==s}var r=n(35),o=n(65),a=n(46),s="[object String]";t.exports=i},function(t,e,n){"use strict";function i(t){return"symbol"==(void 0===t?"undefined":r(t))||a(t)&&o(t)==s}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(35),a=n(46),s="[object Symbol]";t.exports=i},function(t,e,n){"use strict";var i=n(276),r=n(283),o=n(325),a=o&&o.isTypedArray;t.exports=a?r(a):i},function(t,e,n){"use strict";var i=n(12);t.exports=function(){return i.Date.now()}},function(t,e,n){"use strict";t.exports=n(296)()},function(t,e,n){"use strict";function i(){return!1}t.exports=i},function(t,e,n){"use strict";function i(t,e,n){var i=!0,s=!0;if("function"!=typeof t)throw new TypeError(a);return o(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:i,maxWait:e,trailing:s})}var r=n(223),o=n(19),a="Expected a function";t.exports=i},function(t,e,n){"use strict";function i(t){if(!t)return 0===t?t:0;if((t=r(t))===o||t===-o){return(0>t?-1:1)*a}return t===t?t:0}var r=n(152),o=1/0,a=1.7976931348623157e308;t.exports=i},function(t,n,i){"use strict";var r=i(350),o={gesture:{TAP:"gesture.tap",TAP_MISS:"gesture.tapMiss",ZOOM:"gesture.zoom",ROTA:"gesture.rota",PAN:"gesture.pan",HOLD:"hold",CLONE:"gesture.clone"},zoomGesture:function(t,e,n){function i(){if(e.activeZoomGesture)return 0==o.size?void(e.activeZoomGesture=!1):void(!1!==a&&(e.x+=(s.x-e.x)*l,e.y+=(s.y-e.y)*l,e.scale.x+=(u.x-e.scale.x)*l,e.scale.y+=(u.y-e.scale.y)*l,e.emit("change.zoom",{zoom:e.scale.x})))}var o=new Map;PIXI;n=n||{},e||(e=t);var a=!0,s={x:e.x,y:e.y},u={x:e.scale.x,y:e.scale.y},l=.15;Object.defineProperty(e,"activeZoomGesture",{set:function(t){this.__activeZoomGesture=t},get:function(){return this.__activeZoomGesture}}),t.addEventListener(TouchEvent.TOUCH_BEGIN,function(t){2>o.size&&!1!==a&&(o.size>0&&0==t.data.identifier&&o.clear(),o.set(t.data.identifier,{x:t.data.global.x,y:t.data.global.y}),2===o.size&&(u.x=e.scale.x,u.y=e.scale.y,s.x=e.x,s.y=e.y,e.activeZoomGesture=!0))},!1,1),t.addEventListener(TouchEvent.TOUCH_MOVE,function(t){if(!1!==a){try{if(e.activeZoomGesture&&2!=t.data.originalEvent.touches.length)return o.clear(),void(e.activeZoomGesture=!1)}catch(m){}if(o.has(t.data.identifier)&&2===o.size){var i,l=t.data.identifier,c=o.get(l);o.forEach(function(t,e){l!=e&&(i=t)});var f=(c.x-t.data.global.x)/2,h=(c.y-t.data.global.y)/2;s.x-=f,s.y-=h;var d=r.distance(t.data.global,i)/r.distance(c,i),p=u.x*d;n.maxZoom!==undefined&&p>n.maxZoom&&(p=n.maxZoom,d=p/u.x),n.minZoom!==undefined&&n.minZoom>p&&(p=n.minZoom,d=p/u.x);var v=s.x,y=s.y,g=i.x-s.x,_=i.y-s.y;g*=d-1,_*=d-1,v-=g,y-=_,s.x=v,s.y=y,u.x=p,u.y=p,c.x=t.data.global.x,c.y=t.data.global.y}}}),t.addEventListener(TouchEvent.TOUCH_END,function(t){o["delete"](t.data.identifier),e.activeZoomGesture&&(e.activeZoomGesture=!1,e.emit("change.zoom.complete",{zoom:e.scale.x}))}),t.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,function(t){o["delete"](t.data.identifier)});var c={};return c.update=function(){i()},c.getTouchCount=function(){return o.size},c.setGestureEnabled=function(t){a=t},c},panGesture:function(t,e){t.addEventListener(TouchEvent.TOUCH_BEGIN,function(n){t.__panGlobalPos__={x:n.data.global.x,y:n.data.global.y};var i=function(n){var i=n.data.global.x-t.__panGlobalPos__.x,r=n.data.global.y-t.__panGlobalPos__.y,a={target:t,data:n.data,offsetX:i,offsetY:r,type:"move",stopPropagation:function(){n.stopPropagation()}};e&&e.apply(t,[a]),t.emit(o.gesture.PAN,a),t.__panGlobalPos__={x:n.data.global.x,y:n.data.global.y}},r=function s(n){t.removeListener(TouchEvent.TOUCH_MOVE,i),t.removeListener(TouchEvent.TOUCH_END_OUDSIDE,s),t.removeListener(TouchEvent.TOUCH_END,s);var r={target:t,data:n.data,offsetX:0,offsetY:0,type:"end",stopPropagation:function(){n.stopPropagation()}};e&&e.apply(t,[r]),t.emit(o.gesture.PAN,r)};t.addEventListener(TouchEvent.TOUCH_MOVE,i),t.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,r),t.addEventListener(TouchEvent.TOUCH_END,r);var a={target:t,data:n.data,offsetX:0,offsetY:0,type:"begin",stopPropagation:function(){n.stopPropagation()}};e&&e.apply(t,[a]),t.emit(o.gesture.PAN,a)})},addGesture:function(t,e,n){switch(e){case this.gesture.TAP:this.tapGesture(t,n);break;case this.gesture.PAN:this.panGesture(t,n);break;case this.gesture.HOLD:this.holdGesture(t,n)}},holdGesture:function(t){function e(e){var n={target:t,data:e.data,type:"begin",stopPropagation:function(){e.stopPropagation()},startPos:{x:e.data.global.x,y:e.data.global.y}};"touchstart"===e.type?u.set(n.data.identifier,n):u.set("mouse",n),t.emit(o.gesture.HOLD,n),s=setInterval(function(){if(0===u.size)return void clearInterval(s);n.type="hold",u.forEach(function(e,n){t.emit(o.gesture.HOLD,e)})},a)}function n(e){var n,i,a={target:t,data:e.data,type:"move",stopPropagation:function(){e.stopPropagation()}};if(i="touchmove"===e.type?e.data.identifier:"mouse",n=u.get(i)){r.distance(e.data.global,n.startPos)>40&&(t.emit(o.gesture.HOLD,a),u["delete"](i),0===u.size&&clearInterval(s))}}function i(e){var n,i={target:t,data:e.data,type:"end",stopPropagation:function(){e.stopPropagation()}};n="touchend"===e.type?e.data.identifier:"mouse",u.get(n)&&(t.emit(o.gesture.HOLD,i),u["delete"](n)),0===u.size&&clearInterval(s)}var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:200;t.touches=new Map;var s,u=t.touches;t.addEventListener(TouchEvent.TOUCH_BEGIN,e),t.addEventListener(TouchEvent.TOUCH_MOVE,n),t.addEventListener(TouchEvent.TOUCH_END,i)},tapGesture:function(t,n){function i(t){this.timer=(new Date).getTime(),this.__globalPoint__=Object.assign({},t.data.global)}function a(i){var a=!1;if(200>(new Date).getTime()-this.timer&&40>r.distance(this.__globalPoint__,i.data.global)){var s={target:t,data:i.data,stopPropagation:function(){e.stopPropagation()}};null==n?t.emit(o.gesture.TAP,s):n.apply(t,[s]),a=!0}!1===a&&t.emit(o.gesture.TAP_MISS)}t.addEventListener(TouchEvent.TOUCH_BEGIN,i),t.addEventListener(TouchEvent.TOUCH_END,a),t.__gestureMap__===undefined&&(t.__gestureMap__={}),t.__gestureMap__[this.gesture.TAP]===undefined&&(t.__gestureMap__[this.gesture.TAP]=[]),t.__gestureMap__[this.gesture.TAP].push({begin:i,end:a})},removeGesture:function(t,e){if(t.__gestureMap__&&t.__gestureMap__[e])for(var n=t.__gestureMap__[e],i=0;n.length>i;i++)t.removeEventListener(TouchEvent.TOUCH_BEGIN,n[i].begin),t.removeEventListener(TouchEvent.TOUCH_END,n[i].end)},cloneEqGesture:function(t,e){function n(e){var n=e.data.identifier;n!==undefined&&2!==s.size&&(s.has(n)||(s.set(n,{x:e.data.global.x,y:e.data.global.y}),1===s.size&&(t.addEventListener(TouchEvent.TOUCH_MOVE,i),t.addEventListener(TouchEvent.TOUCH_END,a),t.addEventListener(TouchEvent.TOUCH_END_OUTSIDE,a))))}function i(e){if(2===s.size){var n=e.data.identifier;if(n===u){var i=r.distance(s.get(n),e.data.global);i>l&&(s.clear(),a())}else{var i=r.distance(s.get(n),e.data.global);i>c&&(t.emit(o.gesture.CLONE,{global:{x:e.data.global.x,y:e.data.global.y}}),s.clear(),a())}}}function a(e){if(e){s["delete"](e.data.identifier)}0===s.size&&(u=NaN,t.removeListener(TouchEvent.TOUCH_MOVE,i),t.removeListener(TouchEvent.TOUCH_END,a),t.removeListener(TouchEvent.TOUCH_END_OUTSIDE,a))}e=e||{};var s=new Map;t.addEventListener(TouchEvent.TOUCH_BEGIN,n);var u=NaN,l=30,c=e.triggerDistance||100}};window.NBGesture=o,t.exports=o},function(t,e,n){"use strict";var i={};i.distance=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},i.distanceSquare=function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},i.interpolate=function(t,e,n){n=1-n;var i={};return i.x=t.x+(e.x-t.x)*n,i.y=t.y+(e.y-t.y)*n,i},global.NBPoint=i,t.exports=i},function(t,e,n){"use strict";var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=undefined,t.exports=n(99),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(e){i.regeneratorRuntime=undefined}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0);e["default"]=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.text=new PIXI.Text("",{font:"24px Arial"}),n["this"]=null,n.defaultSkin=null,n.selectedSkin=null,n.currentImg=null,n.firstset=!0,n._selected=!1,t)for(var o in t)n[o]=t[o];return n.initView(),n.touchId=s.M.addTouch(n,{tab:n.thisClick},n,{time:300,dis:15}),n}return o(e,t),a(e,[{key:"dispose",value:function(){this["this"]=null,this.defaultSkin=null,this.selectedSkin=null,this.currentImg=null,s.M.removeTouch(this,this.touchId),this.removeChildren()}},{key:"initView",value:function(){this.addChild(this.text),this.changeImg(),this.firstset=!1}},{key:"changeImg",value:function(){this.currentImg&&this.removeChild(this.currentImg),this.currentImg=this._selected?this.selectedSkin:this.defaultSkin,this.currentImg&&(this.addChildAt(this.currentImg,0),this.text.x=this.currentImg.x+this.currentImg.width+10),this.firstset||this.dispatchEvent("selectChange")}},{key:"thisClick",value:function(t){this._selected=!this._selected,this.changeImg()}},{key:"fontColor",set:function(t){this.text.style.fill=t}},{key:"fontSize",set:function(t){this.text.style.font=t+"px Arial"}},{key:"selected",get:function(){return this._selected},set:function(t){this._selected=t,this.changeImg()}},{key:"label",get:function(){return this.text.text},set:function(t){this.text.text=t}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=n(6);!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e["default"]=t}(u);e["default"]=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.mc=PIXI.MovieClip.fromFrames([t["default"],t.hover,t.pressed]),n.touchId=s.M.addTouch(n.mc,{begin:function(e){n.mc.gotoAndStop(2),t.begin&&t.begin(e)},globalMove:function(e){var i=s.M.getMouseXY(e);n.mc.containsPoint(i)?n._onOver||(n._onOver=!0,n.mc.gotoAndStop(n.mc._isDown?2:1)):n._onOver&&(n._onOver=!1,n.mc.gotoAndStop(0)),t.move&&t.move(e)},end:function(e){n.mc.gotoAndStop(1),t.end&&t.end(e)},tab:function(e){t.tab&&t.tab(e)}}),n.addChild(n.mc),window._btn=n,n}return o(e,t),a(e,[{key:"gotoDefault",value:function(){this.mc.gotoAndStop(0)}},{key:"dispose",value:function(){s.M.removeTouch(this.mc,this.touchId)}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=n(20),u=function(){function t(){r(this,t)}return o(t,null,[{key:"getModuleTypeClass",value:function(e){return t.equipmentConfMap[e]}},{key:"load",value:function(e,n,i){var r=a.ArrayUtil.copy(e);e.forEach(function(t){var e=s.Modules.dependModule[t];e&&r[0]!==e&&r.unshift(e)}),t.queue.push({main:n,moduleTypeArr:r,complete:i}),t.isLoading||t.__loadNext()}},{key:"__loadNext",value:function(){if(!t.queue.length)return void(t.isLoading=!1);t.isLoading=!0;for(var e=t.queue.shift(),r=e.moduleTypeArr,o=a.ArrayUtil.copy(r),u=e.complete,l=0;o&&o.length>l;l++)t.equipmentConfMap[o[l]]&&(o.splice(l,1),l--);if(!o.length)return null!==u&&undefined!==u&&u(r),void t.__loadNext();if(!t.modulePaths){var c;t.modulePaths=(c={},i(c,s.Modules.NAPELIB,"napeLib"),i(c,s.Modules.LOADING,"loading"),i(c,s.Modules.ELECTRICITY,"electricity"),i(c,s.Modules.OPTICAL,"optical"),i(c,s.Modules.ACOUSTIC,"acoustic"),i(c,s.Modules.THERMAL,"thermal"),i(c,s.Modules.MECHANICS,"mechanics"),i(c,s.Modules.ELECFAMILY,"elecfamily"),i(c,s.Modules.FORCEANDMOTION,"forceAndMotion"),i(c,s.Modules.ATOMICPHYSICS,"atomicPhysics"),c)}var f=[];o.forEach(function(e){f.push(n(417)("./"+t.modulePaths[e]+"/index"))}),t.__loadModulesPromise(f,u,r)}},{key:"__loadModulesPromise",value:function(e,n,i){new a.PromiseQueue(e).run().then(function(e){e.forEach(function(e){var n=e["default"];t.equipmentConfMap[n.MODULE_TYPE]=n}),null!==n&&undefined!==n&&n(i),t.__loadNext()},function(e){t.__loadNext()})}}]),t}();u.equipmentConfMap={},u.queue=[],u.isLoading=!1,e["default"]=u},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(9),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(){r(this,t)}return o(t,null,[{key:"getParticle",value:function(t){var e=t.texture,n=t.path,i=new PIXI.Container,r=PIXI.Texture.fromFrame(e),o=PIXI.ticker.shared;$.getJSON(n,function(t,e){if("success"===e){if(!i)return;i.particle=new cloudkid.Emitter(i,r,t),i.completeFunc&&i.completeFunc.call(i)}});var a=i;return i.render=function(){if(a.particle){if(a.bindObj){var t=a.parent.toLocal({x:0,y:0},a.bindObj);a.particle.updateOwnerPos(t.x+a.bindOffsetX,t.y+a.bindOffsetY)}var e=Date.now();a.particle.update(.001*(e-a.__timer__||0)),a.__timer__=e}},i.bind=function(t,e,n){i.bindObj=t,i.bindOffsetX=e||0,i.bindOffsetY=n||0},i.destroy=function(){i&&(i.parent&&i.parent.removeChild(i),i.bindObj=null,i.particle&&i.particle.destroy.apply(i.particle),o.remove(i.render),delete i.bindObj,i=null,r=null)},o.add(i.render),i}},{key:"init",value:function(){var e;t.particles=(e={waterstream2:{path:s["default"].cdn_static+"particles/waterstream2.json",texture:"skin/particle.spirit_fire"},waterstream:{path:s["default"].cdn_static+"particles/waterstream.json",texture:"skin/particle.spirit_fire"},Inflate:{path:s["default"].cdn_static+"particles/Inflate.json",texture:"skin/particle.spirit_fire"},Inflatenei:{path:s["default"].cdn_static+"particles/Inflatenei.json",texture:"skin/particle.spirit_fire"},penStream:{path:s["default"].cdn_static+"particles/penStream.json",texture:"skin/particle.spirit_fire"},tubeOutSteam:{path:s["default"].cdn_static+"particles/tubeOutSteam.json",texture:"skin/particle.spirit_fire"},tubeSteam:{path:s["default"].cdn_static+"particles/tubeSteam.json",texture:"skin/particle.spirit_fire"},tubeParticle:{path:s["default"].cdn_static+"particles/tubeParticle.json",texture:"skin/bubbleParticle"},bubbleParticle:{path:s["default"].cdn_static+"particles/bubbleParticle.json",texture:"skin/bubbleParticle"},elecs:{path:s["default"].cdn_static+"particles/elecs.json",texture:"skin/particle.spirit_fire"},spirit_fire:{path:s["default"].cdn_static+"particles/spirit_fire.json",texture:"skin/particle.spirit_fire"},spirit_fire_blue:{path:s["default"].cdn_static+"particles/spirit_fire_blue.json",texture:"skin/particle.spirit_fire"},match_fire:{path:s["default"].cdn_static+"particles/match_fire.json",texture:"skin/particle.fire"}},i(e,"match_fire",{path:s["default"].cdn_static+"particles/match_fire2.json",texture:"skin/particle.spirit_fire"}),i(e,"water_vapor",{path:s["default"].cdn_static+"particles/water_vapor.json",texture:"skin/particle.spirit_fire"}),e)}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(6),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(o);e["default"]=function(){function t(e){i(this,t),this.main=e,this.phyUserSetting=null,this.elecSetting=null}return r(t,[{key:"saveElecSetting",value:function(t,e){this.phyUserSetting&&t&&e&&(this.elecSetting[this.main.globalConfig.version]||(this.elecSetting[this.main.globalConfig.version]={}),this.elecSetting[this.main.globalConfig.version][t]=e,this.main.saveUserData())}},{key:"deleteElecSetting",value:function(t){this.phyUserSetting&&(this.elecSetting[this.main.globalConfig.version]&&this.elecSetting[this.main.globalConfig.version][t]&&delete this.elecSetting[this.main.globalConfig.version][t],this.main.saveUserData())}},{key:"getElecSetting",value:function(t){return a.get(this.elecSetting,"["+this.main.globalConfig.version+"]["+t+"]")}},{key:"setUserData",value:function(t){t||(t={}),this.phyUserSetting=t,t.elecSetting||(t.elecSetting={}),this.elecSetting=t.elecSetting}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e["default"]=function r(){i(this,r)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e["default"]=function(){function t(){i(this,t),this.graphicsList=[],this.textList=[],this.elecWiredots=[],this.threeList={}}return r(t,[{key:"disposeAll",value:function(){this.graphicsList.length=0,this.textList.length=0,this.elecWiredots.length=0;for(var t=Object.keys(this.threeList),e=0;t.length>e;e++)for(var n=this.threeList[t[e]],i=0;n.length>i;i++)try{var r=n[i];r.removed&&r.removed()}catch(o){}this.threeList={}}},{key:"resetAll",value:function(t){t.x=0,t.y=0,t.pivot.x=0,t.pivot.y=0,t.scale.x=1,t.scale.y=1,t.rotation=0}},{key:"pushGraphic",value:function(t){t.clear(),this.resetAll(t),this.graphicsList.push(t)}},{key:"popGraphic",value:function(){var t=this.graphicsList.pop();return t&&t.transform||(t=new PIXI.Graphics),t}},{key:"pushText",value:function(t){t.text="",this.resetAll(t),this.textList.push(t)}},{key:"popText",value:function(t,e){var n=this.textList.pop();return n||(t=t||"",e=e||"",n=new PIXI.Text(t,e)),n}},{key:"pushElecDot",value:function(t){this.elecWiredots.push(t)}},{key:"popElecDot",value:function(){return this.elecWiredots.pop()}},{key:"pushThreeClass",value:function(t,e){var n=this.threeList[t];n||(n=[],this.threeList[t]=n),this.resetAll(e),n.push(e)}},{key:"popThreeClass",value:function(t,e,n){var i=this.threeList[t],r=null;return i&&(r=i.pop()),r||(r=new e(n)),r}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function i(r,o){try{var a=e[r](o),s=a.value}catch(u){return void n(u)}if(!a.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}return i("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(105),l=i(u),c=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=function H(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:H(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},h=n(0),d=n(6),p=n(361),v=i(p),y=n(9),g=i(y),m=n(7),b=i(m),w=n(97),E=i(w),x=n(38),O=i(x),P=n(37),k=i(P),S=n(66),C=i(S),M=n(20),T=n(21),A=i(T),D=n(157),L=i(D),I=n(68),j=n(10),N=n(95),R=i(N),B=n(67),U=i(B);e["default"]=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.__addCompArr=[],n.__inAddComp=!1,n.mouseDown=!1,n}return s(e,t),c(e,[{key:"init",value:function(){this.canvasStartProx=this.canvasStart.bind(this),$(this.canvas).on("mousedown"+this.$NAMESPACE+" touchstart"+this.$NAMESPACE,this.canvasStartProx),this.canvasEndProx=this.canvasEnd.bind(this),$(this.canvas).on("mouseup"+this.$NAMESPACE+" touchend"+this.$NAMESPACE,this.canvasEndProx),this.canvasMoveProx=this.canvasMove.bind(this),$(this.canvas).on("mousemove"+this.$NAMESPACE+" touchmove"+this.$NAMESPACE,this.canvasMoveProx),this.documentEndProx=this.documentEnd.bind(this),$(window.document).on("mouseup"+this.$NAMESPACE+" touchend"+this.$NAMESPACE,this.documentEndProx),this.addEventListener(A["default"].change.ZOOM,this.zoomHandleProx=this.zoomHandle.bind(this)),this.addEventListener(U["default"].LOAD_MODULES,this.loadModulesHandleProx=this.loadModulesHandle.bind(this))}},{key:"loadModulesHandle",value:function(t){"end"===t.type&&this.freshShowHelpVideo()}},{key:"zoomHandle",value:function(){this.getEquipmentArr(!0).forEach(function(t){t.viewZoomComplete.call(t)}),this.skinview.viewZoomComplete()}},{key:"canvasMove",value:function(t){this.skinview.viewMoveComplete(),this.dispatchEvent(j.PHY_EVENTS.CANVAS_MOVE,t)}},{key:"switchPareDom",value:function(t){if(t){if(this.rootElement=t,this.phy.domID=$(this.rootElement)[0],$(t).empty(),t.appendChild(this.canvas),this.physicsModules){var e=this.physicsModules.getModuleMainFromType(M.Modules.FORCEANDMOTION);e&&($(t).append(e.forceAndMotion.snap.node),e.resetParentElement(t))}this.backgroundManager.setDefaultBackGround()}}},{key:"checkIsSelected",value:function(t){return this.phyTool.checkIsSelected(t)}},{key:"copyEqu",value:function(t){!t&&this.curElec&&(t=this.curElec.getData()),t&&this.phyTool.copyEqu(t)}},{key:"getVersion",value:function(){return this.globalConfig.version}},{key:"getData",value:function(){var t=this.globalConfig.dataTool.getPageData.call(this.globalConfig.dataTool);return JSON.stringify(t)}},{key:"setData",value:function(t){try{return this.setDataObj("[object String]"===Object.prototype.toString.call(t)?JSON.parse(t):t,!0)}catch(e){return Promise.resolve(!1)}}},{key:"getDataObj",value:function(){return this.globalConfig.dataTool.getPageData.call(this.globalConfig.dataTool)}},{key:"setDataDefault",value:function(t){this.setDataObj(t)}},{key:"setDataObj",value:function(t,e){var n=this;return this._isInited?this.isDestroy?Promise.resolve(!1):t&&t.properties?new Promise(function(i){e||(t=(0,d.clone)(t)),n.globalConfig.dataTool.setPageData.call(n.globalConfig.dataTool,t,i)}):(this.clear(),Promise.resolve()):Promise.reject(!1)}},{key:"clear",value:function(){this.clearEquipment(),this.mouseManager&&this.mouseManager.changeMouseStatusName("default",!0,this.view,!1)}},{key:"deleteCurrent",value:function(){this.curElec&&this.removeEquipment(this.curElec)}},{key:"setSchoolName",value:function(t){this.schoolNameTxt.text=t}},{key:"destroy",value:function(){f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.removeEventListener(A["default"].change.ZOOM,this.zoomHandleProx),this.removeEventListener(U["default"].LOAD_MODULES,this.loadModulesHandleProx),this.canRender=!1,L["default"].ticker.stop(),$(window.document).off(this.$NAMESPACE),$(this.canvas).off(this.$NAMESPACE)}},{key:"setWH",value:function(t){this.globalConfig&&t&&(t.width&&(this.globalConfig.canvasStyleW=t.width),t.height&&(this.globalConfig.canvasStyleH=t.height),this.globalConfig.isForceAndMotion()?this.activeModule.resize():this.resizeCanvasWH())}},{key:"_setCanvasPToViewPoints",value:function(){if(this.canvasPToViewPoints=this.getScreenToViewPoins(),this.canvasPToViewPoints.oriViewScale=this.view.scale.x,this.canvasPToViewPoints.oriViewP=new h.Point(this.view.x,this.view.y),this.editRectEnabled){var t=this.labEditRect.getDomRect();this.canvasPToViewPoints.canvasStyleW=t.width,this.canvasPToViewPoints.canvasStyleH=t.height}else this.canvasPToViewPoints.canvasStyleW=$(this.canvas).width(),this.canvasPToViewPoints.canvasStyleH=$(this.canvas).height()}},{key:"getScreenToViewPoins",value:function(){if(this.editRectEnabled){var t=this.labEditRect.getDomRect();return{oriLTP:this.getCanvasPToView(t.x,t.y),oriRBP:this.getCanvasPToView(t.x+t.width,t.y+t.height)}}var e=this.globalConfig.canvasStyleW>0?this.globalConfig.canvasStyleW:$(window).width(),n=this.globalConfig.canvasStyleH>0?this.globalConfig.canvasStyleH:$(window).height();if(e||e){e===n&&(n=e-1);return{oriLTP:this.getCanvasPToView(0,0),oriRBP:this.getCanvasPToView(e,n)}}}},{key:"getWH",value:function(){var t={};return t.width=this.globalConfig&&this.globalConfig.canvasStyleW>0?this.globalConfig.canvasStyleW:$(window).width(),t.height=this.globalConfig&&this.globalConfig.canvasStyleH>0?this.globalConfig.canvasStyleH:$(window).height(),t}},{key:"takescreenshotSmall",value:function(){this.takeScreenShotManager.takescreenshotSmall()}},{key:"takeScreenShot",value:function(t){return this.takeScreenShotManager.takeScreenShot(t)}},{key:"getEquipmentsRect",value:function(){var t=void 0,e=this.getEquipmentArr(!0);return(0,d.forEach)(e,function(e,n){var i=e.getElecBounds();t=t?t.union(i):i}),t}},{key:"setGravity",value:function(t){this.globalConfig.isMec()&&this.activeModule&&this.activeModule.setGravity(t)}},{key:"setAirResistance",value:function(t){this.activeModule&&(this.globalConfig.SHOW_ZULI=t,this.activeModule.getModuleType()===this.Modules.MECHANICS&&this.activeModule.setAirResistance(this.globalConfig.SHOW_ZULI))}},{key:"emitChanges",value:function(){this.dispatchEvent(j.PHY_EVENTS.DATA_CHANGES)}},{key:"addTable",value:function(t,e){this.dispatchEvent(j.PHY_EVENTS.LISTEN_FRAME_2_CALLBACK,{type:"addTable",config:t,callBack:e})}},{key:"seCompFixToRight",value:function(t){this.dispatchEvent(j.PHY_EVENTS.LISTEN_FRAME_2_CALLBACK,{type:"seCompFixToRight",seComp:t})}},{key:"getScreenToViewP",value:function(){var t=new h.Point(0,0);this.mapPositionToPoint(t,0,0);var e=this.view.toLocal(t,this.stage),n=new h.Point(0,0);return this.mapPositionToPoint(n,$(this.canvas).width(),$(this.canvas).height()),n=this.view.toLocal(n,this.stage),{p1:e,p2:n}}},{key:"clone",value:function(t){return t._nbData_!==undefined?this.createChildFromData(t.parent,t._nbData_,t._textureMapName_):null}},{key:"freshElecLineVisible",value:function(){this.getEquipmentArr(!0).forEach(function(t){t.freshElecLineVisible&&t.freshElecLineVisible.call(t)}),this.activeModule.elecUtil.diyChanged()}},{key:"freshEquipShows",value:function(){var t=this;this.getEquipmentArr(!0).forEach(function(e){e.freshEquipShows&&e.freshEquipShows.call(e,t.globalConfig.SHOWEQUVALUE)})}},{key:"freshBreakerTipVisible",value:function(){var t=this;this.getEquipmentArr(!0).forEach(function(e){e.tisi&&(e.isBreak||e.isShortCircuit)&&(e.tisi.visible=t.globalConfig.SHOWTIPPAO)})}},{key:"freshSerialNumVisible",value:function(){var t=this;this.getEquipmentArr(!0).forEach(function(e){e.flabel1&&(e.flabel1.visible=t.globalConfig.SHOW_FLAG_LABEL,e.flabel2.visible=t.globalConfig.SHOW_FLAG_LABEL)})}},{key:"freshMagSettings",value:function(){this.activeModule&&this.activeModule.getModuleType()===M.Modules.ELECTRICITY&&this.activeModule.freshMagConf()}},{key:"confType",value:function(t,e){this.getEquipmentArr(!0).forEach(function(n){n.confType.call(n,t,e)})}},{key:"clearEquipment",value:function(){if(this.activeModule){var t=h.ArrayUtil.copy(this.viewStack.children);for(this.dispatchEvent(O["default"].REMOVE_EQUIPMENT,{equipments:t}),this.execute(b["default"].SELECT_ALL,{children:[]});this.viewStack.children.length>0;){var e=this.viewStack.getChildAt(0);e.component&&!e.component.hadDestory&&this._onlyRemoveElec(e.component)}8===this.activeModule.moduleType&&(this.activeModule.clear(),this.activeModule.stop()),this.dispatchEvent(O["default"].REMOVE_EQUIPMENT_END)}}},{key:"switchXueke",value:function(t){return 5!==t&&(E["default"].lockMouse(!1),this.mouseManager.changeMouseStatusName("default",!0,this.view,!1)),this.loadModules({modules:[M.Modules[t]]})}},{key:"stopAddEquipments",value:function(t){this.__inAddComp=!1,t?this.queueAddCompNext():h.ArrayUtil.clear(this.__addCompArr)}},{key:"addComp",value:function(){function t(t,n,i){return e.apply(this,arguments)}var e=r(l["default"].mark(function n(t,e,i){var r;return l["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.addCompManager.addCompArr(t,e);case 2:return r=n.sent,i&&i(r),n.abrupt("return",r);case 5:case"end":return n.stop()}},n,this)}));return t}()},{key:"removeEquipment",value:function(t,e){if(t&&!t.hadDestory){this.dispatchEvent(O["default"].REMOVE_EQUIPMENT,{equipments:[t.parent]}),this._onlyRemoveElec(t,e),this.dispatchEvent(O["default"].REMOVE_EQUIPMENT_END),1===this.getVersion()&&this.activeModule.elecUtil.diyChanged()}}},{key:"removeSelected",value:function(){this.globalConfig.isForceAndMotion()?this.activeModule.removeSelected():this.curElec&&this.removeEquipment(this.curElec)}},{key:"_onlyRemoveElec",value:function(t,e){if(t&&!t.hadDestory&&t.parent){t.parent&&C["default"].removeDrag(t.parent),e||t.hasAddCompComplete&&t.removed.call(t);try{E["default"].removeMouseEvent(this.mouseManager,t.parent);var n=t.parent||t;n&&(n.component=null,n.destroy({children:!0,texture:!1,baseTexture:!1}))}catch(e){}}}},{key:"deSelected",value:function(){this.curElec=null,this.execute(b["default"].SELECT_ALL,{children:[]}),this.getEquipmentArr(!0).forEach(function(t){t.childSetSelected&&t.childSetSelected.call(t,!1)}),this.hideConfPan(),this.showMess(""),this.freshShowHelpVideo()}},{key:"setCurElec",value:function(t,e){var n=this;t.canCurSelect&&(this.curElec=t,this.curElec&&this.curElec.canShowConfPan?(this.startLoadTool.setConfPan.call(this.startLoadTool),this.curElec.isMechaTool||this.curElec.isFreeMec||this.execute(b["default"].SELECT_CLICK_ONE),this.getEquipmentArr(!0).forEach(function(t){try{t.uid===n.curElec.uid?t.childSetSelected.call(t,!0):t.childSetSelected.call(t,!1)}catch(e){}}),this.dispatchEvent("select_elec",t),this.showElecTipMess()):(this.getEquipmentArr(!0).forEach(function(t){t.childSetSelected.call(t,!1)}),this.execute(b["default"].SELECT_ALL,{children:[]}),this.showMess("")),this.freshShowHelpVideo())}},{key:"checkPageBlankVisible",value:function(){this.dispatchEvent("phy.checkPageBlankVisible")}},{key:"freshShowHelpVideo",value:function(){var t=void 0;if(1===this.globalConfig.version)t=this.curElec&&"ElecWire"===this.curElec.classname?"wire":null;else if(5===this.globalConfig.version){if(!this.activeModule)return;var e=this.activeModule.napeEngine;if(!e)return;var n=e.ToolStatusStr,i=e.getTouchManager();if(!i)return;var r=i.getCurrentToolStatus();t=r===n.SPRING?r:r===n.PEN?r:r===n.FIXED?r:r===n.DRAG?"wave":r===n.SLICE?r:r===n.THRUSTER?r:r===n.BEARING?r:"mechanichs"}else t=7===this.globalConfig.version?"elecFamily":8===this.globalConfig.version?"forceAndMotion":null;this.showHelpVideo(t)}},{key:"showHelpVideo",value:function(t){this.dispatchEvent("phy.helpVideo",t)}},{key:"getToolBoxOne",value:function(t){return this.toolBox.getEquipmentSetting(t)}},{key:"getEquipmentArr",value:function(){for(var t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],e=this.viewStack.children.length,n=[],i=0;e>i;i++){var r=this.viewStack.getChildAt(i);t&&r.component&&(r=r.component),n.push(r)}return n}},{key:"checkHasEquip",value:function(){return this.globalConfig.isForceAndMotion()?this.activeModule.checkHasEquip():this.viewStack.children.length>0}},{key:"getAllElecArr",value:function(){var t=void 0,e=this.otherContainer.children.length,n=[];for(t=0;e>t;t++)n.push(this.otherContainer.getChildAt(t));var i=this.getEquipmentArr();return i=i.concat(n)}},{key:"loadToolBox",value:function(){this.toolBox&&this.toolBox.load()}},{key:"freshToolBox",value:function(){}},{key:"addFreeEquipment",value:function(t){"WeldJointVIew"===t.classname&&(t.classname="WeldJointView");var e=this.activeModule.napeEngine.diyClass.getClassByName(t.classname),n=this.activeModule.config,i=new e(n),r=this.addEquipmentChild(i,null,t);return i.addCompComplete(),i.emit(j.PHY_EVENTS.CREATION_COMPLETE),this.startLoadTool.addClickConf.call(this.startLoadTool,r),r}},{key:"addEquipmentChild",value:function(t,e,n){var i=new PIXI.Container;return i.component=t,t.fromEquTools=!1,e=e||this.globalConfig.ADD_POSITION,n?(i.dataObj=n,t.x=n.thisX,t.y=n.thisY):(t.x=e.x,t.y=e.y),t.culprit=!0,i.addChild(t),this.viewStack.addChild(i),n||(t.added(),this.startLoadTool.addClickConf.call(this.startLoadTool,i)),i}},{key:"addEquipment",value:function(t,e,n,i,r,o,a){var s=this,u=e+"/"+t,l=new PIXI.Container;l.dataObj=i,l.cateid=this.globalConfig.get_version_from_versionName(e);var c=k["default"].equipmentConfMap[u];if(c===undefined)throw"没有器材配置信息";if(i&&i.x!==undefined||!r||(l.x=r.x,l.y=r.y),c.isTextureLoaded===undefined)if(c.queue===undefined){if(c.queue=[l],c.textureURL===undefined)return void this.stopAddEquipments(!0);PIXI.loader.add(c.textureURL).load(function(e,o,a,u){return function(){e.queue.forEach(function(l){s.addProperty({id:o,child:l,classFunc:n,map:e,name:t,classParam:a,completeFunc:u,dataObj:i,position:r})}),e.queue.length=0,e.isTextureLoaded=!0}}(c,u,o,a))}else c.queue.push(l);else this.addProperty({id:u,child:l,classFunc:n,map:c,name:t,classParam:o,completeFunc:a,dataObj:i,position:r});return l}},{key:"addProperty",value:function(t){var e=this,n=t.id,i=t.child,r=t.classFunc,o=t.map,a=n.substr(n.lastIndexOf("/")+1),s=t.name,u=t.completeFunc,l=t.classParam,c=this.toolBox.getEquipmentSetting(s),f=M.Modules[c.typeid],d=this.physicsModules.moduleInstances.get(f),p=t.dataObj,v=l?{moduleMain:d,classParam:l}:{moduleMain:d},y=new r(v);y.visible=!1;var _=t.position;this.viewStack.addChild(i);for(var m=0;g["default"].INT_MAX_VALUE>m&&o.confData[m]!==undefined;m++)this.createChildFromData(y,o.confData[m],a);y.isMechanics&&(y.culprit=!0,i.x=0,i.y=0,!p||isNaN(p.thisX)||isNaN(p.thisY)?_&&(y.x=_.x,y.y=_.y):(y.x=p.thisX,y.y=p.thisY)),i.root=this,i.component=y,y.classname=s,y.cateid=i.cateid,i.addChild(y),y.cannotSystemDrag=!1,y.__downoffP=new h.Point,7===this.globalConfig.version&&(i.notLimitRect=!0),"ElecFamilyPower"!==s&&E["default"].addMouseEvent(this.mouseManager,i,"yidong"),C["default"].addDrag(i,null,null,{beginFore:function(t){return y.cantToTop||y.upToTop.call(y),y.beginFore.call(y,t),!0},moveFore:function(t){return y.moveFore.call(y,t),!0},endFore:function(t){return y.endFore.call(y,t),!0},beginEnd:function(t){y.__downoffP.x=y.parent.x,y.__downoffP.y=y.parent.y,y.beginEnd.call(y,t)},moveEnd:function(){},endEnd:function(t){y.endEnd.call(y,t)}}),y.addEventListener(j.PHY_EVENTS.SET_WORK_POWER_BREAK,function(){e._setWorkPowerBreakHandle(e)}),y.addEventListener(j.PHY_EVENTS.SET_WORK_POWER_REPAIR,function(){e._setWorkPowerRepairHandle(e)}),u&&u(y);var w=y.rootData;w&&(y.notAnalytics||this.execute(b["default"].ANALYTICS,{type:"create",name:w.name}))}},{key:"canvasStart",value:function(t){this.mouseDown=!0,this.dispatchEvent(j.PHY_EVENTS.CANVAS_START,t)}},{key:"canvasEnd",value:function(t){this.dispatchEvent(j.PHY_EVENTS.CANVAS_END,t)}},{key:"documentEnd",value:function(t){this.mouseDown=!1,this.dispatchEvent(j.PHY_EVENTS.DOCUMENT_END,t),R["default"].changeStyle(R["default"].current),R["default"].current=null}},{key:"getWindowDoorSize",value:function(){return this._canvasWHArr}},{key:"freshSchoolNameLocation",value:function(){var t=this.renderer.view,e=h.M.getNumStr(t.style.height)-0,n=this.H,i=n/e*(e-80);this.schoolNameTxt.x=10,this.schoolNameTxt.y=i}},{key:"setDefaultMouseStyle",value:function(){this.mouseManager.changeMouseStatusName("default",!0,this.view,!1)}},{key:"keyboardChangeStatus",value:function(t){this.emit(A["default"].communicate.angular.KEYBOARD_CHANGE_STATUS,t)}},{key:"run",value:function(){if(!this.isDestroy)return!this.isRunning&&(this.canRender=!0,this.activeModule&&this.activeModule.setActive(!0),L["default"].ticker.start(),this.isRunning=!0,this.dispatchEvent(A["default"].CANVAS_RUN,{isRunning:this.isRunning}),!0)}},{key:"stop",value:function(){return!!this.isRunning&&(this.canRender=!1,this.activeModule&&this.activeModule.setActive(!1),L["default"].ticker.stop(),this.isRunning=!1,this.dispatchEvent(A["default"].CANVAS_RUN,{isRunning:this.isRunning}),!0)}},{key:"showLabEditRect",value:function(t){this.isDestroy||this.labEditRect&&this.labEditRect.showEditRect(t)}},{key:"freshLabEditRect",value:function(){this.showLabEditRect({outWidth:$(this.canvas).width(),outHeight:$(this.canvas).height(),width:this.labEditRect.rangeRect.width,height:this.labEditRect.rangeRect.height})}},{key:"takeScreenshotForPlayer",value:function(t){return this.takeScreenShotManager.takeScreenshotForPlayer(t)}},{key:"isForceAndMotion",value:function(){return this.globalConfig.isForceAndMotion()}},{key:"checkDatasEq",value:function(t,e){var n=!0;if(t=h.M.getObjFromJsonStr(t),e=h.M.getObjFromJsonStr(e),t&&t.properties&&e&&e.properties){var i=t.properties.data.dataArr,r=e.properties.data.dataArr;if(i.length!==r.length)n=!1;else{var o=!0,a=!1,s=undefined;try{for(var u,l=i[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value,f=!1,d=!0,p=!1,v=undefined;try{for(var y,g=r[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var _=y.value;if(_.uid===c.uid&&h.M.equals(_,c)){f=!0;break}}}catch(m){p=!0,v=m}finally{try{!d&&g["return"]&&g["return"]()}finally{if(p)throw v}}if(!f){n=!1;break}}}catch(m){a=!0,s=m}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw s}}}}return n}},{key:"showAllEquipments",value:function(){this.execute(b["default"].SHOW_ALL_EQUIPMENTS_COMMAND)}},{key:"setDefaultViewScale",value:function(){this.view.x=0,this.view.y=0,this.viewScale=1}},{key:"setDefaultBlank",value:function(){this.backgroundManager.setDefaultBackGround(),this.clear(),this.globalConfig.setDefault(),this.setDefaultViewScale()}},{key:"setUserSettings",value:function(t){this.context.settings=(0,d.extend)({},I.DefaultSettings,t||{}),this.freshUserSettings()}},{key:"freshUserSettings",value:function(){var t=this.context.settings;this.globalConfig._grade=t.grade,this.globalConfig.canvasStyleW=t.width,this.globalConfig.canvasStyleH=t.height,this.globalConfig.winresize=t.winresize,this.globalConfig.lockMove=t.lockMove,this.globalConfig.cdn_static=t.assets||"/",g["default"].cdn_static=this.globalConfig.cdn_static,this.globalConfig.toolJsonURL=g["default"].cdn_static+"get_scene_tool.json",this.globalConfig.dependClassJsonURL=g["default"].cdn_static+"dependclasses.json",this.globalConfig.soundConfigURL=g["default"].cdn_static+"soundconfig.json",this.globalConfig.glowConfigJsonURL=g["default"].cdn_static+"glowconfig.json"}},{key:"getVersionFromModule",value:function(t){return _.invert(M.VersionModules)[t]}},{key:"getModuleFromVersion",value:function(t){return M.VersionModules[t]}},{key:"showConfPan",value:function(t){this.emit(A["default"].communicate.angular.CHANGE_PANEL_STATUS,t)}},{key:"hideConfPan",value:function(){this.emit(A["default"].communicate.angular.CHANGE_PANEL_STATUS,{commandType:1})}},{key:"requestAnimationLoop",value:function(){this.view&&(this.view.selectionLayer&&this.view.selectionLayer.requestAnimationLoop.call(this.view.selectionLayer),this.view.tipTopLayer&&this.view.tipTopLayer.requestAnimationLoop.call(this.view.tipTopLayer)),this.activeModule&&this.activeModule.requestAnimationLoop.call(this.activeModule)}},{key:"showMess",value:function(t){this.dispatchEvent(U["default"].CANVAS_SHOW_MESS,{content:t})}},{key:"showElecTipMess",value:function(){this.curElec&&this.showMess(this.curElec.getTipMess())}},{key:"setUserData",value:function(t){this.userDataTool.setUserData(t)}},{key:"saveUserData",value:function(){this.userDataTool.phyUserSetting&&this.dispatchEvent(U["default"].SAVE_USER_DATA,this.userDataTool.phyUserSetting)}},{key:"showGlowSP",value:function(t){this.glowManager.showGlowSP(t)}},{key:"isDestroy",get:function(){return this._hasDestroy}},{key:"viewScale",get:function(){return this.view.scale.x},set:function(t){this.view.scale.x=t,this.view.scale.y=t,this.zoomHandle()}},{key:"isPlay",get:function(){return this.globalConfig.play},set:function(t){this.globalConfig.play=t}},{key:"win",get:function(){return WinUtil.win}}]),e}(v["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);e["default"]=function(){function t(e){i(this,t),this.main=e}return r(t,[{key:"init",value:function(){}},{key:"destroy",value:function(){this.main=null}},{key:"checkIsSelected",value:function(t){var e=this.main.view.selectionLayer.selectedObj;if(!t||!e)return!1;var n=!1;return e.forEach(function(e){var i=e.component;if(i&&i.UID===t.UID)return n=!0,!1}),n}},{key:"copyEqu",value:function(t){var e={name:t.classname};if(t.isMechanics?(t.posx+=50,t.posy+=50,t.thisX+=50,t.thisY+=50,e.p=new o.Point(t.posx,t.posy)):(e.p=new o.Point,t.positionX+=50,t.positionY+=50),!1===t.fromEquTools){t.uid=o.M.getUnique();this.main.addFreeEquipment(t)}else this.main.addComp([e],!0,function(e){e[0].setData(t)})}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(0),l=n(9),c=i(l),f=n(70),h=i(f),d=n(393),p=i(d),v=n(407),y=i(v),g=n(37),_=i(g),m=n(155),b=i(m),w=n(410),E=i(w),x=n(404),O=i(x),P=n(390),k=i(P),S=n(96),C=i(S),M=n(391),T=i(M),A=n(153),D=i(A),L=n(97),I=i(L),j=n(360),N=i(j),R=n(93),B=i(R),U=n(412),H=i(U),F=n(157),G=i(F),V=n(20),W=n(7),q=i(W),X=n(10),z=n(398),Y=i(z),K=n(406),Z=i(K),Q=n(405),J=i(Q),tt=n(409),et=i(tt),nt=n(356),it=i(nt),rt=n(408),ot=i(rt),at=n(47),st=i(at),ut=n(400),lt=i(ut);e["default"]=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.UID=window.__mainUID?window.__mainUID+1:1,window.__mainUID=n.UID,n.id=u.M.getUniqueID(),n.canvasDomOffset={x:0,y:0},n.canvasDomWidth=1,n.canvasDomHeight=1,n.$NAMESPACE=X.$NAMESPACE,n.isRunning=!0,n._hasDestroy=!1,n.isBlackDown=!1,n.globalConfig=new c["default"](n),n.language=new h["default"],n.addBindInit(),n.initProperty(),n}return a(e,t),s(e,[{key:"changeLocale",value:function(t){this.language.changeLocale(t)}},{key:"addBindInit",value:function(){this.physicsModules=null,this.SoundStr=st["default"],this.NBCommand=q["default"],this.Modules=V.Modules,this.labEditRect=new Y["default"](this),this._isInited=!1,this.isStopPropagation=!1,this.canvasPToViewPoints=null,this.canvas=null,this.activeModule=null,this.phy=new B["default"](this),this.equipmentUtil=new b["default"](this),this.toolBoxMap=new u.HashMap,this.phyTool=new N["default"](this),this.manager=new y["default"](this),this.undoManager=new E["default"],this.clipboardManager=new C["default"],this.mouseManager=new I["default"](this),this.globalConfig.SoundTool=new k["default"](this),this.globalConfig.dataTool=new T["default"](this),this.arcShape=new PIXI.Graphics,this.magDraw=new PIXI.Graphics,this.takeScreenShotManager=new et["default"](this),this.curElec=null,this.startLoadTool=new p["default"](this),this.backgroundManager=new Z["default"](this),this.addCompManager=new J["default"](this),this.glowManager=new ot["default"](this),this.stage=this,this.view=new O["default"](this),this.otherContainer=this.view.otherContainer,this.skinview=new lt["default"](this),this.viewStack=this.view.viewStack,this.drawStack=this.view.drawStack,this.backG=new PIXI.Graphics,this.backG.renderable=!1,this.schoolNameTxt=new PIXI.Text("",{font:"30px 微软雅黑",align:"left"}),this.canvasCenP=new u.Point(.5,.5),this.registQuery=[],this.userDataTool=new it["default"](this)}},{key:"getCurModuleMain",value:function(){return this.activeModule}},{key:"getModuleMainFromType",value:function(t){return this.physicsModules.getModuleMainFromType(t)}},{key:"initProperty",value:function(){this.isRunning=!0,this.limitW=1e4,this._canRender=!0;var t=1;Object.defineProperty(this,"canRender",{get:function(){return this._canRender},set:function(e){e=!!e,this._canRender!==e&&(this._canRender=e,this._canRender?this.globalConfig.VOLUME=t:(t=this.globalConfig.VOLUME,this.globalConfig.VOLUME=0),this.confType(4,this.globalConfig.VOLUME))}})}},{key:"setDisplayInfo",value:function(t,e,n){null!==n.name&&(t[n.name]=e,e.name=n.name),e.stepRoot=t===this.viewStack?e:t.stepRoot,e.stage=this.stage}},{key:"setCommonData",value:function(t,e,n){if(t._nbData_=e,t._textureMapName_=n,0!==e.r?t.setTransform(e.x,e.y,e.sx,e.sy,e.r):t.setTransform(e.x,e.y,e.sx,e.sy,0,e.skewX,e.skewY),t.alpha=isNaN(e.a)?1:e.a,e.linkageClassName!==undefined)if(-1!==e.linkageClassName.indexOf("bind:")){var i=e.linkageClassName.replace("bind:",""),r=this[i];r&&this.bindScriptToSprite(r,t.name)}else for(var o=e.linkageClassName.split("|"),a=0;o.length>a;a++){var s=o[a].split("."),u=this.globalConfig.CommonData,l=void 0;for(l=0;s.length>l;l++){if(l===s.length-1){var c=s[l],f=c.indexOf("(");if(-1!==f){var h=c.substring(f+1,c.length-1);h="["+h.replace(/'/gi,'"')+"]",c=c.substring(0,f),u=u[c]}else u=u[s[l]]}else u=u[s[l]];if(u===undefined)break;if(l===s.length-1){t.once(X.PHY_EVENTS.CREATION_COMPLETE,function(e,n,i){return function(){if(params){try{JSON.parse(i)}catch(e){}e.apply(t,jsonObj)}else e.apply(t);t.linkageClassName=n}}(u,o[a],params))}}}e.b2Data!==undefined&&(t.b2Data=e.b2Data),e.threeData!==undefined&&(t.threeData=e.threeData)}},{key:"createChildFromData",value:function(t,e,n){var i=this;if("sprite"===e.type||"bitmap"===e.type){var r=void 0;r=e.libName===undefined?new PIXI.Container:new PIXI.Sprite(PIXI.Texture.fromFrame(n+"/"+e.libName)),this.setDisplayInfo(t,r,e),this.setCommonData(r,e,n),t.addChildAt(r,0),t===this.viewStack?(r.stepRoot=r,r.onStepComplete=function(){undefined},r.showTip=function(t){i.__tip__===undefined&&(i.__tip__=new NBTip,i.addChild(i.__tip__),i.__tip__.x=$s(80),i.__tip__.y=$s(160)),i.__tip__.setText(t)},r.hideTip=function(){i.__tip__!==undefined&&i.__tip__.parent.removeChild(i.__tip__)}):r.stepRoot=t.stepRoot;for(var o=0;c["default"].INT_MAX_VALUE>o&&e[o]!==undefined;o++)this.createChildFromData(r,e[o],n);return r.emit(X.PHY_EVENTS.CREATION_COMPLETE),r}if("movie"===e.type){for(var a=[],s=0;c["default"].INT_MAX_VALUE>s&&e[s]!==undefined;s++)a.push(PIXI.Texture.fromFrame(n+"/"+e[s].libName));var u=new PIXI.extras.MovieClip(a);return this.setDisplayInfo(t,u,e),this.setCommonData(u,e,n),u.emit(X.PHY_EVENTS.CREATION_COMPLETE),t.addChildAt(u,0),u}if("text"===e.type){var l=function(t){return t-0},f=/\d*/gi,h=e.f,d=f.exec(e.f);h=h.replace(d,l(d)),f=RegExp(/\${(.*)}/);var p=f.exec(e.txt),v=e.txt;if(null!==p){for(var y=p[1],g=y.split("."),_=instance,m=0;g.length>m;m++)_=_[g[m]];v=_}var b=e.w,w=e.h,E=Math.cos,x=Math.sin,O={x:l(e.x),y:l(e.y)},P=void 0,k=void 0,S=void 0,C=e.r;P=C>0&&C<Math.PI/2?C:C>Math.PI/2?Math.PI-C:C<-Math.PI/2?Math.PI-Math.abs(C):Math.abs(C);var M=E(P)*E(P)-x(P)*x(P),T=(b*E(P)-w*x(P))/M,A=(-b*x(P)+w*E(P))/M;C===Math.PI/2&&(C+=.001),C>=0&&C<Math.PI/2?(k=O.x+A*x(P),S=O.y):C>Math.PI/2?(k=O.x+b,S=O.y+A*E(P)):C<-Math.PI/2?(k=O.x+T*E(P),S=O.y+w):(k=O.x,S=O.y+T*x(P));var L=new PIXI.Text(v,{font:h,wordWrap:!0,fill:e.c,wordWrapWidth:T,align:e.a});return this.setDisplayInfo(t,L,e),L.x=k,L.y=S,"center"===e.a&&(L.anchor.x=.5,L.x=k+.5*T),L.rotation=e.r,t.addChildAt(L,0),L}if("button"===e.type){var I=new PIXI.Sprite.fromFrame(n+"/"+e[0].libName),j=new PIXI.Sprite.fromFrame(n+"/"+e[1].libName),N=new PIXI.Sprite.fromFrame(n+"/"+e[0].libName),R=new D["default"]({w:I.width,h:I.height,disabledSkin:I,downSkin:j,upSkin:N});return this.setDisplayInfo(t,R,e),this.setCommonData(R,e,n),t.addChildAt(R,0),R}if("nbMovie"===e.type){var B=new PIXI.Container;t.addChildAt(B,0),G["default"].apply(B);for(var U=0;c["default"].INT_MAX_VALUE>U;U++){var F=e[U];if(F===undefined)break;for(var V=0;c["default"].INT_MAX_VALUE>V;V++){var W=F[V];if(W===undefined)break;B.insertDisplayObjectToFrame(this.createChildFromData(B,W,n),U)}}return this.setDisplayInfo(t,B,e),this.setCommonData(B,e,n),B.gotoAndStop(0),B.emit(X.PHY_EVENTS.CREATION_COMPLETE),B}if("shape"===e.type){var q=new PIXI.Graphics;return t.addChildAt(q,0),H["default"].draw(q,e.path.concat()),q}}},{key:"registFromElecDataArr",value:function(t,e){this.registQuery.push({regElecDataArr:u.ArrayUtil.copyArray(t),comFunc:e}),this._next_registFromElecDataArr()}},{key:"_next_registFromElecDataArr",value:function(){if(!this._isIn__nextRegistElecData&&this.registQuery.length){this._isIn__nextRegistElecData=!0;var t=this.registQuery.shift();this._regElecDataArr=t.regElecDataArr,this._regElecData_comFunc=t.comFunc,this.__nextRegistElecData()}}},{key:"__nextRegistElecData",value:function(){var t=this;if(this._regElecDataArr&&this._regElecDataArr.length>0&&!this.isDestroy){var e=this._regElecDataArr.pop();if(!1===e.fromEquTools)return void this.__nextRegistElecData();var n=this.toolBox.getEquipmentSetting(e.classname);if(!n)return void alert(e.classname+" 不存在,此实验数据存在问题");var i=n.typeid;if(-1!==["ConvexGlass","ConcaveGlass","TriplePrism","RightTriplePrism","GlassBlock","HalfRoundGlass"].indexOf(e.classname)||"1"===e.notexture){var r=_["default"].equipmentConfMap,o=this.globalConfig.get_versionName_from_version(i)+"/"+e.classname;r[o]={},r[o].confData=[],r[o].textureURL="notexture",r[o].isTextureLoaded=!0,this.__nextRegistElecData()}else this.registerEquipment(this.globalConfig.get_versionName_from_version(i)+"/"+e.classname,null).then(function(){t.__nextRegistElecData()})}else this._regElecData_comFunc(),this._isIn__nextRegistElecData=!1,this._next_registFromElecDataArr()}},{key:"registElec",value:function(t){var e=this;return new Promise(function(n){if(!1===t.fromEquTools)return void n();var i=e.toolBox.getEquipmentSetting(t.classname),r=i.typeid;if(-1!==["ConvexGlass","ConcaveGlass","TriplePrism","RightTriplePrism","GlassBlock","HalfRoundGlass"].indexOf(t.classname)||"1"===t.notexture){var o=_["default"].equipmentConfMap,a=e.globalConfig.get_versionName_from_version(r)+"/"+t.classname;o[a]={},o[a].confData=[],o[a].textureURL="notexture",o[a].isTextureLoaded=!0,n()}else e.registerEquipment(e.globalConfig.get_versionName_from_version(r)+"/"+t.classname,null).then(function(){n()})})}},{key:"registerEquipment",value:function(t,e){return new Promise(function(n,i){e||(e=t+"_conf.json");var r=_["default"].equipmentConfMap;if(-1!==e.indexOf(".json")&&r[t]===undefined)r[t]={},$.getJSON(c["default"].cdn_static+e,function(e){return function(n,i){"success"===i?(r[t].confData=n,r[t].textureURL=c["default"].cdn_static+t+".json",e()):delete r[t]}}(n));else{if(r[t]===undefined)throw r[t]={confData:e},Error("暂时先不使用");n()}})}},{key:"destroy",value:function(){this.globalConfig.main=null,this.startLoadTool.destroy(),this.startLoadTool=null,this.manager.destroy(),this.manager=null,this.view.destroy(),this.view=null,this.phy.destroy(),this.phy=null,this.equipmentUtil.destroy(),this.equipmentUtil=null,this.mouseManager.destroy(),this.mouseManager=null,this.phyTool.destroy(),this.phyTool=null,this.globalConfig.dataTool.destroy(),this.globalConfig.dataTool=null,this.backgroundManager.destroy(),this.backgroundManager=null,this.takeScreenShotManager.destroy(),this.takeScreenShotManager=null,this.addCompManager.destroy(),this.addCompManager=null,this.globalConfig.SoundTool.destroy(),this.globalConfig.SoundTool=null,this.toolBox.destroy(),this.toolBox=null,this._hasDestroy=!0,this.globalConfig=null,this.renderer=null,this.activeModule=null,this.stage.removeChild(this.backG),this.stage.removeChild(this.schoolNameTxt),this.stage=null}},{key:"mapPositionToPoint",value:function(t,e,n){var i=this.renderer.plugins.interaction,r=this.canvasDomOffset,o=this.canvasDomWidth,a=this.canvasDomHeight;t.x=i.interactionDOMElement.width/o*(e-r.left)/i.resolution,t.y=i.interactionDOMElement.height/a*(n-r.top)/i.resolution}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=n(2),l=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=t.data,n=this.root,i=t.pos;i||(i=new s.Point(n.globalConfig.canvasWidth/2,n.globalConfig.canvasHeight/2));var r=e.definitionName,o=s.M.GetObjPos($(n.canvas).parent()[0]),a=new s.Point(i.x-o.x,i.y-o.y);a.x=n.W/s.M.getNumStr(n.canvas.style.width)*a.x,a.y=n.H/s.M.getNumStr(n.canvas.style.height)*a.y,a=n.viewStack.toLocal(a),8===n.activeModule.moduleType?(n.activeModule.addOneComp(r,i,e),t.complete&&t.complete(),n.dispatchEvent("phy.addEquipment")):n.addComp([{name:r,p:a,classParam:{isAddNew:!0}}],!0,function(e){t.complete&&t.complete(e),n.dispatchEvent("phy.addEquipment")})}}]),e}(l["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=this.root;switch(t.type){case"create":e.dispatchEvent("analyticsEventHit",{eventCategory:"器材使用",eventLabel:t.name});break;case"mecTool":e.dispatchEvent("analyticsEventHit",{eventCategory:"力学工具",eventLabel:t.name});break;case"shader":e.dispatchEvent("analyticsEventHit",{eventCategory:"Shader支持情况",eventLabel:t.name})}}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(2),l=i(u),c=n(96),f=i(c),h=n(7),d=i(h);e["default"]=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"execute",value:function(t){var e=this.root.view,n=e.selectionLayer,i=n.selectedObj,r=this.root.clipboardManager;!i&&this.root.curElec&&(i=[this.root.curElec.parent]),i&&(t={},this.root.execute(d["default"].GET_CHILDREN_JSON,{children:i,data:t}),r.setData(f["default"].tag.CLIP_BOARD,t))}}]),e}(l["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(2),l=i(u),c=n(21),f=i(c),h=n(100),d=i(h);e["default"]=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"execute",value:function(t){function e(){for(var t=0;a.length>t;t++){var e=a[t];if(e.component)e.component.removeFromFramework(e.component);else{if(e.hadDestory)continue;e.removeFromFramework&&e.removeFromFramework(e)}}r.selectionLayer.clear(),o.add({undo:function(){a.map(function(t,e){n(t,s[e])})},redo:function(){a.map(function(t){t.parent&&i(t)})}})}function n(t,e){e.addChild(t),function n(t){t.emit(f["default"].del.ADDED),t.children.forEach(function(t){t instanceof d["default"]&&n(t)})}(t)}function i(t){t.parent.removeChild(t),function e(t){t.emit(f["default"].del.PREPARE_DELETE),t.children.forEach(function(t){e(t)})}(t),t.emit(f["default"].del.DELETE)}var r=this.root.view,o=this.root.undoManager,a=t.eq,s=[];if(a===undefined){if("selected"!==t.type)return"all"===t.type?void this.root.clear():void 0;if(!(a=this.root.view.selectionLayer.selectedObj)){for(var u=0;a.length>u;u++){var l=a[u];l.component&&l.component.removeFromFramework(l.component)}return}}e(),this.root.view.selectionLayer.selectedObj=null}}]),e}(l["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(0),l=n(2),c=i(l),f=n(7),h=i(f),d=n(10);e["default"]=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"execute",value:function(t){var e=this.root.renderer.view;this.rightMoveHandle=null,this.mecdrag=!1,t.enabled?$(e).attr("oncontextmenu","return true"):($(e).attr("oncontextmenu","return false"),this.view=this.root.view,this.bgLayer=this.root.backG,this.root.addEventListener(d.PHY_EVENTS.BLACK_TOUCH_BEGIN,this.rightDown.bind(this)),this.root.addEventListener(d.PHY_EVENTS.BLACK_TOUCH_MOVE,this.rightMove.bind(this)),this.root.addEventListener(d.PHY_EVENTS.BLACK_TOUCH_END,this.rightUp.bind(this)),this.root.addEventListener(d.PHY_EVENTS.BLACK_TOUCH_STOP,this.rightStop.bind(this))),this.px=0,this.py=0,this.dtx=0,this.dty=0}},{key:"rightStop",value:function(){var t=this;this.isDown=!1,this.downP=null,this.mecdrag=!0,setTimeout(function(){t.mecdrag=!1},10)}},{key:"rightDown",value:function(t){if(this.root.globalConfig.isBlackMoveEnable&&!this.mecdrag)return this.root.view.activeZoomGesture?void this.rightUp():void(this.root.view.selectionLayer.notSelect||this.root.globalConfig.isMec()&&this.root.activeModule.isInToolState||(this.downP=u.M.getMouseXY(t),this.dtx=1,this.dty=1,this.isDown=!0))}},{key:"rightUp",value:function(){this.isDown&&(this.isDown=!1,this.downP=null,this.root.execute(h["default"].LOCK_MOVE_SCALE))}},{key:"rightMove",value:function(t){if(this.isDown&&!this.root.view.activeZoomGesture&&this.root.globalConfig.isBlackMoveEnable){var e=u.M.getMouseXY(t),n=e.x-this.downP.x,i=e.y-this.downP.y,r=this.view.x+n,o=this.view.y+i,a=void 0,s=void 0;if(this.root.globalConfig.lockMove){if(!this.root.globalConfig.__firstSetData_temp)return;a=this.root.globalConfig.__firstSetData_temp.sp1,s=this.root.globalConfig.__firstSetData_temp.sp2}var l=this.root.getScreenToViewP(),c=l.p1,f=l.p2,h=0,d=0;if(this.root.globalConfig.lockMove)a.x>c.x?h=c.x-a.x:f.x>s.x&&(h=f.x-s.x),a.y>c.y?d=c.y-a.y:f.y>s.y&&(d=f.y-s.y),0!=h&&(r=this.view.x+n*this.dtx,this.dtx=.2*(1-Math.abs((this.downP.x-c.x)/(f.x-c.x)))),0!=d&&(o=this.view.y+i*this.dty,this.dty=.2*(1-Math.abs((this.downP.y-c.y)/(f.y-c.y))));else if(5===this.root.globalConfig.version){var p=this.root.globalConfig.napeWallW+60/this.root.view.scale.x,v=this.root.globalConfig.napeWallW+200/this.root.view.scale.x;-p>c.x?h=c.x+p:f.x>p&&(h=f.x-p),-v>c.y?d=c.y+v:f.y>v&&(d=f.y-v),0!=h&&(r=this.view.x+.2*n),0!=d&&!this.root.editRectEnabled&&this.root.context.settings.isLockMove&&(o=this.view.y+.2*i)}this.root.dispatchEvent("changePanelStatusEvent",{commandType:1}),this.view.x=r,this.view.y=o,this.root.view.updateTransform(),u.M.setSPPoint(this.downP,e)}}},{key:"destroy",value:function(){this.bgLayer.removeListener(TouchEvent.TOUCH_MOVE,this.rightMoveHandle)}}]),e}(c["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=t.children,n=t.data;n.data=[],e.map(function(t){var e=t.component,i=e;i&&n.data.push(i.getData())})}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(u),c=(n(0),n(2)),f=i(c),h=n(7),d=i(h),p=n(66),v=i(p),y=n(216);i(y);e["default"]=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"execute",value:function(t){function e(t){n.execute(d["default"].NAPE_KEYBOARD,{code:t.keyCode})}var n=this.root;this.keyFuncArr=[],this.canvasDomClickHandleProx=this.canvasDomClickHandle.bind(this),n.addEventListener(MouseEvent.CANVAS_DOM_CLICK,this.canvasDomClickHandleProx),this.bind("f1",function(t){n.execute(d["default"].NAPE_KEYBOARD,{code:t.keyCode})}),this.bind("ctrl + z",function(){n.execute(d["default"].REDO_UNDO,{type:"undo"})}),this.bind("ctrl + y",function(){n.execute(d["default"].REDO_UNDO,{type:"redo"})}),this.bind("backspace",this.deleteFunc),this.bind("delete",this.deleteFunc),this.bind("ctrl + c",function(){n.execute(d["default"].COPY_EQ)}),this.bind("ctrl + v",function(){n.execute(d["default"].PASTE_EQ)}),this.bind("ctrl + a",function(){n.execute(d["default"].SELECT_ALL)}),this.bind("d",e),this.bind("c",e),this.bind("r",e),this.bind("s",e),this.bind("p",e),this.bind("f",e),this.bind("b",e),this.bind("o",e),this.bind("t",e),this.bind("q",e),this.bind("l",e),this.bind("g",e),this.bind("m",e);var i=void 0;this.bind("space",function(){i?clearTimeout(i):n.execute(d["default"].PLAY_AND_PAUSE),i=setTimeout(function(){i=null},500)}),this.directHandle=this.directHandle.bind(this),this.bind("up",this.directHandle),this.bind("down",this.directHandle),this.bind("left",this.directHandle),this.bind("right",this.directHandle)}},{key:"canvasDomClickHandle",value:function(t){this.lastDownTarget=t.target}},{key:"directHandle",value:function(t){if(this.root.globalConfig.DEBUG_GLOW){var e=window._se_glowSP;if(e){var n={ArrowUp:[0,-.2],ArrowDown:[0,.2],ArrowLeft:[-.2,0],ArrowRight:[.2,0]}[t.key];e.x+=n[0],e.y+=n[1]}}else{var i=this.root.view,r=i.selectionLayer,o=r.selectedObj;if(o&&o.length){for(var a={ArrowUp:[0,-5],ArrowDown:[0,5],ArrowLeft:[-5,0],ArrowRight:[5,0]}[t.key],s=0;o&&o.length>s;s++){var u=o[s],c=u.component||u;if(c&&c.isMechanics&&c.body){var f=l.get(this.root,"activeModule.Vec2Util");f&&c.body.set_position(c.body.get_position().add(f.pointToVec2({x:a[0],y:a[1]})))}else u.x+=a[0],u.y+=a[1],u.emit(v["default"].event.DRAG_MOVE,{target:u})}this.root.hideConfPan()}}}},{key:"bind",value:function(t,e){var n=this,i=this.root,r=function(t){n.lastDownTarget===i.renderer.view&&e.call(n,t)};this.keyFuncArr.push({key:t,keyFunc:r}),keyboardJS.bind(t,r)}},{key:"destroy",value:function(){this.root.removeEventListener(MouseEvent.CANVAS_DOM_CLICK,this.canvasDomClickHandleProx),this.keyFuncArr.forEach(function(t){keyboardJS.unbind(t.key,t.item)}),this.keyFuncArr=null}},{key:"deleteFunc",value:function(){var t=this.root,e=t.view.selectionLayer.selectedObj;e&&e.length?e.map(function(t){if(t)return t.removeFromFramework?void t.removeFromFramework(t):void(t.component&&t.component.removeFromFramework(t.component))}):t.curElec&&t.curElec.removeFromFramework(t.curElec),t.deSelected(),t.dispatchEvent("changePanelStatusEvent",{commandType:1})}}]),e}(f["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=this.root.activeModule;if(e.getModuleType()===this.root.Modules.MECHANICS)if("isPlay"===t.type){var n=t.data;this.root.isPlay=n}else if(e.napeEngine.setTouchManager(t.type),t.cursor){var i=document.body;i.style.cursor="default"}}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(){var t=this,e=this.root.canvas;this.preventNames=["mousedown","mousemove","touchstart","touchmove","mouseup","touchend"],this.preventNames.forEach(function(n){e.addEventListener(n,t.preventFuncHandle)}),this.preventTwoNames=["touchmove","mouseup","touchend"],this.preventTwoFuncHandleProx=this.preventTwoFuncHandle.bind(this),this.preventTwoNames.forEach(function(n){e.addEventListener(n,t.preventTwoFuncHandleProx)})}},{key:"preventFuncHandle",value:function(t){}},{key:"preventTwoFuncHandle",value:function(t){this.root.isStopPropagation||t.stopPropagation()}},{key:"destroy",value:function(){var t=this,e=this.root.canvas;this.preventNames.forEach(function(n){e.removeEventListener(n,t.preventFuncHandle)}),this.preventNames=null,this.preventTwoNames.forEach(function(n){e.removeEventListener(n,t.preventTwoFuncHandleProx)}),this.preventTwoNames=null}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(0),l=n(2),c=i(l),f=n(21),h=i(f),d=n(7),p=(i(d),n(9)),v=i(p),y=navigator.userAgent.toLowerCase();-1!==y.indexOf("windows")||y.indexOf("win32");e["default"]=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"execute",value:function(t){var e=this.root,n=e.view,i=e.globalConfig,r=e.W,o=this.root.renderer.plugins.interaction,a=t.deltaY!==undefined?t.deltaY:-t.originalEvent.deltaY;isNaN(a)&&(a=t.originalEvent.wheelDelta>0?25:-25);var s=o.mouse.global,l=1+.001*a,c=n.scale.x*l,f=i.isMec()?r/(2*i.napeWallW):v["default"].MIN_SCALE_VALUE;f>c?(c=f,l=c/n.scale.x):c>v["default"].MAX_SCALE_VALUE&&(c=v["default"].MAX_SCALE_VALUE,l=c/n.scale.x),n.activeZoomGesture=!1,n.scale.x=c,n.scale.y=c;var d=(n.x-s.x)*l+s.x,p=(n.y-s.y)*l+s.y;if(n.x=d,n.y=p,i.isMec()){var y=e.toLocal(new u.Point(-i.napeWallW,0),n);y.x>0&&(n.x-=y.x);var g=e.toLocal(new u.Point(i.napeWallW,0),n);r>g.x&&(n.x+=r-g.x),n.updateTransform();var _=this.root.getScreenToViewP(),m=_.p1,b=_.p2,w=0,E=i.napeWallW+200/n.scale.x;-E>m.y?w=m.y+E:b.y>E&&(w=b.y-E);n.y=n.y+w*n.scale.x}this.root.dispatchEvent("changePanelStatusEvent",{commandType:1}),this.root.emit(h["default"].communicate.angular.MOVE_SCALE),this.root.emit(h["default"].change.ZOOM,{zoom:c})}}]),e}(c["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){5===this.root.globalConfig.version&&this.root.activeModule.napeEngine.keyBoardChangeTouchState(t.code)}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(2),l=i(u),c=n(96),f=i(c);e["default"]=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"execute",value:function(t){var e=this.root.clipboardManager,n=e.getData(f["default"].tag.CLIP_BOARD);if(n){var i=n.data,r=this.root,o=!0,a=!1,s=undefined;try{for(var u,l=i[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){r.copyEqu(u.value)}}catch(c){a=!0,s=c}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw s}}}}}]),e}(l["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(2),l=i(u),c=n(21),f=i(c);e["default"]=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"execute",value:function(t){if(this.root.activeModule.napeEngine){var e=this.root.activeModule.napeEngine;e.play=!e.play,this.root.activeModule.keyboardPause(),this.root.emit(f["default"].communicate.angular.KEYBOARD_CHANGE_STATUS,{type:"space",value:e.play})}}}]),e}(l["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=t.type,n=this.root.undoManager;"undo"===e?n.undo():"redo"===e&&n.redo()}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=this.root.view,n=e.selectionLayer,i=void 0;i=t&&t.children?t.children:e.viewStack.children,i.filter(function(t){return t.allowMultiSelected}),n&&(n.clear(),n.selectedChildren(i))}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=this.root.curElec;if(e&&e.allowMultiSelected){var n=this.root.view,i=n.selectionLayer;if(i.clear(),e.isMechanics&&e.istoolMove)if(this.root.nape){var r=this.root.nape.play;e.istool&&!r?i.selectOneToReadyMove(e.parent):e.istool&&r||i.selectOneToReadyMove(e.parent)}else i.selectOneToReadyMove(e.parent);else i.selectedChildren([e.parent])}}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){if(this.root.globalConfig.isMec()){this.BodyUtil=this.root.getCurModuleMain().BodyUtil,this[t.type](t.data)}}},{key:"begin",value:function(t){var e=this.root.view.selectionLayer;if(e.selectedBody?e.selectedBody.clear():e.selectedBody=new Set,t&&t.bodylist)return void(e.selectedBody=new Set(t.bodylist));var n=void 0;for(n=0;e.selectedObj.length>n;n++){var i=e.selectedObj[n].component;if(i&&i.isMechanics){e.selectedObj.splice(n,1),n--;var r=i.body;if(!r)continue;if(e.selectedBody.add(r),r.userData&&r.userData.stopFindConnectBodies);else{r.connectedBodies().foreach(function(t){t.userData&&t.userData.noSelectlayer||e.selectedBody.add(t)})}}}!function(){var t=new Set;e.selectedBody.forEach(function(e){e.constraints.foreach(function(e){if(e.userData){var n=e.userData.bindBody;n&&t.add(n)}})}),t.forEach(function(t){e.selectedBody.add(t)}),t.clear()}()}},{key:"move",value:function(t){var n=this,i=this.root.view.selectionLayer;if(!e.statusMap){e.statusMap=new Map;var r=!0,o=!1,a=undefined;try{for(var s,u=i.selectedBody.keys()[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;l.userData&&l.userData.view&&l.userData.view.unbindToCompound&&l.userData.view.unbindToCompound(),e.statusMap[l]=this.BodyUtil.getBodyStatus(l),l.userData&&l.userData.moveCompo||(this.BodyUtil.frezzBody(l),this.BodyUtil.setBodyStatus(l,0))}}catch(c){o=!0,a=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw a}}}i.selectedBody.forEach(function(e){if(e)if(e.userData&&e.userData.moveCompo){var i=e.userData.view;i.translateMove(t.x,t.y)}else{var r=e.get_position(),o=n.root.phy.nape,a=o.geom.Vec2.get(r.get_x()+t.x,r.get_y()+t.y);e.set_position(a)}})}},{key:"end",value:function(t){if(e.statusMap){var n=this.root.view.selectionLayer,i=!0,r=!1,o=undefined;try{for(var a,s=n.selectedBody.keys()[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value;u.userData&&u.userData.moveCompo||this.BodyUtil.setBodyStatus(u,e.statusMap[u])}}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}e.statusMap.clear(),e.statusMap=null}}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=this.root;switch(t.command){case"MENU_LOCATION":e.globalConfig.MENU_LOCATION=t.checked,e.globalConfig.dataTool.saveLocalData();break;case"backgroundColorImg":e.backgroundManager.drawBackGround(t.data);break;case"showElecLine":e.globalConfig.showElecLine=t.checked,e.freshElecLineVisible();break;case"SHOWEQUVALUE":e.globalConfig.SHOWEQUVALUE=t.checked,e.freshEquipShows();break;case"SHOWTIPPAO":e.globalConfig.SHOWTIPPAO=t.checked,e.freshBreakerTipVisible();break;case"SHOW_DIAN_CHANG":e.globalConfig.SHOW_DIAN_CHANG=t.checked,e.freshMagSettings();break;case"SHOW_DENG_SHI":e.globalConfig.SHOW_DENG_SHI=t.checked,e.freshMagSettings();break;case"SHOW_CIGAN":e.globalConfig.SHOW_CIGAN=t.checked,e.freshMagSettings();break;case"CIGAN_MODEL":e.globalConfig.CIGAN_MODEL=t.checked,e.freshMagSettings();break;case"CIGAN_SE":e.globalConfig.CIGAN_SE=t.checked,e.freshMagSettings();break;case"DIANCHANG_SE":e.globalConfig.DIANCHANG_SE=t.checked,e.freshMagSettings();break;case"SHOW_FLAG_LABEL":e.globalConfig.SHOW_FLAG_LABEL=t.checked,e.freshSerialNumVisible();break;case"VOLUME":e.globalConfig.VOLUME=t.checked?1:0,e.confType.call(e,4,e.globalConfig.VOLUME);break;case"TAKE_SCREENSHOT":e.globalConfig.TAKE_SCREENSHOT=t.checked;break;case"CUT_IMG_AREA":e.globalConfig.CUT_IMG_AREA=t.checked;break;case"OPEN_ANGLE":e.globalConfig.OPEN_ANGLE=t.checked,e.confType.call(e,1,e.globalConfig.OPEN_ANGLE);break;case"OPEN_NORMAL":e.globalConfig.OPEN_NORMAL=t.checked,e.confType.call(e,5,e.globalConfig.OPEN_NORMAL);break;case"SHOW_REFLECT":e.globalConfig.SHOW_REFLECT=t.checked,e.confType.call(e,2,e.globalConfig.SHOW_REFLECT);break;case"SHOW_DIRECTION":e.globalConfig.SHOW_DIRECTION=t.checked,e.confType.call(e,3,e.globalConfig.SHOW_DIRECTION);break;case"SHOW_ZULI":e.setAirResistance(t.checked);break;case"ZULI_NUM":e.activeModule.getModuleType()===e.Modules.MECHANICS&&e.activeModule.setGravity(t.showValue);break;case"LIGHT_DIS_VISIBLE":e.globalConfig.LIGHT_DIS_VISIBLE=t.data;break;case"BULB_SHINE_VISIBLE":e.globalConfig.BULB_SHINE_VISIBLE=t.data;break;case"COMP_MESS":e.globalConfig.COMP_MESS=t.checked;break;case"SENSING_AREA":e.globalConfig.SENSING_AREA=t.checked;break;case"BTN_NAME":e.globalConfig.BTN_NAME=t.checked}}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=(n(0),n(2)),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=this.root,n=e.globalConfig.version;if(7===n)e.view.scale={x:1,y:1},e.view.x=0,e.view.y=0,e.zoomHandle();else if(8===n)e.activeModule.onShowAllEquip();else{var i=e.getEquipmentsRect(),r=e.view.toLocal({x:i.x,y:i.y}),o=e.W-200,a=e.H-200,s=o/i.width,u=a/i.height,l=s>u?u:s,c=e.view.scale.x*l;e.view.scale={x:c,y:c};var f=e.view.toGlobal(r);e.view.x=e.view.x-f.x+.5*(o+200-i.width*l),e.view.y=e.view.y-f.y+.5*(a+200-i.height*l),e.zoomHandle()}}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){this.root.view.selectionLayer.stopSelection()}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){var e=this;this.root.switchXueke.call(this.root,t.version,!0).then(function(){e.root.freshToolBox(),t.complete&&t.complete()})}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(){var t=this,e=this.root;e.takeScreenShot({quality:1,type:"png",transparent:!e.globalConfig.TAKE_SCREENSHOT,outWidth:-1,outHeight:-1}).then(function(e){var n=(new Date).getTime()+".png";t.download(n,e)})}},{key:"download",value:function(t,e){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.addEventListener("click",function(t){n.parentNode.removeChild(n)}),n.click()}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(2),l=i(u),c=n(7),f=i(c);e["default"]=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"execute",value:function(t){var e=this,n=t.zoomValue,i=this.root.view,r=this.root.W,o=this.root.H,a={x:r/2,y:o/2},s=n/i.scale.x,u=(i.x-a.x)*s+a.x,l=(i.y-a.y)*s+a.y,c=Expo.easeOut;if(TweenMax.to(i.scale,1,{x:n,y:n,ease:c}),TweenMax.to(i,1,{x:u,y:l,ease:c,complete:function(){e.root.execute(f["default"].LOCK_MOVE_SCALE)}}),i.activeZoomGesture=!1,this.root.globalConfig.isForceAndMotion()){this.root.getCurModuleMain().setScale(n)}}}]),e}(l["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){return}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){return}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){return}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"execute",value:function(t){return}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:p(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},u=n(10),l=n(218),c=function(t){return t&&t.__esModule?t:{"default":t}}(l),f=n(0),h=n(6),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(h);e["default"]=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.main=t,n.visible=!1,n.lineHeight=10,n.PointStyle={dark:{color:5723995,alpha:.8,size:2},light:{color:16777215,alpha:.8,size:3}},n.BTN_RADIUS=20,n.main.addEventListener(u.EVENT_TYPES.LIBRARY_LOADED,n.libLoadHandleProx=n.libLoadHandle.bind(n)),n}return o(e,t),a(e,[{key:"libLoadHandle",value:function(){var t=this;this.rotateText=new PIXI.Text("",{font:'40px "Microsoft Yahei"',fill:16777215,align:"left"}),this.rotateBox=new PIXI.Sprite,this.rotateBox.pivot.y=80,this.rotateBox.pivot.x=75,this.rotateBox.visible=!1;var e=new f.Point(0,0);this.main.skinview.add(this.rotateBox,function(){if(!d.get(t,"main.curElec.componentBox.parent"))return{};var n=t.toLocal(new f.Point,t.main.curElec.componentBox);return e.x=n.x,e.y=n.y-t.lineHeight-t.rotateBtn.height-150/t.main.view.scale.x,{p:e,fromTar:t}});var n=function(){t.rotateText.x=(150-t.rotateText.width)/2,t.rotateText.y=(80-t.rotateText.height)/2},i=new PIXI.Graphics;i.beginFill(0,.6),i.drawRoundedRect(0,0,150,80,10),i.endFill(),this.rotateBox.addChild(i),this.rotateBox.addChild(this.rotateText),this.rotateText.border=!0,this.rotateAngleArr=[],this.rotateNum=60;for(var r=0;this.rotateNum>r;r++)this.rotateAngleArr.push(2*Math.PI*r/60);this.dotG=new PIXI.Graphics,this.addChild(this.dotG),this.rotateBtn=c["default"].createBtn(["skin/operate_icon_turn_default","skin/operate_icon_turn_pre"]),this.rotateBtn.scale.x=this.rotateBtn.scale.y=.5,this.addChild(this.rotateBtn),this.rotateBtn.rotateData={rotateType:1,pareComp:function(){return t.main.curElec},cenP:function(){return t.main.curElec.componentBox.toGlobal(new f.Point)},downHandleFunc:function(){t.dotG.visible=!0,t.rectGra.visible=!1,t.rotateBox.visible=!0,t.downRotation=t.main.curElec.componentBox.rotation,t.drawDotCir(),n()},rotateHandleFunc:function(e,i){var r=f.M.getValidHu(t.downRotation+i);t.downRotation=r;for(var o=f.M.toAngle(r),a=360,s=360,u=0;360>=u;u+=90){var l=Math.abs(u-o);a>l&&(a=l,s=u)}3>a&&(o=s),t.main.curElec.componentBox.rotation=f.M.toHu(o),t.main.curElec.rotateChange.call(t.main.curElec,i,t.main.curElec.componentBox.rotation),t.drawDotCir(),n()},upHandleFunc:function(){t.dotG.clear(),t.dotG.visible=!1,t.rectGra.visible=!0,t.rotateBox.visible=!1}},this.main.phy.addRotateTool(this.rotateBtn)}},{key:"drawDotCir",value:function(){var t=this.toLocal(new f.Point,this.main.curElec.componentBox),e=new f.Point(t.x,t.y-this.lineHeight+10/this.main.view.scale.x);this.dotG.clear();for(var n=0;this.rotateNum>n;n++){var i=2*Math.PI*n/this.rotateNum,r=f.M.rotaPointFromP(e,t,i),o=this.main.curElec.componentBox.rotation>i?this.PointStyle.light:this.PointStyle.dark;this.dotG.beginFill(o.color,o.alpha),this.dotG.drawCircle(r.x,r.y,o.size/this.main.view.scale.x),this.dotG.endFill()}this.rotateText.text=Math.round(f.M.toAngle(this.main.curElec.componentBox.rotation))+"°"}},{key:"show",value:function(t){(this.visible=t)&&this.main.curElec&&(this.rotateBtn.visible=this.main.curElec.canRotate)}},{key:"fresh",value:function(t){var e=t.gra,n=t.angle,i=t.directionStyle,r=t.newPoint,o=this.toLocal(new f.Point,this.main.curElec.componentBox);this.lineHeight=f.M.getPointLen(o,r),this.rotateBtn.rotation=n;var a=f.M.getXianDianByDis(2*this.BTN_RADIUS/this.main.view.scale.x,!1,r,o);this.rectGra=e,"top"===i&&(f.M.setSPPoint(this.rotateBtn,a),this.rotateBtn.scale.x=2/this.main.view.scale.x,this.rotateBtn.scale.y=2/this.main.view.scale.y)}},{key:"destroy",value:function(){this.main.phy.removeRotateTool(this.rotateBtn),this.main.removeEventListener(u.EVENT_TYPES.LIBRARY_LOADED,this.libLoadHandleProx),this.main=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this,!0)}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=n(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(s),l=n(9),c=i(l),f=n(47),h=i(f),d=n(21),p=i(d),v=function(){function t(e){r(this,t),this.main=e,this.SOUND_DRAW_NUM=130,this.SOUND_COMFIG=null}return o(t,[{key:"init",value:function(){var t=this,e=this.main;return this.registerQueue=[],this.isInRegistering=!1,this.fileloadProxy=this.fileload.bind(this),createjs.Sound.on("fileload",this.fileloadProxy),this.pareURL=c["default"].cdn_static+"sound",createjs.Sound.alternateExtensions=["mp3"],this._loopFuncArr=[],this.ticker=a.M.addTicker(function(){var e=void 0;for(e=0;t._loopFuncArr.length>e;e++){var n=t._loopFuncArr[e];n&&n.gainNode?n.checkLoopFunc&&n.checkLoopFunc.call(n):a.ArrayUtil.removeValueFromArray(t._loopFuncArr,n)}},this,!1),this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),e.addEventListener(p["default"].CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandle({isRunning:this.main.isRunning}),this._loadSoundConfig()}},{key:"_loadSoundConfig",value:function(){var t=this;return new Promise(function(e){$.getJSON(t.main.globalConfig.soundConfigURL,function(n,i){"success"===i&&(t.SOUND_COMFIG=n,Object.keys(n.mp3).forEach(function(t){h["default"][t]=t}),e())})})}},{key:"canvasRunHandle",value:function(t){t.isRunning?(this.ticker.start(),isNaN(this.__tempVOLUME)||(this.main.globalConfig.VOLUME=this.__tempVOLUME),this.main.confType(4,!0)):(this.ticker.stop(),this.__tempVOLUME=this.main.globalConfig.VOLUME,this.main.globalConfig.VOLUME=0,this.main.confType(4,!1))}},{key:"destroy",value:function(){this.main.removeEventListener(p["default"].CANVAS_RUN,this.canvasRunHandleProxy),this.soundEnabled&&(createjs.Sound.stop(),createjs.Sound.removeAllSounds(),createjs.Sound.removeAllEventListeners()),this.ticker.stop(),this.ticker=null,this.fileloadProxy=null,this.canvasRunHandleProxy=null,this._loopFuncArr=null,this.registerQueue=null,this.registerObj=null,this.pareURL=null,this.main=null}},{key:"register",value:function(t,e,n){this.registerQueue.push({name:t,completeFunc:e,"this":n}),this._registerNext()}},{key:"_registerNext",value:function(){if(this.main&&!this.isInRegistering&&this.registerQueue&&this.registerQueue.length){this.isInRegistering=!0,this.registerObj=this.registerQueue.shift();var e=this.registerObj.name,n=this.registerObj.completeFunc;t.map.find(e)?(this.isInRegistering=!1,n&&n(),this.registerObj.completeFunc=null,this.registerObj["this"]=null,this.registerObj=null,this._registerNext()):(t.map.put(e,{name:e,hasLoad:!1}),this.soundEnabled&&(createjs.Sound.isAnalyser=!0,createjs.Sound.registerSound(this.pareURL+"/"+this.findFileById(e)+".mp3",e)))}}},{key:"findFileById",value:function(t){return u.get(this.SOUND_COMFIG.mp3,t+".file",null)}},{key:"fileload",value:function(e){if(this.main&&this.registerObj){var n=this.registerObj.name,i=this.registerObj.completeFunc,r=this.registerObj["this"];t.map.get(n).hasLoad=!0,this.isInRegistering=!1,i&&(r?i.call(r):i()),this.registerObj.completeFunc=null,this.registerObj["this"]=null,this.registerObj=null,this._registerNext()}}},{key:"start_linkAudio",value:function(t){var e=this;t?(navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),this.analyser||navigator.getUserMedia&&navigator.getUserMedia({audio:!0},function(t){e._webRTCStream=t,e.context=new(window.AudioContext||window.webkitAudioContext),e.microphone=e.context.createMediaStreamSource(t),e.analyser=e.context.createAnalyser(),e.microphone.connect(e.analyser)},function(){})):(this.analyser&&(this.analyser.disconnect(),this.analyser=null),this.microphone&&(this.microphone.disconnect(),this.microphone=null),this.context&&(this.context.close(),this.context=null),this._webRTCStream&&(this._webRTCStream.stop?this._webRTCStream.stop():this._webRTCStream.getTracks().forEach(function(t){t.stop()}),this._webRTCStream=null))}},{key:"getWaiSoundAnalyserArr",value:function(){if(!this.analyser)return null;var t=44100*this.analyser.frequencyBinCount/this.context.sampleRate|0,e=new Uint8Array(t);return this.analyser.getByteTimeDomainData(e),e}},{key:"getNeiSoundAnalyserArr",value:function(){var t=this,e=this.main.getEquipmentArr(!0),n=null,i=[];e.forEach(function(e){if(e){if(e.getSound){var r=e.getSound();if(r){n=r.captureSound();var o=n.getSoundAnalyserArr();if(n.getSoundAnalyserArr){if(o)for(var a=0;o.length>a;a++)o[a]=t.SOUND_DRAW_NUM+(o[a]-t.SOUND_DRAW_NUM)*n.volume;i.push(o)}}}e.getSoundAnalyserArr&&i.push(e.getSoundAnalyserArr())}});var r=void 0,o=void 0,a=i.length;if(0===a)return null;var s=[];for(r=0;1024>r;r++)s[r]=this.SOUND_DRAW_NUM;for(r=0;a>r;r++){var u=i[r];if(u){var l=Math.min(1024,u.length);for(o=0;l>o;o++)s[o]+=u[o]-this.SOUND_DRAW_NUM}}return s}},{key:"play",value:function(t,e,n,i,r,o){return this.playT(t,n,i,r,e,o)}},{key:"registAndPlay",value:function(e,n,i,r,o,a,s){var u=this;return new Promise(function(l){var c=void 0;t.map.find(e)?(c=u.playT(e,n,i,r,o,a,s),l({instance:c})):u.register(e,function(){c=u.playT(e,n,i,r,o,a,s),l({instance:c})})})}},{key:"playT",value:function(e,n,i,r,o,s,u){var l=s===undefined||s,c=!isNaN(o)&&o,f=isNaN(r)?this:r,h=this,d=t.map.find(e);if(d&&d.hasLoad&&this.soundEnabled){var p=createjs.Sound.play(e);return u?(p.ori_instance=u,u.next_instance=p):p.captureSound=function(){return p.next_instance||p},p._myTime=(new Date).getTime(),p.checkLoopFunc=function(){if(this&&this.gainNode){if((new Date).getTime()-this._myTime>this._duration-100&&(n&&n.call(f),a.ArrayUtil.removeValueFromArray(h._loopFuncArr,this),this.checkLoopFunc=null,c)){h.playT.call(h,e,n,i,r,o,s,this.ori_instance?this.ori_instance:this).volume=p.volume}}},p.__$autoDisdroy=l,p.on("complete",this.instanceCompleteHandle),this._loopFuncArr.push(p),p}}},{key:"instanceCompleteHandle",value:function(t){t.target.__$autoDisdroy&&(t.target.off("complete",this.instanceCompleteHandle),t.target.destroy.call(t.target))}},{key:"stopT",value:function(t){t&&(t.next_instance&&t.next_instance.gainNode&&(t.next_instance.stop(),t.next_instance.destroy(),t.next_instance=null),t.gainNode&&(t.stop(),t.checkLoopFunc=null,t.off("complete",this.instanceCompleteHandle),t.destroy()),t.captureSound=null)}},{key:"stop",value:function(t){this.stopT(t)}},{key:"getAudioContext",value:function(){return this.soundEnabled?createjs.Sound.activePlugin.context:null}},{key:"soundEnabled",get:function(){return!!window.AudioContext}}]),t}();v.map=new a.HashMap,e["default"]=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){var n=[],i=!0,r=!1,o=undefined;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),c=n(394),f=i(c),h=n(38),d=i(h),p=n(93),v=n(37),y=i(v),g=n(20),_=n(411),m=i(_),b=n(6),w=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(b),E=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.main=t,n.globalConfig=n.main.globalConfig,n.temp_oriSaveDataArr=[],n.oriSaveDataArr=[],n.oriScale={},n.nbPhysicsData={},n.restoreLocalData(),n}return a(e,t),u(e,[{key:"init",value:function(){return this.versionManager=new m["default"](this.main),this.toolBox=new f["default"](this.main),this.main.toolBox=this.toolBox,this.toolBox.init()}},{key:"getPageData",value:function(){return this.pageData={},this.pageData.properties={},this.pageData.properties.data=this.getData(),this.pageData=this.versionManager.getDataFilter(this.pageData),this.pageData.id=this.main.id,this.pageData}},{key:"setPageData",value:function(t,n){t=this.versionManager.setDataFilter(t),6===t.properties.data.version&&(t.properties.data.version=1),t.id&&(this.main.id=t.id),e._setPageDataArr.push({data:t,complete:n,dataTool:this}),this._checkAndSetPageDataNext()}},{key:"_checkAndSetPageDataNext",value:function(){e._setPageDataArr.length&&e._setPageDataArr[0].dataTool._setPageDataNext.call(e._setPageDataArr[0].dataTool)}},{key:"_setPageDataNext",value:function(){var t=this;if(!e._isInSetPageData&&e._setPageDataArr.length){e._isInSetPageData=!0;var n=e._setPageDataArr.shift(),i=n.data,r=n.complete;this._isIn_setPageData=!0,this.pageData=i,this.main.clearEquipment.call(this.main);var o=1;if(this.pageData&&this.pageData.properties&&this.pageData.properties.data&&this.pageData.properties.data.version){var a=this.pageData.properties.data.version-0;this.globalConfig.__firstSetData_temp=this.pageData.properties.data,o=a}this.main.loadModules({modules:[g.Modules[o]]}).then(function(){t.main.freshToolBox.call(t.main),t.main.hasFirSet=!0,t.pageData&&t.pageData.properties?t.firstSetData(t.pageData.properties.data,!0).then(function(){t._isIn_setPageData=!1,r(),e._isInSetPageData=!1,t._checkAndSetPageDataNext()}):t.firstSetData(null,!0).then(function(){t._isIn_setPageData=!1,r(),e._isInSetPageData=!1,t._checkAndSetPageDataNext()}),t.main.dispatchEvent("switchXueke")})}}},{key:"checkAndUpdateSaveData",value:function(t){var e=this.getSaveElecDataArr(),n=!1;if(!t||t&&!t.notCheckChange)if(this.oriSaveDataArr.length!==e.length)n=!0;else{var i=!0,r=!1,o=undefined;try{for(var a,s=this.oriSaveDataArr[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value,c=!1,f=!0,h=!1,d=undefined;try{for(var p,v=e[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=p.value;if(y.uid===u.uid&&l.M.equals(y,u)){c=!0;break}}}catch(_){h=!0,d=_}finally{try{!f&&v["return"]&&v["return"]()}finally{if(h)throw d}}if(!c)return n=!0,!1}}catch(_){r=!0,o=_}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}}(!t||t&&!t.notSetOri)&&(this.temp_oriSaveDataArr=this.oriSaveDataArr,this.oriSaveDataArr=e);var g=this.main.view;return g.scale.x===this.oriScale.sx&&g.scale.y===this.oriScale.sy&&g.x===this.oriScale.x&&g.y===this.oriScale.y||(this.oriScale.sx=g.scale.x,this.oriScale.sy=g.scale.y,this.oriScale.x=g.x,this.oriScale.y=g.y,n=!0),n}},{key:"getSaveElecDataArr",value:function(){var t=this.main.getEquipmentArr(),e=t.length,n=void 0,i=[];for(n=0;e>n;n++){var r=t[n];if(r.component){var o=r.component;o.allowSave&&i.push(o.getData.call(o))}}return i}},{key:"_ssetData",value:function(t){this.start_setData=!0,this.main.clearEquipment();try{t&&(this.globalConfig.version=t.version,this.globalConfig.showElecLine=t.showElecLine,this.globalConfig.SHOWEQUVALUE=t.SHOWEQUVALUE,this.globalConfig.SHOWTIPPAO=t.SHOWTIPPAO,this.globalConfig.SHOW_FLAG_LABEL=t.SHOW_FLAG_LABEL,this.globalConfig.CIGAN_MODEL=t.CIGAN_MODEL,this.globalConfig.CIGAN_SE=t.CIGAN_SE,this.globalConfig.DIANCHANG_SE=t.DIANCHANG_SE,this.globalConfig.VOLUME=t.VOLUME,this.globalConfig.TAKE_SCREENSHOT=t.TAKE_SCREENSHOT,this.globalConfig.OPEN_ANGLE=t.OPEN_ANGLE,this.globalConfig.SHOW_REFLECT=t.SHOW_REFLECT,this.globalConfig.SHOW_DIRECTION=t.SHOW_DIRECTION,this.globalConfig.SHOW_ZULI=t.SHOW_ZULI,this.globalConfig.SHOW_DIAN_CHANG=t.SHOW_DIAN_CHANG,this.globalConfig.SHOW_CIGAN=t.SHOW_CIGAN,this.globalConfig.SHOW_DENG_SHI=t.SHOW_DENG_SHI,this.globalConfig.COMP_MESS=t.COMP_MESS===undefined||t.COMP_MESS,this.globalConfig.SENSING_AREA=t.SENSING_AREA,this.globalConfig.BTN_NAME=w.get(t,"BTN_NAME",!0),this.globalConfig.ZULI_NUM=t.ZULI_NUM,this.main.play=t.play===undefined||t.play,this.main.backgroundManager.setData(t.backgroundColorImg),this.main.setAirResistance(this.globalConfig.SHOW_ZULI),this.main.setGravity(this.globalConfig.ZULI_NUM),8!==t.version&&this.main.activeModule.setData(t.moduleData))}catch(e){}}},{key:"firstSetData",value:function(t,e){var n=this;return this._ssetData(t),new Promise(function(i,r){if(t){7===n.globalConfig.version&&n.main.getCurModuleMain().setElecFamilyPowerData(t.ElecFamilyPowerData);var o=t.dataArr;n.main.registFromElecDataArr.call(n.main,o,function(){n._setDataArr(o).then(function(){n.setDataFromAddEquipmentOver(!e),i()})}),8===t.version&&(n.main.activeModule.setData(t.forceAndMotionData),i())}else n.setDataFromAddEquipmentOver(!e),i()})}},{key:"setData",value:function(t){var e=this;return new Promise(function(n,i){if(e._ssetData(t),t)if(t.forceAndMotionData)e.main.activeModule.setData(t.forceAndMotionData).then(n);else{var r=t.dataArr;e._setDataArr(r).then(function(){e.setDataFromAddEquipmentOver(!1),n()})}else n()})}},{key:"_setDataArr",value:function(t){var e=this;return new Promise(function(n,i){if(!t||!t.length)return void n();var r=[],o=[],a=[];t.forEach(function(t){!1===t.fromEquTools?!0===t.ismecJoint?r.push(t):o.push(t):a.push(t)});var s=[];a.forEach(function(t){t.loadLevel===undefined&&(t.loadLevel="ElecFamilyTwoHoleOutlets"===t.classname||"ElecFamilyThreeHoleOutlets"===t.classname?3:"ElecWire"===t.classname||"ElecFamilyInserted"===t.classname?4:5)}),a.sort(function(t,e){return t.loadLevel-e.loadLevel}),a.forEach(function(t){s.push({name:t.classname,p:new l.Point(t.positionX,t.positionY),dataObj:t})}),e.main.addComp(s,!0,function(t){o.concat(r).forEach(function(t){e.main.addFreeEquipment(t)}),n()})})}},{key:"setDataFromAddEquipmentOver",value:function(t){var n=this;if(this.start_setData){for(var i in y["default"].equipmentConfMap)if(y["default"].equipmentConfMap[i]&&y["default"].equipmentConfMap[i].queue&&y["default"].equipmentConfMap[i].queue.length>0)return;var r=this.main.getEquipmentArr();if(r.forEach(function(t){var e=t.component,n=e;n&&n.parent&&n&&n.setDataOver0&&n.setDataOver0.call(n)}),r.forEach(function(t){var e=t.component,i=e;i&&i.parent&&(i&&i.setDataOver&&i.setDataOver.call(i,i.setData_obj),n.main.startLoadTool.addClickConf.call(n.main.startLoadTool,i.parent))}),1===this.main.activeModule.moduleType&&(this.main.freshMagSettings(),this.main.freshSerialNumVisible(),this.main.freshBreakerTipVisible(),this.main.freshEquipShows(),this.main.freshElecLineVisible()),this.main.freshLabEditRect(),this.main.deSelected(),this.globalConfig.__firstSetData_temp&&this.globalConfig.__firstSetData_temp.view){this.main.labEditRect.setViewRect({x:this.globalConfig.__firstSetData_temp.view.x,y:this.globalConfig.__firstSetData_temp.view.y,scaleX:this.globalConfig.__firstSetData_temp.view.scaleX,scaleY:this.globalConfig.__firstSetData_temp.view.scaleY}),this.main._setCanvasPToViewPoints()}else 0!==r.length&&(this.main.view.x=0,this.main.view.y=0);var o=new l.Point(0,0);this.main.mapPositionToPoint(o,0,0),o=this.main.view.toLocal(o,this.main.stage);var a=new l.Point(0,0);if(this.main.mapPositionToPoint(a,$(this.main.canvas).width(),$(this.main.canvas).height()),a=this.main.view.toLocal(a,this.main.stage),this.globalConfig.__firstSetData_temp=this.globalConfig.__firstSetData_temp||{},this.globalConfig.__firstSetData_temp.view=this.globalConfig.__firstSetData_temp.view||{},this.globalConfig.__firstSetData_temp.view.scaleX===undefined&&(this.globalConfig.__firstSetData_temp.view.scaleX=this.main.view.scale.x,this.globalConfig.__firstSetData_temp.view.scaleY=this.main.view.scale.y,this.globalConfig.__firstSetData_temp.view.x=this.main.view.x,this.globalConfig.__firstSetData_temp.view.y=this.main.view.y),this.globalConfig.__firstSetData_temp.sp1=o,this.globalConfig.__firstSetData_temp.sp2=a,this.start_setData=!1,this.main.dispatchEvent(e.LOAD_TOOL_COMPLETE),this.checkAndUpdateSaveData({notCheckChange:!0}),this.globalConfig.__firstSetData_temp&&this.globalConfig.__firstSetData_temp.view&&(this.oriScale.sx=this.globalConfig.__firstSetData_temp.view.scaleX,this.oriScale.sy=this.globalConfig.__firstSetData_temp.view.scaleY,this.oriScale.x=this.globalConfig.__firstSetData_temp.view.x,this.oriScale.y=this.globalConfig.__firstSetData_temp.view.y),this.globalConfig.lockMove){var u=this.main.getWindowDoorSize(),c=s(u,2),f=c[0],h=c[1],v=new l.Point(0,0);this.main.mapPositionToPoint(v,0,0),v=this.main.view.toLocal(v,this.main.stage);var g=new l.Point(0,0);this.main.mapPositionToPoint(g,f,h),g=this.main.view.toLocal(g,this.main.stage),this.globalConfig.napeWallW=(g.x-v.x)/2-10,this.main.nape.resetWall();var _=p.Phy.nape,m=new l.Point(0,0);this.main.mapPositionToPoint(m,f/2,h/2),m=this.main.view.toLocal(m,this.main.stage);this.main.nape.floor.body.set_position(_.geom.Vec2.get(m.x,m.y))}this.main.skinview.fresh(),window.__main=this.main,this.main.freshRender(),this.__delayRenderFlag&&clearTimeout(this.__delayRenderFlag),this.__delayRenderFlag=setTimeout(function(){n.main.freshRender(),n.main.dispatchEvent(d["default"].SET_DATA_COMPLETE)},100)}}},{key:"getData",value:function(){var t=[],e=!1;this.main.getEquipmentArr(!0).forEach(function(n){if(n.allowSave){var i=n.getData();t.push(i),!0===n.equIslocked&&(e=!0)}});var n={};return n.containsVipequ=e,this.main.globalConfig.isForceAndMotion()&&this.main.activeModule&&this.main.activeModule.checkHasEquip&&(n.containsVipequ=this.main.activeModule.checkHasEquip()),n.version=this.globalConfig.version,n.showElecLine=this.globalConfig.showElecLine,n.SHOWEQUVALUE=this.globalConfig.SHOWEQUVALUE,n.SHOWTIPPAO=this.globalConfig.SHOWTIPPAO,n.SHOW_FLAG_LABEL=this.globalConfig.SHOW_FLAG_LABEL,n.CIGAN_MODEL=this.globalConfig.CIGAN_MODEL,n.CIGAN_SE=this.globalConfig.CIGAN_SE,n.DIANCHANG_SE=this.globalConfig.DIANCHANG_SE,n.VOLUME=this.globalConfig.VOLUME,n.TAKE_SCREENSHOT=this.globalConfig.TAKE_SCREENSHOT,n.OPEN_ANGLE=this.globalConfig.OPEN_ANGLE,n.SHOW_REFLECT=this.globalConfig.SHOW_REFLECT,n.SHOW_DIRECTION=this.globalConfig.SHOW_DIRECTION,n.SHOW_ZULI=this.globalConfig.SHOW_ZULI,n.SHOW_DIAN_CHANG=this.globalConfig.SHOW_DIAN_CHANG,n.SHOW_CIGAN=this.globalConfig.SHOW_CIGAN,n.SHOW_DENG_SHI=this.globalConfig.SHOW_DENG_SHI,n.COMP_MESS=this.globalConfig.COMP_MESS,n.SENSING_AREA=this.globalConfig.SENSING_AREA,n.BTN_NAME=this.globalConfig.BTN_NAME,n.play=this.globalConfig.play,n.ZULI_NUM=this.globalConfig.ZULI_NUM,n.backgroundColorImg=this.main.backgroundManager.getData(),n.dataArr=t,7===this.globalConfig.version&&(n.ElecFamilyPowerData=this.main.getCurModuleMain().getElecFamilyPowerData()),n.view=this.main.labEditRect.getViewRect(),n.confVer=this.globalConfig.confVer,this.main.activeModule&&(this.main.globalConfig.isForceAndMotion()&&(n.forceAndMotionData=this.main.activeModule.getData()),n.moduleData=this.main.activeModule.getData()),n}},{key:"destroy",value:function(){this.versionManager.destroy(),this.versionManager=null,this.main=null,this.globalConfig=null}},{key:"restoreLocalData",value:function(){var t=localStorage.getItem("nb_physics_data");t&&(this.nbPhysicsData=JSON.parse(t),this.globalConfig.MENU_LOCATION=this.nbPhysicsData.MENU_LOCATION)}},{key:"saveLocalData",value:function(){this.nbPhysicsData.MENU_LOCATION=this.globalConfig.MENU_LOCATION,localStorage.setItem("nb_physics_data",JSON.stringify(this.nbPhysicsData))}}]),e}(PIXI.Container);E._setPageDataArr=[],E.LOAD_TOOL_COMPLETE="loadToolComplete",e["default"]=E},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function o(){i(this,o)};r.DRAG="drag",r.MOVE="move",r.DRAW="",r.TOOL=4,r.DRAW_RECT="rect",r.DRAW_ROUND_RECT=6,r.DRAW_CIRCLE="circle",r.DRAW_TRIANGLE="triangle",r.DRAW_DELTOID=8,r.DRAW_RIGHT_TRIANGLE=9,r.DRAW_ARROW=10,r.DRAW_DARROW=11,r.DRAW_LINGXING=12,r.DRAW_QIPAO=13,r.DRAW_RECT_QIPAO=14,r.DRAW_FIVE_SHAPE=15,r.DRAW_FIVE_STAR=16,r.DRAW_ZIDINGYI="poly",r.DRAW_PEN="pen",r.DRAW_GEAR="gear",r.DRAW_LAND="rope",r.TOOL_ZHOUCHENG="bearing",r.TOOL_SPRING="spring",r.TOOL_GUDING="fixed",r.TOOL_PUSH="thruster",r.TOOL_KNIFE="slice",r.TOOL_ROTATE="rota",e["default"]=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function b(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:b(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},l=n(0),c=n(47),f=i(c),h=n(154),d=i(h),p=n(70),v=i(p),y=n(38),g=i(y),_=n(6),m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(_);e["default"]=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.main=t,n.removeEquipmentHandleProx=n.removeEquipmentHandle.bind(n),n.main.addEventListener(g["default"].REMOVE_EQUIPMENT,n.removeEquipmentHandleProx),n.tipSetDefautOK=m.debounce(function(t){window.winTool&&window.winTool.topMsg("“"+t+"”默认值设置成功")},500),n}return a(e,t),s(e,[{key:"init",value:function(){}},{key:"addClickConf",value:function(t){var e=this,n=void 0,i=!1,r=new l.Point;t._clickConfId||(t._clickConfId=l.M.addTouch(t,{begin:function(t){i=!1,l.M.setSPPoint(r,t.data.global),t.data&&t.data.global&&(n=new l.Point(t.data.global.x,t.data.global.y))},move:function(t){if(t.data&&t.data.global){var r=new l.Point(t.data.global.x,t.data.global.y);!i&&l.M.getPointLen(n,r)>20&&(i=!0,e.main.hideConfPan())}},end:function(n){if(i)return void(i=!1);15>l.M.getPointLen(n.data.global,r)&&t.component&&(t.component.getConfJumpTarget?e.main.setCurElec.call(e.main,t.component.getConfJumpTarget,!0):e.main.setCurElec.call(e.main,t.component,!0))}}))}},{key:"removeEquipmentHandle",value:function(t){for(var e=t.equipments,n=0;e&&e.length>n;n++){var i=e[n];i&&i._clickConfId&&(l.M.removeTouch(i,i._clickConfId),i._clickConfId=null)}}},{key:"createGSObj",value:function(t,e){var n=this.main,i={};for(var r in t)"callBack"!=r&&("value"==r||"checked"==r?function(r){Object.defineProperty(i,r,{get:function(){return t[this]}.bind(r),set:function(i){if(t[this]=i,t.callBack)t.callBack.call(t["this"]||e["this"],t);else{var r={};for(var o in e)r[o]=e[o];r.confArr=l.ArrayUtil.copy(e.confArr),r.confArr.shift()}n.showElecTipMess()}.bind(r)})}(r):i[r]=t[r]);return isNaN(t.showValue)&&!t.showValue||function(){Object.defineProperty(i,"showValue",{get:function(){return i.frame2_showValueChangeFunc&&(t._ori_showValue===undefined?t._ori_showValue=t.showValue:t._ori_showValue!==t.showValue&&(t._ori_showValue=t.showValue,i.frame2_showValueChangeFunc())),t.showValue},set:function(i){if(t.showValue=i,t.type===d["default"].SELECT&&(t.checked=l.ArrayUtil.getIndexFromValue(t.value,t.showValue)),t.callBack){t.callBack.call(t["this"]||e["this"],t)}else{var r={};for(var o in e)r[o]=e[o];r.confArr=l.ArrayUtil.copy(e.confArr),r.confArr.shift()}n.showElecTipMess()}})}(),t.type===d["default"].BUTTON&&t.callBack&&function(){Object.defineProperty(i,"value",{get:function(){return 1},set:function(i){var r=t["this"]||e["this"];t.callBack.call(r,t),r.freshLibPan(),n.showElecTipMess()}})}(),i}},{key:"setConfPan",value:function(t){var e=this;if(this.main.curElec){var n=this.main.curElec.getConf();n=this.main.curElec.getConfEnd(n),n["this"]||(n["this"]=this.main.curElec);var i=this.main.curElec.elecLable;this.main.curElec.rootData&&this.main.curElec.rootData.lan_key&&(i=v["default"].getLocaleStr(this.main.curElec.rootData.lan_key)),n.confArr.unshift({type:d["default"].LABEL,name:v["default"].getLocaleStr("name"),value:i,isTitle:!0}),this.main.curElec.canMagReversal&&n.confArr.push(d["default"].getSwitch("磁场倒置",this.main.curElec.hasMagReversal,function(t){e.main.curElec.hasMagReversal=t.checked,e.main.curElec.magReversal.call(e.main.curElec)})),this.main.curElec.canRotate&&n.confArr.push(d["default"].getTextInput("旋转角度",Math.round(l.M.toAngle(this.main.curElec.componentBox.rotation)),"",function(t){e.main.curElec.componentBox.rotation=l.M.toHu(l.M.getNumStr(t.showValue)-0)})),Object.keys(this.main.curElec.getDefaultSetting()).length>0&&n.confArr.push({type:d["default"].DOUBLE_BUTTON,value:1,textA:"作为默认",textB:"使用初始值",callBack:function(t){1===t.value?e.main.curElec.saveElecSetting():(e.main.curElec.deleteElecSetting(),e.main.curElec.defaultSettingChanged(),e.main.curElec.freshLibPan(),e.main.curElec.freshTipMess()),e.tipSetDefautOK(e.main.curElec.elecLable)}});var r=[];n.confArr.forEach(function(t){r.push(e.createGSObj(t,n))}),n.confArr=r,n.commandType=1;var o=this.main.curElec.getElecGlobalBounds(),a=PIXI.settings.RESOLUTION;o.x*=a,o.y*=a,o.width*=a,o.height*=a,n.childRect=o,n["this"].canReset&&(n.needReset=!0),n["this"].canReversal&&(n.needReversal=!0),n["this"].isBreak&&n["this"].canShowRepairBtn&&(n.needRepair=!0),n["this"].isShortCircuit&&(n.needRepair=!0),n["this"].canLeveling&&(n.needLeveling=!0),n["this"].canRandom&&(n.needRandom=!0),n["this"].canShowNei&&(n.needShowNei=!0),n.uid=this.main.curElec.UID,n.force=t,this.main.showConfPan(n)}}},{key:"bottomBtnsClick",value:function(t){switch(t){case 1:1==this.main.globalConfig.VOLUME&&this.main.globalConfig.SoundTool.registAndPlay(f["default"].DELETE_SOUND),this.main.removeEquipment.call(this.main,this.main.curElec,!1,!0),this.main.showMess(""),this.main.view.rotateComp.show(!1);break;case 2:this.main.curElec.reset.call(this.main.curElec);break;case 3:this.main.curElec.reversal.call(this.main.curElec);break;case 4:this.main.curElec.repair.call(this.main.curElec);break;case 5:this.main.curElec.clickLeveling.call(this.main.curElec);break;case 6:this.main.curElec.clickRandom.call(this.main.curElec);break;case 7:this.main.curElec.clickShowNei.call(this.main.curElec)}}},{key:"destroy",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.main.removeEventListener(g["default"].REMOVE_EQUIPMENT,this.removeEquipmentHandleProx),this.main=null}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);e["default"]=function(){function t(e){i(this,t),this.main=e,this.globalConfig=this.main.globalConfig,this.compArr=[],this.originData=null,this.dataMap=new o.HashMap,this.nameMap={};var n=void 0;for(n=1;9>=n;n++)this.nameMap[n]=new o.HashMap}return r(t,[{key:"destroy",value:function(){this.main=null}},{key:"init",value:function(){var t=this;return new Promise(function(e,n){$.getJSON(t.main.globalConfig.toolJsonURL,function(i,r){if("success"===r){var o=i.modules;t.originData=o,o.forEach(function(e){var n=e.type;t.nameMap[e.id].grade=e.grade,e.list.forEach(function(e){var i=e.typeid;e.versionName=n,t.nameMap[i].put(e.definitionName,e)})}),e()}else n()})})}},{key:"load",value:function(){var t=this;o.ArrayUtil.clear(this.compArr),this.nameMap[this.main.globalConfig.version]&&this.globalConfig.isGradeValid(this.nameMap[this.main.globalConfig.version].grade)&&this.nameMap[this.main.globalConfig.version].forEach(function(e){t.globalConfig.isGradeValid(e.grade)&&t.compArr.push(e)})}},{key:"getEquipmentSetting",value:function(t){return this.nameMap[this.main.globalConfig.version].get(t)}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(156),u=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){i(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.classifyed="classifyed",t}return o(e,t),a(e,[{key:"execute",value:function(t){return t}}]),e}(u["default"])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){var n=[],i=!0,r=!1,o=undefined;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=(n(0),n(156)),l=function(t){return t&&t.__esModule?t:{"default":t}}(u);t.exports=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),s(e,[{key:"getOriginPositon",value:function(t){var e=this.root,n=e.getWindowDoorSize(),i=a(n,2),r=i[0],o=i[1];r*=.5;var s=r*t*2,u=e.H/this.root.globalConfig.canvasHeight,l=o-50;return l*=u,l=-(5e3*t-l),{x:s,y:l}}},{key:"execute",value:function(t){if(!isNaN(t.dataVersion)&&t.dataVersion>1)return t;if(!t.properties)return t;var e=t.properties.data.view,n=e.scaleX,i=this.getOriginPositon(n),r=(e.x-i.x)/n,o=(e.y-i.y)/n;e.x=i.x,e.y=i.y;var a=t.properties.data.ElecFamilyPareP;a&&(a.x+=r,a.y+=o);for(var s=t.properties.data.dataArr,u=0;s.length>u;u++){var l=s[u];if("ElecWire"===l.classname){l.h1_x+=r,l.h1_y+=o,l.h2_x+=r,l.h2_y+=o;var c=l.pArr;if(c)for(var f=0;c.length>f;f++){var h=c[f];h.x+=r,h.y+=o}}else!0===l.isMechanics?(l.posx+=r,l.posy+=o,l.thisX+=r,l.thisY+=o,this.mechanOption(l,r,o)):(7===parseInt(l.cateid)&&this.familyOption(l,r,o),l.positionX+=r,l.positionY+=o)}return t}},{key:"familyOption",value:function(t,e,n){"ElecFamilyWire"===t.classname||t.hasOwnProperty("bindCharX")&&(t.bindCharX+=e,t.bindCharY+=n)}},{key:"mechanOption",value:function(t,e,n){if("WeightBox"===t.classname)for(var i=["p5","p10","p20_1","p20_2","p50","p100_1","p100_2","p200"],r=0;8>r;r++)t[i[r]].x+=e,t[i[r]].y+=n;"PullComp"===t.classname&&(t.lhock.x+=e,t.lhock.y+=n,t.hasOwnProperty("danhock")&&(t.danhock.x+=e,t.danhock.y+=n))}}]),e}(l["default"])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e["default"]=[{valid:!0,DataFilter:i(n(395))["default"]},{valid:!0,DataFilter:i(n(396))["default"]}]},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=n(67),l=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.DEBUG=!1,n.main=t,n.rangeRect=new s.Rectangle;var o=new PIXI.Graphics;return n.addChild(o),n.rectG=o,n.rectG.visible=!1,n.enabled=!1,n.offsetP=new s.Point,n.kper=1,n.dper=1,n.viewRectPObj={p1:new s.Point,p2:new s.Point},n.DEBUG&&n.testDataDebug(),n}return o(e,t),a(e,[{key:"getDomRect",value:function(){var t=this.rangeRect,e=this.rangeRect.outWidth||$canvasW,n=this.rangeRect.outHeight||$canvasH;return new s.Rectangle((e-t.width)/2,(n-t.height)/2,t.width,t.height)}},{key:"resize",value:function(){if(this.main.editRectEnabled&&this.rectG.visible){var t=this.main,e=this.rangeRect,n=$(t.canvas).width(),i=$(t.canvas).height(),r=t.W/n;t.editRectEnabled&&(this.rangeRect.outWidth=$("#libBody").width()?n-$("#libBody").width():n,this.rangeRect.outHeight=i);var o=this.rangeRect.outWidth||n,a=this.rangeRect.outHeight||i,u=e.width*r,l=e.height*r,c=(o-e.width)/2*r,f=(a-e.height)/2*r,h=this.rectG;h.clear(),h.lineStyle(8,16741936),s.M.drawDashedRect(h,new s.Point(c,f),new s.Point(c+u,f),new s.Point(c+u,f+l),new s.Point(c,f+l),20,20);var d=this.main.stage.toLocal(new s.Point(c,f),h),p=this.main.stage.toLocal(new s.Point(c+u,f+l),h);s.M.setSPPoint(this.viewRectPObj.p1,d),s.M.setSPPoint(this.viewRectPObj.p2,p),this.main.freshRender()}}},{key:"showEditRect",value:function(t){var e=this.main;if(this.rangeRect&&e.editRectEnabled&&t&&t.width&&t.height&&t.outWidth&&t.outHeight){this.enabled=!0,this.rectG.visible=!0,this.setEditRect(t),this.resize();var n=this.rangeRect.outWidth||$(e.canvas).width(),i=this.rangeRect.outHeight||$(e.canvas).height();this.offsetP.x=(n-this.rangeRect.width)/2,this.offsetP.y=(i-this.rangeRect.height)/2}}},{key:"setEditRect",value:function(t){this.rangeRect.outWidth=t.outWidth,this.rangeRect.outHeight=t.outHeight,this.rangeRect.width=t.width,this.rangeRect.height=t.height}},{key:"getViewRect",value:function(){var t=this.main,e=void 0;if(t.editRectEnabled&&this.enabled){var n=this.kper,i=this.dper,r=this.cper,o=(t.view.x-this.offsetP.x*i)*r/n,a=(t.view.y-this.offsetP.y*i)*r/n,s=t.view.scale.x/n*r;e={x:o,y:a,scaleX:s,scaleY:s}}else e={x:t.view.x,y:t.view.y,scaleX:t.view.scale.x,scaleY:t.view.scale.y};return e}},{key:"setViewRect",value:function(t){var e=this.main;if(e.editRectEnabled&&this.enabled){var n=this.rangeRect,i=l["default"].W/l["default"].H,r=n.width/n.height,o=void 0;n.width/n.height>l["default"].W/l["default"].H?(l["default"].W*(r/i),o=l["default"].H):(o=l["default"].H/(r/i),l["default"].W);var a=o/e.H;this.cper=a;var s=n.height/$(e.canvas).height();this.kper=s;var u=e.H/$(e.canvas).height();this.dper=u,e.view.x=t.x*s/a+this.offsetP.x*u,e.view.y=t.y*s/a+this.offsetP.y*u,e.view.scale.x=t.scaleX*s/a,e.view.scale.y=e.view.scale.x}else e.view.scale.x=t.scaleX,e.view.scale.y=t.scaleY,e.view.x=t.x,e.view.y=t.y}},{key:"destroy",value:function(){this.main=null}},{key:"testDataDebug",value:function(){var t=this;setTimeout(function(){t.main.setData('{"id":"147599865421824","num":1,"sceneid":7208,"pageid":7143,"type":"6","css":{"zIndex":"1"},"properties":{"canvas":"","data":{"containsVipequ":false,"version":1,"showElecLine":true,"SHOWEQUVALUE":true,"SHOWTIPPAO":true,"SHOW_FLAG_LABEL":true,"VOLUME":1,"OPEN_ANGLE":false,"SHOW_REFLECT":false,"SHOW_DIRECTION":false,"SHOW_ZULI":false,"ZULI_NUM":9.8,"backgroundColorImg":{"colors":{"direction":0,"arr":["#53585f"]},"textureSelected":null},"dataArr":[{"uid":1475998134588,"classname":"ElecSinglePloeSingleThrowSwitch","cateid":"1","positionX":148.1495327102998,"positionY":4320.344531306533,"rotation":0,"loadLevel":5,"notexture":"0","isBreak":true,"flagLabel":"S1","Resistance":0.00001,"Power":0,"hasReversal":false,"flabel1txt":"S","flabel2txt":"1","daoRotation":-0.48},{"uid":1475998111044,"classname":"BatteryHolder","cateid":"1","positionX":-857.5555555556,"positionY":4317.532441703534,"rotation":0,"loadLevel":5,"notexture":"0","isBreak":false,"flagLabel":"E1","Resistance":0.00001,"Power":3,"hasReversal":false,"flabel1txt":"E","flabel2txt":"1","bgCurrentFrame":1},{"uid":1475998111572,"classname":"ElecLampAndHolder","cateid":"1","positionX":-307.18380062310007,"positionY":4331.717313712933,"rotation":0,"loadLevel":5,"notexture":"0","isBreak":false,"flagLabel":"L1","Resistance":2.5,"Power":0,"hasReversal":false,"flabel1txt":"L","flabel2txt":"1","ratedV":3,"ratedP":3.6,"isShortCircuit":false},{"uid":1475998122959,"classname":"InlandAmpereMeter","cateid":"1","positionX":-2.209761162999939,"positionY":3764.298267168443,"rotation":0,"loadLevel":5,"notexture":"0","isBreak":false,"flagLabel":"A1","Resistance":0.00001,"Power":0,"hasReversal":false,"flabel1txt":"A","flabel2txt":"1","validNum":2,"bar2Resistance":0.00007},{"uid":1475998125298,"classname":"ElecSlideRheostat","cateid":"1","positionX":-677.4080996885,"positionY":3821.038183748883,"rotation":0,"loadLevel":5,"notexture":"0","isBreak":false,"Resistance":0.00001,"Power":0,"hasReversal":false,"dragerX":-147,"maxRes":20,"canFuse":false,"fuseValue":2},{"uid":1475998142905,"classname":"ElecWire","cateid":"1","positionX":1246,"positionY":833,"rotation":0,"loadLevel":4,"notexture":"0","isBreak":false,"Resistance":0.00001,"Power":0,"hasReversal":false,"isDrawType":false,"colorIndex":0,"h1_x":-990.5504672897002,"h1_y":3503.9945313065327,"h2_x":-1171.209761163,"h2_y":3008.298267168443,"h1IsNearToBinding":true,"h2IsNearToBinding":true,"pArr":[{"x":-990.5504672897002,"y":3503.9945313065327},{"x":-876.5669781931001,"y":3504.3690986542433},{"x":-882.2409138109999,"y":2999.3876551172643},{"x":-1171.209761163,"y":3008.298267168443}]},{"uid":1475998142573,"classname":"ElecWire","cateid":"1","positionX":1226,"positionY":733,"rotation":0,"loadLevel":4,"notexture":"0","isBreak":false,"Resistance":0.00001,"Power":0,"hasReversal":false,"isDrawType":false,"colorIndex":0,"h1_x":-2243.5555555556,"h1_y":3604.5324417035336,"h2_x":-2094.9080996885,"h2_y":3015.988183748883,"h1IsNearToBinding":true,"h2IsNearToBinding":true,"pArr":[{"x":-2243.5555555556,"y":3604.5324417035336},{"x":-2246.68120456906,"y":3036.974218275614},{"x":-2094.9080996885,"y":3015.988183748883}]},{"uid":1475998142752,"classname":"ElecWire","cateid":"1","positionX":1236,"positionY":783,"rotation":0,"loadLevel":4,"notexture":"0","isBreak":false,"Resistance":0.00001,"Power":0,"hasReversal":false,"isDrawType":false,"colorIndex":0,"h1_x":-1738.9080996885,"h1_y":3067.988183748883,"h2_x":-1318.459761163,"h2_y":3058.298267168443,"h1IsNearToBinding":true,"h2IsNearToBinding":true,"pArr":[{"x":-1738.9080996885,"y":3067.988183748883},{"x":-1318.459761163,"y":3058.298267168443}]},{"uid":1475998143064,"classname":"ElecWire","cateid":"1","positionX":1256,"positionY":883,"rotation":0,"loadLevel":4,"notexture":"0","isBreak":false,"Resistance":0.00001,"Power":0,"hasReversal":false,"isDrawType":false,"colorIndex":0,"h1_x":-1477.6338006231001,"h1_y":3450.8173137129334,"h2_x":-1208.4004672897001,"h2_y":3453.9945313065327,"h1IsNearToBinding":true,"h2IsNearToBinding":true,"pArr":[{"x":-1477.6338006231001,"y":3450.8173137129334},{"x":-1208.4004672897001,"y":3453.9945313065327}]},{"uid":1475998143232,"classname":"ElecWire","cateid":"1","positionX":1266,"positionY":933,"rotation":0,"loadLevel":4,"notexture":"0","isBreak":false,"Resistance":0.00001,"Power":0,"hasReversal":false,"isDrawType":false,"colorIndex":0,"h1_x":-1958.5555555556,"h1_y":3404.5324417035336,"h2_x":-1659.6838006231,"h2_y":3400.8173137129334,"h1IsNearToBinding":true,"h2IsNearToBinding":true,"pArr":[{"x":-1958.5555555556,"y":3404.5324417035336},{"x":-1659.6838006231,"y":3400.8173137129334}]}],"view":{"x":1951.678203208806,"y":-6190.027148527082,"scaleX":1.7508942307376716,"scaleY":1.7508942307376716},"confVer":"1.0.0","moduleData":{}}},"dataVersion":2}')},3e3)}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(349),l=i(u),c=n(9),f=i(c),h=n(21),d=i(h),p=n(7),v=i(p),y=n(66),g=i(y),_=n(217),m=i(_);e["default"]=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.main=t,n.once("added",n.addedToStage),n._selectedObj=null,n.selectedBody=null,n.notSelect=!1,n.canvasRunHandleProxy=n.canvasRunHandle.bind(n),t.addEventListener(d["default"].CANVAS_RUN,n.canvasRunHandleProxy),n.once("added",function(){n.canvasRunHandle({isRunning:n.main.isRunning})}),n}return a(e,t),s(e,[{key:"canvasRunHandle",value:function(t){this.setActive(t.isRunning)}},{key:"setActive",value:function(t){}},{key:"destroy",value:function(){this.main.removeEventListener(d["default"].CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandleProxy=null;var t=this.parent,e=t.parent;this.removeEventListener("clear",this.clearSelectionObjProx),this.clearSelectionObjProx=null,this.removeEventListener("select",this.touchEndProx),this.touchEndProx=null,t.removeEventListener(d["default"].change.ZOOM,this.zoomHandleProx),this.zoomHandleProx=null,t.removeEventListener(d["default"].change.ZOOM_COMPLETE,this.zoomCompleteHandleProx),this.zoomCompleteHandleProx=null,this.backG.removeEventListener(TouchEvent.TOUCH_BEGIN,this.touchBeginProx),this.touchBeginProx=null,e.removeEventListener(TouchEvent.TOUCH_BEGIN,this.touchBeginHandleProx),this.touchBeginHandleProx=null,this.backG.removeEventListener(TouchEvent.TOUCH_MOVE,this.touchMoveProx),this.touchMoveProx=null,this.backG.removeEventListener(TouchEvent.TOUCH_END,this.touchEndProx),this.touchEndProx=null,this.backG.removeEventListener(TouchEvent.TOUCH_END_OUTSIDE,this.touchEndProx),this.touchEndProx=null,this.selectedObjBeginProx=null,this.selectedObjMoveProx=null,this.selectedObjEndProx=null,this.selectedObj=null,this.selectedBody=null,this.main=null,this.backG=null}},{key:"addItem",value:function(t){null===this.selectedObj?this.selectedObj=[t]:-1===this.selectedObj.indexOf(t)&&this.selectedObj.push(t)}},{key:"removeItem",value:function(t){var e=this.selectedObj.indexOf(t);-1!=e&&this.selectedObj.slice(e,1)}},{key:"cannotSelect",value:function(t){this.notSelect=t,this.zoom.setGestureEnabled(!t)}},{key:"addedToStage",value:function(){this.touchID=NaN,this.globalPos=null;var t=this.parent;this.viewContainer=t;var e=t.parent.backG,n=t.parent;this.selectionLayer=e,t.parent.addChildAt(e,0),this._bgLayer=e,this.backG=e,this.zoom=l["default"].zoomGesture(e,t,{maxZoom:f["default"].MAX_SCALE_VALUE,minZoom:f["default"].MIN_SCALE_VALUE}),this.clearSelectionObjProx=this.clearSelectionObj.bind(this),this.touchBeginProx=this.touchBegin.bind(this),this.touchMoveProx=this.touchMove.bind(this),this.touchEndProx=this.touchEnd.bind(this),this.zoomHandleProx=this.zoomHandle.bind(this),this.zoomCompleteHandleProx=this.zoomCompleteHandle.bind(this),this.touchBeginHandleProx=this.touchBeginHandle.bind(this),this.selectedObjBeginProx=this.selectedObjBegin.bind(this),this.selectedObjMoveProx=this.selectedObjMove.bind(this),this.selectedObjEndProx=this.selectedObjEnd.bind(this),this.addEventListener("clear",this.clearSelectionObjProx),this.addEventListener("select",this.touchEndProx),e.addEventListener(TouchEvent.TOUCH_BEGIN,this.touchBeginProx),t.addEventListener(d["default"].change.ZOOM,this.zoomHandleProx),t.addEventListener(d["default"].change.ZOOM_COMPLETE,this.zoomCompleteHandleProx),n.addEventListener(TouchEvent.TOUCH_BEGIN,this.touchBeginHandleProx,!0)}},{key:"zoomHandle",value:function(t){this.viewContainer.parent.emit(d["default"].change.ZOOM,t)}},{key:"zoomCompleteHandle",value:function(){this.viewContainer.parent.execute(v["default"].LOCK_MOVE_SCALE,{tween:!0}),this.viewContainer.activeZoomGesture=!1}},{key:"touchBeginHandle",value:function(t){return}},{key:"clearSelectionObj",value:function(){var t=this;this.selectedObj&&(this.selectedObj.map(function(e){e.dragArea&&(e=e.dragArea),e.removeEventListener(TouchEvent.TOUCH_BEGIN,t.selectedObjBeginProx,!0)}),this.selectedObj=null),this.selectedBody&&this.selectedBody.clear()}},{key:"touchBegin",value:function(t){return}},{key:"touchMove",value:function(t){var e=this,n=this.viewContainer.selectionDraw;n.clear();var i=n.startPoint.x,r=n.startPoint.y,o=Math.min(i,t.data.global.x),a=Math.min(r,t.data.global.y),s=Math.max(i,t.data.global.x),u=Math.max(r,t.data.global.y),l=s-o,c=u-a;if(l>=5||c>=5){n.lineStyle(2,16777215,1),n.beginFill(16777215,.15),n.drawRect(o,a,l,c);if((this.selectedObj=this.viewContainer.topLayer.renderSelectionArea(new PIXI.Rectangle(o,a,l,c)))&&this.selectedObj.length>0){this.viewContainer.parent.execute(v["default"].SELECT_MOVE_BODY_FILTER,{type:"begin",data:t.data}),this.selectedBody&&this.selectedBody.forEach(function(t){if(t&&t.userData&&t.userData.view){var n=t.userData.view;n.selectTarget?e.selectedObj.push(n.selectTarget):n.parent&&n.parent.component&&e.selectedObj.push(n.parent)}})}}}},{key:"touchEnd",value:function(t){var e=this,n=this.viewContainer.parent,i=this.viewContainer.selectionDraw;this.backG.removeEventListener(TouchEvent.TOUCH_MOVE,this.touchMoveProx),this.backG.removeEventListener(TouchEvent.TOUCH_END,this.touchEndProx),this.backG.removeEventListener(TouchEvent.TOUCH_END_OUTSIDE,this.touchEndProx),i&&(i.clear(),i.visible=!1),this.root&&(this.selectedObj&&this.selectedObj.length>1||this.root.nape&&!this.root.nape.play&&this.selectedObj&&this.selectedObj.length>0)&&(this.selectedObj.map(function(t){t.dragArea&&(t=t.dragArea),t.addEventListener(TouchEvent.TOUCH_BEGIN,e.selectedObjBeginProx,!0,1)}),n.execute(v["default"].undo.SELECT_CHILDREN,{childern:this.selectedObj}))}},{key:"selectOneToReadyMove",value:function(t){var e=this.viewContainer.parent;if(!this.selectedObj||1!=this.selectedObj.length||-1==this.selectedObj.indexOf(t)){this.selectedObj=[t];var n=t.component;n&&n.isMechanics&&(e.execute(v["default"].SELECT_MOVE_BODY_FILTER,{type:"begin",data:null}),this.selectedObj=[t]),t.addEventListener(TouchEvent.TOUCH_BEGIN,this.selectedObjBeginProx,!0,1)}}},{key:"selectOneBodyToReadyMove",value:function(t,e){if(!this.selectedObj||1!=this.selectedObj.length||-1==this.selectedObj.indexOf(t)){this.selectedObj=[t];this.viewContainer.parent.execute(v["default"].SELECT_MOVE_BODY_FILTER,{type:"begin",data:e}),t.addEventListener(TouchEvent.TOUCH_BEGIN,this.selectedObjBeginProx,!0,1)}}},{key:"selectedObjBegin",value:function(t){if(t.stopImmediatePropagation(),this.root.nape){var e=this.root.nape.getTouchManager().currentType;if(e!=m["default"].DRAG&&e!=m["default"].MOVE)return void clearSelectionObj()}if("touchstart"===t.type){if(!isNaN(this.touchID))return;this.touchID=t.data.identifier}this.globalPos={x:t.data.global.x,y:t.data.global.y},t.target.addEventListener(TouchEvent.TOUCH_MOVE,this.selectedObjMoveProx),t.target.addEventListener(TouchEvent.TOUCH_END,this.selectedObjEndProx),t.target.addEventListener(TouchEvent.TOUCH_END_OUTSIDE,this.selectedObjEndProx),this.selectedObj&&this.selectedObj.map(function(e){e._lastTouchPoint_={x:e.x,y:e.y},e.emit(g["default"].event.START_DRAG,{target:e,data:t.data})})}},{key:"selectedObjMove",value:function(t){var e=this;if(t.data.identifier===this.touchID||"touchmove"!==t.type){var n=t.data.global.x-this.globalPos.x,i=t.data.global.y-this.globalPos.y;this.globalPos={x:t.data.global.x,y:t.data.global.y};var r=this.viewContainer.scale.x;if(this.selectedBody&&this.selectedBody.size>0){this.viewContainer.parent.execute(v["default"].SELECT_MOVE_BODY_FILTER,{type:"move",data:{x:n/r,y:i/r}})}this.selectedObj&&this.selectedObj.map(function(o){if(null===o.position){var a=e.selectedObj.indexOf(o);return void e.selectedObj.splice(a,1)}var s=o.component;s&&s.isMechanics||(o.x+=n/r,o.y+=i/r,o.emit(g["default"].event.DRAG_MOVE,{target:o,data:t.data}))})}}},{key:"selectedObjEnd",value:function(t){this.touchID=NaN;var e=this.viewContainer.parent;t.target.removeEventListener(TouchEvent.TOUCH_MOVE,this.selectedObjMoveProx),t.target.removeEventListener(TouchEvent.TOUCH_END,this.selectedObjEndProx),t.target.removeEventListener(TouchEvent.TOUCH_END_OUTSIDE,this.selectedObjEndProx),this.selectedBody&&this.selectedBody.size>0&&e.execute(v["default"].SELECT_MOVE_BODY_FILTER,{type:"end",data:t.data}),e.execute(v["default"].undo.SELECT_MOVE,{children:this.selectedObj}),this.selectedObj.map(function(e){e.emit("moveEnd",{target:e,data:t.data}),e.emit(g["default"].event.STOP_DRAG,{target:e,data:t.data})})}},{key:"stopSelection",value:function(){this.emit("select")}},{key:"clear",value:function(){this.selectedObj&&this.emit("clear")}},{key:"requestAnimationLoop",value:function(){this.render()}},{key:"render",value:function(){if(this.viewContainer){this.viewContainer.topLayer.renderSelectedObj(this.selectedObj)}}},{key:"selectedChildren",value:function(t){var e=this;this.clear(),t.map(function(t){e.selectedObj||(e.selectedObj=[]),e.selectedObj.push(t)}),this.emit("select")}},{key:"selectedObj",get:function(){return this._selectedObj},set:function(t){this._selectedObj=t}},{key:"bgLayer",get:function(){return this._bgLayer}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0);e["default"]=function(t){function e(t){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),a(e,[{key:"init",value:function(){}},{key:"add",value:function(t,e){this.addChild(t),t.__getPos=e,this.fresh()}},{key:"remove",value:function(t){this.removeChild(t)}},{key:"fresh",value:function(){var t=this;this.children.forEach(function(e){if(e.__getPos){var n=e.__getPos(),i=n.p,r=n.fromTar;if(r){var o=t.toLocal(i,r);s.M.setSPPoint(e,o)}}})}},{key:"viewZoomComplete",value:function(){this.fresh()}},{key:"viewMoveComplete",value:function(){this.fresh()}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=(n(0),n(10)),u=n(403),l=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.main=t,n.touchObj=null,n.quanArr=[],n}return o(e,t),a(e,[{key:"init",value:function(){}},{key:"tipBegin",value:function(t){this.main.globalConfig.SENSING_AREA&&(this.touchObj||(this.touchObj=t))}},{key:"tipMove",value:function(){this.touchObj&&(1!==this.touchObj.type&&2!==this.touchObj.type||this.freshWireBindingerShow(this.touchObj.target,this.touchObj.type))}},{key:"tipEnd",value:function(){this.touchObj&&(this.touchObj=null,this.hideQuanArr()),this.gou&&this.mec_hideHitCircle()}},{key:"hideQuanArr",value:function(){var t=!0,e=!1,n=undefined;try{for(var i,r=this.quanArr[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;o.inTweenQuanUse&&(o.inTweenQuanUse=!1,o.hide())}}catch(a){e=!0,n=a}finally{try{!t&&r["return"]&&r["return"]()}finally{if(e)throw n}}}},{key:"freshWireBindingerShow",value:function(t,e){}},{key:"requestAnimationLoop",value:function(){}},{key:"createTweenQuan",value:function(){var t=void 0,e=!0,n=!1,i=undefined;try{for(var r,o=this.quanArr[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value;if(!a.visible){t=a;break}}}catch(s){n=!0,i=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw i}}return t||(t=new l["default"],this.addChild(t),this.quanArr.push(t)),t}},{key:"mec_showHitCircle",value:function(t){this.gou||t&&(this.gou=t,this.freshGouShow())}},{key:"mec_hideHitCircle",value:function(){this.gou=null,this.hideQuanArr()}},{key:"freshGouShow",value:function(){}},{key:"destroy",value:function(){this.main.removeEventListener(s.PHY_EVENTS.TIP_TOP_BEGIN,this.tipBeginProx),this.main.removeEventListener(s.PHY_EVENTS.CANVAS_MOVE,this.tipMoveProx),this.main.removeEventListener(s.PHY_EVENTS.DOCUMENT_END,this.tipEndProx),this.main=null}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=n(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}(u);e["default"]=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.main=t,n.selectionGra=new PIXI.Graphics,n.addChild(n.selectionGra),n.addTouchHandle(),n}return o(e,t),a(e,[{key:"init",value:function(){var t=this;this.rotateComp=this.main.view.rotateComp,s.M.addTouch(this.selectionGra,{begin:function(e){"ElecWire"!==t.main.curElec.classname&&t.main.curElec.parent.dispatchEvent(TouchEvent.TOUCH_BEGIN,e)},move:function(e){"ElecWire"!==t.main.curElec.classname&&t.main.curElec.parent.dispatchEvent(TouchEvent.TOUCH_MOVE,e)},end:function(e){"ElecWire"!==t.main.curElec.classname&&t.main.curElec.parent.dispatchEvent(TouchEvent.TOUCH_END,e)}})}},{key:"renderSelectionArea",value:function(t){var e=this.parent,n=e.viewStack,i=n.children,r=[];if(t){var o=!0,a=!1,s=undefined;try{for(var u,l=i[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value,f=void 0;if(c.component){if(c.component.noRenderSelected)continue;var h=void 0;c.component.selectRenderChild&&(h=c.component.selectRenderChild()),f=h||(c.component.isMechanics?c.component.getBounds():c.getBounds())}else f=c.getBounds();var d=!1;f&&t&&f.intersect&&(d=f.intersect(t)),d&&c.component.allowMultiSelected&&r.push(c)}}catch(p){a=!0,s=p}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw s}}}return this.renderSelectedObj(r),r}},{key:"renderSelectedObj",value:function(t){var e=this,n=this.selectionGra;if(this._hasDraw&&(this._hasDraw=!1,n.clear()),!t)return void this.rotateComp.show(!1);this._hasDraw=!0;var i=this.parent.scale.x;if(t=t.filter(function(t){return!!l.has(t,"children")&&!l.get(t,"component.noRenderSelected",!0)}),!t.length)return void this.rotateComp.show(!1);t.forEach(function(t){var r=t.component.canRotate?t.component.getLocalBoundsElecs()[0]:t.component,o=t.component.getSelectionPoints(),a=o.tl,u=o.tr,l=o.bl,c=o.br;n.lineStyle(null),n.beginFill(8421504,.2),a=n.toLocal(a,r),u=n.toLocal(u,r),l=n.toLocal(l,r),c=n.toLocal(c,r);var f=e.main.globalConfig.SELECTION_RADIUS/e.main.view.scale.x,h=s.M.getXianDianByDis(f,!0,a,u),d=s.M.getXianDianByDis(f,!0,u,a),p=s.M.getXianDianByDis(f,!0,u,c),v=s.M.getXianDianByDis(f,!0,c,u),y=s.M.getXianDianByDis(f,!0,c,l),g=s.M.getXianDianByDis(f,!0,l,c),_=s.M.getXianDianByDis(f,!0,l,a),m=s.M.getXianDianByDis(f,!0,a,l);n.moveTo(m.x,m.y),n.quadraticCurveTo(a.x,a.y,h.x,h.y),n.lineTo(d.x,d.y),n.quadraticCurveTo(u.x,u.y,p.x,p.y),n.lineTo(v.x,v.y),n.quadraticCurveTo(c.x,c.y,y.x,y.y),n.lineTo(g.x,g.y),n.quadraticCurveTo(l.x,l.y,_.x,_.y),n.lineTo(m.x,m.y),n.endFill(),n.lineStyle(2/i,16777215,.9);var b={tl:a,tr:u,bl:l,br:c};if(e.main.curElec){if(e.rotateComp.show(t.component.canRotate||t.component.canReversal),t.component.canRotate){var w=e.drawLineToButton(n,{directionStyle:"top",height:e.main.globalConfig.SELECTION_ROTATION_BTN_DIS,angle:t.component.getRealRotation()},b);e.rotateComp.fresh(w)}}else e.rotateComp.show(!1)})}},{key:"drawLineToButton",value:function(t,e,n){var i=n.tl,r=n.tr,o=n.bl,a=n.br,s=void 0,u=void 0,l={x:0,y:0},c=e.angle,f=e.height;return"top"===e.directionStyle?(s=(i.y+r.y)/2,u=(i.x+r.x)/2,c-=Math.PI/2):"bottom"===e.directionStyle&&(s=(o.y+a.y)/2,u=(o.x+a.x)/2,c+=Math.PI/2),t.moveTo(u,s),l.y=Math.sin(c)*f+s,l.x=Math.cos(c)*f+u,t.lineTo(l.x,l.y),e.newPoint=l,e.gra=t,e}},{key:"addTouchHandle",value:function(){}},{key:"destroy",value:function(){this.removeChild(this.selectionGra),this.selectionGra=null}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e["default"]=function(t){function e(){i(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=new PIXI.Sprite,o=PIXI.Sprite.fromFrame("skin/quan.png");return n.addChild(o),o.x=-o.width/2,o.y=-o.height/2,t.addChild(n),t.box=n,t.scaleObj={loopPer:.2,loopCheck:.01,loopMin:.9,loopMax:1.5,hideStep:.5,hideMax:4},t.state=0,t.inTweenQuanUse=!1,t.interactive=!1,t}return o(e,t),a(e,[{key:"requestAnimationLoop",value:function(){var t=void 0,e=void 0;e=this.box.scale.x>(this.scaleObj.loopMin+this.scaleObj.loopMax)/2?(this.scaleObj.loopMax-this.box.scale.x)*this.scaleObj.loopPer:(this.box.scale.x-this.scaleObj.loopMin)*this.scaleObj.loopPer,1===this.state?(t=this.box.scale.x-e,this.scaleObj.loopCheck>this.box.scale.x-this.scaleObj.loopMin&&(this.state=2)):2===this.state?(t=this.box.scale.x+e,this.scaleObj.loopCheck>this.scaleObj.loopMax-this.box.scale.x&&(this.state=1)):3===this.state&&(t=this.box.scale.x+this.scaleObj.hideStep)>this.scaleObj.hideMax&&(this.visible=!1,this.state=0),t&&(this.box.scale.x=t,this.box.scale.y=t)}},{key:"show",value:function(){1!==this.state&&2!==this.state&&(this.state=1,this.box.scale.x=1,this.box.scale.y=1,this.visible=!0)}},{key:"hide",value:function(){0!==this.state&&(this.state=3)}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function m(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:m(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},l=n(399),c=i(l),f=n(402),h=i(f),d=n(389),p=i(d),v=n(401),y=i(v),g=n(416),_=i(g);e["default"]=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.selectionLayer=new c["default"](t),n.viewBottomStack=new PIXI.Container,n.viewStack=new PIXI.Container,n.viewTopStack=new PIXI.Container,n.drawStack=new PIXI.Container,n.otherContainer=new PIXI.Container,n.rotateComp=new p["default"](t),n.lightDisContainer=new PIXI.Container,n.topLayer=new h["default"](t),n.tipTopLayer=new y["default"](t),n.once("added",function(){n.addChildAt(n.selectionLayer,0),n.addChild(n.lightDisContainer),n.addChild(n.topLayer),n.addChild(n.otherContainer),n.addChild(n.viewBottomStack),n.addChild(n.viewStack),n.addChild(n.tipTopLayer),n.addChild(n.drawStack),n.addChild(n.viewTopStack),n.addChild(n.rotateComp),n.rayPenEffect=new _["default"](t)}),n}return a(e,t),s(e,[{key:"init",value:function(){this.topLayer.init(),this.tipTopLayer.init()}},{key:"destroy",value:function(){this.rotateComp.destroy(),this.removeChild(this.rotateComp),this.rotateComp=null,this.selectionLayer.destroy(),this.removeChild(this.selectionLayer),this.selectionLayer=null,this.topLayer.destroy(),this.removeChild(this.topLayer),this.topLayer=null,this.rayPenEffect&&(this.rayPenEffect.destroy(),this.rayPenEffect=null),this.removeChild(this.lightDisContainer),this.removeChild(this.otherContainer),this.removeChild(this.viewBottomStack),this.removeChild(this.viewStack),this.removeChild(this.viewTopStack),this.removeChild(this.drawStack),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this,!0)}}]),e}(PIXI.Container)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),a=n(20),s=n(10),u=n(47);e["default"]=function(){function t(e){i(this,t),this.main=e,this._addZuCompArr=[],this._inAddZuComp=!1,this._addCompArr=[],this._inAddComp=!1,this.dependClassData=null,this._registerClassSoundData={}}return r(t,[{key:"init",value:function(){var t=this;return new Promise(function(e){$.getJSON(t.main.globalConfig.dependClassJsonURL,function(n,i){if("success"===i){var r=!0,a=!1,s=undefined;try{for(var u,l=Object.keys(n)[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=u.value;!function(t){if(n[t].forEach(function(t){if(t.hasOwnProperty("positionX")||t.hasOwnProperty("positionY")){t.position=new o.Point(t.positionX||0,t.positionY||0)}}),t.indexOf(",")>-1){t.split(",").forEach(function(e){n[e]=n[t]})}}(c)}}catch(f){a=!0,s=f}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw s}}t.dependClassData=n,e()}})})}},{key:"addCompArr",value:function(t,e){var n=this;this.__testInd||(this.__testInd=0),this.__testInd++;var i=[];return t.forEach(function(t){i.push(n.addCompFromClassName(t))}),Promise.all(i).then(function(t){return t.forEach(function(t){t.allowSave=!!e}),t})}},{key:"addCompFromClassName",value:function(t){var e=this;return new Promise(function(n){var i=e.getClassNameArrFromClassName(t.name);e._addCompArr.push({classNameArr:i,position:t.p,resolve:n,dataObj:t.dataObj,classParam:t.classParam,dependEquipments:[]}),e._addCompNext()})}},{key:"_addCompNext",value:function(){if(!this._inAddComp&&this._addCompArr.length){this._inAddComp=!0;this._loadClassArrNoDepend(this._addCompArr.shift())}}},{key:"_loadClassArrNoDepend",value:function(t){this._loadClassDataOne=t,this._checkIsOneNull(t)?(t.resolve(null),this._inAddComp=!1,this._addCompNext()):this._loadClassArrNoDependNext()}},{key:"_checkIsOneNull",value:function(t){return!t.classNameArr||!t.classNameArr.length}},{key:"_loadClassArrNoDependNext",value:function(){var t=this,e=this._loadClassDataOne;if(this._checkIsOneNull(e))return e.zhuEq.addCompComplete.call(e.zhuEq),e.zhuEq.emit(s.PHY_EVENTS.CREATION_COMPLETE),e.resolve(e.zhuEq),this._inAddComp=!1,e.zhuEq=null,void this._addCompNext();if(!this._isInLoadClassArr){this._isInLoadClassArr=!0;var n=e.classNameArr.shift(),i=this.getClassFuncFromClassName(n.className);if(i){var r=function(r){var o=r.parent,a=i.name,u=o.component;r.definitionName=n.className,u.definitionName=r.definitionName,a&&(u.elecLable=a),t.main.startLoadTool.addClickConf.call(t.main.startLoadTool,o),n.isZhu?(r.dependEquipments=e.dependEquipments,o.dataObj=e.dataObj,e.zhuEq=r):(r.allowSave=!1,e.dependEquipments.push(r),r.addCompComplete.call(r),r.emit(s.PHY_EVENTS.CREATION_COMPLETE)),t._isInLoadClassArr=!1,t._loadClassArrNoDependNext()};this.main.registElec(i).then(function(){if(n.isZhu){if("mechanics"===i.type){var o=e.dataObj;!o||isNaN(o.thisX)||isNaN(o.thisY)||(e.position.x=o.thisX,e.position.y=o.thisY)}t.registerClassSounds(n.className,function(){t.main.addEquipment(n.className,i.type,i.classFunc,e.dataObj,e.position,e.classParam,r)})}else{var a=void 0;n.position?e.zhuEq._destroyed||(a=e.zhuEq.toGlobalView(n.position,e.zhuEq)):a=e.position.clone(),e.zhuEq._destroyed||t.registerClassSounds(n.className,function(){t.main.addEquipment(n.className,i.type,i.classFunc,null,a,e.classParam,r)})}})}}}},{key:"registerClassSounds",value:function(t,e){var n=this,i=this.main.globalConfig.SoundTool.SOUND_COMFIG.register[t];if(!i||!i.length)return void e();var r=0;i.forEach(function(t){n.main.globalConfig.SoundTool.register(t,function(){r++,i.length===r&&e()})})}},{key:"getClassNameArrFromClassName",value:function(t){var e=[{className:t,isZhu:!0}],n=this.dependClassData[t];return n&&n.forEach(function(t){e.push({className:t.name,position:t.position,isZhu:!1})}),e}},{key:"getClassFuncFromClassName",value:function(t){var e=this.main.getToolBoxOne(t),n=e.versionName,i=this.main.globalConfig.get_version_from_versionName(n);return{notexture:e.notexture,classFunc:this.main.getModuleMainFromType(a.Modules[i]).constructor.classList[t],classname:t,name:e.name,type:n}}},{key:"destroy",value:function(){this.main=null}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(340),s=i(a),u=n(341),l=i(u),c=n(337),f=i(c),h=n(9),d=i(h);e["default"]=function(){function t(e){r(this,t),this.main=e,this.type=0,this.directionMap=["left","top","left top","left bottom"],this._colors=null,this.textureSelected=0,this.texturePrePath="",this.textureNameArr=null,this.backImg=null}return o(t,[{key:"init",value:function(){this.load()}},{key:"load",value:function(){var t=this;$.getJSON(d["default"].cdn_static+"bground.json",function(e){t.type=e.type,t._colors=e.color.colors[e.color["default"]],t.textureSelected=e.texture["default"],t.texturePrePath=e.texture.prePath,t.textureNameArr=e.texture.nameArr,t._backgroundJsonLoaded=!0,t.setDefaultBackGround()})}},{key:"setDefaultBackGround",value:function(){this._backgroundJsonLoaded&&this.drawBackGround({colors:{direction:2,arr:["#343941"]},textureSelected:-1})}},{key:"drawBackGround",value:function(t){t&&(t=(0,f["default"])(t),this._colors=t.colors||{direction:2,arr:[]},this.textureSelected=t.textureSelected),0===this.colorType?this.main.context.settings.isNBEditorSDK?$(this.main.canvas.parentElement).css("background-color","rgba(0,0,0,0)"):$(this.main.canvas.parentElement).css("background-color","rgba(255,255,255)"):1===this.colorType?$(this.main.canvas.parentElement).css("background-color",this._colors.arr[0]):$(this.main.canvas.parentElement).css("background-color","-webkit-linear-gradient("+this.directionMap[this._colors.direction]+", "+this._colors.arr.join(",")+")"),this.freshTxtColor()}},{key:"freshTxtColor",value:function(t){if(null===t||t===undefined){var e=this._colors.arr.length>0?this._colors.arr[this._colors.arr.length-1]:"#FFFFFF";e="0x"+e.substring(1)-0,t=e>8388607.5?"#000000":"#FFFFFF"}this.main.globalConfig.TXT_COLOR=t,this.main.getEquipmentArr(!0).forEach(function(t){t.freshTxtColor&&t.freshTxtColor.call(t)}),this.main.schoolNameTxt.style.fill=this.main.globalConfig.TXT_COLOR,this.main.schoolNameTxt.updateText()}},{key:"getData",value:function(){return{colors:this._colors,textureSelected:this.textureSelected}}},{key:"setData",value:function(t){if(!t)return void this.setDefaultBackGround();(0,l["default"])(t)&&(t={colors:{direction:0,arr:["#"+t]},textureSelected:null}),this.drawBackGround(t)}},{key:"destroy",value:function(){this.main=null}},{key:"colorType",get:function(){var t=void 0;if(this._colors&&this._colors.arr&&this._colors.arr.length)if(1===this._colors.arr.length){var e=this._colors.arr[0];t=e&&9===e.length&&"00"===e.substring(e.length-2)?0:1}else t=2;else t=0;return t}},{key:"isBlackTransparent",get:function(){return 0===this.colorType}},{key:"colors",get:function(){return this._colors}},{key:"texture",get:function(){return null===this.textureSelected||-1===this.textureSelected?null:this.textureNameArr[this.textureSelected]?""+d["default"].cdn_static+this.texturePrePath+this.textureNameArr[this.textureSelected]:null}},{key:"hasTexture",get:function(){return!(0,s["default"])(this.textureSelected)}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(2),s=i(a),u=n(7),l=i(u);e["default"]=function(){function t(e){var n=this;r(this,t),this.map=new Map,this.destroyCommandArr=[],e.on("execute",function(t){n.execute(t.type,t.data)}),this.root=e,l["default"].registerCommand(this)}return o(t,[{key:"registerCommand",value:function(t,e){if(this.map.get(t))throw t+"命令重复";this.map.set(t,e)}},{key:"executeCommand",value:function(t,e){var n=this.map.get(t);if(n){var i=new n;if(!(i instanceof s["default"]))throw"CommandClass必须继承ICommand";return null!==i.destroy&&undefined!==i.destroy&&this.destroyCommandArr.push(i),i.root=this.root,i.manager=this,i.execute(e)}return null}},{key:"execute",value:function(){return this.executeCommand.apply(this,arguments)}},{key:"destroy",value:function(){this.map.clear(),this.map=null,this.destroyCommandArr.forEach(function(t){t.destroy.call(t)}),this.destroyCommandArr=null}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(37),a=function(t){return t&&t.__esModule?t:{"default":t}}(o);e["default"]=function(){function t(e){i(this,t),this.main=e,this.globalConfig=this.main.globalConfig,this.confMap=new Map,this._hasLoadGlowskin=!1}return r(t,[{key:"init",value:function(){var t=this;$.getJSON(this.main.globalConfig.glowConfigJsonURL,function(e){e.forEach(function(e){t.confMap.set(e.classname,e)})})}},{key:"getConfig",value:function(t){return this.confMap.get(t)}},{key:"showGlowSP",value:function(t){var e=this;this.globalConfig.SHOW_GLOW=t,this._loadGlowSkin().then(function(){e.main.getEquipmentArr(!0).forEach(function(t){t.showGlowSP(e.globalConfig.SHOW_GLOW)})})}},{key:"_loadGlowSkin",value:function(){var t=this;return new Promise(function(e){t._hasLoadGlowskin?e():t.__glowLoadingId||(layer&&(t.__glowLoadingId=layer.load(1,{shade:[.1,"#fff"]})),a["default"].load(t.main,["glow/glowskin"],function(){t._hasLoadGlowskin=!0,layer&&layer.close(t.__glowLoadingId),delete t.__glowLoadingId,e()}))})}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=n(345),u=i(s),l=n(7),c=i(l);e["default"]=function(){function t(e){r(this,t),this.main=e,this.globalConfig=this.main.globalConfig,$("#-id-cutimgcanvas")[0]||$(document.body).append('<canvas id="-id-cutimgcanvas" style="display:none"></canvas>')}return o(t,[{key:"takescreenshotSmall",value:function(){this.main.execute(c["default"].TAKESCREENSHOT_SMALL_COMMAND)}},{key:"takeScreenShot",value:function(t){var e=this;this.main.labEditRect&&(this.main.labEditRect.visible=!1);var n=t.transparent||this.main.backgroundManager.isBlackTransparent;return new Promise(function(i){n&&e.main.backgroundManager.freshTxtColor("#000000"),e.main.freshRender();var r=e.main.canvas.toDataURL("image/png");n&&e.main.backgroundManager.freshTxtColor();var o=+a.M.getNumStr(e.main.canvas.style.width),s=+a.M.getNumStr(e.main.canvas.style.height),u=t||{},l=u.x||0,c=u.y||0,f=e.main.getWH(),h=u.width||f.width,d=u.height||f.height,p=u.quality||.8,v=u.type&&"png"===u.type.toLowerCase()?"image/png":"image/jpeg",y=void 0,g=void 0,_=o/s;if(t&&u.outWidth&&u.outHeight)if(0>u.outWidth&&0>u.outHeight){var m=e.main.getEquipmentsRect();7===e.main.globalConfig.version?m=new a.Rectangle(0,0,o*e.main.view.scale.x,s*e.main.view.scale.x):m||(m=new a.Rectangle(0,0,o,s));var b=e.globalConfig.canvasWidth/e.main.W;l=m.x*b,c=m.y*b,y=m.width*b,g=m.height*b,h=y,d=g}else y=u.outWidth>0?u.outWidth:o,g=u.outHeight>0?u.outHeight:s;else y=400,g=y/_;var w=$("#-id-cutimgcanvas"),E=w[0].getContext("2d");w.attr({width:y,height:g});var x=void 0;e._setScreenShotFillStyle(E,n,y,g).then(function(){var n=o*y/h,a=s*g/d;_>n/a?n=a*_:n/a>_&&(a=n/_);var u=n/o,f=a/s,m=function(){if(e.main.isForceAndMotion())if(t.outWidth>0&&t.outHeight>0){E.drawImage(x,0,0,x.width,x.height,0,0,t.outWidth,t.outHeight);var r=w[0].toDataURL(v,p);i(r)}else i(x.src);else{e.main.freshRender(),E.drawImage(x,-l*u,-c*f,n,a);var o=w[0].toDataURL(v,p);e.main.labEditRect&&(e.main.labEditRect.visible=!0),i(o)}};if(e.main.isForceAndMotion()){var b=new Image;b.src=e.main.activeModule.takeScreenShot(),b.onload=function(){x=b,m()},b.onerror=function(){e.main.labEditRect&&(e.main.labEditRect.visible=!0),i(null)}}else{var O=new Image;O.src=r,O.onload=function(){x=O,m()}}})})}},{key:"_setScreenShotFillStyle",value:function(t,e,n,i){var r=this;return new Promise(function(o){if(e)t.fillStyle="rgba(255, 255, 255, 0)",t.fillRect(0,0,n,i),o();else{var s=r.main.backgroundManager.colors;if(1===r.main.backgroundManager.colorType)t.fillStyle=s.arr[0],t.fillRect(0,0,n,i);else{var l=t.createLinearGradient(0,0,n,i),c=(0,u["default"])(0,1,1/(s.length-1));c.push(1);for(var f=0;c.length>f;f++)l.addColorStop(c[f],"rgb("+a.M.retrieveRGBComponent(s.arr[f]).join(",")+")");t.fillStyle=l,t.fillRect(0,0,n,i)}if(r.main.backgroundManager.hasTexture&&r.main.backgroundManager.texture){var h=new Image;h.src=r.main.backgroundManager.texture,h.onload=function(){t.fillStyle=t.createPattern(h,"repeat"),t.fillRect(0,0,n,i),o()},h.onerror=function(){o()}}else o()}})}},{key:"takeScreenshotForPlayer",value:function(t){var e=this;return new Promise(function(n,i){e.tsQueue||(e.tsQueue=[]),e.tsQueue.push({settings:t,resolve:n,reject:i}),e._takeScreenshotForPlayerNext()})}},{key:"_takeScreenshotForPlayerNext",value:function(){var t=this;if(!this._isInScreenshot&&this.tsQueue.length){this._isInScreenshot=!0;var e=this.tsQueue.shift(),n=e.settings,i=e.resolve,r=void 0,o=this.main.labEditRect;if(n&&(r=n.data,this.main.editRectEnabled)){this.main.showLabEditRect({outWidth:n.outWidth||$(this.main.canvas).width(),outHeight:n.outHeight||$(this.main.canvas).height(),width:n.width||o.rangeRect.width,height:n.height||o.rangeRect.height})}var s={quality:1,type:"png"},u=[],l="[object String]"===Object.prototype.toString.call(r)?JSON.parse(r):r;if("[object Object]"===Object.prototype.toString.call(l)&&(u.push(this.main.setDataObj(l),new Promise(function(e){setTimeout(e,t._firstShot?500:1e3)})),this._firstShot=!0),o&&o.enabled){var c=o.getDomRect();s.width=c.width,s.height=c.height,s.outWidth=c.width,s.outHeight=c.height,u.length||!this._oriImgSettingXY?(this._oriImgSettingXY=new a.Point(c.x,c.y),s.x=c.x,s.y=c.y):(s.x=this._oriImgSettingXY.x,s.y=this._oriImgSettingXY.y)}u.length?u[0].then(function(){u[1].then(function(){if(t.main.isDestroy)return void i(null);t.takeScreenShot(s).then(function(e){i(e),t._isInScreenshot=!1,t._takeScreenshotForPlayerNext()})})}):this.takeScreenShot(s).then(function(e){i(e),t._isInScreenshot=!1,t._takeScreenshotForPlayerNext()})}}},{key:"destroy",value:function(){this.main=null,this.globalConfig=null}}]),t}()},function(t,e,n){"use strict";!function(){function e(t,e,n){return t.splice(e,!n||1+n-e+(!(0>n^e>=0)&&(0>n||-1)*t.length)),t.length}new Map;t.exports=function(){var t=[],n=-1,i=100,r=!1,o=void 0,a=void 0;return a=function(t,e){return t&&"function"==typeof t[e]?(r=!0,t[e](),r=!1,this):this},{add:function(a){if(r)return this;return t.splice(n+1,t.length-n),t.push(a),i&&t.length>i&&e(t,0,-(i+1)),n=t.length-1,o&&o(),this},setCallback:function(t){o=t},undo:function(){var e=t[n];return e?(a(e,"undo"),n-=1,o&&o(),this):this},redo:function(){var e=t[n+1];return e?(a(e,"redo"),n+=1,o&&o(),this):this},clear:function(){var e=t.length;t=[],n=-1,o&&e>0&&o()},hasUndo:function(){return-1!==n},hasRedo:function(){return t.length-1>n},getCommands:function(){return t},getIndex:function(){return n},setLimit:function(t){i=t}}}}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(20),a=n(397),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(e){i(this,t),this.root=e}return r(t,[{key:"getDataFilter",value:function(t){return t.dataVersion=o.dataVersion,t}},{key:"setDataFilter",value:function(t){var e=this;return t?(s["default"].forEach(function(n){n.valid&&(t=e._FilterFuncListExe(n.DataFilter,t))}),t):t}},{key:"_FilterFuncListExe",value:function(t,e){if(!t)return e;var n=new t;return n.root=this.root,e=n.execute(e)}},{key:"destroy",value:function(){this.root=null}}]),t}()},function(t,e,n){"use strict";function i(t,e,n){return(t.lastMovePos.x!=e||t.lastMovePos.y!=n)&&(t.moveTo(e,n),t.lastMovePos.x=e,t.lastMovePos.y=n,!0)}e.__esModule=!0;var r={};r.draw=function(t,e){t.lastMovePos={x:NaN,y:NaN};for(var n="",r=i;e.length;){var o=e.pop();if(1==o){var a=e.pop(),s=e.pop(),u=r(t,a,s);u&&(n+="g.moveTo("+a+","+s+")\n")}else if(2==o){var a=e.pop(),s=e.pop();t.lastMovePos.x==a&&t.lastMovePos.y==s||(n+="g.lineTo("+a+","+s+")\n",t.lineTo(a,s),t.lastMovePos.x=a,t.lastMovePos.y=s)}else if(3==o){var a=e.pop(),s=e.pop(),u=r(t,a,s);u&&(n+="g.moveTo("+a+","+s+")\n");var l=e.pop(),c=e.pop(),f=e.pop(),h=e.pop();t.lastMovePos.x=f,t.lastMovePos.y=h,t.quadraticCurveTo(l,c,f,h),n+="g.quadraticCurveTo("+l+","+c+","+f+","+h+")\n"}else if(32==o){var d=e.pop(),p=e.pop(),v=e.pop();t.lineStyle(d,p,v),n+="g.lineStyle("+d+","+p+","+v+")\n"}else if(33==o){var d=e.pop(),p=e.pop();t.beginFill(d,p),n+="g.beginFill("+d+","+p+")\n"}else 255==o&&(t.endFill(),n+="g.endFill();\n")}},e["default"]=r},function(t,e,n){"use strict";e.__esModule=!0;var i={};i.rotaPoint=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return{x:Math.cos(n)*i-Math.sin(n)*r+e.x,y:Math.sin(n)*i+Math.cos(n)*r+e.y}},e["default"]=i},function(t,e,n){"use strict";n(167),n(194),n(203),n(204),n(188),n(202),n(176),n(186),n(185),n(181),n(182),n(180),n(177),n(179),n(184),n(178),n(175),n(183),n(187),n(166),n(199),n(197),n(195),n(200),n(201),n(196),n(198),n(189),n(190),n(191),n(193),n(192),n(164),n(165),n(160),n(163),n(162),n(161),n(98),n(169),n(170),n(172),n(171),n(168),n(174),n(173),n(205),n(208),n(206),n(207),n(210),n(209),n(212),n(211),n(99),n(213);var i=n(67),r=function(t){return t&&t.__esModule?t:{"default":t}}(i);r["default"].buildDate="2019-03-30T02:13:19.653Z",r["default"].packageName="physics-libs",r["default"].version="0.5.92";var o=undefined;o&&(r["default"].baseVersion=o),t.exports=r["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){var n=[],i=!0,r=!1,o=undefined;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(103),u=i(s),l=n(10),c=n(68),f=n(66),h=i(f),d=n(392),p=i(d),v=n(97),y=i(v),g=n(7),_=i(g),m=n(21),b=i(m),w=n(353),E=i(w);e["default"]=function(){function t(e){r(this,t),this.eventManager=e.eventManager,this.settings=(0,u["default"])({},e.settings),this.main=e.settings.main,this.isModulesLoading=!1,this.moduleInstances=new Map,this.init()}return a(t,[{key:"init",value:function(){if(!this.settings.modules||0===this.settings.modules.length)throw Error("At least one module should be loaded in the physical canvas.")}},{key:"destroy",value:function(){this.settings=null;var t=!0,e=!1,n=undefined;try{for(var i,r=this.moduleInstances[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,s=o(a,2);s[1].destroy()}}catch(u){e=!0,n=u}finally{try{!t&&r["return"]&&r["return"]()}finally{if(e)throw n}}this.moduleInstances.clear(),this.moduleInstances=null}},{key:"getModuleMainFromType",value:function(t){return this.moduleInstances.get(t)}},{key:"loadModules",value:function(t){var e=this;if(this.main.isDestroy)return Promise.resolve();if(this.isModulesLoading)return Promise.resolve(!1);this.main.stopAddEquipments(),this.main.activeModule&&(this.main.activeModule.setActive(!1),this.main.activeModule.cachePool.disposeAll(),this.main.activeModule.enterModule(!1),this.main.activeModule=null),this.main.setDefaultViewScale(),this.isModulesLoading=!0;var n={};return(0,u["default"])(n,this.settings,t,{main:this.main,assets:this.main.globalConfig.cdn_static,globalConfig:this.main.globalConfig,UploadSkinTool:c.UploadSkinTool,MechanicsPopTool:p["default"],MouseManager:y["default"],NBCommand:_["default"],ParticleUtil:c.ParticleUtil,SoundStr:c.SoundStr,Button:c.Button,HoverButton:E["default"],Check:c.Check,ComponentProperty:c.ComponentProperty,NBDrag:h["default"],NBEvent:b["default"]}),new Promise(function(t,i){c.ModuleClassUtil.load(n.modules,e.main,function(i){if(i.forEach(function(t){if(t!==c.Modules.LOADING&&!e.moduleInstances.has(t)){var i=c.ModuleClassUtil.getModuleTypeClass(t);e.moduleInstances.set(t,new i(n))}}),e.isModulesLoading=!1,e.moduleInstances.size>0){var r=null,o=!0,a=!1,s=undefined;try{for(var u,f=n.modules[Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var h=u.value;h!==c.Modules.LOADING&&h!==c.Modules.NAPELIB&&(r=h)}}catch(p){a=!0,s=p}finally{try{!o&&f["return"]&&f["return"]()}finally{if(a)throw s}}var d=e.moduleInstances.get(r);d.init().then(function(){e.main.globalConfig&&(e.main.globalConfig.version=d.moduleType,e.main.activeModule=d,e.main.activeModule.enterModule(!0).then(function(){e.main.activeModule.setActive(e.main.isRunning,!0),e.eventManager.trigger(l.EVENT_TYPES.MODULE_LOADED,e.moduleInstances),t()}))})}else t()})})}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var n=0;e.length>n;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function c(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},u=n(0);e["default"]=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.globalConfig=t.globalConfig,n.main=t,n.main.drawStack.addChildAt(n,0),n.lightsCapNums=0,n.myW=1024,n.myH=1;var o=n.__createCanvas(n.myW,n.myH),a=o.getContext("2d"),s=PIXI.Texture.fromCanvas(o,PIXI.SCALE_MODES.DEFAULT);return n.myCtx=a,n.myTexture=s,n.myIndex=0,n.initSuccess=!0,n.pluginName="RedrayPenRenderer",n.uniforms={},n.updateUniforms(),n.visible=!1,n.ticker=u.M.addTicker(function(){n.updateVisible()},!0),n}return o(e,t),a(e,[{key:"__createCanvas",value:function(t,e){var n=document.createElement("div");return n.innerHTML="<canvas width='"+t+"px' height='"+e+"px' style='width:"+t+"px;height:"+e+"px;background:#000000;'></canvas>",n.childNodes[0]}},{key:"destroy",value:function(){this.parent.removeChild(this),this.globalConfig=null,u.M.removeTicker(this.ticker),this.main=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"getColor",value:function(t){var e=t>>16&255,n=t>>8&255,i=t>>0&255;return new Float32Array([e/255,n/255,i/255,1])}},{key:"mapPoint",value:function(t){this.WIDTH=this.main.canvas.width,this.HEIGHT=this.main.canvas.height;var e=this.main.getViewRect(this.main.viewStack),n=Math.max(e.width/this.WIDTH,e.height/this.HEIGHT);this.rect=new PIXI.Rectangle(e.x,e.y,this.WIDTH*n,this.HEIGHT*n);var i=this.WIDTH,r=this.HEIGHT,o=i*(t.x-this.rect.x)/this.rect.width,a=r-r*(t.y-this.rect.y)/this.rect.height;return new PIXI.Point(o,a)}},{key:"mapLightPoints",value:function(t){for(var e=0;t.length>e;e++){var n=t[e].start,i=t[e].end;t[e].start=this.mapPoint(n),t[e].end=this.mapPoint(i)}}},{key:"calLightsDataLength",value:function(){this.lightsCapNums=3*this.lightsData.length}},{key:"pushLightsData",value:function(t){this.imgData.data[this.myIndex++]=parseInt(t[0]),this.imgData.data[this.myIndex++]=parseInt(t[1]),this.imgData.data[this.myIndex++]=parseInt(t[2]),this.imgData.data[this.myIndex++]=parseInt(t[3])}},{key:"pushData",value:function(t){var e=this.imgData.data;t+=8388607;var n=(16711680&t)>>16,i=(65280&t)>>8,r=255&t;e[this.myIndex++]=n,e[this.myIndex++]=i,e[this.myIndex++]=r,e[this.myIndex++]=255}},{key:"float2Rgb",value:function(t){return[parseInt(t/65536),parseInt(t/256%256),parseInt(t)%256,255]}},{key:"renderData2Texture",value:function(){this.myCtx.fillStyle="#000000",this.myCtx.fillRect(0,0,this.myW,this.myH),this.myIndex=0,this.imgData=this.myCtx.getImageData(0,0,this.myW,this.myH);var t=this.main.canvas.width,e=this.main.canvas.height;this.pushData(t),this.pushData(e);for(var n=0;this.lightsData.length>n;n++){var i=this.lightsData[n];this.pushData(i.start.x),this.pushData(i.start.y),this.pushData(i.end.x),this.pushData(i.end.y),this.pushData(100*i.I);this.pushLightsData(this.float2Rgb(i.color))}this.myCtx.putImageData(this.imgData,0,0)}},{key:"getRayData",value:function(){this.lightsData=[];for(var t=this.main.getEquipmentArr(!0),e=0;t.length>e;e++){var n=t[e];if(n.isRayPen)for(var i=0;n.vectorRay.length>i;i++){var r=n.vectorRay[i],o=this.getOneRayData(r);this.lightsData=this.lightsData.concat(o)}}this.lineNum=this.lightsData.length}},{key:"getOneRayData",value:function(t){var e=[],n=t.rootRay,i=t.isWhiteLight,r=i?5:12;if(n&&t.isVisibleLight())for(var o=n.BFSTreeWalk(),a=Math.min(r,o.length),s=0;a>s;s++){var u=o[s],l={};u.updateEndP(),l.start=u.startP.clone(),l.end=u.endP.clone(),l.color=u.color,l.I=u.I,e.push(l)}return e}},{key:"updateLightPoints",value:function(){this.getRayData(),this.mapLightPoints(this.lightsData),this.calLightsDataLength(),this.renderData2Texture()}},{key:"updateUniforms",value:function(){this.uniforms.colorU=this.getColor(16711680),this.u_Sampler=this.myTexture;var t=this.main.canvas.width,e=this.main.canvas.height;this.uniforms.iResolution=new Float32Array([t,e]),this.uniforms.testC=1,this.uniforms.lineNum=this.lineNum}},{key:"updateVisible",value:function(){this.visible=this.globalConfig.LIGHT_DIS_VISIBLE}},{key:"updateData",value:function(){this.updateLightPoints(),this.myTexture.update(),this.updateUniforms()}},{key:"_renderWebGL",value:function(t){this.updateData();var e=t.plugins[this.pluginName];try{e||(PIXI.WebGLRenderer.registerPlugin(this.pluginName,l),t.plugins[this.pluginName]=new l(t),e=t.plugins[this.pluginName]),t.setObjectRenderer(e),e.render(this)}catch(n){this.initSuccess=!1}}}]),e}(PIXI.Sprite);var l=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.gl=t.gl,n}return o(e,t),a(e,[{key:"start",value:function(){this.shader||this._initShader()}},{key:"onContextChange",value:function(){this._initShader()}},{key:"_initShader",value:function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new PIXI.Shader(this.gl,this.__getVShaderSource(),this.__getFShaderSource());var t=this.gl,e=this.shader.attributes,n=[-1,1,0,1,1,0,-1,-1,0,1,-1,0];this.vertexBuffer=PIXI.glCore.GLBuffer.createVertexBuffer(t,new Float32Array(n),t.STATIC_DRAW);var i=this.renderer.createVao();i.addAttribute(this.vertexBuffer,e.position,t.FLOAT,!1,0,0),this.renderer.bindVao(i),this.vao=i}},{key:"render",value:function(t){var e=this.renderer,n=e.gl,i=this.shader;e.bindShader(i),t.uniforms.u_Sampler=e.bindTexture(t.u_Sampler),Object.assign(i.uniforms,t.uniforms),this.renderer.bindVao(this.vao),this.vao.draw(n.TRIANGLE_STRIP,4,0)}},{key:"destroy",value:function(){var t=this.renderer.gl;this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffer&&(t.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"__getVShaderSource",value:function(){return"\n          attribute vec3 position;\n          void main() {\n              gl_Position = vec4(position, 1.0);\n          }\n          "}},{key:"__getFShaderSource",value:function(){return"    \n          \n      precision highp float;\n      uniform vec4 colorU; \n      uniform vec2 iResolution;\n      uniform sampler2D u_Sampler;\n      uniform float testC;\n      uniform float lineNum;\n      int ii = 0;\n\n      float getValue(){\n        float ind = (float(ii)+ 0.5) / 1024.0;\n        vec4 smp = texture2D(u_Sampler, vec2(ind, 0.5));\n        ii = ii + 1;\n        float r = smp.r * 255.0;\n        float g = smp.g * 255.0;\n        float b = smp.b * 255.0;\n        return ((r*256.0+g)*256.0+b) - 8388607.0;\n      }\n            \n        vec4 getColor(){\n          float ind = (float(ii)+ 0.5) / 1024.0;\n          vec4 smp = texture2D(u_Sampler, vec2(ind, 0.5));\n          ii = ii + 1;\n          return smp;\n        }\n\n        float sdfLine(vec2 uv, vec2 p1, vec2 p2, float width)\n        {\n            vec2 ed1 = p1 - uv;\n            vec2 ed2 = p2 - uv;\n            float st = length(cross(vec3(ed1,0.), vec3(ed2,0.)));\n            float sed3 = length(p2-p1);\n            float distan = st/sed3;\n            return distan - width;\n        }\n\n        float sdfCircle(vec2 uv, vec2 co, float r)\n        {\n          float distToCo = length(uv-co);\n          return distToCo - r;\n        }\n\n        float sdline(vec2 p, vec2 p1, vec2 p2, float lineWidth)\n        {\n            vec2 co = (p1 + p2) * 0.5;\n            float r = length(p1 - p2) * 0.5;\n            float dl = sdfLine(p, p1, p2, lineWidth);\n            float dc = sdfCircle(p, co, r);\n            return max(dl, dc);  \n        }\n\n        vec3 mathLightPow(float dist, vec3 col, vec3 baseCol, float stPow){\n\n          float dd = clamp(0.72*pow(abs(.72*dist) * stPow, 0.10189), 0., 1.);\n            vec3 co = (1. - dd)*col + dd*baseCol;\n          return pow(co, vec3(2.))*2.;\n        }\n\n        vec2 uvCorrect(vec2 pp, vec2 ir){\n          vec2 uv = pp / ir;\n          vec2 p = uv - .5; \n          p.x *= ir.x / ir.y;\n          return p;\n        }\n         \n        void main() {\n          float globlePow = 1.0;\n          float stPow = 19.;\n          float irx = getValue();  //宽度\n          float iry = getValue();  // 高度\n          vec2 iResolution = vec2(irx, iry);\n          \n          vec2 p = uvCorrect(gl_FragCoord.xy,iResolution);\n          \n          vec3 col = vec3(0.);\n          for(float i = 0.; i < 200.; ++i){\n            if(i < lineNum){\n              float sx = getValue();\n              float sy = getValue();\n              vec2 st = uvCorrect(vec2(sx, sy),iResolution);\n              \n              float ex = getValue();\n              float ey = getValue();\n              vec2 ed = uvCorrect(vec2(ex, ey),iResolution);\n              \n              float I = getValue() * 0.01;\n              vec4 thisColor = getColor();\n              float sdf2 = 0.89 * clamp(sdline(p , st, ed, .002),0.,1.);\n              float mm = (i * 20.) / 18.;\n              col += I * I * globlePow * (.6/pow(sdf2,0.00003)) * mathLightPow(sdf2, thisColor.xyz, vec3(0.,0.,0.),stPow);\n            }\n          }\n          gl_FragColor = vec4(col,0.);\n        }\n          "}}]),e}(PIXI.ObjectRenderer)},function(t,e,n){function i(t){var e=r[t];return e?n.e(e[1]).then(function(){return n(e[0])}):Promise.reject(Error("Cannot find module '"+t+"'."))}var r={"./acoustic/index":[421,9],"./atomicPhysics/index":[422,5],"./elecfamily/index":[423,6],"./electricity/index":[426,2],"./forceAndMotion/index":[427,4],"./loading/index":[428,10],"./mechanics/index":[429,1],"./napeLib/index":[430,8],"./optical/index":[431,3],"./thermal/index":[432,7]};i.keys=function(){return Object.keys(r)},t.exports=i,i.id=417}])});