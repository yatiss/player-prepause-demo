/*!
 * Copyright (c) 2017 Nobook inc.
 * 
 * (TBD)
 * 
 * Version: 0.5.92
 * Date: Sat Mar 30 2019 10:13:19 GMT+0800 (中国标准时间)
 */
webpackJsonpPhysicsCanvas([2],{418:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(101),l=function(t){return t&&t.__esModule?t:{"default":t}}(s),u=function(t){function e(t){n(this,e),t.iElecInter=1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.Resistance=0,i.classname="BaseElecWire",i}return o(e,t),a(e,[{key:"linkTwoBindMC",value:function(t,e){this.elecUtil.linkWireBindMC(this.bposter0,t),this.elecUtil.linkWireBindMC(this.bposter1,e)}},{key:"unLink",value:function(t){t&&t.bindinger&&t.bindinger.breakBinding.call(t.bindinger)}}]),e}(l["default"]);u.UPDATE_POSTER_POSITION="update_poster_position",e["default"]=u},419:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(101),l=n(s),u=i(102),h=n(u);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=6;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.name=t.name,i.zuheBox=t.zuheBox,i.Resistance=t.resistance||h["default"].MIN_RESISTANCE,i.classname="BaseElecResistance",i.bposter0.bindinger.set_myroad(i.bposter1.bindinger,i.Resistance),i}return a(e,t),e}(l["default"])},420:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.thisObj=null,i}return o(e,t),a(e,[{key:"initLRData",value:function(t,e,i,n,r){this.init([new l.Point(0,0),new l.Point(0+e,0),new l.Point(0+e,0+i),new l.Point(0,0+i)],t,!1,null,new l.Point(n,r))}},{key:"removed",value:function(){this.thisObj=null,this.xiItemArr.clear(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(h["default"])},426:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=i(101),o=(n(r),i(102)),a=(n(o),i(419)),s=(n(a),i(219)),l=(n(s),i(221)),u=(n(l),i(220)),h=(n(u),i(418)),c=(n(h),i(478)),p=(n(c),i(525)),f=(n(p),i(620)),d=(n(f),i(485)),y=(n(d),i(479)),g=(n(y),i(480)),_=(n(g),i(481)),b=(n(_),i(482)),v=(n(b),i(483)),m=(n(v),i(484)),P=(n(m),i(420)),w=(n(P),i(466)),O=(n(w),i(487)),k=(n(O),i(847)),C=n(k),M=i(500),A=n(M),E=i(846),S=n(E),x=i(832),T=n(x),j=i(833),D=n(j),R=i(841),I=n(R),N=i(908),B=n(N),L=i(843),F=n(L),V=i(845),U=n(V),G=i(848),W=n(G),H=i(849),X=n(H),z=i(850),q=n(z),Y=i(851),Z=n(Y),$=i(852),K=n($),Q=i(561),J=n(Q),tt=i(853),et=n(tt),it=i(854),nt=n(it),rt=i(855),ot=n(rt),at=i(562),st=n(at),lt=i(563),ut=n(lt),ht=i(564),ct=n(ht),pt=i(625),ft=n(pt),dt=i(874),yt=n(dt),gt=i(565),_t=n(gt),bt=i(865),vt=n(bt),mt=i(567),Pt=n(mt),wt=i(869),Ot=n(wt),kt=i(842),Ct=n(kt),Mt=i(568),At=n(Mt),Et=i(907),St=n(Et),xt=i(486),Tt=n(xt),jt=i(889),Dt=n(jt),Rt=i(873),It=n(Rt),Nt=i(881),Bt=n(Nt),Lt=i(910),Ft=n(Lt),Vt=i(911),Ut=n(Vt),Gt=i(900),Wt=n(Gt),Ht=i(903),Xt=n(Ht),zt=i(835),qt=n(zt),Yt=i(899),Zt=n(Yt),$t=i(892),Kt=n($t),Qt=i(834),Jt=n(Qt),te=i(840),ee=n(te),ie=i(830),ne=n(ie),re=i(831),oe=n(re),ae=i(886),se=n(ae),le=i(861),ue=n(le),he=i(912),ce=n(he),pe=i(839),fe=n(pe),de=i(224),ye=n(de),ge=i(860),_e=n(ge),be=i(875),ve=n(be),me=i(909),Pe=n(me),we=i(868),Oe=n(we),ke=i(906),Ce=n(ke),Me=i(862),Ae=n(Me),Ee=i(858),Se=n(Ee),xe=i(891),Te=n(xe),je=i(877),De=n(je),Re=i(904),Ie=n(Re),Ne=i(905),Be=n(Ne),Le=i(863),Fe=n(Le),Ve=i(844),Ue=n(Ve),Ge=i(901),We=n(Ge),He=i(902),Xe=n(He),ze=i(859),qe=n(ze),Ye=i(838),Ze=n(Ye),$e=i(836),Ke=n($e),Qe=i(837),Je=n(Qe),ti=i(880),ei=n(ti),ii=i(894),ni=n(ii),ri=i(866),oi=n(ri),ai=i(867),si=n(ai),li=i(898),ui=n(li),hi=i(895),ci=n(hi),pi=i(896),fi=n(pi),di=i(870),yi=n(di),gi=i(890),_i=n(gi),bi=i(882),vi=n(bi),mi=i(566),Pi=n(mi),wi=i(876),Oi=n(wi),ki=i(878),Ci=n(ki),Mi=i(879),Ai=n(Mi),Ei=i(857),Si=n(Ei),xi=i(856),Ti=n(xi),ji=i(884),Di=n(ji),Ri=i(887),Ii=n(Ri),Ni=i(871),Bi=n(Ni),Li=i(826),Fi=n(Li);Fi["default"].classList={ElecGround:C["default"],PCDot:A["default"],ElecEnergy4:S["default"],Battery:T["default"],BatteryHolder:D["default"],DryBattery:I["default"],V9Battery:B["default"],ElecAnd:F["default"],ElecBuzzer:U["default"],ElecLampAndHolder:W["default"],ElecLampAndHolderRes:X["default"],ElecMotors:q["default"],ElecNo:Z["default"],ElecOr:K["default"],ElecPowerStudent:J["default"],ElecResFlask:et["default"],ElecResistance:nt["default"],ElecResistanceBox:ot["default"],ElecSinglePloeDoubleThrowSwitch:st["default"],ElecSinglePloeSingleThrowSwitch:ut["default"],ElecSlideRheostat:ct["default"],ElecTwo:ft["default"],LED:yt["default"],ElecWire:_t["default"],ForWire:vt["default"],InlandVoltmeter:Pt["default"],InlandAmpereMeter:Ot["default"],ElecAmpereMeter:Ct["default"],SensitivityGalvanometer:At["default"],UniversalMetre:St["default"],ElecWireGo:Tt["default"],WastPaper:Ft["default"],WastPaperZu:Ut["default"],SolenoidElectri:Wt["default"],SpacedCoil:Xt["default"],Capacitance:qt["default"],SimpleCoilSkin:Zt["default"],RedNeedle:Kt["default"],BlackNeedle:Jt["default"],DengBan:ee["default"],AstElecComp:ne["default"],AstElecWire:oe["default"],ParallelPlateCondenser:se["default"],Electrolyte:ue["default"],WireRetainingClip:ce["default"],CoulombBalance:fe["default"],SimulatedElectricField:ye["default"],ElectricAppliance:_e["default"],LorentzForce:ve["default"],VariableElecTransformator:Pe["default"],HandGenerator:Oe["default"],TwoPoles:Ce["default"],ElectromagneticMode:Ae["default"],ElectriMotorElectri:Se["default"],RectCoidElectri:Te["default"],MagnetHSBoardElectri:De["default"],SupportHaveMagnet:Ie["default"],SupportHaveMagnets:Be["default"],ElectromagneticRelay:Fe["default"],ElecBell:Ue["default"],SolenoidMagneticInductionLine:We["default"],SolenoidalWinding:Xe["default"],ElectriScope:qe["default"],ConductorWithInsulatingPillarAndMetalFoil:Ze["default"],ConductorLeft:Ke["default"],ConductorRight:Je["default"],MetalBarWithHand:ei["default"],RubberRod:ni["default"],Fur:oi["default"],GlassRob:si["default"],SilkHandKerchief:ui["default"],SMBall:ci["default"],SMStent:fi["default"],InsulatingFrame:yi["default"],PositiveObject:_i["default"],NegativeObject:vi["default"],HollowBallElectroscope:Pi["default"],MagnetBar:Oi["default"],MagnetHorseShoe:Ci["default"],MagnetNeedle:Ai["default"],ElectriMag50cElectri:Si["default"],ElectriMag100cElectri:Ti["default"],PaperClip:Di["default"],Pin:Ii["default"],IronNail:Bi["default"],PointerMultimeter:Dt["default"],ElectrostaticShield:n(i(864))["default"],RotatingSupport:n(i(893))["default"],Oscilloscope:n(i(883))["default"],SignalGenerator:n(i(897))["default"],JouleLaw:It["default"],MetallicWire:Bt["default"],PaperClipZu:n(i(885))["default"],PinZu:n(i(888))["default"],IronNailZu:n(i(872))["default"]},e["default"]=Fi["default"]},443:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:g(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(222),c=n(h),p=i(69),f=n(p),d=i(104),y=n(d);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=-2,t.magType=1;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.DEBUG=!1,i.isLock=!1,i.allCompArr=[],i.staCompArr=[],i.friendArr=[],i.thisObj=null,i.elecPoint=new u.Point,i.isZuHeFiled=!1,i.zuheFiledCompArr=[],i.hitRect=null,i.ganP=new u.Point,i.elecDotBox=new PIXI.Sprite,i.txtNum=0,i._hasInit=!1,i.canCreateGanYingElec=!1,i._particle=null,i._ganNum=0,i.isShowElecNumTxt=!1,i.shiDis_=50,i.xiItemArr=new u.HashMap,i.xiPareObj=null,i.xiPareP=new u.Point,i.QU_DUI_NUM=5,i._shiDis=50,i.startPRadius=20,i._elecNum=0,i.inCage=!1,i.cage=null,i.elecInside=null,i.hitRectSP=null,i.canHit=!0,i.op=new u.Point,i.lp=new u.Point,i.moveDir=new u.Point,i.elecsParticlesColor={zheng:13416714,fu:638425},i}return a(e,t),s(e,[{key:"init",value:function(t){var e=this;this._hasInit||(this._hasInit=!0,this._elecNum=t,this.elecAre&&(this.elecAre&&(this.hitRectSP=new PIXI.Sprite,this.hitRectSP.x=this.elecAre.x+this.elecAre.width/2,this.hitRectSP.y=this.elecAre.y+this.elecAre.height/2,this.add2component(this.hitRectSP)),this.ganPP&&this.ganPP.visible&&(this.ganPP.visible=!1,this.add2component(this.ganPP)),this.fresh_elecPoint(),this.debugRefresh(),this.isShowElecNumTxt&&this.add_elecNumTxt(),setTimeout(function(){if(!e.hadDestory){var t=e.componentBox.rotation;e.componentBox.rotation=0,e.createElecDots(),setTimeout(function(){e.hadDestory||(e.componentBox.rotation=t)},0),e.freshDotFrom_elecNum(),e.fresh_elecPoint(),e.diyChanged()}},0)))}},{key:"debugRefresh",value:function(){if(this.DEBUG){this.gg_||(this.gg_=new PIXI.Graphics,this.add2component(this.gg_));var t=this.gg_;t.clear(),t.beginFill(255,.3),t.drawRect(this.hitRect.x,this.hitRect.y,this.hitRect.width,this.hitRect.height),t.endFill(),t.beginFill(16711680),t.drawCircle(this.ganP.x,this.ganP.y,5),t.endFill()}}},{key:"checkHitRect",value:function(t){if(!t.canHit)return!1;if(this.inCage||t.inCage)return!1;if(!t||this.UID===t.UID||!t.hitRect||!this.hitRect)return!1;var e=new u.Point(t.hitRect.x,t.hitRect.y),i=new u.Point(t.hitRect.x+t.hitRect.width,t.hitRect.y),n=new u.Point(t.hitRect.x+t.hitRect.width,t.hitRect.y+t.hitRect.height),r=new u.Point(t.hitRect.x,t.hitRect.y+t.hitRect.height);return!!(this._checkHitPoint(t,e)||this._checkHitPoint(t,i)||this._checkHitPoint(t,n)||this._checkHitPoint(t,r))}},{key:"_checkHitPoint",value:function(t,e){return this.hitRect.containsPoint(this.componentBox.toLocal(e,t.componentBox))}},{key:"getGlobalHitRect",value:function(){var t=this.toGlobal(this.hitRect),e=this.hitRect.clone();return u.M.setSPPoint(e,t),e}},{key:"createElecDots",value:function(){var t=this;this._particle=this.ParticleUtil.getParticle(this.ParticleUtil.particles.elecs),this.add2component(this._particle),this._particle._this=this,this._particle.completeFunc=function(){t.freshParticleRect(),t.freshDotFrom_elecNum(),t._particle.particle.maxParticles=Math.abs(t.txtNum)}}},{key:"freshParticleRect",value:function(){this._particle&&this._particle.particle&&(u.M.setSPPoint(this._particle,this.hitRect),this._particle.particle.spawnRect.width=this.hitRect.width,this._particle.particle.spawnRect.height=this.hitRect.height)}},{key:"add_elecNumTxt",value:function(){this.elecNumTxt=new PIXI.Text("100",{font:"30px 微软雅黑",fill:0,align:"left"}),this.add2component(this.elecNumTxt),u.M.setSPPoint(this.elecNumTxt,this.elecAre)}},{key:"freshDotFrom_elecNum",value:function(t){if(this.txtNum=this.canCreateGanYingElec&&Math.abs(this.ganNum)>Math.abs(this._elecNum)?this._elecNum+(this.ganNum-this._elecNum):this._elecNum,this.txtNum=Math.round(this.txtNum),this.txtNum=Math.min(100,this.txtNum),this.txtNum=Math.max(-100,this.txtNum),this.elecNumTxt&&(this.elecNumTxt.text=""+this.txtNum),this._particle&&this._particle.particle){this._particle.particle.maxParticles=Math.abs(this.txtNum);this._particle.particle.startColor=u.M.retrieveRGBComponent(0>this.txtNum?this.elecsParticlesColor.fu:this.elecsParticlesColor.zheng)}t||this.txtNumChanged()}},{key:"fresh_elecPoint",value:function(){if(this.isZuHeFiled)this.left.fresh_elecPoint.call(this.left),this.right.fresh_elecPoint.call(this.right);else{if("WastPaper"===this.classname&&u.M.setSPPointXY(this.elecPoint,this.parent.x,this.parent.y),!this.elecAre)return;var t=this.toLocal(this.hitRectSP,this.componentBox);if(this.hitRect=this.getHitAreaRect(),this.parent){var e=new u.Point(t.x,t.y);e=this.toGlobalView(e,this),u.M.setSPPoint(this.elecPoint,e)}}}},{key:"getHitAreaRect",value:function(){var t=this.toLocal(this.hitRectSP,this.componentBox);return t?new u.Rectangle(t.x-this.elecAre.width/2,t.y-this.elecAre.height/2,this.elecAre.width,this.elecAre.height):new u.Rectangle}},{key:"txtNumChanged",value:function(){}},{key:"addedFore",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedFore",this).call(this)}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.elecAre&&this.elecAre.parent&&(this.elecAre.alpha=0)}},{key:"addedEnd",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"removed",value:function(){u.ArrayUtil.removeValueFromArray(this.allCompArr,this),u.ArrayUtil.removeValueFromArray(this.staCompArr,this),u.ArrayUtil.removeValueFromArray(this.zuheFiledCompArr,this),this.allCompArr=null,this.staCompArr=null,this.zuheFiledCompArr=null,u.ArrayUtil.clear(this.friendArr),this.friendArr=null,this.elecUtil.electricField_Update.removeElec(this),this.__elecAreTouchID&&u.M.removeTouch(this.elecAre,this.__elecAreTouchID),this._particle&&this._particle.destroy.call(this._particle),this.globalConfig.main.dispatchEvent("magElecChanged",this),this.inCage&&this.cage.cancelLockItem(this),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"diyChanged",value:function(){this.elecUtil.electricField_Update.checkAllChanged(),this.globalConfig.main.dispatchEvent("magElecChanged",this)}},{key:"caculateBegin",value:function(){}},{key:"caculateOver",value:function(t){"mag"===t&&this.caculateOverStatic(),this._shifang(this)}},{key:"caculateOverStatic",value:function(){}},{key:"setGanYingElec",value:function(t){this.canCreateGanYingElec&&(this.ganNum=-t.ganNum,this.ganNum=Math.floor(10*this.ganNum)/10,this.freshDotFrom_elecNum())}},{key:"beginFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t)}},{key:"moveFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveFore",this).call(this,t),this.move_xiItem_change()}},{key:"endFore",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t),this.move_xiItem_change()}},{key:"beginEnd",value:function(t){this.lp=this.getMouseXY(t),this.op=this.lp.clone()}},{key:"moveEnd",value:function(t){var i=this.getMouseXY(t);this.moveDir=new u.Point(i.x-this.lp.x,i.y-this.lp.y),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.fresh_elecPoint.call(this),this.diyChanged(),this.lp=i}},{key:"endEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.fresh_elecPoint.call(this),this.diyChanged(),this.moveDir=new u.Point}},{key:"freshControl",value:function(t){var e=void 0,i=void 0,n=this.staCompArr.length;for(e=0;n>e;e++)for(i=0;n>i;i++){var r=this.staCompArr[e],o=this.staCompArr[i];if("SilkHandKerchief"===r.classname&&"GlassRob"===o.classname){var a=r.onTurnPoint(r),s=o.onTurnPoint(o);250>Math.abs(a.x-s.x)&&100>Math.abs(a.y-s.y)&&(o.left.elecNum+=1,o.right.elecNum=o.left.elecNum,r.elecNum=-o.left.elecNum)}else if("Fur"===r.classname&&"RubberRod"===o.classname){var l=r.onTurnPoint(r),h=o.onTurnPoint(o);200>Math.abs(l.x-h.x)&&60>Math.abs(l.y-h.y)&&(o.left.elecNum-=1,o.right.elecNum=o.left.elecNum,r.elecNum=-o.left.elecNum)}else if("SMStent"===r.classname&&"SMBall"===o.classname&&(o.host||(u.M.getPointLen(r.onTurnPoint(r.ballP1),new u.Point(o.parent.x,o.parent.y))>50?u.M.getPointLen(r.onTurnPoint(r.ballP2),new u.Point(o.parent.x,o.parent.y))>50?u.M.getPointLen(r.onTurnPoint(r.ballP3),new u.Point(o.parent.x,o.parent.y))>50?(o.host=null,o.hostFlag=0):(o.host=r.ballP3,o.hostFlag=3):(o.host=r.ballP2,o.hostFlag=2):(o.host=r.ballP1,o.hostFlag=1)),o.host&&o.canBind)){var c=o.onTurnPoint(o.host);u.M.setSPPoint(o.parent,c),o.fresh_elecPoint.call(o)}}}},{key:"onTurnPoint",value:function(t){return this.toGlobalView(new u.Point(0,0),t)}},{key:"setElectricField",value:function(t){}},{key:"_shifang",value:function(t){var e=Math.floor(Math.abs(t.txtNum)/this.QU_DUI_NUM);if(t.xiItemArr.length()>e){var i=t.xiItemArr.length()-e,n=t.xiItemArr.getKeyValyeArray(),r=n.splice(t.xiItemArr.length()-i,i);t.xiItemArr.clear(),$.each(n,function(e,i){t.xiItemArr.put(i.key,i.value)});var o=this;$.each(r,function(t,e){var i=e.value,n=u.M.getSPPoint(i.parent),r=n.clone();r.x+=o._shiDis;var a=2*Math.PI*Math.random(),s=u.M.rotaPointFromP(r,n,a);u.M.setSPPoint(i.parent,s)})}}},{key:"rotateChange",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t),this.fresh_elecPoint.call(this),this.rotate_xiItem_change(t),this.move_xiItem_change()}},{key:"isFull",value:function(){var t=Math.floor(Math.abs(this.txtNum)/this.QU_DUI_NUM);return this.xiItemArr.length()>=t}},{key:"toXiItem",value:function(t){this.xiPareObj=t,this.xiPareObj.xiItemArr.put(this.UID,this)}},{key:"removeXi",value:function(t){this.xiItemArr.remove(t.UID)}},{key:"clearXi",value:function(t){this.xiItemArr.clear()}},{key:"hasXi",value:function(t){return this.xiItemArr.containsKey(t.UID)}},{key:"fresh_xiItem_move_Arr",value:function(){this.isZuHeFiled?(this.left.xiItemArr.forEach(function(t,e){this.left.fresh_xiItem_move_A_Item.call(this.left,t,e)},this),this.right.xiItemArr.forEach(function(t,e){this.right.fresh_xiItem_move_A_Item.call(this.right,t,e)},this)):this.xiItemArr.forEach(function(t,e){this.fresh_xiItem_move_A_Item(t,e)},this)}},{key:"fresh_xiItem_move_A_Item",value:function(t,e){t.parent.parent.updateTransform();var i=t.parent.parent.toLocal(t.xiPareP,t.xiPareObj.componentBox);u.M.setSPPoint(t.parent,i)}},{key:"fresh_xiItem_rotate_Arr",value:function(t){this.isZuHeFiled?(this.left.xiItemArr.forEach(function(e,i){e.componentBox.rotation+=t},this),this.right.xiItemArr.forEach(function(e,i){e.componentBox.rotation+=t},this)):this.xiItemArr.forEach(function(e,i){e.componentBox.rotation+=t},this)}},{key:"rotate_xiItem_change",value:function(t){this.isZuHeFiled?(this.left.fresh_xiItem_rotate_Arr.call(this.left,t),this.right.fresh_xiItem_rotate_Arr.call(this.right,t),this.left.fresh_xiItem_move_Arr.call(this.left),this.right.fresh_xiItem_move_Arr.call(this.right)):(this.fresh_xiItem_rotate_Arr(t),this.fresh_xiItem_move_Arr())}},{key:"move_xiItem_change",value:function(){this.isZuHeFiled?(this.left.fresh_xiItem_move_Arr.call(this.left),this.right.fresh_xiItem_move_Arr.call(this.right)):this.fresh_xiItem_move_Arr()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.elecNum=this._elecNum,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this._elecNum=t.elecNum,this.freshDotFrom_elecNum()}},{key:"getElecs",value:function(){return[{elecNum:this.elecNum,elecPoint:this.elecPoint.clone(),showFlag:this.showElecMagLine}]}},{key:"getComps",value:function(){var t=f["default"].getTotalElecLineNum(this.elecNum,1),e=this.startPRadius,i=this.componentBox.rotation;return[this.pointComp(this.elecNum,t,this.elecPoint.clone(),e,y["default"].TYPE_NORMAL,i)]}},{key:"getComps3D",value:function(){return[{type:1,name:this.classname,UID:this.UID,elecNum:this.elecNum,elecPoint:this.elecPoint.clone()}]}},{key:"selectRenderChild",value:function(){return this.bg?this.bg.getBounds():null}},{key:"defaultSettingChanged",value:function(){this.elecNum=this._elecNum}},{key:"ganNum",get:function(){return this.canCreateGanYingElec?this._ganNum:0},set:function(t){this._ganNum=this.isLock?0:this.canCreateGanYingElec?t:0}},{key:"elecNum",get:function(){return this._elecNum},set:function(t){t=Math.max(-100,t),t=Math.min(100,t),this._elecNum!==t&&(this._elecNum=t,this.freshDotFrom_elecNum())}}]),e}(c["default"])},457:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(0);e["default"]=function(){function t(e,i,r,a,s,l,u){n(this,t),this.sp=e,this.openIndex=r,this.closeIndex=a,this.eabase=i,this.callBack=s,this.eabase.addCursor(this.sp,"hand"),this.isOpen=l||!1,this.bindSpArr=u,this.isOpen?this.open():this.close(),this.clickId=o.M.addTouch(this.sp,{tab:this.onClick},this)}return r(t,[{key:"onClick",value:function(t){this.isOpen?this.close():this.open(),this.callBack&&this.canCallBack()&&this.callBack.call(this.eabase,this.sp,this.isOpen)}},{key:"destroy",value:function(){o.M.removeTouch(this.sp,this.clickId),this.eabase.removedCursor(this.sp),this.sp=null,this.eabase=null,this.callBack=null,this.bindSpArr=null}},{key:"canCallBack",value:function(){return!0}},{key:"open",value:function(){var t=this;this.isOpen=!0,this.sp.gotoAndStop(this.openIndex),this.bindSpArr&&this.bindSpArr.forEach(function(e){e.gotoAndStop(t.openIndex)})}},{key:"close",value:function(){var t=this;this.isOpen=!1,this.sp.gotoAndStop(this.closeIndex),this.bindSpArr&&this.bindSpArr.forEach(function(e){e.gotoAndStop(t.closeIndex)})}},{key:"setState",value:function(t){t?this.open():this.close()}}]),t}()},463:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(t){function e(t,i){n(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),a=o.__createCanvas(t,i),s=a.getContext("2d"),l=PIXI.Texture.fromCanvas(a,PIXI.SCALE_MODES.DEFAULT);return o.texture=l,o.context=s,o.canvas=a,o.W=t,o.H=i,o.defaulColor="black",l.baseTexture.resolution=1,l.baseTexture.mipmap=!1,o}return o(e,t),a(e,[{key:"setFrame",value:function(t,e,i){var n=PIXI.Texture.fromFrame(e),r=new PIXI.Sprite(n),o=t.extract.canvas(r,1);i&&this.clearCanvas(),this.context.drawImage(o,0,0,o.width,o.height,0,0,this.W,this.H),this.updateTexture()}},{key:"clearCanvas",value:function(){this.context.fillStyle=this.defaulColor,this.context.fillRect(0,0,this.W,this.H)}},{key:"setImg",value:function(t,e){e&&this.clearCanvas(),this.context.drawImage(t,0,0,t.width,t.height,0,0,this.W,this.H),this.updateTexture()}},{key:"destroy",value:function(){}},{key:"updateTexture",value:function(){this.texture.update()}},{key:"__createCanvas",value:function(t,e){var i=document.createElement("div");return i.innerHTML="<canvas width='"+t+"px' height='"+e+"px' style='width:"+t+"px;height:"+e+"px;background:#cc0000;'></canvas>",i.childNodes[0]}}]),e}(PIXI.Sprite)},464:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(e,i,r,o,a,s,l){var u=this;n(this,t),this.sp=e,this.eabase=i,this.step=r||0,this.min=o||0===o?o:-Infinity,this.max=a||0===a?a:Infinity,this.dir=s||0,this.callBack=l,this.addAngle=0,this.angle0=0,this.openAngle=-Infinity,this.rotation=this.sp.rotation,this.updateOpen(),this.eabase.addCursor(this.sp,"hand"),this.centerP=function(){return i.toGlobal(u.sp)},this.downCallBack=function(t){u.downHandleFunc(t)},this.upCallBack=function(t){u.upHandleFunc(t)},this.rotCallBack=function(t,e){u.rotateHandleFunc(t,e)},this.sp.rotateData={pareComp:i,cenP:this.centerP,rotateHandleFunc:this.rotCallBack,downHandleFunc:this.downCallBack,upHandleFunc:this.upCallBack},i.phy.addRotateTool(this.sp)}return r(t,[{key:"setValueRange",value:function(t,e){return this.minV=t,this.maxV=e,this.valueFlag=!0,this}},{key:"getValue",value:function(){return this.valueFlag?this.rotation2value(this.rotation):null}},{key:"setValue",value:function(t){if(this.valueFlag){this.setRotation(this.value2rotation(t))}return this}},{key:"setLevel0Angle",value:function(t){return this.angle0=t,this}},{key:"setLevel",value:function(t){var e=this.angle0+this.step*t;return this.rotation=e,this.sp.rotation=e,this.updateOpen(),this}},{key:"rotation2value",value:function(t){return this.linearMapping([this.min,this.max],[this.minV,this.maxV],t)}},{key:"value2rotation",value:function(t){return this.linearMapping([this.minV,this.maxV],[this.min,this.max],t)}},{key:"setRotation",value:function(t,e){return this.rotation=t,this.sp.rotation=t,this.updateOpen(),e&&this.callBack.call(this.eabase,this.sp,this.rotation,0,0,this),this}},{key:"getLevel",value:function(t){return(t=t||Math.round)((this.rotation-this.angle0)/this.step)}},{key:"setOpenAngle",value:function(t){return this.openAngle=t,this.updateOpen(),this}},{key:"updateOpen",value:function(){this.isOpen=this.rotation>this.openAngle}},{key:"destroy",value:function(){this.eabase.removedCursor(this.sp),this.eabase.phy.removeRotateTool(this.sp),this.downCallBack=null,this.upCallBack=null,this.rotCallBack=null,this.centerP=null,this.sp=null,this.callBack=null,this.eabase=null}},{key:"downHandleFunc",value:function(t){this.addAngle=0,this.eabase.cannotSystemDrag=!0}},{key:"upHandleFunc",value:function(t){this.eabase.cannotSystemDrag=!1,this.updateOpen(),this.isOpen||(this.rotation=this.angle0,this.sp.rotation=this.angle0)}},{key:"rotateHandleFunc",value:function(t,e){if(this.addAngle+=e,this.dir*this.addAngle>=0&&Math.abs(this.addAngle)>Math.abs(this.step)){var i=this.addAngle%this.step||0,n=this.rotation+this.addAngle-i;if(this.min>n?(i-=this.min-n,n=this.min):n>this.max&&(i+=this.max-n,n=this.max),this.rotation===n)return;this.rotation=n,this.sp.rotation=n;var r=this.addAngle;this.addAngle=i;var o=this.isOpen;this.updateOpen(),o=o||this.isOpen,o&&this.callBack.call(this.eabase,this.sp,this.rotation,i,r,this)}}},{key:"linearMapping",value:function(t,e,i,n){var r=t.length,o=0,a=1;n=n||1;for(var s=1;r>s;s++)1===n?i>t[s]&&(o++,a++):t[s]>i&&(o++,a++);return(e[o]-e[a])*(i-t[o])/(t[o]-t[a])+e[o]}}]),t}()},465:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(102),c=n(h),p=i(101),f=n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=2;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resArr=[],i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,1]],wire:[[[1,1],[2,0]]],res:[[1,0],[2,c["default"].MIN_RESISTANCE]]}),this.bar1.iElecInter=2}},{key:"overStep",value:function(){Math.abs(this.bar2.curElec)>c["default"].DAMAGE_A?(this.delayBreak(),this.branchChange=!0):this.breakInterval&&(clearTimeout(this.breakInterval),this.breakInterval=null)}},{key:"delayBreak",value:function(){var t=this;this.bar1.isBreak||this.breakInterval||(this.breakInterval=setTimeout(function(){t["break"]()},10))}},{key:"break",value:function(){this.bar1.isBreak=!0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this)}},{key:"repair",value:function(){this.bar1.isBreak=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.Resistance=this.bar2.Resistance,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.bar2.Resistance=t.Resistance}},{key:"getShowValue",value:function(){return this.bar2.Resistance===c["default"].MIN_RESISTANCE?"0Ω":this.bar2.Resistance+"Ω"}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.getShowValue();return this.resArr.length&&i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("inResistance"),canEnter:!0,enterUnit:"Ω",maxValue:1e3,minValue:.1,showValue:n,value:this.resArr,callBack:function(e){var i=e.showValue,n=u.M.getNumStr(i)-0;0===n&&(n=c["default"].MIN_RESISTANCE),t.bar2.Resistance=n,t.diyChanged()}}),i}},{key:"Power",get:function(){return this.bar1?this.bar1.Power:0},set:function(t){this.bar1&&(this.bar1.Power=t)}}]),e}(f["default"])},466:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);t.length>e;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(0),l=i(478),u=n(l),h=i(480),c=n(h),p=i(484),f=n(p),d=function(){function t(e){o(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.main=this.globalConfig.main}return a(t,[{key:"destroy",value:function(){this.elect_Update.destroy(),this.elect_Update=null,this.moduleMain=null,this.globalConfig=null}},{key:"init",value:function(){this.elect_Update=new u["default"](this.moduleMain),this.electricField_Update=new c["default"](this.moduleMain),this.magneticField_Update=new f["default"](this.moduleMain)}},{key:"setActive",value:function(t){this.elect_Update.setActive(t)}},{key:"diyChanged",value:function(t){this.globalConfig&&this.globalConfig.main&&this.globalConfig.main.isDestroy||this.elect_Update&&(this.elect_Update.checkAllChanged(t),this.globalConfig.main.dispatchEvent("diyChanged"))}},{key:"checkIsWire",value:function(t){return!!t&&1===t.iElecInter}},{key:"getBposterWires",value:function(t){var e=[];return t&&t.bindinger&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length>0&&$.each(t.bindinger.friendPostersArr,function(t,i){"ElecWire"!==i.body.classname&&"ElecFamilyWire"!==i.body.classname||e.push(i)}),e}},{key:"getBposterWiresBody",value:function(t){var e=this.getBposterWires(t),i=[];return each(e,function(t,e){i.push(e.body)}),i}},{key:"getAllBposterWires",value:function(t){var e=[];return $.each(t.bPsArr,function(t,i){$.each(i.friendPostersArr,function(t,i){"ElecWire"!==i.body.classname&&"SElecWire"!==i.body.classname||e.push(i)})}),e}},{key:"getAllElecWires",value:function(t){var e=new s.HashMap;return t.bPsArr&&$.each(t.bPsArr,function(t,i){$.each(i.friendPostersArr,function(t,i){"ElecWire"!==i.body.classname&&"SElecWire"!==i.body.classname&&"ElecFamilyWire"!==i.body.classname||e.put(i.body.UID,i.body)})}),e.values()}},{key:"getWireLinkBposter",value:function(t){var e=this,i=null;return t&&t.bindinger&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length&&$.each(t.bindinger.friendPostersArr,function(t,n){if(!e.checkIsWire(n.body))return i=n,!1}),i}},{key:"getWireBposterElec",value:function(t){var e=this,i=null;return t&&t.bindinger&&t.bindinger.friendPostersArr&&t.bindinger.friendPostersArr.length&&$.each(t.bindinger.friendPostersArr,function(t,n){if(!e.checkIsWire(n.body))return i="BaseElecResistance"===n.body.classname?n.body.zuheBox:n.body,!1}),i}},{key:"getWireAllBposterElecs",value:function(t){if(!t)return[];var e=new Map,i=this.getWireBposterElec(t.bposter0),n=this.getWireBposterElec(t.bposter1);return i&&e.set(i.uid,i),n&&e.set(n.uid,n),[].concat(r(e.values()))}},{key:"checkIsDuan",value:function(t){if(!t||this.checkIsWire(t))return!1;var e=this.getBposterWiresBody(t.bposter0),i=this.getBposterWiresBody(t.bposter1),n=!1;return each(e,function(t,e){if(each(i,function(t,i){if(e.uid===i.uid)return n=!0,!1}),n)return!1}),n}},{key:"checkIsPower",value:function(t){return 2===t.iElecInter}},{key:"checkIsLamp",value:function(t){return 3===t.iElecInter}},{key:"checkIsVoltmeter",value:function(t){return 4===t.iElecInter}},{key:"checkIsAmpereMeter",value:function(t){return 5===t.iElecInter}},{key:"getNextName",value:function(e){var i=void 0;switch(e.iElecInter){case 3:i=t.L;break;case 7:i=t.S;break;case 5:i=t.A;break;case 4:i=t.U;break;case 2:i=t.E;break;case 0:case-1:i="SolenoidalWinding"===e.classname||"SimpleCoilSkin"===e.classname||"SolenoidMagneticInductionLine"===e.classname?t.L:"ElecBuzzer"===e.classname?t.H:"ElecMotors"===e.classname?t.M:t.R}var n=this.globalConfig.main.getEquipmentArr(),r=n.length,o=[],a=void 0;for(a=0;r>a;a++){var l=n[a];if(l.component){var u=l.component;if(!u.flagLabel||0===u.flagLabel.length)continue;var h=!1;switch(i){case t.L:"ElecLampAndHolder"!==u.classname&&"ElecLampAndHolderRes"!==u.classname&&"SimpleCoilSkin"!==u.classname&&"SolenoidalWinding"!==u.classname||(h=!0);break;case t.S:"ElecSinglePloeSingleThrowSwitch"!==u.classname&&"ElecSinglePloeDoubleThrowSwitch"!==u.classname||(h=!0);break;case t.A:"InlandAmpereMeter"!==u.classname&&"ElecAmpereMeter"!==u.classname&&"SensitivityGalvanometer"!==u.classname||(h=!0);break;case t.U:"InlandVoltmeter"===u.classname&&(h=!0);break;case t.R:"ElecResistanceBox"!==u.classname&&"ElecResistance"!==u.classname&&"ElecSlideRheostat"!==u.classname||(h=!0);break;case t.E:"DryBattery"!==u.classname&&"BatteryHolder"!==u.classname&&"Battery"!==u.classname&&"ElecPowerStudent"!==u.classname||(h=!0);break;case t.H:"ElecBuzzer"===u.classname&&(h=!0);break;case t.M:"ElecMotors"===u.classname&&(h=!0)}if(!h)continue;o.push(u.flabel2.text-0)}}var c=i;if(0===o.length)return c+1;o.sort(Array.NUMERIC);var p=-1;for(a=0;o.length>a;a++){var f=a+1;s.ArrayUtil.arrayContainsValue(o,f)||(p=f)}return-1!==p?c+p:c+(o.length+1)}},{key:"modifyBinPosterType",value:function(t,e){if(!this.checkIsWire(this)){var i=t.bindinger.friendPostersArr,n=void 0,r=i.length;for(n=0;r>n;n++){var o=i[n];this.checkIsWire(o.body)&&(o.binPoster.currentFrame=e)}t.bindinger.body.updateBinds()}}},{key:"linkWireBindMC",value:function(t,e){var i=void 0,n=void 0,r=e.bindinger.friendPostersArr.concat([e.bindinger]);for(n=r.length,i=0;n>i;i++){var o=r[i];o.friendPostersArr.push(t.bindinger),t.bindinger.friendPostersArr.push(o)}}},{key:"setBindXY",value:function(t,e){t.x=e.x+e.width/2,t.y=e.y,!this.globalConfig.DEBUG&&e.parent&&e.parent.removeChild(this.bp)}},{key:"getMagStaCompArr",value:function(){for(var t=[],e=this.globalConfig.main.getEquipmentArr(),i=e.length-1;i>=0;i--){var n=e[i];n&&(n.component&&(n=n.component,n.isLock||2===n.magType&&t.push(n)))}return t}},{key:"getElecStaCompArr",value:function(){for(var t=[],e=this.globalConfig.main.getEquipmentArr(),i=e.length-1;i>=0;i--){var n=e[i];n&&(n.component&&(n=n.component,n.isLock||1===n.magType&&t.push(n)))}return t}},{key:"getEquipmentArr",value:function(t){var e=this.globalConfig.main.getEquipmentArr(),i=[];return t?t instanceof Array?$.each(e,function(e,n){n.component&&s.ArrayUtil.arrayContainsValue(t,n.component.classname)&&i.push(n.component)}):$.each(e,function(e,n){n.component&&n.component.classname===t&&i.push(n.component)}):$.each(e,function(t,e){i.push(e.component)}),i}},{key:"findEAb",value:function(t,e){return s.ArrayUtil.clear(t.mapfind),e.bindinger?this.findBindEA(t,e.bindinger.friendPostersArr):null}},{key:"findBindEA",value:function(t,e){var i=void 0,n=e.length;for(i=0;n>i;i++)if(-1===t.mapfind.indexOf(e[i]))if(t.mapfind.push(e[i]),this.checkIsWire(e[i].body)){var r=0;if(0!==(r="bposter0"===e[i].name?this.findBindEA(t,e[i].body.bposter1.bindinger.friendPostersArr):this.findBindEA(t,e[i].body.bposter0.bindinger.friendPostersArr)))return r}else{if(!e[i].body)return 0;var o=e[i].body.classname;if("ElectricAppliance"===o||"MetalPlates"===o)return e[i];if(e[i].body.isBreak)return 0;for(var a=[],s=0;;){if(!e[i].body["bposter"+s])break;e[i].body["bposter"+s].UID!==e[i].UID&&a.push(e[i].body["bposter"+s]),s++}var l=void 0,u=a.length;for(l=0;u>l;l++){var h=a[l].bindinger.body.classname;if("ElectricAppliance"===h||"MetalPlates"===h)return a[l];var c=this.findBindEA(t,a[l].bindinger.friendPostersArr);if(0!==c)return c}}return 0}},{key:"getTime",value:function(){return this.elect_Update.time}},{key:"getTimeStep",value:function(){return this.elect_Update.timeStep}},{key:"getUnNode",value:function(t,e){return _.get(t,"bposter"+e+".bindinger.unNode",null)}},{key:"getUnNodeUID",value:function(t,e){return _.get(t,"bposter"+e+".bindinger.unNode.UID",null)}},{key:"checkBindingerInElec",value:function(t){if(!t||!t.length)return!1;for(var e=null,i=0;t.length>i;i++){var n=t[i],r=_.get(n,"unNode.UID",null);if(!r)return!1;if(e){if(e!==r)return!1}else e=r}return!0}},{key:"checkBindMCInElec",value:function(t){return!!t&&this.checkBindingerInElec(t.map(function(t){return t.bindinger}))}},{key:"checkBPsInOneHui",value:function(t){return!(!t||!t.bPsArr)&&this.checkBindingerInElec(t.bPsArr)}},{key:"getNearWireBinding",value:function(t){var e=this;this.main.view.updateTransform();var i=[],n=this.getEquipmentArr("ElecWire"),r=[];return n.forEach(function(t){t.bPsArr.forEach(function(t){0===t.friendPostersArr.length&&r.push(t)})}),r.length>0&&r.forEach(function(n){var r=e.main.view.toLocal(new s.Point,n.BindMC),o=e.main.view.toLocal(new s.Point,t.BindMC);s.M.getPointLen(r,o)>e.globalConfig.connectMinDistanceNumber||i.push(n)}),i}},{key:"getNearBinding",value:function(t){var e=this;if(!t)return null;this.globalConfig.main.view.updateTransform();var i=t.BindMC.toGlobal(),n=this.getEquipmentArr(),r=99999999,o=void 0;if(n.forEach(function(t){e.checkIsWire(t)||t.bPsArr&&t.bPsArr.length&&t.bPsArr.forEach(function(t){var e=t.BindMC.toGlobal(),n=s.M.getPointLen(i,e);r>n&&(r=n,o=t)})}),o){var a=this.globalConfig.main.view.toLocal(new s.Point,t.BindMC),l=this.globalConfig.main.view.toLocal(new s.Point,o.BindMC);if(this.globalConfig.connectMinDistanceNumber>s.M.getPointLen(a,l))return o}return null}}]),t}();d.L="L",d.S="S",d.A="A",d.U="V",d.R="R",d.E="E",d.H="H",d.M="M",d.VD="VD",d.C="C",d.BATTERY_LEFT=3,d.BATTERY_RIGHT=2,d.LAMP_RIGHT=4,d.LAMP_LEFT=5,d.SLIDE_TOP_LEFT=8,d.SLIDE_TOP_RIGHT=9,d.SLIDE_BOTM_LEFT=6,d.SLIDE_BOTM_RIGHT=7,e["default"]=d},469:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e["default"]=function r(t,e){n(this,r),this.fl=t||0,this.re=e||0}},474:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(101),c=n(h),p=i(102),f=n(p);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.zhen=null,i.oriAngle=0,i.unit="V",i.validNum=2,i.rotPower=0,i.curPower=0,i.vScale=1,i.angleP=1,i.minStep=i.getMinStep(),i.MIN_POWER=-.2,i.MAX_POWER=.6,i}return a(e,t),s(e,[{key:"getMinStep",value:function(){return.01/this.angleP}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.minStep=this.getMinStep(),this.ticker=u.M.addTicker(this.update,this,!0)}},{key:"removed",value:function(){u.M.removeTicker(this.ticker),this.ticker=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){if(this.curPower!==this.rotPower){var t=this.curPower-this.rotPower;Math.abs(t)<this.minStep?this.rotPower=this.curPower:this.rotPower+=.2*t,this.updateLabel();var e=!1;this.rotPower>this.MIN_POWER*f["default"].ELEC_BREAK_BEI?this.MAX_POWER*f["default"].ELEC_BREAK_BEI>this.rotPower||(this.rotPower=this.MAX_POWER*f["default"].ELEC_BREAK_BEI,e=!0):(this.rotPower=this.MIN_POWER*f["default"].ELEC_BREAK_BEI,e=!0),e&&(this.curPower=0,this["break"]()),this.updatePointerRotation()}}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),0===t&&this.updatePointerRotation(),this.updateLabel()}},{key:"updatePointerRotation",value:function(){this.zhen.rotation=this.power2angle(this.isBreak?0:this.rotPower)}},{key:"updateLabel",value:function(){this.freshLabel(u.M.getNumJie(this.rotPower*this.vScale,this.validNum)+this.unit)}},{key:"power2angle",value:function(t){return this.oriAngle+t*this.angleP}},{key:"getData",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t)}},{key:"getConf",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}}]),e}(c["default"])},478:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),s=i(487),l=n(s),u=i(503),h=n(u),c=i(102),p=n(c);e["default"]=function(){function t(e){r(this,t),this.INPUT_ELEC_NAME_DEBUG=!1,this.SHOW_UNNODES_DEBUG=!1,this.moduleMain=e,this.globalConfig=e.globalConfig,this.main=this.globalConfig.main,this.NBEvent=this.main.constructor.NBEvent,this.ZERO_RESISTANCE=p["default"].MIN_RESISTANCE,this.allCompArr=[],this.staCompArr=[],this.zuheCompArr=[],this.huiArr=[],this.isChangeTrue=!1,this.time=0,this.timeStep=5e-6,this.stepLoopStepTime=0,this.addLoopInit()}return o(t,[{key:"checkAllChanged",value:function(){this.isChangeTrue=!0,this.updateCircuit()}},{key:"updateCircuit",value:function(){this.freshEquipmentArr(),this.checkNodeChange()&&(this.setChangeFalse(),this.runCircuit())}},{key:"checkNodeChange",value:function(){if(this.isChangeTrue)return!0;for(var t=!1,e=this.allCompArr.length,i=0;e>i;i++){if(this.allCompArr[i].branchChange){t=!0;break}}return t}},{key:"setChangeFalse",value:function(){this.isChangeTrue=!1;for(var t=this.allCompArr.length,e=0;t>e;e++){this.allCompArr[e].branchChange=!1}}},{key:"runCircuit",value:function(){this.startStepDis(),this.doStepDis()?this.isChangeTrue=!0:this.endStepDis()}},{key:"startStepDis",value:function(){for(var t=this.allCompArr.length,e=0;t>e;e++){var i=this.allCompArr[e];i._findFlag=0,i.huiArr=[],i.bPsArr.forEach(function(t){t.Un=0,t.unNode=null,t._findFlag=0}),i.startStep.call(i)}}},{key:"doStepDis",value:function(){var t=this,e=!1;return this.findHuiArr().forEach(function(i){i.forEach(function(t){t.huiArr=i});var n=new h["default"](t);if(n.createNodes(i),n.elecArr.length&&n.unNodes.length){var r=n.elecArr.length,o=new l["default"];o.setHead(n.unNodes.length-1);for(var s=0;r>s;s++){var u=n.elecArr[s];if(1===u.elecType)u.Resistance>0?o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,u.Resistance,1):0===u.Resistance&&t.showElecLine&&o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,t.ZERO_RESISTANCE,1);else if(9===u.elecType||10===u.elecType)o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,u.compResistance,1),o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,u.Source,2);else if(3===u.elecType)o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,-u.Power,3);else if(2===u.elecType)o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,-u.Source,2);else if(12===u.elecType){var c=u.bposter0.bindinger.unNode.number,p=u.bposter1.bindinger.unNode.number,f=u.bposter2.bindinger.unNode.number,d=u.bposter3.bindinger.unNode.number;o.appendVCCurrentSource(c,f,p,d,u.node_a2),o.appendVCCurrentSource(p,d,c,f,u.node_a3),o.appendBranch(c,f,a1,13),o.appendBranch(p,d,a4,13),o.appendBranch(c,f,u.Source1,2),o.appendBranch(p,d,u.Source2,2)}}var y=o.caculate();if(y&&y.vns){for(var g=null,_=0,b=0;y.vns.length>b;b++){var v=n.unNodes[b+1];v.Un=y.vns[b][0],v.isGround&&(g=v),_=Math.min(_,v.Un)}g&&(_=g.Un),n.unNodes.forEach(function(t){t.Un-=_})}else{for(var m=0;n.unNodes.length>m;m++)n.unNodes[m].destroy.call(n.unNodes[m]);a.ArrayUtil.clear(n.unNodes)}n.unNodes.forEach(function(t){t.freshUn.call(t)});var P=n.reLoopCacu();e=e||P}}),e}},{key:"endStepDis",value:function(){for(var t=this.allCompArr.length,e=0;t>e;e++){var i=this.allCompArr[e];i.endStep.call(i);var n=i.bPsArr;2===n.length&&(n[0].unNode&&n[1].unNode&&n[0].unNode.UID===n[1].unNode.UID?(i.curPower=n[1].Un-n[0].Un,0!==i.Resistance&&i.Resistance!==p["default"].MAX_RESISTANCE?(i.curElec=i.isBreak?0:i.curPower/i.Resistance,i.setWorkElec.call(i,i.curElec)):0===i.Resistance&&(this.showElecLine?(i.curElec=i.isBreak?0:i.curPower/this.ZERO_RESISTANCE,i.setWorkElec.call(i,i.curElec)):i.setWorkElec.call(i,null)),i.setWorkPower.call(i,i.curPower)):(i.curPower=0,i.curElec=0,i.isBreak||(i.setWorkElec.call(i,0),i.setWorkPower.call(i,0)))),i.overStep.call(i)}this.zuheCompArr.forEach(function(t){t.overStep.call(t)})}},{key:"freshEquipmentArr",value:function(){var t=this;a.ArrayUtil.clear(this.zuheCompArr),a.ArrayUtil.clear(this.allCompArr),a.ArrayUtil.clear(this.staCompArr);for(var e=this.main.viewStack.children.length,i=0;e>i;i++){var n=this.main.viewStack.getChildAt(i).component;n.bposter0&&n.bposter1&&(n.isZuHe?(this.zuheCompArr.push(n),this.allCompArr=this.allCompArr.concat(n.zuheCompArr)):this.allCompArr.push(n),this.staCompArr.push(n))}if(7===this.globalConfig.version&&this.moduleMain.elecFamilyPower){var r=this.moduleMain.elecFamilyPower;this.zuheCompArr.push(r),this.allCompArr=this.allCompArr.concat(r.zuheCompArr)}if(this.moduleMain.groundElecManager){this.moduleMain.groundElecManager.getAllLinkElec().forEach(function(e){t.allCompArr.push(e)})}}},{key:"findHuiArr",value:function(){for(var t=this,e=this.allCompArr.filter(function(t){return!(t.isBreak||!t.elecConnect)}),i=[];e.length;){(function(){var n=e.shift();if(0!==n._findFlag)return"continue";n._findFlag=1;for(var r=[n],o=[];r.length;)!function(){var e=r.shift();if(e.bPsArr.forEach(function(t){t.friendPostersArr.forEach(function(t){var e=t.body;e&&!e.isBreak&&e.elecConnect&&0===e._findFlag&&(e._findFlag=1,r.push(e))})}),e.isGround&&t.moduleMain.groundElecManager){t.moduleMain.groundElecManager.getAllLinkElec().forEach(function(t){!t.isBreak&&t.elecConnect&&t.UID!==e.UID&&0===t._findFlag&&(t._findFlag=1,r.push(t))})}e._findFlag=2,o.push(e)}();i.push(o)})()}return i}},{key:"addLoopInit",value:function(){this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.main.addEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandle({isRunning:this.main.isRunning})}},{key:"canvasRunHandle",value:function(t){this.setActive(t.isRunning)}},{key:"setActive",value:function(t){}},{key:"stepLoop",value:function(){var t=this;this.stepLoopStepTime>0?this.stepLoopTimerFlag||(this.stepLoopTimerFlag=setTimeout(function(){t.updateCircuit(),t.time+=t.timeStep,t.stepLoopTimerFlag=0},this.stepLoopStepTime)):(this.updateCircuit(),this.time+=this.timeStep)}},{key:"destroy",value:function(){this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"showElecLine",get:function(){return this.globalConfig.showElecLine}}]),t}()},479:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(0),a=i(485),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(){n(this,t),this.elecArr_=[],this.CONST_k=9e9,this.GAN_VALID_MAXDIS=300,this.GAN_VALID_MINDIS=40}return r(t,[{key:"appendOne",value:function(t,e,i,n){this.elecArr_.push(new s["default"](t,e,new o.Vector2DMath(i,n)))}},{key:"clear",value:function(){o.ArrayUtil.clear(this.elecArr_)}},{key:"caculate",value:function(){var t=void 0,e=void 0,i=void 0,n=void 0;for(i=this.elecArr_.length-1,n=this.elecArr_.length,t=0;i>t;t++)for(e=t+1;n>e;e++){var r=this.getTwo_ganNum(this.elecArr_[t],this.elecArr_[e]);0>this.elecArr_[e].elecNum?this.elecArr_[t].ganNum-=r:this.elecArr_[t].ganNum+=r;var o=this.getTwo_ganNum(this.elecArr_[e],this.elecArr_[t]);0>this.elecArr_[t].elecNum?this.elecArr_[e].ganNum-=o:this.elecArr_[e].ganNum+=o}}},{key:"getTwo_ganNum",value:function(t,e){var i=void 0,n=t.v.dist(e.v);return i=n>this.GAN_VALID_MINDIS?this.GAN_VALID_MAXDIS>n?e.elecNum*this.GAN_VALID_MINDIS/n:0:e.elecNum,Math.abs(i)}},{key:"getElecV",value:function(t,e,i){var n=new o.Vector2DMath,r=this;return $.each(this.elecArr_,function(a,s){if(i&&o.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=r.getOneElecV(t,e,s);n.add(l)}),n}},{key:"getOneElecV",value:function(t,e,i){var n=i.v.dist_XY(t,e);if(0==n||n>2*this.GAN_VALID_MAXDIS)return new o.Vector2DMath(0,0);var r=Math.abs(this.CONST_k*i.elecNum/i.v.distSquared_XY(t,e)),a=new o.Vector2DMath(t-i.v.x,e-i.v.y);0>i.elecNum&&(a.x=-a.x,a.y=-a.y);var s=a.length;return new o.Vector2DMath(a.x/s*r,a.y/s*r)}},{key:"elecArr",value:function(){return this.elecArr_}}]),t}()},480:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(215),s=(n(a),i(479)),l=n(s),u=i(0);e["default"]=function(){function t(e){r(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.allCompArr=[],this.staCompArr=[],this.zuheFiledCompArr=new u.HashMap,this.core_=new l["default"],this.huiArr=[],this.oneHuiArr=new u.HashMap,this.allCompArrW_=[],this.allCompArrT=[]}return o(t,[{key:"checkAllChanged",value:function(){var t=this;u.ArrayUtil.clear(this.huiArr),this.getAll_comp();var e=void 0;for(e=0;this.allCompArr.length>e;e++)this.allCompArr[e].isLock&&(this.allCompArr.splice(e,1),e--);this.allCompArrT=u.ArrayUtil.copyArray(this.allCompArr),this.cacu_allElecs(),this.setFriends(),$.each(this.staCompArr,function(e,i){i.allCompArr=this.allCompArr,i.staCompArr=this.staCompArr,i.caculateBegin.call(i),i.getElecVFunc=function(e,i){return t.getElecV(e.x,e.y,i)}}),this.average_huiArr(),this.core_.clear(),$.each(this.allCompArr,function(e,i){if(i.isLock)return!0;t.core_.appendOne(i.UID,i.elecNum,i.elecPoint.x,i.elecPoint.y)}),this.core_.caculate(),$.each(this.core_.elecArr_,function(e,i){t.allCompArr[e].ganNum=i.ganNum}),$.each(this.allCompArr,function(t,e){e.setGanYingElec.call(this,{ganNum:e.ganNum})}),$.each(this.allCompArr,function(e,i){var n=t.getElecV(i.elecPoint.x,i.elecPoint.y),r=t.getNearItem(i);r?(n.nearNum=r.elecNum,n.nearItem=r,i.setElectricField(n)):(n.nearNum=0,n.nearItem=null,i.setElectricField(n))}),$.each(this.staCompArr,function(t,e){if(e.isLock)return!0;e.caculateOver.call(e,"mag")})}},{key:"getNearItem",value:function(t){var e=1e5,i=null;return $.each(this.allCompArr,function(n,r){if(t==r||t.UID==r.UID||"WastPaper"==r.classname)return!0;var o=u.M.getPointLen(r.elecPoint,t.elecPoint);e>o&&(e=o,i=r)}),i}},{key:"average_huiArr",value:function(){$.each(this.huiArr,function(t,e){var i=0,n=0;$.each(e,function(t,e){if(e.isLock)return!0;n++,i+=e.elecNum});var r=Math.floor(i/n*10)/10;$.each(e,function(t,e){if(e.isLock)return!0;e.elecNum=r})})}},{key:"getElecV",value:function(t,e,i){var n=this.core_.getElecV(t,e,i);return{x:n.x,y:n.y}}},{key:"setFriends",value:function(){var t=this;$.each(this.allCompArr,function(t,e){u.ArrayUtil.clear(e.friendArr)}),$.each(this.huiArr,function(e,i){$.each(i,function(e,n){n.friendArr=t.get_item_friendArr(i,n)})})}},{key:"get_item_friendArr",value:function(t,e){var i=[];return $.each(t,function(t,n){n.UID!=e.UID&&i.push(n)}),i}},{key:"cacu_allElecs",value:function(){var t=this;this.oneHuiArr.clear();var e=[];if(0!=this.allCompArrT.length){for(e.push(this.allCompArrT.pop());e.length>0;){var i=e.shift();this.oneHuiArr.insert(i.UID,i);var n=this.get_OtherItems(i,this.allCompArr);if(!n)return;$.each(n,function(i,n){t.oneHuiArr.containsKey(n.UID)||u.ArrayUtil.arrayContainsValue(e,n)||(u.ArrayUtil.removeValueFromArray(t.allCompArrT,n),e.push(n))})}var r=this.oneHuiArr.values();2>r.length||this.huiArr.push(r),this.allCompArrT.length>0&&this.cacu_allElecs()}}},{key:"get_OtherItems",value:function(t,e){var i=[];if(!t)return this.hitArr_;return $.each(e,function(e,n){n.hitRect&&!n.isLock&&t.checkHitRect&&t.checkHitRect(n)&&i.push(n)}),i}},{key:"getAll_comp",value:function(){var t,e,i=void 0,n=void 0;this.hasZuhe=!1,u.ArrayUtil.clear(this.allCompArr),u.ArrayUtil.clear(this.staCompArr),this.zuheFiledCompArr.clear();var r=this.globalConfig.main.getEquipmentArr();for(i=r.length-1;i>=0;i--){var t=r[i];t&&(t.component&&(t=t.component,-2==t.iElecInter&&(this.staCompArr.push(t),t.isZuHeFiled?(this.zuheFiledCompArr.insert(t.UID,t),this.allCompArr=this.allCompArr.concat(t.zuheFiledCompArr),this.hasZuhe=!0):this.allCompArr.push(t))))}for(n=this.staCompArr.length,i=0;n>i;i++){var e=this.staCompArr[i];e.allCompArr=this.allCompArr,e.staCompArr=this.staCompArr}}},{key:"removeElec",value:function(t){t&&this.zuheFiledCompArr.remove(t.UID)}}]),t}()},481:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(0);e["default"]=function o(t,e,i){n(this,o),this.UID=t,this.magNum=e,(this.v=i)||(this.v=new r.Vector2DMath)}},482:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(0);e["default"]=function o(t,e,i,a,s){n(this,o),this.UID=t,this.lineL=e,this.v=i,a&&(this.topP=a.clone()),s&&(this.bottomP=s.clone()),this.v||(this.v=new r.Vector2DMath)}},483:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),s=i(481),l=n(s),u=i(482),h=n(u);e["default"]=function(){function t(){r(this,t),this.magArr_=[],this.magLineArr_=[],this.CONST_k=1e6,this.GAN_VALID_MAXDIS=120,this.GAN_VALID_MINDIS=40}return o(t,[{key:"appendOne",value:function(t,e,i,n){this.magArr_.push(new l["default"](t,e,new a.Vector2DMath(i,n)))}},{key:"appendLineOne",value:function(t,e,i,n,r,o){this.magLineArr_.push(new h["default"](t,n,new a.Vector2DMath(e,i),r,o))}},{key:"clear",value:function(){a.ArrayUtil.clear(this.magArr_),a.ArrayUtil.clear(this.magLineArr_)}},{key:"caculate",value:function(){var t=void 0,e=void 0;for(this.magArr_.length-1,this.magArr_.length,t=0;this.magArr_.length-1>t;t++)for(e=t+1;this.magArr_.length>e;e++){var i=this.getTwo_ganNum(this.magArr_[t],this.magArr_[e]);0>this["this"].magArr_[e].magNum?this.magArr_[t].ganNum-=i:this.magArr_[t].ganNum+=i;var n=this.getTwo_ganNum(this.magArr_[e],this.magArr_[t]);0>this.magArr_[t].magNum?this.magArr_[e].ganNum-=n:this.magArr_[e].ganNum+=n}}},{key:"getTwo_ganNum",value:function(t,e){var i=t.v.dist(e.v);return i>this.GAN_VALID_MINDIS?this.GAN_VALID_MAXDIS>i?e.magNum*this.GAN_VALID_MINDIS/i:0:e.magNum}},{key:"getMagV",value:function(t,e,i){var n=new a.Vector2DMath,r=this;return $.each(this.magArr_,function(o,s){if(i&&a.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=r.getOneMagV(t,e,s);n.add(l)}),$.each(this.magLineArr_,function(o,s){if(i&&a.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=r.getOneLineMagV(t,e,s);n.add(l)}),n}},{key:"getOneLineMagV",value:function(t,e,i){if(0==i.lineL)return new a.Vector2DMath;var n=new a.Vector2DMath,r=new a.Point(t,e),o=a.M.getPointLen(r,i.topP)+a.M.getPointLen(r,i.bottomP)-a.M.getPointLen(i.topP,i.bottomP),s=void 0;if(1>Math.abs(o))s=1;else{var l=a.M.getGaoDianFrom3Dian(r,i.topP,i.bottomP);if(!a.M.checkInLineAB(l,i.topP,i.bottomP,.5))return new a.Vector2DMath(0,0);s=a.M.getPointLen(r,l),s=Math.max(2,s)}var u=170-s/10;u=Math.max(1,u),u*=i.lineL;var h=new a.Point(i.topP.x-i.bottomP.x,i.topP.y-i.bottomP.y);h=a.M.rotaPoint(h,a.M.toHu(90)),n.x=h.x,n.y=h.y;var c=n.length;return new a.Vector2DMath(-n.x/c*u,-n.y/c*u)}},{key:"getOneMagV",value:function(t,e,i){if(0==i.v.dist_XY(t,e))return new a.Vector2DMath(0,0);var n=Math.abs(this.CONST_k*i.magNum/i.v.distSquared_XY(t,e)),r=new a.Vector2DMath(t-i.v.x,e-i.v.y);0>i.magNum&&(r.x=-r.x,r.y=-r.y);var o=r.length;return new a.Vector2DMath(r.x/o*n,r.y/o*n)}},{key:"get_magArr",value:function(){return this.magArr_}}]),t}()},484:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(0),a=i(483),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(){function t(e){n(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.allCompArr=[],this.staCompArr=[],this.core_=new s["default"]}return r(t,[{key:"checkAllChanged",value:function(){this.getAll_comp.call(this);var t=this;$.each(this.staCompArr,function(e,i){i.allCompArr=t.allCompArr,i.staCompArr=t.staCompArr,i.caculateBegin&&i.caculateBegin.call(t),i.getMagVFunc=function(t,e){return getMagV(t.x,t.y,e)}}),this.core_.clear(),$.each(this.allCompArr,function(e,i){if(i.isLock)return!0;if("AstElecComp"===i.classname){var n=Math.abs(i.curPower)>1e-6?i.curPower:0;t.core_.appendLineOne(i.UID,i.x,i.y,n,i.getGlobalTopP(),i.getGlobalBottomP())}else t.core_.appendOne(i.UID,i.magNum,i.magPoint.x,i.magPoint.y)}),$.each(this.allCompArr,function(e,i){if(i.isLock)return!0;var n=t.getMagV(i.magPoint.x,i.magPoint.y);if(i.setMagtricField){var r=t.getNearItem(i);r&&(n.nearNum=r.magNum,n.nearItem=r,i.setMagtricField(n))}}),$.each(this.allCompArr,function(t,e){if(e.isLock)return!0;e.caculateOver&&e.caculateOver.call(e)})}},{key:"getNearItem",value:function(t){var e=this.globalConfig.main.view.toLocal(new o.Point,t),i=1e5,n=null;return $.each(this.allCompArr,function(r,a){var s=o.M.getPointLen(a.magPoint,e);if(a.UID==t.UID||0==a.magNum)return!0;i>s&&(i=s,n=a)}),n}},{key:"getMagV",value:function(t,e,i){var n=this.core_.getMagV(t,e,i);return{x:n.x,y:n.y}}},{key:"getAll_comp",value:function(){o.ArrayUtil.clear(this.allCompArr),o.ArrayUtil.clear(this.staCompArr);var t=void 0,e=this.globalConfig.main.getEquipmentArr();for(t=e.length-1;t>=0;t--){var i=e[t];i&&(i.component&&(i=i.component,i.isLock||2==i.magType&&(this.staCompArr.push(i),i.isZuHeMag?this.allCompArr=this.allCompArr.concat(i.zuheCompArrMag):i.isYuan&&this.allCompArr.push(i))))}}},{key:"freshMag",value:function(t){$.each(this.staCompArr,function(e,i){i.freshMag&&i.freshMag(t)})}}]),t}()},485:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(0);e["default"]=function o(t,e,i){n(this,o),this.UID=t,this.elecNum=e,this.v=i,this.ganNum=0,this.v||(this.v=new r.Vector2DMath)}},486:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(0);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i.moduleMain=t,i.globalConfig=t.globalConfig,i.main=t.main,i.NBEvent=t.NBEvent,i.DEBUG=!1,i.elecNum=0,i.thick=10,i.dDis=5,i.guaiDis=5,i.pArr=[],i.elecSpeed=0,i.addTimerInd=0,i.lineInd=1,i.count=0,i.cur_materialAry=[],i.isHui=!1,i.isactive=!1,i.ropeBox=new PIXI.Sprite,i.addChildAt(i.ropeBox,0),i.ropeArr=[];var o=void 0;for(o=1;5>=o;o++){var a=new PIXI.mesh.RopeBitmap(PIXI.Texture.fromImage(i.globalConfig.cdn_static+"electrical/elecwire/ElecWireGo"+o+".png"));i.ropeBox.addChild(a),i.ropeArr.push(a),a.visible=!1}return i.isactive=i.main.isRunning,i.canvasRunHandleProxy=i.canvasRunHandle.bind(i),i.main.addEventListener(i.NBEvent.CANVAS_RUN,i.canvasRunHandleProxy),i.DEBUG&&(i.testG=new PIXI.Graphics,i.addChild(i.testG)),i}return o(e,t),a(e,[{key:"canvasRunHandle",value:function(t){this.isactive=t.isRunning}},{key:"update",value:function(){this.isactive&&this.timerHandle()}},{key:"timerHandle",value:function(){this.addTimerInd+=this.elecSpeed,10>this.addTimerInd?-10>this.addTimerInd&&(this.addTimerInd=0,this.lineInd--,1>this.lineInd&&(this.lineInd=5),this.showLineIndex(this.lineInd)):(this.addTimerInd=0,this.lineInd++,this.lineInd>5&&(this.lineInd=1),this.showLineIndex(this.lineInd)),this._drawLine()}},{key:"showLineIndex",value:function(t){var e=void 0,i=this.ropeBox.children.length;for(e=0;i>e;e++)this.ropeBox.getChildAt(e).visible=e===t-1}},{key:"freshElecNum",value:function(t){this.elecNum=t,this.elecSpeed=t}},{key:"setPArr",value:function(t){this.pArr=t,each(this.ropeArr,function(t,e){e.setPoints(this.pArr)},this),this.testG&&(this.testG.clear(),this.testG.lineStyle(5,16711680),s.M.drawPolygonPArr(this.testG,this.pArr))}},{key:"_drawLine",value:function(){this.ropeBox.alpha=Math.abs(this.elecNum)>1e-4?1:0}},{key:"removed",value:function(){this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.ropeBox.parent.removeChild(this.ropeBox),this.ropeBox.destroy(),this.ropeBox=null,this.canvasRunHandleProxy=null,this.moduleMain=null,this.globalConfig=null,this.main=null,this.NBEvent=null,this.destroy()}}]),e}(PIXI.Container)},487:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(469),s=n(a),l=i(502),u=n(l),h=i(504),c=n(h);e["default"]=function(){function t(){r(this,t),this.debug=!1,this.inputDebug=!1,this.gn=[],this.jn=[],this.nt=0,this.nb=0,this.w=100*Math.PI,this.jr=[0],this.branchDataArr=[]}return o(t,[{key:"trace",value:function(){if(this.debug)for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i]}},{key:"setHead",value:function(t){this.nt=t}},{key:"appendBranch",value:function(t,e,i,n){this.branchDataArr.push([t,e,i]),this.jr.push(n)}},{key:"appendVCCurrentSource",value:function(t,e,i,n,r){this.branchDataArr.push([start,end,r,i,n]),this.jr.push(12)}},{key:"clear",value:function(){this.branchDataArr.splice(0,this.branchDataArr.length),this.jr.splice(1,this.jr.length-1),this.nt=0,this.nb=0}},{key:"caculate",value:function(){if(this.nb=this.branchDataArr.length,0===this.nt||0===this.nb)return null;for(var t=[],e=[],i=[],n=this.jn,r=this.gn,o=0;this.nt+5>o;o++){n[o]=new s["default"](0,0),e[o]=new s["default"](0,0),i[o]=new s["default"](0,0);for(var a=0;this.nt+5>a;a++)r[o]||(r[o]=[]),r[o][a]=new s["default"](0,0),t[o]||(t[o]=[]),t[o][a]=new s["default"](0,0)}var l=this.input(e),u=l.ny,h=l.at;this.trace("******ny******"),this.trace("ny:",u);for(var p=1;u>=p;p++){t[p]||(t[p]=[]);for(var f=1;u>=f;f++)r[p][f]||(r[p][f]=new s["default"]),t[p][f]=r[p][f];t[p][u+1]=n[p]}this.trace("******gna******");for(var d=1;u>=d;d++){for(var y="",g=1;u+1>=g;g++)y+="\t"+t[d][g].fl;this.trace(y)}if(this.gauss(t,i,u)>1e-9){this.trace("******a的转置******"),this.debug&&c["default"].traceMatrix(h),this.trace("******节点电压Vn******");for(var _=1;u>=_;_++)this.trace(_+"-----------\x3e"+i[_].fl+"+i"+i[_].re);for(var b=[],v=this.nt+1;u>=v;v++)b.push(i[v].fl);this.trace("******节点电压Vn实体部分 vns******");for(var m=[],P=1;this.nt>=P;P++)m[P-1]||(m[P-1]=[]),m[P-1][0]=i[P].fl;this.debug&&c["default"].traceMatrix(m),this.trace("******支路电压 Ub = At * GN ******");var w=c["default"].multiply(h,m);return this.debug&&c["default"].traceMatrix(w),{vns:m,ub:w,list:b}}return this.trace("没结果!"),null}},{key:"conclus",value:function(t,e,i){var n=this.w,r=this.nt;this.trace("*********节点电压*********");for(var o=1;r>=o;o++)this.trace("VN["+o+"]="+t[o].fl+"+j"+t[o].re);this.trace("*******电压源支路电流*******");for(var a=r+1;i>=a;a++)this.trace("IS["+e[a]+"]="+t[a].fl+"+j"+t[a].re);this.trace("***********时域形式***********");for(var s=1;r>=s;s++)this.trace("vn["+s+"]="+u["default"].sabs(t[s])+"cos("+n+"t+"+u["default"].ang(t[s])+")");for(var l=r+1;i>=l;l++)this.trace("IS["+e[l]+"]="+u["default"].sabs(t[l])+"cos("+n+"t+"+u["default"].ang(t[l])+")")}},{key:"input",value:function(t){var e=[],i=[],n=void 0,r=[],o=[],a=[],s=[],l=[],u=this.nt,h=this.nb,p=this.w;this.trace("节点数NT "+u+",支路数NB "+h+",角频率W "+p),n=u;for(var f=this.jr,d=1;h>=d;d++)switch(this.trace("编号 "+d+", 类型 "+f[d]),f[d]){case 1:case 2:case 9:case 10:case 13:this.gj(d,f,e,r,s,l,p,this.branchDataArr[d-1]);break;case 3:n++,this.es(d,e,r,s,l,n,o,this.branchDataArr[d-1]),t[n]=d;break;case 4:n++,this.vcvs(d,e,r,s,n,i,o),t[n]=d;break;case 5:this.vccs(d,e,r,s,i);break;case 6:n++,this.ccvs(d,e,r,s,n,i,o),t[n]=d;break;case 7:this.cccs(d,e,r,s,i,o);break;case 8:this.hllm(d,e,r,s,l,i,p);break;default:this.trace("error")}this.trace("============GN==============");for(var y=1;u+1>=y;y++){for(var g="",_=1;u+1>=_;_++)g+="\t"+this.gn[y][_].fl;this.trace(g)}this.trace("============RHS==============");for(var b="",v=1;u+1>=v;v++)b+="\t"+this.jn[v].fl;this.trace(b);for(var m=1;h+1>=m;m++)a[e[m]]||(a[e[m]]=[]),a[r[m]]||(a[r[m]]=[]),a[e[m]][m-1]=1,a[r[m]][m-1]=-1;for(var P=0;a.length>P;P++)for(var w=0;h>w;w++)a[P]||(a[P]=[]),a[P][w]||(a[P][w]=0);a.shift(),this.trace("******************"),this.trace("输入节点数NT 输入支路数NB 扩展行NY 输入角频率W"),this.trace("NT\tNB\tNY\tW"),this.trace(u+"\t"+h+"\t"+n+"\t"+p),this.trace("********各支路参数**********"),this.trace("编号I 支路类型JR 起点编号NS 止点编号NF 参数DX 元件类型ICR 初相角DXC 控制支路编号IC"),this.trace("I\tJR\tNS\tNF\tDX\tDXC\tIC");for(var O=1;h>=O;O++)this.trace(O+"\t"+f[O]+"\t"+e[O]+"\t"+r[O]+"\t"+s[O]+"\t"+l[O]+"\t"+i[O]);return this.trace("******关联矩阵a******"),this.debug&&c["default"].traceMatrix(a),{ny:n,at:c["default"].transpose(a)}}},{key:"gj",value:function(t,e,i,n,r,o,a,l){var h=this.gn,c=this.jn,p=void 0,f=void 0,d=new s["default"](1,0),y=new s["default"],g=new s["default"],_=l;if(i[t]=_[0],n[t]=_[1],1===e[t]||9===e[t]||10===e[t]||13===e[t])r[t]=_[2],this.trace("输入起点，止点，参数及元件类型（R：１，L：２，C：３）:",i[t],n[t],r[t]),p=i[t],f=n[t],1===e[t]||13===e[t]?(y.fl=r[t],y.re=0):9===e[t]?(y.fl=0,y.re=r[t]*a):10===e[t]&&(y.fl=0,y.re=-1/(r[t]*a)),g=13===e[t]?y:u["default"].divv(d,y),0!==p&&0!==f?(this.buGn(p,f),h[p][p]=u["default"].add(h[p][p],g),h[f][f]=u["default"].add(h[f][f],g),h[f][p]=u["default"].sub(h[f][p],g),h[p][f]=u["default"].sub(h[p][f],g)):0===f?(this.buGn(p),h[p][p]=u["default"].add(h[p][p],g)):(this.buGn(f),h[f][f]=u["default"].add(h[f][f],g));else{o[t]=0,r[t]=_[2],this.trace("输入起点，止点与参数及初相角: ",i[t],n[t],r[t],o[t]);var b=3.14159*o[t]/180;y.fl=r[t]*Math.cos(b),y.re=r[t]*Math.sin(b),p=i[t],f=n[t],p&&(c[p]=u["default"].sub(c[p],y)),f&&(c[f]=u["default"].add(c[f],y))}}},{key:"es",value:function(t,e,i,n,r,o,a,l){var u=this.gn,h=this.jn,c=new s["default"],p=new s["default"](1,0),f=new s["default"](-1,0),d=l;e[t]=d[0],i[t]=d[1],n[t]=d[2],r[t]=0,this.trace("输入电压源的起点，止点与参数及初相角: ",e[t],i[t],n[t],r[t]);var y=e[t],g=i[t];a[t]=o,0!==y&&(this.buGn(y,o),u[y][o]=p,u[o][y]=p),0!==g&&(this.buGn(g,o),u[g][o]=f,u[o][g]=f);var _=r[t]*Math.PI/180;c.fl=n[t]*Math.cos(_),c.re=n[t]*Math.sin(_),h[o]=c}},{key:"buGn",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;e>n;n++)i[n]=arguments[n];i.forEach(function(e){t.gn[e]||(t.gn[e]=[])})}},{key:"vcvs",value:function(t,e,i,n,r,o,a){var l=this.gn,h=new s["default"](1,0),c=new s["default"](-1,0),p=new s["default"];this.trace("输入VCVS起点，止点，参数与控制支路",e[t],i[t],n[t],o[t]);var f=e[t],d=i[t],y=e[o[t]],g=i[o[t]];a[t]=r,0!==f&&(this.buGn(f,r),l[f][r]=h,l[r][f]=h),0!==d&&(this.buGn(d,r),l[d][r]=c,l[r][d]=c),p.fl=n[t],p.re=0,0!==y&&(this.buGn(r),l[r][y]=u["default"].sub(l[r][y],p)),0!==g&&(this.buGn(r),l[r][g]=u["default"].add(l[r][g],p))}},{key:"vccs",value:function(t,e,i,n,r){var o=this.gn,a=new s["default"];this.trace("输入VCCS起点止点参数与控制支路",e[t],i[t],n[t],r[t]);var l=e[t],h=i[t],c=e[r[t]],p=i[r[t]];a.fl=n[t],a.re=0,0===l?(this.buGn(h),0!==c&&(o[h][c]=u["default"].sub(o[h][c],a)),0!==p&&(o[h][p]=u["default"].add(o[h][p],a))):0===h?(this.buGn(l),0!==c&&(o[l][c]=u["default"].add(o[l][c],a)),0!==p&&(o[l][p]=u["default"].sub(o[l][p],a))):(this.buGn(l,h),0!==c&&(o[l][c]=u["default"].sub(o[l][p],a),o[h][p]=u["default"].add(o[h][p],a)),0!==p&&(this.buGn(l,h),o[l][p]=u["default"].sub(o[l][p],a),o[h][p]=u["default"].add(o[h][p],a)))}},{key:"ccvs",value:function(t,e,i,n,r,o){var a=this.gn,l=new s["default"],u=new s["default"],h=new s["default"];this.trace("输入CCVS的起点止点，参数控制支路序号:",e[t],i[t],n[t],r[t]);var c=e[t],p=i[t],f=o[r[t]];o[t]=ny,l.fl=1,l.re=0,u.fl=-1,u.re=0,0!==c&&(this.buGn(c,ny),a[c][ny]=l,a[ny][c]=l),0!==p&&(this.buGn(p,ny),a[p][ny]=u,a[ny][p]=u),h.fl=n[t],h.re=0,this.buGn(ny),a[ny][f]=sub(a[ny][ke],h)}},{key:"cccs",value:function(t,e,i,n,r,o){var a=this.gn,l=new s["default"];this.trace("输入CCCS的起点，止点，参数及控制支路序号:",e[t],i[t],n[t],r[t]);var h=e[t],c=i[t],p=o[r[t]];l.dl=n[t],l.re=0,h&&(this.buGn(h),a[h][p]=u["default"].add(a[h][p],l)),c&&(this.buGn(c),a[c][p]=u["default"].sub(a[c][p],l))}},{key:"hllm",value:function(t,e,i,n,r,o,a){var s=this.gn;if(this.trace("输入互感支路的起点，止点，参数，互感系数，控制支路:",e[t],i[t],n[t],r[t],o[t]),0!==n[o[t]]){var l=e[t],h=i[t],c=e[o[t]],p=i[o[t]],f=n[o[t]],d=f*n[t]-r[t]*r[t],y=n[t]/(a*d),g=f/(a*d),_=r[t]/(a*d),b=cmplx(0,-y),v=cmplx(0,y),m=cmplx(0,-g),P=cmplx(0,g),w=cmplx(0,_),O=cmplx(0,-_);0!==l&&0!==h?(this.buGn(l,h),s[l][l]=u["default"].add(s[l][l],m),s[h][h]=u["default"].add(s[h][h],m),s[l][h]=u["default"].add(s[l][h],P),s[h][l]=u["default"].add(s[h][l],P)):0===h?(this.buGn(l),s[l][l]=u["default"].add(s[l][l],m)):(this.buGn(h),s[h][h]=u["default"].add(s[h][h],m)),0!==c&&0!==p?(this.buGn(c,p),s[c][c]=u["default"].add(s[c][c],b),s[p][p]=u["default"].add(s[p][p],b),s[c][p]=u["default"].add(s[c][p],v),s[p][c]=u["default"].add(s[p][c],v)):0===p?(this.buGn(c),s[c][c]=u["default"].add(s[c][c],b)):(this.buGn(p),s[p][p]=u["default"].add(s[p][p],b)),0!==l&&0!==c&&(this.buGn(l,c),s[l][c]=u["default"].add(s[l][c],w),s[c][l]=u["default"].add(s[c][l],w)),0!==h&&0!==p&&(this.buGn(h,p),s[h][p]=u["default"].add(s[h][p],w),s[p][h]=u["default"].add(s[p][h],w)),0!==l&&0!==p&&(this.buGn(l,p),s[l][p]=u["default"].add(s[l][p],O),s[p][l]=u["default"].add(s[p][l],O)),0!==h&&0!==c&&(this.buGn(h,c),s[h][c]=u["default"].add(s[h][c],O),s[c][h]=u["default"].add(s[c][h],O))}}},{key:"gauss",value:function(t,e,i){for(var n=void 0,r=[],o=i+1,a=1;i>=a;a++){if(1e-9>(n=this.zu(r,1e-10,i,o,a,t)))return n;var s=void 0;for(s=a;o>=s;s++)t[a][s]=u["default"].divv(t[a][s],r[0]);for(var l=1;i>=l;l++)if(l!==a){var h=t[l][a];for(s=a;o>=s;s++)t[l][s]=u["default"].sub(t[l][s],u["default"].time(h,t[a][s]))}}for(var c=1;i>=c;c++)e[c]=t[c][o];return n}},{key:"zu",value:function(t,e,i,n,r,o){for(var a=new s["default"],l=u["default"].sabs(o[r][r]),h=r,c=r;i>=c;c++)u["default"].sabs(o[c][r])>l&&(l=u["default"].sabs(o[c][r]),h=c);if(e>=l)return 0;if(t[0]=o[h][r],h===r)return 1;for(var p=r;n>=p;p++)a=o[h][p],o[h][p]=o[r][p],o[r][p]=a;return 1}}]),t}()},500:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(0);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isStartLoop=!0,i.dotLen=30,i.firstDis=0,i._points=[],i._speed=0,i._skin=null,i.isactive=!1,i.sprites=new PIXI.ParticleContainer(1e4,{scale:!1,position:!0,rotation:!0,uvs:!1,alpha:!1}),i.addChild(i.sprites),i.sprites.visible=!1,i.dotArr=[],i}return o(e,t),a(e,[{key:"setSkin",value:function(t){this._skin=t}},{key:"getPoints",value:function(){return this._points}},{key:"setPoints",value:function(t){if(this.firstDis=0,this.sprites&&(this.removeAllDot(),this._points=t,this.isStartLoop&&this._skin&&this._points&&this._speed&&t&&t.length)){for(var e=0,i=1;t.length>i;i++){e+=s.M.getPointLen(t[i-1],t[i])}for(var n=Math.floor(e/this.dotLen),r=0;n>r;r++){var o=this.createDot();this.sprites.addChild(o),this.dotArr.push(o)}this.freshDotLocation()}}},{key:"freshDotLocation",value:function(){if(this.isStartLoop&&this._skin&&this._points&&this._speed&&this._points&&this._points.length){var t=0,e=0,i=0,n=this._points[i],r=this._points[i+1];e+=s.M.getPointLen(n,r);for(var o=0;this.dotArr.length>o;o++){for(var a=this.dotArr[o],l=this.firstDis+o*this.dotLen;l>=e&&i+1!==this._points.length;)i++,t=e,n=r,(r=this._points[i+1])&&(e+=s.M.getPointLen(n,r));var u=l-t;if(r){var h=s.M.getXianDianByDis(u,!0,n,r);s.M.setSPPoint(a,h);var c=s.M.getAngleP(r,n);c=this._speed>0?c-90:c+90;a.rotation=s.M.toHu(c)}}}}},{key:"removed",value:function(){this.removeAllDot()}},{key:"removeAllDot",value:function(){for(;this.dotArr.length>0;){var t=this.dotArr.pop();this.parent.main.cachePool.pushElecDot(t),this.sprites.removeChild(t)}}},{key:"createDot",value:function(){var t=void 0;return t=this.parent.main.cachePool.popElecDot(),t||(t=PIXI.Sprite.fromImage(this._skin)),t.anchor.set(.5),t}},{key:"setSpeed",value:function(t){this._speed=t}},{key:"getSpeed",value:function(){return this._speed}},{key:"fresh",value:function(){this.setPoints(this._points)}},{key:"loop",value:function(){if(this.isactive){if(!(this.isStartLoop&&this._skin&&this._points&&this._speed))return void(this.sprites.visible&&(this.removeAllDot(),this.sprites.visible=!1));this.sprites.visible||(this.sprites.visible=!0),this.firstDis-=this._speed,this.firstDis>this.dotLen?this.firstDis-=this.dotLen:0>this.firstDis&&(this.firstDis+=this.dotLen),this.freshDotLocation()}}},{key:"setActive",value:function(t){this.isactive=t}},{key:"destroy",value:function(){this.sprites&&(this.sprites.destroy(),this.sprites=null)}}]),e}(PIXI.Sprite)},501:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(e,i,r){n(this,t),this.A=e,this.T=i,this.phi=r,this.update()}return r(t,[{key:"update",value:function(){this.omiga=2*Math.PI/this.T}},{key:"getValue",value:function(t){return 0}}]),t}()},502:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(469),a=function(t){return t&&t.__esModule?t:{"default":t}}(o);e["default"]=function(){function t(){n(this,t)}return r(t,null,[{key:"cmplx",value:function(t,e){return new a["default"](t,e)}},{key:"add",value:function(t,e){var i=new a["default"];return i.re=t.re+e.re,i.fl=t.fl+e.fl,i}},{key:"sub",value:function(t,e){var i=new a["default"];return i.re=t.re-e.re,i.fl=t.fl-e.fl,i}},{key:"time",value:function(t,e){var i=new a["default"];return i.re=t.fl*e.re+t.re*e.fl,i.fl=t.fl*e.fl-t.re*e.re,i}},{key:"divv",value:function(t,e){var i=new a["default"],n=e.re*e.re+e.fl*e.fl;return n?(n=1/n,i.re=(t.re*e.fl-t.fl*e.re)*n,i.fl=(t.fl*e.fl-t.re*e.re)*n,i):null}},{key:"sabs",value:function(t){return Math.sqrt(t.fl*t.fl+t.re*t.re)}},{key:"ang",value:function(t){var e=void 0;return 0===t.fl?e=90:(e=Math.atan2(t.re,t.fl),e=180*e/3.1415926),e}}]),t}()},503:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),s=i(505),l=n(s),u=i(466);n(u);e["default"]=function(){function t(e){r(this,t),this.UID=a.M.getUniqueID(),this.cacuMain=e,this.elecArr=null,this.allBPoster=[],this.allBPosterMap=new Map,this.unNodes=[],this.reLoopCompArr=[]}return o(t,[{key:"createNodes",value:function(t){if(this.elecArr=t,this.findAllBPosterAndReset(),this.createUnNodes(),this.cacuMain.SHOW_UNNODES_DEBUG)for(var e=0;this.unNodes.length>e;e++)for(var i=this.unNodes[e],n=0;i.bposterArr.length>n;n++);}},{key:"findAllBPosterAndReset",value:function(){var t=this;a.ArrayUtil.clear(this.unNodes),a.ArrayUtil.clear(this.allBPoster),this.allBPosterMap.clear(),this.elecArr.forEach(function(e){t.allBPoster=t.allBPoster.concat(e.bPsArr),e.isReLoopElec&&t.reLoopCompArr.push(e)}),this.allBPoster.forEach(function(e){t.allBPosterMap.set(e.UID,e)})}},{key:"createUnNodes",value:function(){for(var t=this,e=0;this.allBPoster.length;){var i=this.allBPoster.shift();if(0===i._findFlag){i._findFlag=1;for(var n=[i],r=new l["default"](this.UID),o=[];n.length;){var a=n.shift(),s=a.friendPostersArr;if(a.isGround){s=s.concat(a.friendPostersArr)}else if(!this.cacuMain.showElecLine&&2===a.body.bPsArr.length&&1===a.body.elecType&&0===a.body.Resistance&&!a.body.isBreak&&a.body.elecConnect){var u="bposter0"===a.BindMC.name?a.body.bposter1.bindinger:a.body.bposter0.bindinger;s=s.concat([u])}s=s.filter(function(e){var i=!1;return t.allBPosterMap.has(e.UID)?0===e._findFlag&&(i=!0):(i=!0,t.allBPosterMap.set(e.UID,e)),i&&(e._findFlag=1),i}),n=n.concat(s),a._findFlag=2,a.unNode=r,a.isGround&&(r.isGround=!0),o.push(a)}r.number=e,r.bposterArr=o,this.unNodes.push(r),e++}}}},{key:"reLoopCacu",value:function(){var t=!1;return this.elecArr.forEach(function(e){t=t||e.reLoop()}),t}}]),t}()},504:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(){n(this,t),this.ERROR_MATRIX_NOT_SQUARE="Matrix must be square.",this.ERROR_VECTOR_NOT_2D="Only two dimensional operations are supported at this time."}return r(t,null,[{key:"_check2DVector",value:function(t){if(2!==t.length)throw Error(this.ERROR_VECTOR_NOT_2D)}},{key:"deepCopy",value:function(t){if(!Array.isArray(t))throw Error("Input must be a Matrix.");if(t[0][0]===undefined)throw Error("Input cannot be a vector.");for(var e=Array(t.length),i=0;t.length>i;i++)e[i]=t[i].slice();return e}},{key:"isSquare",value:function(t){if(!Array.isArray(t))throw Error("Input must be a Matrix.");if(t[0][0]===undefined)throw Error("Input cannot be a vector.");for(var e=t.length,i=0;e>i;i++)if(t[i].length!==e)return!1;return!0}},{key:"addition",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw Error("Matrix mismatch");var i=Array(t.length),n=void 0;if(t[0].length)for(n=0;t.length>n;n++){i[n]=Array(t[n].length);for(var r=0;t[n].length>r;r++)i[n][r]=t[n][r]+e[n][r]}else for(n=0;t.length>n;n++)i[n]=t[n]+e[n];return i}},{key:"traceMatrix",value:function(t){var e=void 0,i=void 0;if(t[0].length)for(e=0;t.length>e;e++){i="";for(var n=0;t[e].length>n;n++)i+=t[e][n]+"\t"}else for(i="",e=0;t.length>e;e++)i+=t[e]+"\t"}},{key:"subtraction",value:function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw Error("Matrix mismatch");var i=Array(t.length),n=void 0;if(t[0].length)for(n=0;t.length>n;n++){i[n]=Array(t[n].length);for(var r=0;t[n].length>r;r++)i[n][r]=t[n][r]-e[n][r]}else for(n=0;t.length>n;n++)i[n]=t[n]-e[n];return i}},{key:"scalar",value:function(t,e){for(var i=0;t.length>i;i++)for(var n=0;t[i].length>n;n++)t[i][n]=e*t[i][n];return t}},{key:"transpose",value:function(t){for(var e=Array(t[0].length),i=0;t[0].length>i;i++){e[i]=Array(t.length);for(var n=0;t.length>n;n++)e[i][n]=t[n][i]}return e}},{key:"identity",value:function(t){for(var e=Array(t),i=0;t>i;i++){e[i]=Array(t);for(var n=0;t>n;n++)e[i][n]=i===n?1:0}return e}},{key:"dotproduct",value:function(t,e){if(t.length!==e.length)throw Error("Vector mismatch");for(var i=0,n=0;t.length>n;n++)i+=t[n]*e[n];return i}},{key:"multiply",value:function(e,i){if(e[0].length!==i.length)throw Error("Matrix mismatch");for(var n=Array(e.length),r=0;e.length>r;r++)n[r]=Array(i[0].length);for(var o=t.transpose(i),a=0;n.length>a;a++)for(var s=0;n[a].length>s;s++)n[a][s]=t.dotproduct(e[a],o[s]);return n}},{key:"determinant",value:function(e){var i=e.length,n=e[0].length,r=0,o=void 0,a=void 0,s=void 0,l=void 0;if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);if(1===i)return e[0][0];if(2===i)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(a=0;n>a;a++){for(s=e[0][a],l=e[0][a],o=1;i>o;o++)l*=e[o][((a+o)%n+n)%n],s*=e[o][((a-o)%n+n)%n];r+=l-s}return r}},{key:"lupDecomposition",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var i=e.length,n=t.deepCopy(e),r=t.transpose(t.identity(i)),o=void 0,a=Array(i);this.getL=function(e){for(var i=e[0].length,n=t.identity(i),r=0;i>r;r++)for(var o=0;i>o;o++)r>o&&(n[r][o]=e[r][o]);return n},this.getU=function(e){for(var i=e[0].length,n=t.identity(i),r=0;i>r;r++)for(var o=0;i>o;o++)r>o||(n[r][o]=e[r][o]);return n};for(var s=0;i>s;s++){var l=void 0;for(l=0;i>l;l++)a[l]=n[l][s];for(l=0;i>l;l++){o=n[l];for(var u=Math.min(l,s),h=0,c=0;u>c;c++)h+=o[c]*a[c];o[s]=a[l]-=h}var p=s;for(l=s+1;i>l;l++)Math.abs(a[l])>Math.abs(a[p])&&(p=l);if(p!==s&&(n=t.rowSwitch(n,p,s),r=t.rowSwitch(r,p,s)),i>s&&0!==n[s][s])for(l=s+1;i>l;l++)n[l][s]/=n[s][s]}return[this.getL(n),this.getU(n),r]}},{key:"rotate",value:function(e,i,n){t._check2DVector(e);var r="clockwise"===n?-1:1,o=i*(Math.PI/180);return t.multiply([[Math.cos(o),-1*r*Math.sin(o)],[r*Math.sin(o),Math.cos(o)]],e)}},{key:"scale",value:function(e,i,n){return t._check2DVector(e),t.multiply([[i,0],[0,n]],e)}},{key:"shear",value:function(e,i,n){return t._check2DVector(e),t.multiply([[1,"xaxis"===n?i:0],["yaxis"===n?i:0,1]],e)}},{key:"affine",value:function(e,i,n){t._check2DVector(e);var r=[[1,0,i],[0,1,n],[0,0,1]],o=[[e[0][0]],[e[1][0]],[1]],a=t.multiply(r,o);return[[a[0][0]],[a[1][0]]]}},{key:"rowScale",value:function(t,e,i){for(var n=Array(t.length),r=0;t.length>r;r++){n[r]=Array(t[r].length);for(var o=0;t[r].length>o;o++)n[r][o]=r===e?i*t[r][o]:t[r][o]}return n}},{key:"rowSwitch",value:function(t,e,i){for(var n=Array(t.length),r=0;t.length>r;r++){n[r]=Array(t[r].length);for(var o=0;t[r].length>o;o++)n[r][o]=r===e?t[i][o]:r===i?t[e][o]:t[r][o]}return n}},{key:"rowAddMultiple",value:function(t,e,i,n){for(var r=Array(t.length),o=0;t.length>o;o++){r[o]=Array(t[o].length);for(var a=0;t[o].length>a;a++)o===i?r[i][a]=t[i][a]+n*t[e][a]:r[o][a]=t[o][a]}return r}},{key:"GaussJordanEliminate",value:function(t,e){for(var i=void 0===e?1e-10:e,n=t.length,r=t[0].length,o=-1,a=void 0,s=void 0,l=void 0;++o<n;){var u=o;for(a=o;++a<n;)Math.abs(t[a][o])>Math.abs(t[u][o])&&(u=a);var h=t[o];if(t[o]=t[u],t[u]=h,Math.abs(t[o][o])<=i)return t;for(a=o;++a<n;)for(l=t[a][o]/t[o][o],s=o-1;++s<r;)t[a][s]-=t[o][s]*l}for(o=n;--o>=0;){for(l=t[o][o],a=-1;++a<o;)for(s=r;--s>=o;)t[a][s]-=t[o][s]*t[a][o]/l;for(t[o][o]/=l,s=n-1;++s<r;)t[o][s]/=l}return t}},{key:"rowReduce",value:function(e,i){return t.GaussJordanEliminate(e,i)}},{key:"inverse",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var i=e.length,n=t.identity(i),r=void 0;for(r=0;i>r;r++)e[r]=e[r].concat(n[r]);for(e=t.GaussJordanEliminate(e),r=0;i>r;r++)e[r]=e[r].slice(i);return e}},{key:"getCol",value:function(t,e){var i=Array(t.length);if(0>e)throw Error("The specified column must be a positive integer.");if(e>=t[0].length)throw Error("The specified column must be between 0 and the number of columns - 1.");for(var n=0;t.length>n;n++)i[n]=t[n][e];return i}},{key:"reorderRows",value:function(t,e){var i=[];if(e===undefined)throw Error("A reordering array must be entered.");if(e.length!==t.length)throw Error("The reordered matrix must have the same number of rows as the original Matrix.");for(var n=0;e.length>n;n++){if(0>e[n])throw Error("The desired order of the rows must be positive integers.");if(e[n]>=e.length)throw Error("The desired order of the rows must start at 0 and end at the number of rows - 1.");i.push(t[e[n]])}return i}},{key:"reorderCols",value:function(e,i){var n=[];if(i===undefined)throw Error("Please enter a desired reordering array.");if(i.length!==e[0].length)throw Error("The reordered matrix must have the same number of columns as the original Matrix.");for(var r=0;i.length>r;r++){if(0>i[r])throw Error("The desired order of the columns must be positive integers.");if(i[r]>=i.length)throw Error("The desired order of the columns must start at 0 and end at the number of columns - 1.");n.push(t.getCol(e,i[r]))}return t.transpose(n)}},{key:"reverseRows",value:function(e){for(var i=[],n=e.length-1;n>-1;n--)i.push(n);return t.reorderRows(e,i)}},{key:"reverseCols",value:function(e){for(var i=[],n=e.length-1;n>-1;n--)i.push(n);return t.reorderCols(e,i)}},{key:"zeros",value:function(t,e){var i=Array(t);if(1>t||1>e)throw Error("The matrix dimensions must be positive integers.");t=Math.ceil(t),e=Math.ceil(e);for(var n=0;t>n;n++){for(var r=Array(e),o=0;e>o;o++)r[o]=0;i[n]=r}return i}},{key:"zigzag",value:function(e,i,n){if(1>=e)throw Error("Matrix size must be at least 2x2.");e=Math.ceil(e);var r=t.zeros(e,e),o=function(t){var i=!1,n=e*e,r=1,o=1,a=void 0,s=void 0,l=void 0,u=void 0,h=void 0;for(t[0][0]=n,t[e-1][e-1]=r,u=1;e>u;u++)i?(n-=4*o,r+=4*o,o++):(n--,r++),t[0][u]=n,t[e-1][e-1-u]=r,i=!i;var c=!0;for(u=1;e>u;u++){for(a=0,s=u,l=t[a][s],h=1;u+1>h;h++)c?l-=1:l+=1,a++,s--,t[a][s]=l;c=!c}for(c=e%2==0,u=1;e-1>u;u++){for(a=e-1,s=u,l=t[a][s],h=1;e-u>h;h++)c?l--:l++,a--,s++,t[a][s]=l;c=!c}return t},a=function(e){return t.transpose(o(e))},s=function(e){return t.reverseCols(o(e))},l=function(e){return t.reverseCols(t.reverseRows(o(e)))},u=function(e){return t.transpose(l(e))};if("BR"===i&&"H"===n)return o(r);if("BR"===i&&"V"===n)return a(r);if("BL"===i&&"H"===n)return s(r);if("BL"===i&&"V"===n)return function(e){return t.reverseRows(u(s(e)))}(r);if("TR"===i&&"H"===n)return function(e){return t.reverseRows(o(e))}(r);if("TR"===i&&"V"===n)return function(e){return t.reverseRows(a(e))}(r);if("TL"===i&&"H"===n)return l(r);if("TL"===i&&"V"===n)return u(r);throw Error("Enter the direction (V,H) and corner (BR,BL,TR,TL) correctly.")}},{key:"vectorNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length)throw Error("Vector must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e)throw Error("Norm order must be a number.");e=void 0===e?2:e;var i=t.length,n=0,r=void 0,o=void 0;switch(e){case Infinity:for(o=0;i>o;o++)(r=Math.abs(t[o]))>n&&(n=r);break;case-Infinity:for(n=Infinity,o=0;i>o;o++)r=Math.abs(t[o]),n>r&&(n=r);break;default:for(o=0;i>o;o++)n+=Math.pow(Math.abs(t[o]),e);n=Math.pow(n,1/e)}return n}},{key:"matrixNorm",value:function(t,e){if(!Array.isArray(t)||0===t.length||!Array.isArray(t[0]))throw Error("Matrix must be an array of at least length 1.");if(void 0!==e&&"number"!=typeof e&&null!==e)throw Error("Norm order must be a number or null.");e=void 0===e?null:e;var i=t.length,n=t[0].length,r=0,o=void 0,a=void 0,s=void 0;switch(e){case Infinity:for(a=0;i>a;a++){for(o=0,s=0;n>s;s++)o+=Math.abs(t[a][s]);o>r&&(r=o)}break;case-Infinity:for(r=Infinity,a=0;i>a;a++){for(o=0,s=0;n>s;s++)o+=Math.abs(t[a][s]);r>o&&(r=o)}break;case 1:for(a=0;n>a;a++){for(o=0,s=0;i>s;s++)o+=Math.abs(t[s][a]);o>r&&(r=o)}break;case-1:for(r=Infinity,a=0;n>a;a++){for(o=0,s=0;i>s;s++)o+=Math.abs(t[s][a]);r>o&&(r=o)}break;case null:for(a=0;i>a;a++)for(s=0;n>s;s++)r+=Math.pow(t[a][s],2);r=Math.pow(r,.5);break;case 2:case-2:throw Error("Singular values are not yet supported in numbers.js.");default:for(a=0;i>a;a++)for(s=0;n>s;s++)r+=Math.pow(Math.abs(t[a][s]),e);r=Math.pow(r,1/e)}return r}},{key:"isUpperBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||2>t.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||0>e||e%1!=0)throw Error("Upper bandwidth must be a nonzero integer.");for(var i=!0,n=t[0].length,r=0,o=e+1;n>o;o++){if(0!==t[r][o]){i=!1;break}r++}return i}},{key:"isLowerBand",value:function(t,e){if(!Array.isArray(t)||!Array.isArray(t[0])||2>t.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof e||0>e||e%1!=0)throw Error("Lower bandwidth must be a nonzero integer.");for(var i=!0,n=t.length,r=0,o=e+1;n>o;o++){if(0!==t[o][r]){i=!1;break}r++}return i}},{key:"isRowDD",value:function(e){var i=e.length;if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var n=0;i>n;n++){var r=e[n],o=r[n],a=t.sumNondiagonalElements(r,n);if(Math.abs(o)<a)return!1}return!0}},{key:"isStrictlyRowDD",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=e.length,n=0;i>n;n++){var r=e[n],o=r[n],a=t.sumNondiagonalElements(r,n);if(Math.abs(o)<=a)return!1}return!0}},{key:"isColumnDD",value:function(e){if(!t.isSquare)throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=e.length,n=0;i>n;n++){var r=t.getCol(e,n),o=r[n],a=t.sumNondiagonalElements(r,n);if(Math.abs(o)<a)return!1}return!0}},{key:"isStrictlyColumnDD",value:function(e){if(!t.isSquare(e))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=e.length,n=0;i>n;n++){var r=t.getCol(e,n),o=r[n],a=t.sumNondiagonalElements(r,n);if(Math.abs(o)<=a)return!1}return!0}},{key:"sumNondiagonalElements",value:function(t,e){var i=0,n=void 0;for(n=0;e>n;n++)i+=Math.abs(t[n]);for(n=e+1;t.length>n;n++)i+=Math.abs(t[n]);return i}}]),t}();o.clone=o.deepCopy,o.add=o.addition,e["default"]=o},505:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(e){n(this,t),this.UID=e,this.bposterArr=[],this.number=0,this.Un=0,this.isGround=!1}return r(t,[{key:"freshUn",value:function(){var t=this;this.bposterArr.forEach(function(e){e.Un=t.Un,e.BindMC.unNodeSP&&(e.BindMC.unNodeSP.numberLabel.text=t.number+"号",e.BindMC.unNodeSP.wangLabel.text=t.UID+"团")})}},{key:"destroy",value:function(){this.bposterArr.forEach(function(t){t.unNode=null,t.Un=0,t.BindMC.unNodeSP&&(t.BindMC.unNodeSP.numberLabel.text="",t.BindMC.unNodeSP.wangLabel.text="")})}}]),t}()},525:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(0);e["default"]=function(){function t(e){n(this,t),this.moduleMain=e,this.globalConfig=e.globalConfig,this.phy=e.phy,this.elecUtil=e.elecUtil}return r(t,[{key:"destroy",value:function(){this.globalConfig.main.removeEventListener(this.globalConfig.main.constructor.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.addListeners(!1),this.globalConfig.main.drawStack.removeChild(this._wireG),this.globalConfig=null,this.phy=null,this.elecUtil=null,this.moduleMain=null}},{key:"init",value:function(){this._wireG=new PIXI.Graphics,this.globalConfig.main.drawStack.addChild(this._wireG),this.__pArr=[],this._hasAddLiseners=!1,this.endDrawElecWireId=this.endDrawElecWire.bind(this),this.moveDrawElecWireId=this.moveDrawElecWire.bind(this),this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.globalConfig.main.addEventListener(this.globalConfig.main.constructor.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"getTouches",value:function(t){return t.data.originalEvent.changedTouches}},{key:"canvasRunHandle",value:function(t){this.setActive(t.isRunning)}},{key:"setActive",value:function(t){t||this.addListeners(!1)}},{key:"addListeners",value:function(t){var e=this.globalConfig.main,i=e.canvas;t?this._hasAddLiseners||($(i).on("mouseup"+e.$NAMESPACE+" touchend"+e.$NAMESPACE,this.endDrawElecWireId),$(i).on("mousemove"+e.$NAMESPACE+" touchmove"+e.$NAMESPACE,this.moveDrawElecWireId),this._hasAddLiseners=!0):this._hasAddLiseners&&($(i).off("mouseup"+e.$NAMESPACE+" touchend"+e.$NAMESPACE,this.endDrawElecWireId),$(i).off("mousemove"+e.$NAMESPACE+" touchmove"+e.$NAMESPACE,this.moveDrawElecWireId),this._hasAddLiseners=!1)}},{key:"startDrawElecWire",value:function(t,e){this._isStartDrawElecWire||(this._isStartDrawElecWire=!0,this._wireG.clear(),this._wireG.lineStyle(5,16711680,.5),o.ArrayUtil.clear(this.__pArr),this.__pArr.push(t),this.__wx=t.x,this.__wy=t.y,this._wireG.moveTo(t.x,t.y),this._wireG.lineTo(t.x,t.y),this.globalConfig.main.canRender&&this.addListeners(!0))}},{key:"moveDrawElecWire",value:function(t){if(this._isStartDrawElecWire){var e=this.phy.getCanvasP(t);this.__pArr.length&&(this._wireG.moveTo(this.__wx,this.__wy),this._wireG.lineTo(e.x,e.y)),this.__wx=e.x,this.__wy=e.y,this.__pArr.push(new o.Point(e.x,e.y))}}},{key:"endDrawElecWire",value:function(t){var e=this;if(this._isStartDrawElecWire){this.addListeners(!1);var i=void 0;if(this._isStartDrawElecWire=!1,this._wireG.clear(),5>this.__pArr.length)return;var n=[];for(n.push(this.__pArr[0]),i=1;this.__pArr.length-1>i;i++){var r=this.__pArr[i];o.M.getPointLen(n[n.length-1],r)>100&&n.push(r)}n.push(this.__pArr[this.__pArr.length-1]),this.globalConfig.main.addComp([{name:"ElecWire",p:new o.Point(140,35)}],!1,function(t){var i=t[0];i.isDrawType=!0;var r=i.getData();r.h1_x=n[0].x,r.h1_y=n[0].y,r.h2_x=n[n.length-1].x,r.h2_y=n[n.length-1].y,r.h1IsNearToBinding=!0,r.h2IsNearToBinding=!0,r.pArr=n,i.allowSave=!0,i.setData.call(i,r),i.setDataOver0.call(i);var o=e.elecUtil.getWireLinkBposter(i.bposter0),a=e.elecUtil.getWireLinkBposter(i.bposter1);if(o&&a&&o.UID===a.UID)return void e.globalConfig.main.removeEquipment.call(e.globalConfig.main,i);i.diyChanged.call(i),(1>i.bposter0.bindinger.friendPostersArr.length||1>i.bposter1.bindinger.friendPostersArr.length)&&e.globalConfig.main.removeEquipment.call(e.globalConfig.main,i)})}}}]),t}()},526:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(443),c=n(h),p=i(100),f=n(p);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.cageBackCon=null,i.backSp=null,i.connectEarthFlag=!1,i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addCageBack(),this.magElecChanged=function(e){t.diyChangHandler(e)},this.globalConfig.main.addEventListener("magElecChanged",this.magElecChanged)}},{key:"removed",value:function(){this.backSp&&this.backSp.parent&&(this.removeFromFramework(this.backSp),this.backSp=null),this.elecInside&&this.cancelLockItem(this.elecInside),this.globalConfig.main.removeEventListener("magElecChanged",this.magElecChanged),this.magElecChanged=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"addCageBack",value:function(){this.backSp=new f["default"](this.paramObj),this.backSp.allowSave=!1,this.main.addEquipmentChild(this.backSp,new u.Point(0,0));var t=new PIXI.Container;this.backSp.addChild(t),this.backSp.interactive=!1,this.backSp.interactiveChildren=!1,this.backSp.cantToTop=!0,this.backSp.parent.parent.addChildAt(this.backSp.parent,0),this.cageBackCon=t,this.updateBackSpPosition()}},{key:"diyChangHandler",value:function(t){t===this?this.selfMoved():t.classname!==this.classname&&this.itemMoved(t)}},{key:"selfMoved",value:function(){if(this.elecInside&&this.itemMoved(this.elecInside),!this.elecInside)for(var t=this.elecUtil.getElecStaCompArr(),e=t.length,i=0;e>i;i++){var n=t[i];if(this.canItemMoveIn(n)){var r=this.itemMoved(n);if(r)break}}this.elecUtil.electricField_Update.checkAllChanged()}},{key:"itemMoved",value:function(t){var e=this.checkMoveIn(t),i=this.checkMoveOut(t),n=0;return e?(this.lockItem(t),this.parent.parent.setChildIndex(this.parent,0),t.parent.parent.setChildIndex(t.parent,0),this.backSp&&this.backSp.parent.parent.setChildIndex(this.backSp.parent,0),n=1):i&&(this.cancelLockItem(this.elecInside),n=2),this.updateState(),n}},{key:"checkMoveIn",value:function(t){return null===this.elecInside&&!t.inCage&&this.containsItem(t)}},{key:"checkMoveOut",value:function(t){return this.elecInside&&this.elecInside===t&&!this.containsItem(t)}},{key:"canItemMoveIn",value:function(t){return!t.inCage&&t.classname!==this.classname}},{key:"containsItem",value:function(t){return!1}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.updateBackSpPosition()}},{key:"updateBackSpPosition",value:function(){this.backSp&&(this.backSp.parent.x=this.parent.x,this.backSp.parent.y=this.parent.y)}},{key:"updateState",value:function(){this.elecInside&&(this.lockItem(this.elecInside),this.connectEarthFlag||0!==this.elecInside.elecNum&&(this.elecInside.inCage=!0,this.elecInside.isLock=!1))}},{key:"lockItem",value:function(t){this.elecInside=t,t.cantToTop=!0,t.isLock=!0,t.inCage=!0,t.cage=this,this.removeGanNum(t)}},{key:"cancelLockItem",value:function(t){t.cantToTop=!1,t.isLock=!1,t.inCage=!1,t.cage=null,this.elecInside=null}},{key:"removeGanNum",value:function(t){t.ganNum&&(t.ganNum=0),t.freshDotFrom_elecNum?t.freshDotFrom_elecNum():t.txtNumChanged&&t.txtNumChanged()}}]),e}(c["default"])},527:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(214),c=n(h),p=i(418),f=n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=-1;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.dengBan=null,i.canRotate=!0,i.adsorptionThreshold=40,i.isLink=!1,i.level=9,i}return a(e,t),s(e,[{key:"getBanP",value:function(){var t=null;return this.dengBan&&(t=this.dengBan.toLocal(u.M.getSPPoint(this.cdot),this.cdot.parent)),t}},{key:"initZuhe",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:1,pos:[[1,0],[1,1]],wire:[[[1,1],[1,0]]],res:[[1,1e-5]]}),this.wire1.unLink(this.wire1.bposter1),this.wire1.addEventListener(f["default"].UPDATE_POSTER_POSITION,function(){t.isLink&&(t.unLink(),t.checkBp1Bind(!1))}),this.bposter1.cannotBindWire=!0}},{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.cdot=new PIXI.Graphics,this.cdot.beginFill(16711680,0),this.cdot.drawCircle(0,0,5),this.add2component(this.cdot),u.M.setSPPointXY(this.cdot,0,143),u.M.addTouch(this,{dbtab:function(e){t.dengBan&&t.dengBan.addBiaoJi.call(t.dengBan,t)}})}},{key:"rotateChange",value:function(t,i){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t,i),this.hideTip(),this.checkBp1Bind(!0)}},{key:"removed",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.dengBan&&this.dengBan.needleMoves.call(this.dengBan),this.hideTip()}},{key:"beginEnd",value:function(t){this.unLink()}},{key:"endEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.checkBp1Bind(!0)}},{key:"checkBp1Bind",value:function(t){for(var e=this.toGlobalView(new u.Point,this.bposter1),i=this.main.getEquipmentArr(!0),n=i.length,r=0;n>r;r++){var o=i[r];if(o!==this&&o.bPsArr){for(var a=o.bPsArr.length,s=!1,l=1e4,h={},c=0;a>c;c++){var p=o.bPsArr[c];if(!p.body.isZuHe){var f=this.toGlobalView(new u.Point,p.BindMC);if(0!==f.x||0!==f.y){var d=u.M.getPointLen(e,f);d>this.adsorptionThreshold||(s=!0,l>d&&(l=d,h.BindMC=p.BindMC,h.p2=f))}}}if(s){this.link(h.BindMC);var y=h.p2;t&&this.parent&&(this.parent.x+=y.x-e.x,this.parent.y+=y.y-e.y,this.updateBinds()),this.diyChanged();break}}}}},{key:"link",value:function(t){this.isLink||(this.isLink=!0,this.elecUtil.linkWireBindMC(this.wire1.bposter1,t))}},{key:"unLink",value:function(){this.isLink&&(this.isLink=!1,this.wire1.unLink(this.wire1.bposter1),this.diyChanged())}},{key:"hideTip",value:function(){this.dengBan&&this.dengBan.hideTip.call(this.dengBan)}}]),e}(c["default"])},557:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.getMagVFunc=null,i.canXi=!0,i.level=8,i}return o(e,t),a(e,[{key:"added",value:function(){this.add2component(this.bg),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"removed",value:function(){this.xiPareObj&&this.xiPareObj.removeXi(this),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"beginFore",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t),this.canXi&&(this.canXi=!1,this.xiPareObj&&this.xiPareObj.removeXi(this))}},{key:"endFore",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t),this.fresh_magPoint(),this.canXi||(this.canXi=!0,this.diyChangedMag())}},{key:"setMagtricField",value:function(t){if(t&&t.nearItem&&this.canXi){if(120>l.Point.distance(t.nearItem.magPoint,{x:this.parent.x,y:this.parent.y})&&Math.abs(t.nearNum)>5*this.globalConfig.main.view.scale.x&&!t.nearItem.hasXi(this)&&!t.nearItem.isFull()){this.xiPareObj&&this.xiPareObj.removeXi(this),this.xiPareObj=t.nearItem;var e=t.nearItem.magPoint,i=e.x+Math.floor(50*(Math.random()-.5)),n=e.y+Math.floor(50*(Math.random()-.5));l.M.setSPPointXY(this.parent,i,n);var r=this.xiPareObj.toLocal(new l.Point(i,n),this.globalConfig.main.viewStack);l.M.setSPPoint(this.xiPareP,r),this.componentBox.rotation=Math.random()*Math.PI,this.toXiItem(t.nearItem)}}}}]),e}(h["default"])},558:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(101),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.maxPower=5,i.vccR=5,i.HL_LEVELV=2.7,i.inputCounts=2,i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this);for(var t=this.inputCounts+2,i=[],n=[],r=3;this.inputCounts+2>=r;r++)i.push([r,0]),n.push([[r,1],[2,1]]);i.push([2,1]),n.push([[1,1],[2,0]]),this.createZuhe({bar:t,pos:i,wire:n}),this.moduleMain.groundElecManager.linkBindMC(this.bar1.bposter0),this.bar1.iElecInter=2,this.bar2.Resistance=this.vccR;for(var o=3;this.inputCounts+2>=o;o++)this["bar"+o].elecConnect=!1;this.bar2.Resistance=0,this.bar1.Power=this.maxPower}},{key:"getInput",value:function(t){var e=this["bposter"+t].bindinger;return e.unNode&&e.Un>=this.HL_LEVELV}},{key:"getOutput",value:function(){var t=this.bar2.bposter1.bindinger;return t.unNode&&t.Un>1}},{key:"setHuiPower",value:function(){var t=this.elecUtil.checkBPsInOneHui(this);return t||this.bar1.Power>0&&(this.bar1.Power=0,this.bar1.branchChange=!0),t}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n  "+this.language.getLocaleStr("high_level_value")+": >=2.7V\n  "+this.language.getLocaleStr("low_level_value")+": 0~2.7V\n  "+this.language.getLocaleStr("output_voltage")+": 5V\n    "}}]),e}(u["default"])},559:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(443),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.classname="StaticElectriComp";var o=t.rect,a=t.ganP;return i.elecAre=new l.Rectangle(o.x,o.y,o.w,o.h),i.ganP=new l.Point(a.x,a.y),i.init(t.elecNum),i}return o(e,t),a(e,[{key:"txtNumChanged",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"txtNumChanged",this).call(this),this.dispatchEvent("STATICELECTRICOMP_TXT_NUM_CHANGED",{num:this.txtNum,elec:this})}}]),e}(h["default"])},560:function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);t.length>e;e++)i[e]=t[e];return i}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:p(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(443),c=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.allowSave=!1,i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),setTimeout(function(){t.addOthers()})}},{key:"addOthers",value:function(){var t=this,i=u.M.getSPPoint(this.parent),r=[];1===this.zhenNum?r.push(i):2===this.zhenNum?r.push.apply(r,n(u.M.getRegPolygonRay(this.zhenNum,i,150).pArr)):r.push.apply(r,[i].concat(n(u.M.getRegPolygonRay(this.zhenNum-1,i,150).pArr))),this.main.addComp(r.map(function(e){return{name:t.paramObj.dependClass,p:e}}),!0,function(i){i.forEach(function(i){i.getDefaultSetting=t.getDefaultSetting.bind(t),i.setDefaultOrigin=t.setDefaultOrigin.bind(t),i.getConf=function(){var i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",t).call(t);return i.confArr.push(t.ComponentProperty.getScrollBar(t.language.getLocaleStr("number"),!1,"",10,1,t.zhenNum,1,function(e){t.zhenNum=parseInt(e.showValue)})),i}})})}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.zhenNum=this.zhenNum,this.main.userDataTool.saveElecSetting(this.classname,t),t}},{key:"setDefaultOrigin",value:function(){this.zhenNum=5}},{key:"setDefaultSetting",value:function(t){this.zhenNum=t.zhenNum}},{key:"zhenNum",get:function(){return this.globalConfig[this.paramObj.zhenNumName]},set:function(t){this.globalConfig[this.paramObj.zhenNumName]=t}}]),e}(c["default"])},561:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:g(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(102),c=n(h),p=i(38),f=n(p),d=i(465),y=n(d);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=2;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isDC=!0,i.isOpen=!1,i.maxPower=0,i.duanNum=4,i.duanIndex=0,i.pinF=4,i.maxF=20,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){this.createZuhe({bar:3,pos:[[1,0],[2,1],[3,0],[3,1]],wire:[[[1,1],[2,0]],[[1,0],[3,0]],[[2,1],[3,1]]],res:[[1,0],[2,c["default"].MIN_RESISTANCE]]}),this.bar1.iElecInter=2,this.bar3.elecConnect=!1}},{key:"freshPower",value:function(t){this.maxPower=this.isOpen?t:0,this.freshConnect(),this.bar1.branchChange=!0}},{key:"overStep",value:function(){this.isDC?this.bar1.Power!==this.maxPower&&(this.bar1.Power=this.maxPower,this.bar1.branchChange=!0):this.elecUtil.getBposterWires(this.bposter2).length&&this.elecUtil.getBposterWires(this.bposter3).length&&(this.bar1.Power=this.getNextDuanPower(),this.bar1.branchChange=!0)}},{key:"getNextDuanPower",value:function(){var t=this.duanNum*this.pinF,e=Math.sin(this.duanIndex/t*2*Math.PI)*this.maxPower;return this.duanIndex=t-1>this.duanIndex?this.duanIndex+1:0,e}},{key:"_init_toggleMC",value:function(){var t=this;this._toggleMC_ID=u.M.addTouch(this.toggleMC,{tab:function(){t.isOpen=!t.isOpen,t.toggleMC.currentFrame=t.isOpen?1:0,t.freshPower(t._rosInd),t.freshGlow()},begin:function(){t.cannotSystemDrag=!0},end:function(){t.cannotSystemDrag=!1}}),this.addCursor(this.toggleMC,"hand")}},{key:"freshConnect",value:function(){this.bar1.elecConnect=this.isOpen,this.bar2.elecConnect=this.isOpen,this.wire1.elecConnect=this.isOpen,this.wire2.elecConnect=this.isOpen,this.wire3.elecConnect=this.isOpen}},{key:"_init_ros",value:function(){this.ros.rotation=this._angleArr[this._rosInd],this._addRotateControl()}},{key:"_addRotateControl",value:function(){var t=this;this.parent.updateTransform(),this.alphaSP.rotateData={pareComp:this,cenP:function(){return t.toGlobal(t.alphaSP)},rotateHandleFunc:this._rotateHandleFunc,downHandleFunc:this._downHandleFunc},this.phy.addRotateTool(this.alphaSP),this.alphaSP.alpha=0}},{key:"_downHandleFunc",value:function(t){t.addAngle=0}},{key:"_rotateHandleFunc",value:function(t,e){this.alphaSP.rotation+=e,t.addAngle+=e;var i=!1;t.addAngle>u.M.toHu(15)?(this._angleArr.length-1>this._rosInd&&(this._rosInd++,this.ros.rotation=this._angleArr[this._rosInd],i=!0),t.addAngle=0):t.addAngle<-u.M.toHu(15)&&(this._rosInd>0&&(this._rosInd--,this.ros.rotation=this._angleArr[this._rosInd],i=!0),t.addAngle=0),i&&(this.freshPower(this._rosInd),this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE))}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this._angleArr=[],this._rosInd=0;var t=void 0;for(t=0;16>=t;t++)this._angleArr.push(u.M.toHu(16.25*t-130));this._toggleMC_ID=null,this._init_toggleMC(),this._init_ros(),this.freshBindStateProx=this.freshBindState.bind(this),this.main.addEventListener(f["default"].BIND_ELEC_WIRE,this.freshBindStateProx),this.main.addEventListener(f["default"].UNBIND_ELEC_WIRE,this.freshBindStateProx),this.addCursor(this.alphaSP,"rotatebtn"),this.freshBindState(),this.freshPower(this._rosInd)}},{key:"freshBindState",value:function(){this.bposter0.cannotBindWire=!1,this.bposter1.cannotBindWire=!1,this.bposter2.cannotBindWire=!1,this.bposter3.cannotBindWire=!1,this.elecUtil.getBposterWires(this.bposter0).length&&this.elecUtil.getBposterWires(this.bposter1).length?(this.bposter2.cannotBindWire=!0,this.bposter3.cannotBindWire=!0,this.isDC=!0,this.bar2.elecConnect=!0):this.elecUtil.getBposterWires(this.bposter2).length&&this.elecUtil.getBposterWires(this.bposter3).length?(this.bposter0.cannotBindWire=!0,this.bposter1.cannotBindWire=!0,this.isDC=!1,this.bar2.elecConnect=!0):this.bar2.elecConnect=!1}},{key:"removed",value:function(){this.removedCursor(this.toggleMC),this.removedCursor(this.alphaSP),this.main.removeEventListener(f["default"].BIND_ELEC_WIRE,this.freshBindStateProx),this.main.removeEventListener(f["default"].UNBIND_ELEC_WIRE,this.freshBindStateProx),this.alphaSP.rotateData=null,u.M.removeTouch(this.toggleMC,this._toggleMC_ID),u.M.removeTicker(this.tickerID),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.rosInd=this._rosInd,t.isOpen=this.isOpen,t.pinF=this.pinF,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this._rosInd=t.rosInd,this.isOpen=t.isOpen,this.pinF=t.pinF,this.toggleMC.currentFrame=this.isOpen?1:0,this.freshPower(this._rosInd),this.freshGlow()}},{key:"setDataOver",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this),this.ros.rotation=this._angleArr[this._rosInd]}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("frequency"),!0,"",this.maxF,1,this.maxF-this.pinF+1,1,function(e){t.pinF=t.maxF-e.showValue+1},this)),i}},{key:"getTipMess",value:function(){var t=(this.getShowValue(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this));return t+="\n    "+this.language.getLocaleStr("frequency")+": "+(this.maxF-this.pinF+1)+"\n    "}},{key:"freshGlow",value:function(){this.globalConfig.SHOW_GLOW&&(this.glowSPArr[0][0].visible=!this.isOpen,this.glowSPArr[0][1].visible=this.isOpen)}},{key:"showGlowIndex",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"showGlowIndex",this).call(this,t),this.freshGlow()}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.pinF=this.pinF,t}},{key:"setDefaultOrigin",value:function(){this.pinF=4}},{key:"defaultSettingChanged",value:function(){this.freshPower(this._rosInd)}}]),e}(y["default"])},562:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(101),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=7;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canShowRepairBtn=!1,i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,1],[1,1]],wire:[[[1,1],[2,0]]]}),this.bar1.isBreak=!0}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.drag.alpha=0,this.dao.xin.alpha=0,this.dao.rotation=-.48,this._addRotateControl(),this._freshResistance(),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter2.bindinger.linkWireType=1,this.drawDis=35,this.bposter0.dp.setTo(12,0),this.bposter2.dp.setTo(12,-8),this.bposter1.dp.setTo(-16,0),this.addCursor(this.drag,"hand")}},{key:"_addRotateControl",value:function(){this.parent.updateTransform(),this.drag.rotateData={rotateType:1,pareComp:this,cenP:function(){return this.toGlobal(this.dao)}.bind(this),rotateHandleFunc:this._rotateHandleFunc},this._spdRotID=this.phy.addRotateTool(this.drag)}},{key:"_rotateHandleFunc",value:function(t,e){var i=this.dao.rotation+e,n=i;i>0&&i<Math.PI/2?n=0:(i>Math.PI/2||i<-Math.PI)&&(n=-Math.PI),this.dao.rotation=n,this._freshResistance.call(this)&&this.diyChanged()}},{key:"_freshResistance",value:function(){var t=this.toLocal(this.dao.xin,this.dao);l.M.setSPPoint(this.drag,t),this.drag.rotation=this.dao.rotation;var e=l.M.toAngle(this.dao.rotation);if(e<-13)if(-13>e&&e>-167){if(this.bar1.isBreak&&this.bar2.isBreak)return!1;this.bar1.isBreak=!0,this.bar2.isBreak=!0}else{if(!this.bar1.isBreak&&this.bar2.isBreak)return!1;this.bar1.isBreak=!1,this.bar2.isBreak=!0}else{if(this.bar1.isBreak&&!this.bar2.isBreak)return!1;this.bar1.isBreak=!0,this.bar2.isBreak=!1}return!0}},{key:"removed",value:function(){this.removedCursor(this.drag),this.phy.removeRotateTool(this.drag,this._spdRotID),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.daoRotation=this.dao.rotation,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.dao.rotation=t.daoRotation}},{key:"setDataOver",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this),this._freshResistance.call(this)}},{key:"getLocalBoundsElecs",value:function(){return[this.bg,this.dao]}}]),e}(h["default"])},563:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(101),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=7;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canShowRepairBtn=!1,i}return o(e,t),a(e,[{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.drag.alpha=0,this.dao.xin.alpha=0,this.dao.rotation=-.48,this._freshResistance(),this._addRotateControl(),this._startAngle=0,this._startTime=0,this._dragTouchId=l.M.addTouch(this.drag,{begin:function(e){t._startAngle=t.drag.rotation,t._startTime=(new Date).getTime()},end:function(e){var i=Math.abs(t._startAngle-t.drag.rotation),n=(new Date).getTime()-t._startTime;.2>i&&300>n&&(t.isBreak?TweenMax.to(t.drag,.5,{x:111.05,y:-25.8,rotation:0,onUpdate:function(e){t.dao.rotation=t.drag.rotation,t._freshResistance()}}):TweenMax.to(t.drag,.5,{x:75.96,y:-127.36,rotation:-.651,onUpdate:function(e){t.dao.rotation=t.drag.rotation,t._freshResistance()}}))}},this,{time:300,dis:10}),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter0.dp.setTo(14,8),this.bposter1.dp.setTo(-14,8),this.drawDis=35,this.addCursor(this.drag,"hand")}},{key:"_addRotateControl",value:function(){var t=this;this.parent.updateTransform(),this.drag.rotateData={rotateType:1,pareComp:this,cenP:function(){return t.toGlobal(t.dao)},rotateHandleFunc:this._rotateHandleFunc,downHandleFunc:this._downHandleFunc},this.phy.addRotateTool(this.drag)}},{key:"_downHandleFunc",value:function(t,e){}},{key:"_rotateHandleFunc",value:function(t,e){var i=l.M.toAngle(this.dao.rotation),n=l.M.toAngle(this.dao.rotation+e);n>0&&0>this.dao.rotation&&(e=-this.dao.rotation),-60>n&&i>-60&&(e=l.M.toHu(-60)-this.dao.rotation),n>0&&0===this.dao.rotation||-60>n&&-60===i||(this.dao.rotation+=e,this._freshResistance.call(this))}},{key:"_freshResistance",value:function(){var t=this.toLocal(this.dao.xin,this.dao);l.M.setSPPoint(this.drag,t),this.drag.rotation=this.dao.rotation,-13>l.M.toAngle(this.dao.rotation)?this.isBreak||this["break"]():this.isBreak&&this.repair()}},{key:"removed",value:function(){this.removedCursor(this.drag),l.M.removeTouch(this.drag,this._dragTouchId),this.phy.removeRotateTool(this.drag),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.daoRotation=this.dao.rotation,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.dao.rotation=t.daoRotation,this._freshResistance()}},{key:"setDataOver",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this),this._freshResistance.call(this)}},{key:"getLocalBoundsElecs",value:function(){return[this.bg,this.dao]}}]),e}(h["default"])},564:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(101),c=n(h),p=i(102);n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=0;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.maxRes=20,i.maxResArr=["5Ω","10Ω","20Ω","50Ω","200Ω","1000Ω","10000Ω","100000Ω"],i.dragPerArr=["0%","20%","33%","50%","67%","75%"],i.isShowElec=!0,i.canFuse=!1,i.fuseValueArr=["0.5A","1A","2A"],i.fuseValue=2,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,1],[1,1],[2,0]],wire:[[[1,1],[2,0]]]})}},{key:"_initMask",value:function(){this.LMask=new PIXI.Graphics,this.RMask=new PIXI.Graphics,this.addChildAt(this.LMask,this.children.length-2),this.addChildAt(this.RMask,this.children.length-2)}},{key:"freshMask",value:function(){this.LMask.clear(),this.LMask.beginFill(16711680,0),this.LMask.drawRect(this.qianSP.x,this.qianSP.y,this.drager.x-this.qianSP.x,this.qianSP.height),this.LMask.endFill(),this.RMask.clear(),this.RMask.beginFill(255,0),this.RMask.drawRect(this.drager.x,this.qianSP.y,this.qianSP.width-(this.drager.x-this.qianSP.x),this.qianSP.height),this.RMask.endFill(),this.shenSP.visible=!1,this.qianSP.visible=!1,this.isShowElec&&this.globalConfig.showElecLine&&(Math.abs(this.bar1.curElec)>1e-6&&Math.abs(this.bar2.curElec)>1e-6&&1e-6>Math.abs(this.bar1.curElec-this.bar2.curElec)?(this.shenSP.visible=!0,this.shenSP.mask=null,this.qianSP.mask=null):Math.abs(this.bar1.curElec)-Math.abs(this.bar2.curElec)>1e-6?(Math.abs(this.bar1.curElec)>1e-6&&(this.shenSP.mask=this.LMask,this.shenSP.visible=!0),Math.abs(this.bar2.curElec)>1e-6&&(this.qianSP.mask=this.RMask,this.qianSP.visible=!0)):(Math.abs(this.bar2.curElec)>1e-6&&(this.shenSP.mask=this.RMask,this.shenSP.visible=!0),Math.abs(this.bar1.curElec)>1e-6&&(this.qianSP.mask=this.LMask,this.qianSP.visible=!0)))}},{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this._initMask(),this._dragRect={x:-146,y:this.drager.y,width:298,height:0},this.drager.x=this._dragRect.x,this._initDrag(),this.freshMask(),this.bposter0.bindinger.linkWireType=4,this.bposter1.bindinger.linkWireType=4,this.bposter2.bindinger.linkWireType=3,this.bposter3.bindinger.linkWireType=3,this.drawDis=40,this.bposter0.dp.setTo(-22,-8),this.bposter1.dp.setTo(22,-8),this.bposter2.dp.setTo(-25,18),this.bposter3.dp.setTo(25,18),this.addCursor(this.drager,"zuoyou"),setTimeout(function(){t.hadDestory||t._freshDragRes(!0)})}},{key:"_initDrag",value:function(){var t=this;this.drager.getMScale=function(){return t.globalConfig.main.view.scale},this._dragerID=u.M.addDrag(this.drager,this._dragRect,{begin:function(){t.cannotSystemDrag=!0},end:function(){t.cannotSystemDrag=!1},move:function(){t._freshDragRes()}})}},{key:"_getDragResPer",value:function(){return(this.drager.x-this._dragRect.x)/this._dragRect.width}},{key:"_freshDragRes",value:function(t){this.bar1.Resistance=this.maxRes*this._getDragResPer(),this.bar2.Resistance=this.maxRes-this.bar1.Resistance,this.main.showElecTipMess(),this.diyChanged()}},{key:"overStep",value:function(){this.freshMask(),this.freshBreak()}},{key:"freshElecLineVisible",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshElecLineVisible",this).call(this),this.freshMask()}},{key:"removed",value:function(){this.removedCursor(this.drager),this.drager.getMScale=null,u.M.removeDrag(this.drager,this._dragerID),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.dragerX=this.drager.x,t.maxRes=this.maxRes,t.canFuse=this.canFuse,t.fuseValue=this.fuseValue,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.drager.x=t.dragerX,this.maxRes=t.maxRes,this.canFuse=t.canFuse||!1,this.fuseValue=t.fuseValue||2}},{key:"setDataOver",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this),this._freshDragRes()}},{key:"freshBreak",value:function(){this.canFuse&&(Math.abs(this.bar1.curElec)>this.fuseValue||Math.abs(this.bar2.curElec)>this.fuseValue)&&this["break"]()}},{key:"break",value:function(){this.bar1.isBreak=!0,this.bar2.isBreak=!0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this)}},{key:"repair",value:function(){this.bar1.isBreak=!1,this.bar2.isBreak=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"getLeftN",value:function(){return Math.round(100*this._getDragResPer())}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.getLeftN();return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("maxResistance"),canEnter:!0,enterUnit:"Ω",maxValue:1e5,minValue:0,showValue:this.maxRes+"Ω",value:this.maxResArr,callBack:function(e){t.maxRes=u.M.getNumStr(e.showValue),t._freshDragRes()}},{type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("sliderPosition"),canEnter:!0,enterUnit:"%",maxValue:100,minValue:0,showValue:n+"%",value:this.dragPerArr,callBack:function(e){var i=u.M.getNumStr(e.showValue)/100;t.drager.x=i*t._dragRect.width+t._dragRect.x,t._freshDragRes()}},{type:this.ComponentProperty.BOOL,name:this.language.getLocaleStr("can_fuse"),checked:this.canFuse,callBack:function(e){t.canFuse=e.checked,t.freshBreak()}},{type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("fusing_current"),canEnter:!0,enterUnit:"A",maxValue:1e3,minValue:1e-6,showValue:this.fuseValue+"A",value:this.fuseValueArr,callBack:function(e){t.fuseValue=u.M.getNumStr(e.showValue),t.freshBreak()}}),i}},{key:"getTipMess",value:function(){var t=this.getLeftN(),i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("maxResistance")+": "+this.maxRes+"Ω\n    "+this.language.getLocaleStr("sliderPosition")+": "+t+"%\n    "}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.dragerX=this.drager.x,t.maxRes=this.maxRes,t.canFuse=this.canFuse,t.fuseValue=this.fuseValue,t}},{key:"setDefaultSetting",value:function(t){this.drager.x=t.dragerX,this.maxRes=t.maxRes,this.canFuse=t.canFuse||!1,this.fuseValue=t.fuseValue||2}},{key:"setDefaultOrigin",value:function(){this.drager.x=this._dragRect.x,this.maxRes=20,this.canFuse=!1,this.fuseValue=2}}]),e}(c["default"])},565:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function v(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:v(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(101),c=n(h),p=i(102),f=n(p),d=i(500),y=n(d),g=i(38),_=n(g),b=i(10);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=1;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.LINE_BACK_DRAG_ALPHA=0,i.colorIndex=0,i.colorNameArr=[i.language.getLocaleStr("red"),i.language.getLocaleStr("black"),i.language.getLocaleStr("silvery")],i.canShowDragRect=!1,i.loadLevel=4,i.MAX_SPEED=5,i.level=8,i.lockDragBody=!1,i.isDrawType=!1,i.canShowDot=!0,i.pcDot=new y["default"],i.addChild(i.pcDot),i.pcDot.setSkin(i.globalConfig.cdn_static+"electrical/elecwire/dotWhite.png"),i.noRenderSelected=!0,i._oriElecSpeed=0,i.Resistance=0,i.canvasRunHandleProxy=i.canvasRunHandle.bind(i),i.main.addEventListener(i.NBEvent.CANVAS_RUN,i.canvasRunHandleProxy),i.canvasRunHandle({isRunning:i.globalConfig.main.isRunning}),i}return a(e,t),s(e,[{key:"canvasRunHandle",value:function(t){this.pcDot.setActive(t.isRunning)}},{key:"update",value:function(){this.pcDot.loop()}},{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.closeBtn.visible=!1,this._closeBtnTouch=u.M.addTouch(this.closeBtn,{begin:function(){t.closeBtn.currentFrame=1,t.globalConfig.main.removeEquipment.call(t.globalConfig.main,t)},end:function(){t.closeBtn.currentFrame=0}},this),this.parent.x-=140,this.parent.y-=35,this.cannotSystemDrag=!0,this.startElecTimer=!1,this.h1_mc.bposter=this.bposter0,this.h1_mc.bposter.wire_h_mc=this.h1_mc,this.h2_mc.bposter=this.bposter1,this.h2_mc.bposter.wire_h_mc=this.h2_mc,this.h1_mc._dragmode=this.h2_mc._dragmode=0,this.curElecNum=0,this.lineFG=new PIXI.mesh.Rope(PIXI.Texture.fromImage(this.globalConfig.cdn_static+"electrical/elecwire/ElecWireSe.png"),[]),this.addChildAt(this.lineFG,0),this.lineFG.visible=!1,this.lineG=new PIXI.Graphics,this.addChildAt(this.lineG,0),this.func_add_h_mc_touchHandle(),this.func_addfunc_bposterPositionChangedHandle(),this.func_initDragPro(),this.freshTouDirect(),this.func_init_loadLine(),this.show_h_mc(!0),this._drawLine(),this.hideDragRect(),this.__loopInd=0,u.M.setSPPoint(this.bposter0.position,this.h1_mc),u.M.setSPPoint(this.bposter1.position,this.h2_mc),this._addMouseStatus(this.h1_mc),this._addMouseStatus(this.h2_mc),this.addCursor(this.closeBtn,"hand")}},{key:"_checkDragEndToBind",value:function(t){0===t.bindinger.friendPostersArr.length&&t.bindinger.nearToBinding()}},{key:"endEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this._checkDragEndToBind(this.bposter0),this._checkDragEndToBind(this.bposter1)}},{key:"_addMouseStatus",value:function(t){var e=this;t.addEventListener("mouseover",function(t){var i=t.currentTarget;i[i.h_mc_dragID].isLock&&i.bposter.bindinger.friendPostersArr.length>0&&(e.elecUtil.getWireBposterElec(i.bposter).canStartDrawElecWire&&(i.__isIn__=!0,e.MouseManager.__changeMouseStatus(e.globalConfig.main.mouseManager,i,11),e.MouseManager.lockMouse(!0)))}),t.addEventListener("mouseout",function(t){var i=t.currentTarget;e.MouseManager.lockMouse(!1),i.__isIn__=!1,e.MouseManager.__changeMouseStatus(e.globalConfig.main.mouseManager,i,11)})}},{key:"freshTouDirect",value:function(){if(this._freshTouTypeFromLink(this.h1_mc),this._freshTouTypeFromLink(this.h2_mc),this.h1_mc.linkBposter);else{var t=u.M.getAngleP(this._pArr[1].p,this._pArr[0].p);this.h1_mc.rotation=u.M.toHu(t+180)}if(this.h2_mc.linkBposter);else{var e=u.M.getAngleP(this._pArr[this._pArr.length-2].p,this._pArr[this._pArr.length-1].p);this.h2_mc.rotation=u.M.toHu(e+180)}}},{key:"_freshTouTypeFromLink",value:function(t){if(t.linkBposter&&t.linkBposter.body){if(t.linkBposter.body.componentBox)switch(t.rotation=t.linkBposter.body.componentBox.rotation,t.linkBposter.linkWireType){case-1:t.currentFrame=0;break;case 0:t.currentFrame=1;break;case 1:t.currentFrame=2;break;case 2:t.currentFrame=3;break;case 3:t.currentFrame=4;break;case 4:t.currentFrame=5}}else t.currentFrame=0}},{key:"func_init_loadLine",value:function(){this.ropeBox=new PIXI.Sprite,this.addChildAt(this.ropeBox,0),this.freshLineType()}},{key:"freshLineType",value:function(){var t=void 0;switch(u.M.removeAllChild(this.ropeBox),this.colorIndex){case 0:t="ElecWireLineStyleRed";break;case 1:t="ElecWireLineStyleBlue";break;case 2:t="ElecWireLineStyle"}var e=void 0;e=this.globalConfig.isWinXP?new PIXI.Graphics:new PIXI.mesh.Rope(PIXI.Texture.fromImage(this.globalConfig.cdn_static+"electrical/elecwire/"+t+".png"),[]),this.ropeBox.addChild(e),this.freshDotColor()}},{key:"setWorkElec",value:function(t){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),null===t)return void this.pcDot.setSpeed(0);this.curElecNum=t;var i=void 0;this.globalConfig.showElecLine&&Math.abs(this.curElecNum)>1e-7?(this.startElecTimer=!0,i=t,i=u.M.range(i,-this.MAX_SPEED,this.MAX_SPEED)):(this.startElecTimer=!1,i=0),this.pcDot.setSpeed(i),(0!==this._oriElecSpeed&&0===i||0===this._oriElecSpeed&&0!==i)&&(this._oriElecSpeed=i,this._drawLine())}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);t.isDrawType=this.isDrawType,t.colorIndex=this.colorIndex,t.h1_x=this.h1_mc.x,t.h1_y=this.h1_mc.y,t.h2_x=this.h2_mc.x,t.h2_y=this.h2_mc.y,this.h1_mc.bposter.bindinger.friendPostersArr.length>0&&(t.h1IsNearToBinding=!0),this.h2_mc.bposter.bindinger.friendPostersArr.length>0&&(t.h2IsNearToBinding=!0);var i=[];return $.each(this._pArr,function(t,e){i.push(e.p)}),t.pArr=i,t}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.colorIndex=this.colorIndex,t}},{key:"setDefaultOrigin",value:function(){this.colorIndex=0}},{key:"defaultSettingChanged",value:function(){this.freshLineType(),this._drawLine()}},{key:"setData",value:function(t){var i=this;this.isDrawType=t.isDrawType,this.colorIndex=t.colorIndex,this.h1_mc.x=t.h1_x,this.h1_mc.y=t.h1_y,this.h2_mc.x=t.h2_x,this.h2_mc.y=t.h2_y,u.M.setSPPoint(this.bposter0.position,this.h1_mc),u.M.setSPPoint(this.bposter1.position,this.h2_mc),u.ArrayUtil.clear(this._pArr),$.each(t.pArr,function(t,e){i._pArr.push({p:new u.Point(e.x,e.y)})}),this._pArr[0].mc=this.h1_mc,this._pArr[this._pArr.length-1].mc=this.h2_mc,this._freshPArrData(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.freshLineType(),this._drawLine()}},{key:"setDataOver0",value:function(){var t=this.bposter0.bindinger.nearToBinding(),e=this.bposter1.bindinger.nearToBinding();t&&(this.bposter0.wire_h_mc.linkBposter=this.elecUtil.getWireLinkBposter(this.bposter0),this.main.dispatchEvent(_["default"].BIND_ELEC_WIRE,{target:this.bposter0})),e&&(this.bposter1.wire_h_mc.linkBposter=this.elecUtil.getWireLinkBposter(this.bposter1),this.main.dispatchEvent(_["default"].BIND_ELEC_WIRE,{target:this.bposter1})),this.show_h_mc(!1),this.freshTouDirect()}},{key:"fresh_canShowDot",value:function(){var t=this,e=this.elecUtil.getWireAllBposterElecs(this);each(e,function(e,i){if("ParallelPlateCondenser"===i.classname||"ElectriScope"===i.classname)return t.canShowDot=!1,!1},this)}},{key:"func_add_h_mc_touchHandle",value:function(){var t=this,e={begin:this.func_h_mc_begin,move:this.func_h_mc_move,end:this.func_h_mc_end};this.h1_mc.h_mc_dragID=u.M.addDrag(this.h1_mc,null,e,this),this.h2_mc.h_mc_dragID=u.M.addDrag(this.h2_mc,null,e,this),this.h1_mc.getMScale=function(){return t.globalConfig.main.view.scale},this.h2_mc.getMScale=function(){return t.globalConfig.main.view.scale}}},{key:"func_h_mc_begin",value:function(t){this.canShowDot=!0;var e=t.target;if(e[e.h_mc_dragID].isLock){if(e.bposter.bindinger.friendPostersArr.length>0){var i=this.elecUtil.getWireBposterElec(e.bposter);if(i.canStartDrawElecWire){this.globalConfig.main.viewStack.parent.updateTransform();var n=this.globalConfig.main.viewStack.toLocal(new u.Point,e.bposter);this.moduleMain.drawLineComp.startDrawElecWire.call(this.moduleMain.drawLineComp,n,t)}}}else e._isTouDown=!0,this.lockDragBody=!1,e.bposter.bindinger.friendPostersArr.length>0&&(e.linkBposter=null,this.freshTouDirect(),e.bposter.bindinger.breakBinding.call(e.bposter.bindinger),this.main.dispatchEvent(_["default"].UNBIND_ELEC_WIRE,{target:e.bposter}),this.diyChanged());this.main.dispatchEvent(b.PHY_EVENTS.TIP_TOP_BEGIN,{target:[e.bposter.bindinger],type:1})}},{key:"freshHcPoint",value:function(t){u.M.setSPPointXY(t.bposter,t.x,t.y)}},{key:"func_h_mc_move",value:function(t){var e=t.target;this.freshHcPoint(e),e._isTouDown&&this._drawLine()}},{key:"func_h_mc_end",value:function(t){var e=t.target;if(e._isTouDown){e._isTouDown=!1,this.freshHcPoint(e);e.bposter.bindinger.nearToBinding()&&(e.linkBposter=this.elecUtil.getWireLinkBposter(e.bposter),this.globalConfig.SoundTool.registAndPlay(this.SoundStr.DAO_XIAN_LIAN_JIE),this.main.dispatchEvent(_["default"].BIND_ELEC_WIRE,{target:e.bposter}),this.diyChanged(),this.show_h_mc(!1)),this._drawLine()}}},{key:"func_addfunc_bposterPositionChangedHandle",value:function(){this.bposter0.addEventListener(f["default"].BINDMC_POTISON_CHANGED,this.func_bposterPositionChangedHandle),this.bposter1.addEventListener(f["default"].BINDMC_POTISON_CHANGED,this.func_bposterPositionChangedHandle)}},{key:"func_bposterPositionChangedHandle",value:function(t){this.wire_h_mc.x=this.position.x,this.wire_h_mc.y=this.position.y}},{key:"func_initDragPro",value:function(){this._cInd=0,this._preMC1P=new u.Point,this._preMC2P=new u.Point,this._dDis=30,this._cDis=10,this._isTouDown=!1,this._lineGP1=new u.Point,this._lineGP2=new u.Point,this._pArr=[{p:u.M.getSPPoint(this.h1_mc),mc:this.h1_mc},{p:u.M.getSPPoint(this.h2_mc),mc:this.h2_mc}],this._sp0=new u.Point,this._sp1=new u.Point,this._sp2=new u.Point,this._shangPArr=[],this._xiaPArr=[],this.wanObjPArr=[],this._lineGID=u.M.addTouch(this.lineG,{begin:this.lineGBegin,move:this.lineGMove,end:this.lineGEnd},this),this.lineG.isTiDown=!1,this.lineG.preDownP=new u.Point}},{key:"lineGBegin",value:function(t){if(!this.lockDragBody){this.lineG.isTiDown=!0,this.bposter0.bindinger&&0===this.bposter0.bindinger.friendPostersArr.length&&0===this.bposter1.bindinger.friendPostersArr.length?(this._isDragLine=!0,this.main.dispatchEvent(b.PHY_EVENTS.TIP_TOP_BEGIN,{target:[this.bposter0.bindinger,this.bposter1.bindinger],type:1})):this._isDragLine=!1;var e=t.data.global;if(this.lineG.preDownP.setTo(e.x,e.y),!this._isDragLine){if(e=this.toLocal(e),0>(this._cInd=this.func_getPArrDownInd(e)))return!1;var i=this._cInd,n=this.func_getDownValidP(e);n?this._dragObj=n:(this._dragObj={p:e.clone()},this._pArr.splice(i+1,0,this._dragObj),this._dragObj.ind=i+1)}}}},{key:"lineGMove",value:function(t){if(!this.lockDragBody&&this.lineG.isTiDown){var e=t.data.global.x-this.lineG.preDownP.x,i=t.data.global.y-this.lineG.preDownP.y;if(e/=this.globalConfig.main.view.scale.x,i/=this.globalConfig.main.view.scale.y,this._isDragLine)$.each(this._pArr,function(t,n){n.p.x+=e,n.p.y+=i}),u.M.setSPPoint(this._pArr[0].mc,this._pArr[0].p),u.M.setSPPoint(this._pArr[this._pArr.length-1].mc,this._pArr[this._pArr.length-1].p),this._drawLine(),this.freshHcPoint(this.bposter0.wire_h_mc),this.freshHcPoint(this.bposter1.wire_h_mc);else if(this._dragObj)if(this.isDrawType){for(var n=this._pArr[0].p,r=this._dragObj.p,o=new u.Point(this._dragObj.p.x+e,this._dragObj.p.y+i),a=u.M.getAngleP1(new u.Point(o.x-n.x,o.y-n.y),new u.Point(r.x-n.x,r.y-n.y)),s=u.M.toHu(a),l=u.M.getPointLen(n,o)/u.M.getPointLen(n,r),h=1;this._dragObj.ind>h;h++){var c=this._pArr[h].p,p=u.M.getGaoDianFrom3Dian(c,n,r),f=u.M.getRectOneP(n,c,p),d=u.M.rotaPointFromP(c,n,s),y=u.M.rotaPointFromP(f,n,s);this._pArr[h].p=u.M.interpolate(y,d,l)}n=this._pArr[this._pArr.length-1].p,r=this._dragObj.p,o=new u.Point(this._dragObj.p.x+e,this._dragObj.p.y+i),a=u.M.getAngleP1(new u.Point(o.x-n.x,o.y-n.y),new u.Point(r.x-n.x,r.y-n.y)),s=u.M.toHu(a),l=u.M.getPointLen(n,o)/u.M.getPointLen(n,r);for(var g=this._dragObj.ind+1;this._pArr.length-1>g;g++){var _=this._pArr[g].p,b=u.M.getGaoDianFrom3Dian(_,n,r),v=u.M.getRectOneP(n,_,b),m=u.M.rotaPointFromP(_,n,s),P=u.M.rotaPointFromP(v,n,s);this._pArr[g].p=u.M.interpolate(P,m,l)}u.M.setSPPoint(this._dragObj.p,o),this._drawLine()}else this._dragObj.p.x+=e,this._dragObj.p.y+=i,this._drawLine();this.lineG.preDownP.setTo(t.data.global.x,t.data.global.y)}}},{key:"lineGEnd",value:function(t){this.lockDragBody||this.lineG.isTiDown&&(this.lineG.isTiDown=!1,this._isDragLine||(this.func_checkToRemove_dragObj(),this._drawLine(),this._dragObj=null))}},{key:"_freshPArrData",value:function(t){var e=void 0;if(this.isDrawType||t){var i=this._pArr[0].p.x!==this._pArr[0].mc.x||this._pArr[0].p.y!==this._pArr[0].mc.y,n=this._pArr[this._pArr.length-1].p.x!==this._pArr[this._pArr.length-1].mc.x||this._pArr[this._pArr.length-1].p.y!==this._pArr[this._pArr.length-1].mc.y;if(i&&n)return u.M.setSPPoint(this._pArr[0].p,this._pArr[0].mc),void u.M.setSPPoint(this._pArr[this._pArr.length-1].p,this._pArr[this._pArr.length-1].mc);if(i){var r=this._pArr[this._pArr.length-1].p,o=this._pArr[0].p,a=u.M.getSPPoint(this._pArr[0].mc),s=u.M.getAngleP1(new u.Point(a.x-r.x,a.y-r.y),new u.Point(o.x-r.x,o.y-r.y)),l=u.M.toHu(s),h=u.M.getPointLen(r,a)/u.M.getPointLen(r,o);for(e=1;this._pArr.length-1>e;e++){var c=this._pArr[e].p,p=u.M.getGaoDianFrom3Dian(c,r,o),f=u.M.getRectOneP(r,c,p),d=u.M.rotaPointFromP(c,r,l),y=u.M.rotaPointFromP(f,r,l);this._pArr[e].p=u.M.interpolate(y,d,h)}u.M.setSPPoint(this._pArr[0].p,this._pArr[0].mc)}else if(n){var g=this._pArr[0].p,_=this._pArr[this._pArr.length-1].p,b=u.M.getSPPoint(this._pArr[this._pArr.length-1].mc),v=u.M.getAngleP1(new u.Point(b.x-g.x,b.y-g.y),new u.Point(_.x-g.x,_.y-g.y)),m=u.M.toHu(v),P=u.M.getPointLen(g,b)/u.M.getPointLen(g,_);for(e=1;this._pArr.length-1>e;e++){var w=this._pArr[e].p,O=u.M.getGaoDianFrom3Dian(w,g,_),k=u.M.getRectOneP(g,w,O),C=u.M.rotaPointFromP(w,g,m),M=u.M.rotaPointFromP(k,g,m);this._pArr[e].p=u.M.interpolate(M,C,P)}u.M.setSPPoint(this._pArr[this._pArr.length-1].p,this._pArr[this._pArr.length-1].mc)}}else u.M.setSPPoint(this._pArr[0].p,this._pArr[0].mc),u.M.setSPPoint(this._pArr[this._pArr.length-1].p,this._pArr[this._pArr.length-1].mc)}},{key:"caculate_yan",value:function(t,e,i,n,r){var o=u.M.getGaoDianFrom3Dian(n,t,e),a=o.sub(t).length/e.sub(t).length;o=u.M.interpolate(t,i,a);var s=u.M.getPointLen(n,o),l=u.M.interpolate(t,o,r),h=u.M.checkPointOnLineLeftOrRight(n,t,e)>0;return u.M.getXianDuanGaoXianDian(l,t,s,h)}},{key:"_drawLine",value:function(t,e){this.fresh_canShowDot();var i=void 0,n=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=this.elecUtil.getWireAllBposterElecs(this);e&&1===l.length?(u.M.setSPPoint(this._pArr[0].p,this._pArr[0].mc),u.M.setSPPoint(this._pArr[this._pArr.length-1].p,this._pArr[this._pArr.length-1].mc)):this._freshPArrData(t),n=this._pArr.length,u.ArrayUtil.clear(this._shangPArr),u.ArrayUtil.clear(this._xiaPArr),u.ArrayUtil.clear(this._cenPArr);var h=[this._pArr[0].p.clone()],c=[this._pArr[0].p.clone()];for(i=1;n>i;i++){r=this._pArr[i].p,o=this._pArr[i-1].p;var p=void 0,d=void 0,y=void 0,g=void 0;p=1===i?o:u.M.getXianDianByDis(f["default"].ELEC__GUAI_DIS_THICK,!0,o,r),d=i===n-1?r:u.M.getXianDianByDis(f["default"].ELEC__GUAI_DIS_THICK,!0,r,o),y=u.M.getXianDianByDis(f["default"].ELEC_WIRE_THICK_ALPHA/2,!0,p,d);var _=u.M.getXianDianByDis(20,!0,p,d);g=u.M.getXianDianByDis(f["default"].ELEC_WIRE_THICK_ALPHA/2,!0,d,p);var b=u.M.getXianDianByDis(20,!0,d,p);u.M.rotaPointFromP(y,p,Math.PI/2),u.M.rotaPointFromP(y,p,-Math.PI/2);var v=u.M.rotaPointFromP(_,p,Math.PI/2),m=u.M.rotaPointFromP(_,p,-Math.PI/2);if(i===n-1?(u.M.rotaPointFromP(d,g,Math.PI/2),u.M.rotaPointFromP(d,g,-Math.PI/2),a=u.M.rotaPointFromP(d,b,Math.PI/2),s=u.M.rotaPointFromP(d,b,-Math.PI/2)):(u.M.rotaPointFromP(g,d,-Math.PI/2),u.M.rotaPointFromP(g,d,Math.PI/2),a=u.M.rotaPointFromP(b,d,-Math.PI/2),s=u.M.rotaPointFromP(b,d,Math.PI/2)),this._shangPArr.push(v),this._shangPArr.push(a),this._xiaPArr.push(m),this._xiaPArr.push(s),2===n)h.push(r),c.push(r);else if(1===i)h.push(g),c.push(g);else{2===i&&c.push(y);var P=h[h.length-1],w=u.M.get_quadraticCurveTo_points(P.x,P.y,o.x,o.y,y.x,y.y);h=h.concat(w),c.push(r),i===n-1?(h.push(r),c.push(r)):h.push(g)}i>0&&n-1>i&&(this.wanObjPArr[i]={},this.wanObjPArr[i].cenWP=r,this.wanObjPArr[i].shangWP=u.M.getXianDianByDis(40,!1,a,v),this.wanObjPArr[i].xiaWP=u.M.getXianDianByDis(40,!1,s,m))}h[0]=h[0].clone(),h[h.length-1]=h[h.length-1].clone(),n=this.ropeBox.children.length;for(var O=0;n>O;O++){this.setRopePoints(this.ropeBox.getChildAt(O),h)}this.pcDot.setPoints(this.canShowDot?c:[]),this.lineFG.setRopePoints(h),h=u.ArrayUtil.copyArray(h);for(var k=0,C=1;h.length>C;C++){k+=u.M.getPointLen(h[C-1],h[C])}for(var M=k/2,A=1;h.length>A;A++){var E=h[A-1],S=h[A],x=u.M.getPointLen(E,S);if(x>=M){var T=u.M.getXianDianByDis(x-M,!0,S,E);u.M.setSPPoint(this.closeBtn,T);break}M-=x}this.lineG.clear(),this.lineG.lineStyle(null),this.lineG.beginFill(65280,this.LINE_BACK_DRAG_ALPHA),n=this._shangPArr.length;for(var j=0;n-1>j;j++){var D=this._shangPArr[j],R=this._shangPArr[j+1],I=this._xiaPArr[j],N=this._xiaPArr[j+1];if(j%2!=0){var B=this.wanObjPArr[(j+1)/2];this.lineG.moveTo(D.x,D.y),this.lineG.quadraticCurveTo(B.shangWP.x,B.shangWP.y,R.x,R.y),this.lineG.lineTo(N.x,N.y),this.lineG.quadraticCurveTo(B.xiaWP.x,B.xiaWP.y,I.x,I.y),this.lineG.lineTo(D.x,D.y)}this.lineG.moveTo(D.x,D.y),this.lineG.lineTo(R.x,R.y),this.lineG.lineTo(N.x,N.y),this.lineG.lineTo(I.x,I.y),this.lineG.lineTo(D.x,D.y)}this.lineG.endFill(),this.freshTouDirect();var L=u.M.getSPPoint(this.h1_mc),F=u.M.getSPPoint(this.h2_mc);if(!this._dragObj&&!this._isTouDown){var V=L.subtract(this._preMC1P),U=F.subtract(this._preMC2P);if(0!==V.length&&0!==U.length)return}this._preMC1P.setTo(L.x,L.y),this._preMC2P.setTo(F.x,F.y)}},{key:"setRopePoints",value:function(t,e){if(this.globalConfig.isWinXP){t.clear();t.lineStyle(9,[8523520,2302755,10263456][this.colorIndex]),each(e,function(e,i){0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)},this)}else t.setRopePoints(e)}},{key:"func_getDownValidP",value:function(t){var e=void 0,i=void 0;for(this._freshPArrData(),i=this._pArr.length-1,e=0;i>e;e++){var n=this._pArr[e],r=this._pArr[e+1];if(n.ind=e,r.ind=e+1,u.M.getPointLen(t,n.p)<this._cDis)return n;if(u.M.getPointLen(t,r.p)<this._cDis)return r}return null}},{key:"func_checkToRemove_dragObj",value:function(){if(this._dragObj&&this._dragObj.ind>0&&this._pArr.length-1>this._dragObj.ind){var t=this._pArr[this._dragObj.ind-1].p,e=this._pArr[this._dragObj.ind].p,i=this._pArr[this._dragObj.ind+1].p;10>180-u.M.getAngleByP(e,t,i)?this._pArr.splice(this._dragObj.ind,1):(u.M.getPointLen(e,t)<this._dDis||u.M.getPointLen(e,i)<this._dDis)&&this._pArr.splice(this._dragObj.ind,1)}}},{key:"func_getPArrDownInd",value:function(t){var e=void 0,i=this._pArr.length-1;for(e=0;i>e;e++){var n=this._pArr[e].p,r=this._pArr[e+1].p,o=u.M.getCenP(n,r),a=u.M.getXianDianByDis(f["default"].ELEC__GUAI_DIS_THICK,!0,n,r),s=u.M.getDuiDianDian(a,o),l=u.M.getXianDianByDis(62,!0,n,r),h=u.M.getDuiDianDian(l,o),c=u.M.rotaPointFromP(l,a,-Math.PI/2),p=u.M.rotaPointFromP(l,a,Math.PI/2),d=u.M.rotaPointFromP(h,s,-Math.PI/2),y=u.M.rotaPointFromP(h,s,Math.PI/2);if(u.M.checkPolygonPointArr2(t,[c,p,d,y]))return e;if(e>0){var g=this._pArr[e-1].p,_=u.M.getXianDianByDis(40,!0,n,g),b=new u.Point;b.x=u.M.sq(.5)*_.x+.5*n.x+u.M.sq(.5)*a.x,b.y=u.M.sq(.5)*_.y+.5*n.y+u.M.sq(.5)*a.y;if(u.M.getPointLen(b,_)>u.M.getPointLen(b,t))return e}}return-1}},{key:"linkWireBindMC",value:function(t,e){var i=void 0;i="BaseElecResistance"===e.bindinger.body.classname?this.toLocal(e,e.bindinger.body.zuheBox):this.toLocal(e,e.bindinger.body),u.M.setSPPoint(t,i),t.bindinger.nearToBinding()&&(t.wire_h_mc.linkBposter=this.elecUtil.getWireLinkBposter(t),this.show_h_mc(!1),this.main.dispatchEvent(_["default"].BIND_ELEC_WIRE,{target:t}),this.freshTouDirect())}},{key:"showDragRect",value:function(){this.closeBtn.alpha=this.lineFG.alpha=1,this.lineFG.visible=!0,this.show_h_mc(!0)}},{key:"hideDragRect",value:function(){clearTimeout(this._hideDragRect_ID),this.lineFG.visible=!1,this.show_h_mc(!1)}},{key:"show_h_mc",value:function(t){this.h1_mc&&this.h2_mc&&this.h1_mc.bposter&&this.h2_mc.bposter.bindinger&&this.h1_mc&&this.h1_mc[this.h1_mc.h_mc_dragID]&&(this.h1_mc[this.h1_mc.h_mc_dragID].isLock=!1,this.h2_mc[this.h2_mc.h_mc_dragID].isLock=!1,t?this.h1_mc._dragmode=this.h2_mc._dragmode=0:(!this.lineFG.visible&&this.h1_mc.bposter.bindinger.friendPostersArr.length>0&&(this.h1_mc._dragmode=1,this.h1_mc[this.h1_mc.h_mc_dragID].isLock=!0),!this.lineFG.visible&&this.h2_mc.bposter.bindinger.friendPostersArr.length>0&&(this.h2_mc._dragmode=1,this.h2_mc[this.h2_mc.h_mc_dragID].isLock=!0)))}},{key:"freshDotColor",value:function(){this.pcDot.setSkin(0===this.colorIndex||1===this.colorIndex?this.globalConfig.cdn_static+"electrical/elecwire/dotWhite.png":this.globalConfig.cdn_static+"electrical/elecwire/dotRed.png")}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("wireColor"),checked:this.colorIndex,value:this.colorNameArr,"this":this,callBack:function(e){var i=e.checked;t.colorIndex!==i&&(t.colorIndex=i,t.freshLineType()),t._drawLine()}}),i}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("wireColor")+": "+this.colorNameArr[this.colorIndex]+"\n    "}},{key:"freshElecLineVisible",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshElecLineVisible",this).call(this),this.setWorkElec(this.curElecNum)}},{key:"removed",value:function(){this.removedCursor(this.closeBtn),this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),u.M.removeTouch(this.closeBtn,this._closeBtnTouch),this.bposter0.removeEventListener(f["default"].BINDMC_POTISON_CHANGED,this.func_bposterPositionChangedHandle),this.bposter1.removeEventListener(f["default"].BINDMC_POTISON_CHANGED,this.func_bposterPositionChangedHandle),u.M.removeTouch(this.lineG,this._lineGID),u.M.removeDrag(this.h1_mc,this.h1_mc.h_mc_dragID),u.M.removeDrag(this.h2_mc,this.h2_mc.h_mc_dragID),this.pcDot.removed(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setSelected",value:function(t){t?(this.closeBtn.alpha=this.lineFG.alpha=1,this.lineFG.visible=!0,this.show_h_mc(!0)):(this.lineFG.visible=!1,this.show_h_mc(!1))}},{key:"setPArr",value:function(t){var e=this;u.ArrayUtil.clear(this._pArr),each(t,function(t,i){e._pArr.push(i)}),this._pArr[0].mc=this.h1_mc,this._pArr[this._pArr.length-1].mc=this.h2_mc,this._drawLine()}},{key:"getPArr",value:function(){return u.ArrayUtil.copy(this._pArr)}},{key:"getPArrRect",value:function(){var t=this.getRectPoints(),e=t.lP,i=t.rP;return new u.Rectangle(e.x,e.y,i.x-e.x,i.y-e.y)}},{key:"getRectPoints",value:function(){for(var t=this._pArr,e=void 0,i=void 0,n=0;t.length>n;n++){var r=t[n].p;e?(e.x=Math.min(e.x,r.x),e.y=Math.min(e.y,r.y)):e=new u.Point(r.x,r.y),i?(i.x=Math.max(i.x,r.x),i.y=Math.max(i.y,r.y)):i=new u.Point(e.x,e.y)}return{lP:e,rP:i}}},{key:"getLocalBoundsElecs",value:function(){return[this.closeBtn]}},{key:"getElecBounds",value:function(){var t=this.getRectPoints(),e=t.lP,i=t.rP;return e=this.toGlobal(e),i=this.toGlobal(i),new u.Rectangle(e.x-10,e.y-10,i.x-e.x+20,i.y-e.y+20)}}]),e}(c["default"])},566:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(526),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canCreateGanYingElec=!0,i.bg=null,i.metalBarrelFront=null,i.metalBarrelBack=null,i.backSp=null,i.canHit=!1,i.type=0,i.elecInside=null,i.typeArr=[i.language.getLocaleStr("round_ball"),i.language.getLocaleStr("barrel")],i.hitRectArr=[new l.Rectangle(-12,-182,28,30),new l.Rectangle(-32,-239,68,98)],i.cageRect=new l.Rectangle(-40,-250,85,120),i.u=0,i.mapfind=[],i.showElecMagLine=!0,i}return o(e,t),a(e,[{key:"fresh_angle",value:function(){var t=Math.abs(this.txtNum/100*45);this.left.rotation=l.M.toHu(t),this.right.rotation=-this.left.rotation}},{key:"txtNumChanged",value:function(){if(this.fresh_angle(),this._particle2&&this._particle2.particle){this._particle2.particle.maxParticles=Math.abs(this.txtNum);var t=Math.abs(this.ganNum)>Math.abs(this.elecNum)?this.ganNum:-this.elecNum;this._particle2.particle.startColor=l.M.retrieveRGBComponent(0>t?this.elecsParticlesColor.zheng:this.elecsParticlesColor.fu)}}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.freshType()}},{key:"freshType",value:function(){var t=this.elecUtil.findEAb(this,this.bposter0),e=this.u;if(t&&t.body&&t.body.Power){var i=Math.abs(t.body.Power-t.Un);0===t.Un&&1===t.linkWireType&&(i=-i),this.u=i}else this.u=0;e!==this.u&&(this.updateElecNum(),0===this.u&&this.diyChanged())}},{key:"updateElecNum",value:function(){this.elecNum=.01*this.u}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.init(0),this.initBoElecs(),this.changeType({showValue:this.typeArr[this.type]}),this.bg.addChild(this.metalBarrelFront),l.M.setSPPointXY(this.bposter0,this.elecAre.x+this.elecAre.width/2,this.elecAre.y+this.elecAre.height/2)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"diyChangHandler",value:function(t){0!==this.type&&s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"diyChangHandler",this).call(this,t)}},{key:"selfMoved",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selfMoved",this).call(this)}},{key:"canItemMoveIn",value:function(t){return!t.inCage&&"InsulatingFrame"===t.classname}},{key:"itemMoved",value:function(t){if("InsulatingFrame"!==t.classname)return 0;this.DEBUG&&this.graP&&this.graP.clear(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"itemMoved",this).call(this,t)}},{key:"checkMoveIn",value:function(t){if(t.onCage)return!1;var e=t.hitRect.clone();e.x+=t.parent.x-this.parent.x,e.y+=t.parent.y-this.parent.y;var i=this.hitRect.clone(),n=this.hitTestRectRect(e,i),r=t.moveDir.y-this.moveDir.y>0&&i.y-this.moveDir.y>e.y-t.moveDir.y,o=null===this.elecInside&&!t.onCage&&!t.inCage&&n&&r;return o?(this.elecNum+=t.elecNum,t.elecNum=0):!t.inCage&&n&&(t.onCage=!0,t.upToTop()),o}},{key:"checkMoveOut",value:function(t){var e=t.hitRect.clone();e.x+=t.parent.x-this.parent.x,e.y+=t.parent.y-this.parent.y;var i=this.cageRect.clone(),n=this.hitTestRectRect(e,i),r=this.elecInside&&this.elecInside===t&&!n;return r&&(0===t.moveDir.x&&0===t.moveDir.y||t.upToTop()),t.onCage&&!n&&(t.onCage=!1),r}},{key:"hitTestRectRect",value:function(t,e){return this.DEBUG&&(this.graP||(this.graP=new PIXI.Graphics,this.addChild(this.graP)),this.graP.lineStyle(1,16711680,1),this.graP.drawRect(t.x,t.y,t.width,t.height),this.graP.drawRect(e.x,e.y,e.width,e.height)),t.intersects(e)}},{key:"hitTest",value:function(t,e){this.DEBUG&&(this.graP||(this.graP=new PIXI.Graphics,this.addChild(this.graP)),this.graP.lineStyle(1,16711680,1),this.graP.drawCircle(e.x,e.y,e.r+5),this.graP.drawRect(t.x,t.y,t.width,t.height));var i=e.r,n=Math.abs(e.x-t.x-t.width/2),r=Math.abs(e.y-t.y-t.height/2),o=Math.min(n,t.width/2),a=Math.max(o,-t.width/2),s=Math.min(r,t.height/2),l=Math.max(s,-t.height/2);return(a-n)*(a-n)+(l-r)*(l-r)<=i*i}},{key:"changeType",value:function(t){this.type=t.showValue?this.typeArr.indexOf(t.showValue):t.checked,0===this.type?(this.metalBarrelFront.visible=!1,this.metalBarrelBack.visible=!1,this.canHit=!0,this.elecInside&&this.cancelLockItem(this.elecInside)):(this.metalBarrelFront.visible=!0,this.metalBarrelBack.visible=!0,this.canHit=!1),this.hitRect=this.getHitAreaRect(),this.hitRectSP.x=this.hitRect.x+this.hitRect.width/2,this.hitRectSP.y=this.hitRect.y+this.hitRect.height/2,this.freshParticleRect(),this.debugRefresh(),this.updateBackSpPosition(),this.selfMoved(),this.freshGlow()}},{key:"getHitAreaRect",value:function(){return this.hitRectArr[this.type]}},{key:"addCageBack",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addCageBack",this).call(this),this.cageBackCon.addChild(this.metalBarrelBack)}},{key:"checkHitRect",value:function(t){var i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"checkHitRect",this).call(this,t);return i&&!this.canHit&&"InsulatingFrame"===t.classname&&(this.itemMoved(t),t.inCage&&(i=!1)),i}},{key:"initBoElecs",value:function(){this._particle2=this.ParticleUtil.getParticle(this.ParticleUtil.particles.elecs),this.add2component(this._particle2),this._particle2._this=this,this._particle2.completeFunc=function(){var t=this._this;l.M.setSPPoint(this,t.hitRect),this.particle.spawnRect.y=165,this.particle.spawnRect.width=t.hitRect.width,this.particle.spawnRect.height=t.hitRect.height,this.particle.maxParticles=Math.abs(this.txtNum)}}},{key:"clearCharge",value:function(t){var e=this;this.elecNum=0,this.elecUtil.getEquipmentArr("MetalPlates").forEach(function(t){t.clearCharge&&e.elecUtil.checkBindingerInElec(t.bPsArr.concat(e.bPsArr))&&t.clearCharge()})}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.type=this.type,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.type=t.type||0,this.changeType({showValue:this.typeArr[this.type]})}},{key:"showGlowSP",value:function(t){if(t){this.showGlowIndex(0===this.type?0:1)}else this.hideGlow()}},{key:"getConf",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),i=this.language.getLocaleStr("clear_charge");return t.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("type"),this.type,this.typeArr,this.changeType.bind(this)),this.ComponentProperty.getButton(i,i,this.clearCharge,this)),t}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("type")+": "+this.typeArr[this.type]+"\n    "}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.type=this.type,t}},{key:"setDefaultOrigin",value:function(){this.type=0}},{key:"defaultSettingChanged",value:function(){this.changeType({showValue:this.typeArr[this.type]})}}]),e}(h["default"])},567:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(474),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=4;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.validNum=1,i.resArr=["1000Ω","2000Ω","5000Ω","10000Ω"],i.validNumArr=["1","2","3"],i._zhenRangeAngle=l.M.toHu(51),i.oriAngle=-i._zhenRangeAngle/2,i.unit="V",i.rotPower=0,i.curPower=0,i.vScale=1,i.angleP=i._zhenRangeAngle/2,i.MAX_RESISTANCE=3e6,i.MIN_POWER=-1,i.MAX_POWER=3,i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[1,1],[2,1]],wire:[[[1,1],[2,0]]],res:[[1,-1],[2,-1]]}),this.freshConnect()}},{key:"freshConnect",value:function(){var t=-1!==this.bar1.Resistance;this.bar1.elecConnect=t,this.bar2.elecConnect=t}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.freshLabel("0V"),this.zhen.rotation=this.oriAngle,this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter2.bindinger.linkWireType=2,this.drawDis=52,this.bposter0.dp.setTo(-2,5),this.bposter1.dp.setTo(-15,5),this.bposter2.dp.setTo(2,5)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"overStep",value:function(){if(this.bar1.isBreak)return void(this.curPower=0);var t=this.elecUtil.getBposterWires(this.bposter0).length,e=this.elecUtil.getBposterWires(this.bposter1).length,i=this.elecUtil.getBposterWires(this.bposter2).length;t>0&&0===e&&i>0&&this.elecUtil.checkBindMCInElec([this.bposter0,this.bposter2])?(this.curPower=this.bposter2.bindinger.Un-this.bposter0.bindinger.Un,this.curPower/=5,this.vScale=5):t>0&&e>0&&0===i&&this.elecUtil.checkBindMCInElec([this.bposter0,this.bposter1])?(this.curPower=this.bposter1.bindinger.Un-this.bposter0.bindinger.Un,this.vScale=1):this.curPower=0}},{key:"break",value:function(){this.bar1.isBreak=!0,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this)}},{key:"repair",value:function(){this.bar1.isBreak=!1,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.validNum=this.validNum,t.bar1Resistance=this.bar1.Resistance,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.validNum=t.validNum,this.bar1.Resistance=t.bar1Resistance,this.bar2.Resistance=4*this.bar1.Resistance,t.isBreak&&(this.bar1.isBreak=!0),this.freshConnect()}},{key:"getShowValue",value:function(){var t=this.language.getLocaleStr("ideal");return-1===this.bar1.Resistance?t:this.bar1.Resistance+"Ω"}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.language.getLocaleStr("ideal"),r=this.getShowValue(),o=this.resArr.concat([n]);return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("small_InResistance"),canEnter:!0,enterUnit:"Ω",maxValue:3e6,minValue:1e3,showValue:r,value:o,callBack:function(e){if(e.showValue===n)t.bar1.Resistance=-1,t.bar2.Resistance=-1;else{var i=l.M.getNumStr(e.showValue);i>t.MAX_RESISTANCE?(t.bar1.Resistance=-1,t.bar2.Resistance=-1):(t.bar1.Resistance=i,t.bar2.Resistance=4*t.bar1.Resistance)}t.freshConnect(),t.diyChanged(),t.updateLabel()}},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("decimalDigits"),checked:l.ArrayUtil.getIndexFromValue(this.validNumArr,this.validNum+""),value:this.validNumArr,callBack:function(e){t.validNum=t.validNumArr[e.checked]-0,t.diyChanged(),t.updateLabel()}}),i}},{key:"getTipMess",value:function(){var t=this.getShowValue(),i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("small_InResistance")+": "+t+"\n    "}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.validNum=this.validNum,t.bar1Resistance=this.bar1.Resistance,t}},{key:"setDefaultSetting",value:function(t){this.validNum=t.validNum,this.bar1.Resistance=t.bar1Resistance,this.bar2.Resistance=4*this.bar1.Resistance,this.freshConnect()}},{key:"setDefaultOrigin",value:function(){this.validNum=2,this.bar1.Resistance=-1,this.bar2.Resistance=-1,this.freshConnect()}}]),e}(h["default"])},568:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(474),c=n(h),p=i(102),f=n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=5;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resArr=["0Ω","500Ω","1000Ω"],i.maximumRangeArr=["300μA","300mA","300A"],i.validNumArr=["1","2","3"],i.Resistance=1e3,i.maximumRange=3e-4,i.validNum=2,i.txt=new PIXI.Text("-300μA~300μA",{font:"20px 微软雅黑",fill:10066329,align:"center"}),i.label=i.txt,i._zhenRangeAngle=u.M.toHu(51.5),i.oriAngle=0,i.unit="μA",i.rotPower=0,i.curPower=0,i.vScale=1,i.unitScale=1e6,i.angleP=i._zhenRangeAngle/300,i.MIN_POWER=-300,i.MAX_POWER=300,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addChild(this.txt),this.updateRangeText(),this.updateLabel(),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=60,this.bposter0.dp.setTo(12,0),this.bposter1.dp.setTo(-12,0),this.rangeChanged({showValue:"300μA"})}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.vScale=this.maximumRange*this.unitScale/300,this.curPower=t*this.unitScale/this.vScale,this.updateLabel()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.maximumRange=this.maximumRange,t.validNum=this.validNum,t.unit=this.unit,t.unitScale=this.unitScale,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.maximumRange=t.maximumRange,this.validNum=t.validNum,t.unit?(this.unit=t.unit,this.unitScale=t.unitScale):t.txttext&&(this.txt.text=t.txttext,this.freshUnit()),this.updateRangeText()}},{key:"updateRangeText",value:function(){var t=Math.round(this.maximumRange*this.unitScale)+this.unit;this.txt.text="-"+t+"~"+t,this.txt.x=-this.txt.width/2-this.bg.width/2+120,this.txt.y=this.bg.height/2-34+2}},{key:"freshUnit",value:function(){var t=this.txt.text;t=t.split("~")[1],u.StringUtil.contains(t,"μA")?(this.unit="μA",this.unitScale=1e6):u.StringUtil.contains(t,"mA")?(this.unit="mA",this.unitScale=1e3):(this.unit="A",this.unitScale=1)}},{key:"rangeChanged",value:function(t){var e=t.showValue,i=e.match(/\d*/g)[0]-0,n=e.match(/\D*$/g)[0];n=n.toLowerCase(),"a"===n?(this.maximumRange=i,this.unit="A",this.unitScale=1):"ma"===n?(this.maximumRange=i/1e3,this.unit="mA",this.unitScale=1e3):"μa"!==n&&"ua"!==n||(this.maximumRange=i/1e3/1e3,this.unit="μA",this.unitScale=1e6),this.updateRangeText(),this.diyChanged()}},{key:"getShowValue",value:function(){return this.Resistance>f["default"].MIN_RESISTANCE?this.Resistance+"Ω":"0Ω"}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.getShowValue();return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("inResistance"),canEnter:!0,enterUnit:"Ω",maxValue:1e3,minValue:0,showValue:n,value:this.resArr,callBack:function(e){var i=u.M.getNumStr(e.showValue);0==i&&(i=f["default"].MIN_RESISTANCE),t.Resistance=i,t.diyChanged()}},{type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("range"),canEnter:!0,enterUnit:this.unit,maxValue:1e3,minValue:0,showValue:Math.round(this.maximumRange*this.unitScale)+this.unit,value:this.maximumRangeArr,callBack:this.rangeChanged},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("decimalDigits"),checked:u.ArrayUtil.getIndexFromValue(this.validNumArr,this.validNum+""),value:this.validNumArr,callBack:function(e){t.validNum=t.validNumArr[e.checked]-0,t.diyChanged()}}),i}},{key:"selectRenderChild",value:function(){return this.updateTransform(),this.getBounds()}},{key:"getTipMess",value:function(){var t=this.getShowValue(),i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("inResistance")+": "+t+"\n    "}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.maximumRange=this.maximumRange,t.validNum=this.validNum,t.unit=this.unit,t.unitScale=this.unitScale,t}},{key:"setDefaultOrigin",value:function(){this.maximumRange=.5,this.validNum=2,this.rangeChanged({showValue:"300μA"})}},{key:"defaultSettingChanged",value:function(){this.rangeChanged({showValue:1e3*this.maximumRange+""}),this.branchChange=!0}}]),e}(c["default"])},619:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(214),c=n(h),p=i(102),f=n(p);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resArr=["0.1Ω","5Ω","10Ω","15Ω","20Ω","50Ω","100Ω"],i.turnsNumArr=["10","100","1000","10000","100000"],i.turnsNum=10,i.canReversal=!0,i.flux=0,i.bar2LastElec=0,i.validPPer=.2,i.validIronCore=2,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:1,inductor:1,pos:[[1,0],[2,1]],wire:[[[1,1],[2,0]]]}),this.freshInductance(),this.bar1.Resistance=.1}},{key:"getVoltdiff",value:function(){return this.bar2.bposter0.bindinger.Un-this.bar2.bposter1.bindinger.Un}},{key:"setSource",value:function(t,e){this._ori_Source!==t&&(this._ori_Source=t,this.bar2.Source=t,this.bar2.current=t,e||this.diyChanged())}},{key:"freshInductance",value:function(){this.bar2.setInductance(1e-7*this.turnsNum)}},{key:"reversal",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reversal",this).call(this,t,!0),this.canReversal&&this.bg&&this.bg.gotoAndStop(this.hasReversal?1:0)}},{key:"getShowValue",value:function(){return this.bar1.Resistance>f["default"].MIN_RESISTANCE?this.bar1.Resistance+"Ω":"0Ω"}},{key:"hasPower",value:function(){return this.bar2.checkHasPower.call(this.bar2,this.bar2)}},{key:"overStep",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"overStep",this).call(this),this.caculateVolt(!1)}},{key:"caculateVolt",value:function(t,e){if(this.bindCoil&&this.hasPower()){var i=void 0;if(t){e=u.M.range(e,-2,2)/2,i=this.bar2.Source*this.bar2.compResistance*e}else i=this.getVoltdiff();this.bindCoil.bar2.ganVolt=i*this.bindCoil.turnsNum/this.turnsNum*(this.hasIronCore||this.bindCoil.hasIronCore?this.validIronCore*this.validPPer:this.validPPer)}else if(this.bindMagBar&&!this.hasPower()){e=u.M.range(e,-2,2)/2;var n=.1*e,r=10*n/this.turnsNum;this.bar2.ganVolt=r}}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("inResistance"),canEnter:!0,enterUnit:"Ω",maxValue:1e4,minValue:0,showValue:this.getShowValue(),value:this.resArr,callBack:function(e){t.bar1.Resistance=u.M.getNumStr(e.showValue)}},{type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("turnsNum"),canEnter:!0,enterUnit:"",maxValue:1e4,minValue:10,showValue:this.turnsNum,value:this.turnsNumArr,callBack:function(e){t.turnsNum=u.M.getNumStr(e.showValue),t.freshInductance()}}),i}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("inResistance")+": "+this.getShowValue()+"\n    "+this.language.getLocaleStr("turnsNum")+": "+this.turnsNum+"\n    "}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.Resistance=this.bar1.Resistance,t.turnsNum=this.turnsNum,t}},{key:"setDefaultOrigin",value:function(){this.bar1.Resistance=.1,this.turnsNum=10}},{key:"setDefaultSetting",value:function(t){this.bar1.Resistance=t.Resistance,this.turnsNum=t.turnsNum}}]),e}(c["default"])},620:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),s=i(6),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}(s),u=i(621),h=(n(u),i(104)),c=(n(h),i(69)),p=n(c),f=i(463),d=(n(f),i(829)),y=n(d),g=i(828),_=n(g);e["default"]=function(){function t(e){r(this,t),this.elecUtil=e.elecUtil,this.globalConfig=e.globalConfig,this.moduleMain=e,this.magElec3D=null,this.magElec2D=null,this.dengbiU=!1,this.factorU=2,this.drawPotential=!1,this.drawElecField=!1,this.drawMagnetic=!1,this.elecField3D=!1,this.potential3D=!0,this.magnetic3D=!0,this.surpportWebgl=!1}return o(t,[{key:"destroy",value:function(){this.globalConfig.main.removeEventListener(this.globalConfig.main.constructor.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.elecUtil=null,this.globalConfig=null,this.moduleMain=null}},{key:"initComp",value:function(){this.surpportWebgl=this.globalConfig.main.surpportWebgl,this.surpportWebgl&&(this.magElec3D=new y["default"](this.moduleMain,2048,1536),this.globalConfig.main.magDraw.addChild(this.magElec3D)),this.magElec2D=new _["default"](this.moduleMain),this.globalConfig.main.magDraw.addChild(this.magElec2D),l.has(this,"_proxy_isDashLine")&&(this.magElec2D.isDashLine=this._proxy_isDashLine,delete this._proxy_isDashLine),this.globalConfig.main.magDraw.interactive=this.globalConfig.main.magDraw.interactiveChildren=!1}},{key:"init",value:function(){this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.globalConfig.main.addEventListener(this.globalConfig.main.constructor.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandle({isRunning:this.globalConfig.main.isRunning})}},{key:"canvasRunHandle",value:function(t){this.setActive(t.isRunning)}},{key:"setActive",value:function(t){}},{key:"renderLoop",value:function(){this.globalConfig&&this.globalConfig.main&&this.globalConfig.main.canRender&&this.refresh()}},{key:"refresh",value:function(){if(this.magElec2D){this.magElec2D.updateParam();var t=this.isElecUse3D(),e=this.isPotUse3D(),i=this.isMagUse3D();this.magElec3D&&(this.magElec3D.updateElecArr3D(),this.magElec3D.updateMagArr3D(),this.magElec3D.showE=t&&this.drawElecField,this.magElec3D.showU=e&&this.drawPotential,this.magElec3D.showM=i&&this.drawMagnetic,this.magElec3D.elecSca=p["default"].eleLineNumSca,this.magElec3D.magSca=p["default"].magLineNumSca,this.magElec3D.updateMagElec3D()),this.magElec2D.drawPotential=this.drawPotential,this.magElec2D.drawElecField=this.drawElecField,this.magElec2D.drawMagnetic=this.drawMagnetic,t||!this.drawElecField?this.magElec2D.clearElecField():this.magElec2D.refreshElecField(),e||!this.drawPotential?this.magElec2D.clearPotField():this.magElec2D.refreshPotField(),i||!this.drawMagnetic?this.magElec2D.clearMagField():this.magElec2D.refreshMagField(),this.refreshMagNeedle()}}},{key:"isElecUse3D",value:function(){return!!this.magElec3D&&this.magElec3D.initSuccess&&this.elecField3D}},{key:"isPotUse3D",value:function(){return!!this.magElec3D&&this.magElec3D.initSuccess&&this.potential3D}},{key:"isMagUse3D",value:function(){return!!this.magElec3D&&this.magElec3D.initSuccess&&this.magnetic3D}},{key:"refreshMagNeedle",value:function(){var t=this;p["default"].currentArr=p["default"].magArr;var e=this.elecUtil.getEquipmentArr("MagnetNeedle"),i=this.isMagUse3D();each(e,function(e,n){var r=t.globalConfig.main.view.toLocal(new a.Point,n),o=void 0;o=i?p["default"].getMagTotalForce3D(r):p["default"].getTotalForce(r),n.freshRotation.call(n,o)})}},{key:"isDashLine",set:function(t){this.magElec2D?this.magElec2D.isDashLine=t:this._proxy_isDashLine=t}},{key:"eleLineNumSca",set:function(t){p["default"].eleLineNumSca=t},get:function(){return p["default"].eleLineNumSca}},{key:"magLineNumSca",set:function(t){p["default"].magLineNumSca=t},get:function(){return p["default"].magLineNumSca}}]),t}()},621:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(215),s=n(a),l=i(0),u=i(69),h=n(u);e["default"]=function(){function t(e){r(this,t),this.globalConfig=s["default"].getInstance().globalConfig,this.classname="MagElecRod",this._points=[],this.d=20,this.symmetric=!1,this.showFlag=e,this.oppsite=null}return o(t,[{key:"init",value:function(t,e){this.type=t.type||0,this.id=t.id||0,this.d=t.d||20,this.elecNum=t.elecNum;var i=this.p1=new l.Point(t.p1.x,t.p1.y),n=this.p2=new l.Point(t.p2.x,t.p2.y),r=this.n=t.n;this.symmetric=e,this.vec01=new l.Point(n.x-i.x,n.y-i.y),this.vec01.normalize(1),this.vec02=new l.Point(-this.vec01.y,this.vec01.x),this.dir=h["default"].getDir(this),this._points=[];var o=new l.Point(this.vec02.x*this.d,this.vec02.y*this.d),a=l.Point.distance(i,n),s=t.space||.5;this.step=a/(r-1+2*s);for(var u=0;r>u;u++){var c=this.step*(u+s),p=new l.Point(i.x+c*this.vec01.x,i.y+c*this.vec01.y),f=p.add(o),d=p.subtract(o);d.flag=f.flag=!1,f.index=u,d.index=r+u,this._points[u]=f,this._points[u+r]=d}this.hideEdge(this.type)}},{key:"hideEdge",value:function(t){var e=0,i=0;switch(t){case 1:e=this.n,i=this._points.length;break;case 2:e=0,i=this.n}for(var n=e;i>n;n++){this._points[n].flag=!0}}},{key:"getPoints",value:function(){for(var t=[],e=this._points.length,i=0;e>i;i++){var n=this._points[i];if(!n.flag){var r=n.clone();r.index=n.index,t.push(r)}}return t}},{key:"closeByIndex",value:function(t){var e=this._points[t];e&&(e.flag=!0)}},{key:"getOppositeIndex",value:function(t){return this.n>t?t+this.n:t-this.n}},{key:"checkSimpleClose",value:function(t,e){var i=h["default"].getDistanceToLine(t,this.p1,this.p2);if(0>i.x){if(e>Math.abs(i.y))return!0}return!1}},{key:"checkClose",value:function(t,e,i){var n=h["default"].getDistanceToLine(t,this.p1,this.p2);if(0>n.x){if(i>Math.abs(n.y)){var r=h["default"].dotProduct(e,this.vec02),o=this.n,a=0>r?0:o,s=h["default"].dotProduct(t.subtract(this.p1),this.vec01),l=parseInt(s/this.step);o>l||(l=o-1),0>l&&(l=0);var u=l-1;0>u&&(u=0);var c=l+1;o>c||(c=o-1);for(var p=[l,u,c],f=0;p.length>f;f++){var d=p[f],y=this._points[d+a];if(!y.flag)return y.flag=!0,1}return 2}}return 0}}]),t}()},622:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(443),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.assemble=!0,i.rotationY=0,i.rotY=0,i.isRotate=!1,i.rotInterval=null,i.cacheRectL=null,i.cacheRectR=null,i.left=null,i.right=null,i.bg=null,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.magElecChanged=this.diyChangHandler.bind(this),this.main.addEventListener("magElecChanged",this.magElecChanged)}},{key:"removed",value:function(){this.rotatingSupport&&this.rotatingSupport.removeAssembleEq(this),this.main.removeEventListener("magElecChanged",this.magElecChanged),this.magElecChanged=null,this.isRotate&&(clearInterval(this.rotInterval),this.rotInterval=null,this.isRotate=!1),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"endEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.checkAssemble()}},{key:"checkAssemble",value:function(){if(this.rotatingSupport){this.rotatingSupport.checkHit(this.parent.x,this.parent.y)||this.rotatingSupport.removeAssembleEq()}else for(var t=this.main.getEquipmentArr(),e=t.length,i=0;e>i;i++){var n=t[i];if(n&&n.component){var r=n.component;if(r.assembleSupport&&r.checkHit(this.parent.x,this.parent.y)){r.assembleEq(this);var o=r.getHitPointInGlobal();return this.parent.x=o.x,void(this.parent.y=o.y)}}}}},{key:"calculateRotate",value:function(){if(this.rotatingSupport){var t=this.calculateTotalForce(this.rotY),e=Math.abs(t);if(.001>e)t=0,clearInterval(this.rotInterval),this.rotInterval=null,this.isRotate=!1;else{e>.01&&(t=t>0?.01:-.01);var i=this.rotY,n=this.rotY+1e3*t,r=n,o=this.calculateTotalForce(n);if(0>t*o)for(var a=6,s=t;;){r=(i+n)/2;var l=this.calculateTotalForce(r);if(0>l*s?(l,n=r):(s=l,i=r),a--,1>Math.abs(i-n))return;if(0>=a)break}this.rotY=r,this.setRotationY(this.rotY)}}}},{key:"calculateTotalForce",value:function(t){var e=this.left.elecNum,i=this.right.elecNum;if(0===e&&0===i)return 0;for(var n=180*Math.cos(t*Math.PI/180),r=60*Math.sin(t*Math.PI/180),o=this.parent.x,a=this.parent.y,s={x:o-n,y:a+r,q:4*e},u={x:o+n,y:a-r,q:4*i},h={x:u.x-s.x,y:u.y-s.y},c={x:h.y,y:-h.x},p={x:-c.x,y:-c.y},f=0,d=this.main.getEquipmentArr(),y=d.length,g=0;y>g;g++){var _=d[g];if(_&&_.component){var b=_.component;this.isItemBelongThis(b)||("GlassRob"!==b.classname&&"RubberRod"!==b.classname||(this.diyChangHandler(b.left),f+=this.calculateForceOfEq(b.left,s,p,u,c),f+=this.calculateForceOfEq(b.right,s,p,u,c)),b.elecPoint&&(f+=this.calculateForceOfEq(b,s,p,u,c)))}}return this.left.hitRect=new l.Rectangle(Math.min(s.x-o,0),Math.min(s.y-a,0),Math.abs(s.x-o),Math.abs(s.y-a)),this.right.hitRect=new l.Rectangle(Math.min(u.x-o,0),Math.min(u.y-a,0),Math.abs(u.x-o),Math.abs(u.y-a)),this.left.freshParticleRect(),this.right.freshParticleRect(),f}},{key:"diyChangHandler",value:function(t){var e=this;this.rotatingSupport&&(this.isRotate||(this.isRotate=!0,this.rotInterval=setInterval(function(){e.calculateRotate()},30)))}},{key:"calculateForceOfEq",value:function(t,e,i,n,r){var o={x:t.elecPoint.x,y:t.elecPoint.y,q:t.elecNum};return this.calculateForce(o,e,i)+this.calculateForce(o,n,r)}},{key:"calculateForce",value:function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=Math.sqrt(n*n+r*r),a=t.q*e.q/(o*o),s=a*n/o,l=a*r/o,u=Math.sqrt(i.x*i.x+i.y*i.y);return s*i.x/u+l*i.y/u}},{key:"isItemBelongThis",value:function(t){return t===this}},{key:"setRotationY",value:function(t){if(0===t)this.bg.gotoAndStop(0),this.rotationY=0;else{var e=Math.round(t/7.5);e%=48,0>e&&(e+=48),this.bg.gotoAndStop(47-e),this.rotationY=7.5*e}}},{key:"rotatingSupport",get:function(){return this._rotatingSupport},set:function(t){this._rotatingSupport=t,t?(this.cacheRectL=this.left.hitRect,this.cacheRectR=this.right.hitRect,this.canRotate=!1,this.rotateA(0),this.rotY=0,this.setRotationY(this.rotY)):(this.cacheRectL&&(this.left.hitRect=this.cacheRectL,this.cacheRectL=null,this.left.freshParticleRect()),this.cacheRectR&&(this.right.hitRect=this.cacheRectR,this.cacheRectR=null,this.right.freshParticleRect()),this.canRotate=!0),this.freshLibPan()}}]),e}(h["default"])},623:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function _(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:_(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(827),h=n(u),c=i(913),p=n(c),f=i(914),d=n(f),y=i(627),g=n(y);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.inWhichTable="BulbShineGraphic",i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.updateRealTimeData(),this.add2DataPool(),this.main.surpportWebgl&&!p["default"].isAdded(this.inWhichTable)){p["default"].AddOneAddedSate(this.inWhichTable);this.globalConfig.main.otherContainer.addChild(new d["default"](this.globalConfig))}["light","filament","bg","bulb"].forEach(function(e){t[e]&&(t[e].interactive=!1,t[e].interactiveChildren=!1)})}},{key:"removed",value:function(){g["default"].ReMoveOneDataByTypeAndID(this.inWhichTable,this.uid),g["default"].DataBaseTableHasData(this.inWhichTable)||p["default"].deleteState(this.inWhichTable),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"updateRealTimeData",value:function(){this.realTimeP=this.curElec*this.curElec*this.Resistance*500,this.realTimeU=this.curElec*this.Resistance*500,this.realTimeIsBreak=this.isBreak}},{key:"add2DataPool",value:function(){var t=this.getDataPoolData();g["default"].AddData2DataBase(this.inWhichTable,t)}},{key:"update2DataPool",value:function(){var t=this.getDataPoolData();g["default"].UpdateData2DataBase(this.inWhichTable,t)}},{key:"getDataPoolData",value:function(){return{Id:this.uid,power:this.realTimeP,voltage:this.realTimeU,isBreak:this.realTimeIsBreak,point:new PIXI.Point(this.parent.x,this.parent.y)}}},{key:"renderWebGL",value:function(t){this.globalConfig.BULB_SHINE_VISIBLE&&(this.updateRealTimeData(),this.update2DataPool()),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"renderWebGL",this).call(this,t)}},{key:"freshGlow",value:function(){this.showGlowIndex(this.hasReversal?1:0)}},{key:"getLocalBoundsElecs",value:function(){return[this.range]}}]),e}(h["default"])},624:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(102),c=n(h),p=i(214),f=n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=2;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resArr=[],i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,1]],wire:[[[1,1],[2,0]]],res:[[1,0],[2,c["default"].MIN_RESISTANCE]]}),this.bar1.iElecInter=2}},{key:"overStep",value:function(){Math.abs(this.bar2.curElec)>c["default"].DAMAGE_A&&this["break"]()}},{key:"break",value:function(){this.bar1.isBreak=!0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this)}},{key:"repair",value:function(){this.bar1.isBreak=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.Resistance=this.bar2.Resistance,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.bar2.Resistance=t.Resistance}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=void 0;return n=this.bar2.Resistance===c["default"].MIN_RESISTANCE?"0Ω":this.bar2.Resistance+"Ω",this.resArr.length&&i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("inResistance"),canEnter:!0,enterUnit:"Ω",maxValue:1e3,minValue:.1,showValue:n,value:this.resArr,callBack:function(e){var i=e.showValue,n=u.M.getNumStr(i);0===n&&(n=c["default"].MIN_RESISTANCE),t.bar2.Resistance=n,t.diyChanged()}}),i}},{key:"Power",get:function(){return this.bar1.Power},set:function(t){this.bar1&&(this.bar1.Power=t)}}]),e}(f["default"])},625:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(101),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i._type=0,i.typeArr=[i.language.getLocaleStr("no_light"),i.language.getLocaleStr("white_light"),i.language.getLocaleStr("green_light"),i.language.getLocaleStr("red_light")],i.resMin=null,i.resMax=3e6,i.Resistance=i.resMax,i.canReversal=!0,i.paramText="",i.isReLoopElec=!0,i}return o(e,t),a(e,[{key:"initElecTwoSetting",value:function(){this.dataSetArr=[{mc:this.bg,minRes:.1,fanBreak:-12,zBreak:3e6},{mc:this.white,minRes:10,fanBreak:-7,start:2,max:3.5,zBreak:3.6},{mc:this.green,minRes:7.5,fanBreak:-6,start:2,max:3,zBreak:3.3},{mc:this.red,minRes:4,fanBreak:-4,start:1.6,max:2.4,zBreak:3}];for(var t=1;this.dataSetArr.length>t;t++){var e=this.dataSetArr[t];e.paramText="  "+this.language.getLocaleStr("working_voltage")+"："+e.start+"~"+e.max+"V\n  "+this.language.getLocaleStr("breakdown_voltage")+"："+e.zBreak+"V \n  "+this.language.getLocaleStr("reverse_breakdown_voltage")+"："+e.fanBreak+"V"}}},{key:"loopCheck",value:function(){if(!this.elecUtil.checkBPsInOneHui(this))return!1;var t=this.elecUtil.getUnNode(this,0),e=this.elecUtil.getUnNode(this,1);if(!t||!e)return!1;var i=e.Un-t.Un,n=!1;return this.isBreak?this.Resistance!==this.resMin?(this.Resistance=this.resMin,n=!0):this.freshFrame():i>0?this.Resistance===this.resMax&&(this.Resistance=this.resMin,n=!0):this.Resistance===this.resMin&&(this.Resistance=this.resMax,n=!0),n}},{key:"overStep",value:function(){this.freshFrame(),this.branchChange=this.loopCheck()}},{key:"freshType",value:function(){for(var t=0;this.dataSetArr.length>t;t++)this.dataSetArr[t].mc.visible=this._type===t;this.resMin=this.dataSetArr[this._type].minRes,this.paramText=this.dataSetArr[this._type].paramText,this.Resistance=this.resMin}},{key:"reversal",value:function(t){this.white.scale.x*=-1,this.green.scale.x*=-1,this.red.scale.x*=-1,this.bg.scale.x*=-1,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reversal",this).call(this,t)}},{key:"setFrame",value:function(t){for(var e=1;this.dataSetArr.length>e;e++)this.dataSetArr[e].mc.currentFrame=t}},{key:"freshFrame",value:function(){if(this.Resistance!==this.resMax&&!this.isBreak){var t=this.dataSetArr[this._type];if(t.fanBreak>this.curPower&&(this.setFrame(0),this["break"]()),0!==this._type)if(.01>Math.abs(this.curPower-t.start)&&(this.curPower=t.start),this.curPower>=t.fanBreak&&t.start>this.curPower)this.setFrame(0);else if(this.curPower>=t.start&&t.max>this.curPower){var e=Math.floor((this.curPower-t.start)/(t.max-t.start)*3)+1;this.setFrame(e)}else this.curPower>=t.max&&t.zBreak>this.curPower?this.setFrame(4):(this.setFrame(0),this["break"]())}}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=43,this.bposter0.dp.setTo(8,-6),this.bposter1.dp.setTo(-8,-6),this.initElecTwoSetting(),this.freshType(),this.overStep()}},{key:"getBaseConf",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this)}},{key:"getConf",value:function(){var t=this,e=this.getBaseConf();return e.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("type"),canEnter:!1,showValue:this.typeArr[this._type],value:this.typeArr,"this":this,callBack:function(e){t._type=e.checked,t.freshType(),t.freshLibPan(),t.branchChange=!0}}),e}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n  "+this.language.getLocaleStr("type")+": "+this.typeArr[this._type]+"\n    ",0!==this._type&&(t+=this.paramText+"\n      "),t}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.ctype=this._type,t}},{key:"setData",value:function(t){this._type=t.ctype,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.freshType()}},{key:"getLocalBoundsElecs",value:function(){return this._type?[this.drect1]:[this.drect2]}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.ctype=this._type,t}},{key:"setDefaultSetting",value:function(t){this._type=t.ctype}},{key:"setDefaultOrigin",value:function(){this._type=0}},{key:"defaultSettingChanged",value:function(){this.freshType(),this.branchChange=!0}}]),e}(u["default"])},626:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:g(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(6),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}(h),p=i(500),f=n(p),d=i(443),y=n(d);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.dragRect={x:0,y:0,width:500,height:0},i.dragEndFunc=null,i.zhuBox=null,i.bindST=null,i.canShowDragRect=!1,i.connectEarthFlag=!1,i.diOriGanNum=0,i.__hasRemoved=!1,i}return a(e,t),s(e,[{key:"freshEarthFlag",value:function(){this.dixian.visible=this.connectEarthFlag,this.connectEarthFlag&&(this.ganNum=0,this.oriGanNum=0,this.freshDotFrom_elecNum(),this.fresh_angle())}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.dotArea&&this.dotArea.parent&&(this.dotArea.alpha=0),this.initDiDots()}},{key:"initComp",value:function(t){var e=this;this.zhuBox=t,this.freshEarthFlag(),this.cannotSystemDrag=!0,this.initDotsAnimation(),this.getMScale=function(){return e.main.view.scale};var i={begin:function(){},move:function(t){e._isDoubleDrag&&(e.bindST.x+=t.chaX,e.bindST.y+=t.chaY,e.dragRect.y+=t.chaY,e.bindST.dragRect.y+=t.chaY),e.bindST&&e.bindST.fresh_elecPoint(),e.fresh_elecPoint(),e.zhuBox.freshDotBoxLocation(),e.diyChanged()},end:function(t){e.dragEndFunc&&e.dragEndFunc()}};this.dragID=u.M.addDrag(this,this.dragRect,i),this.alphaDragId=u.M.addTouch(this.alphaDrag,{begin:function(){e._isDoubleDrag=!0,i.dragRectEnable=!1},end:function(){e._isDoubleDrag=!1,i.dragRectEnable=!0}})}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.zhuBox.freshDotBoxLocation()}},{key:"fresh_angle",value:function(t){var e=this.txtNum/100*45;this.bar.left.rotation=Math.abs(u.M.toHu(e)),this.bar.right.rotation=-this.bar.left.rotation}},{key:"removed",value:function(){this.__hasRemoved||(this.__hasRemoved=!0,this.hadDestory||(this.dotArr.forEach(function(t){if(t.timelineLite){var e=t.timelineLite;e.vars.onComplete=null,e.stop(),e.clear(),t.timelineLite=null}}),this.getMScale=null,u.M.removeDrag(this,this.dragID),u.M.removeTouch(this.alphaDrag,this.alphaDragId),this.zhuBox&&this===this.zhuBox.left?this.zhuBox.right.hadDestory||(this.main.removeEquipment.call(this.main,this.zhuBox.right),this.main.removeEquipment.call(this.main,this.zhuBox)):this.zhuBox&&!this.zhuBox.left.hadDestory&&(this.main.removeEquipment.call(this.main,this.zhuBox.left),this.main.removeEquipment.call(this.main,this.zhuBox)),this.dragEndFunc&&(this.dragEndFunc["this"]=null,this.dragEndFunc=null),this.zhuBox=null,this.bindST=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)))}},{key:"setBindST",value:function(t){this.bindST=t}},{key:"txtNumChanged",value:function(){this.fresh_angle()}},{key:"initDotsAnimation",value:function(){var t=this;this.dotBox=new PIXI.Sprite,this.dotArr=[],this.add2component(this.dotBox),this.freshDots(),setTimeout(function(){if(!t.hadDestory&&!t._destroyed)for(var e=0;t.zhuBox.MAX_DOT_NUMS>e;e++){var i=t.zhuBox.createDot();i.gotoAndStop(1),t.dotBox.addChild(i),t.addDotAnimation(i),t.dotArr.push(i)}},1e3)}},{key:"randomDot",value:function(t){if(!this.dotArea._destroyed&&this.dotArea.transform){var e=c.random(this.dotArea.x,this.dotArea.x+this.dotArea.width-t.width),i=c.random(this.dotArea.y,this.dotArea.y+this.dotArea.height-t.height);t.x=e,t.y=i}}},{key:"addDotAnimation",value:function(t){var e=this;t.alpha=0,this.randomDot(t);var i=new TimelineLite({onComplete:function(t){return function(){e.transform&&(e.randomDot(t),t.timelineLite.gotoAndPlay("start"))}}(t)});i.addLabel("start");var n=c.random(0,.8,!0);i.append(TweenLite.to(t,.8,{alpha:1,delay:n})),i.append(TweenLite.to(t,.8,{alpha:0})),t.timelineLite=i}},{key:"freshDots",value:function(){var t=Math.abs(this.txtNum)/2>>0;if(this.dotArr)for(var e=this.dotArr.length,i=this.txtNum>0?1:2,n=0;e>n;n++){var r=this.dotArr[n];r.visible=t>n,r.gotoAndStop(i)}}},{key:"txtNumChanged",value:function(){this.freshDots()}},{key:"initDiDots",value:function(){this.pcDot=new f["default"],this.addChild(this.pcDot),this.pcDot.setSkin(this.globalConfig.cdn_static+"electrical/elecwire/negativeSkin.png"),this.pcDot.setSpeed(3),this.pcDot.setActive(!0),this.pcDot.visible=!1}},{key:"setDotsMoveUp",value:function(t){this.pcDot.setSpeed(t?3:-3)}},{key:"createDot",value:function(){var t=PIXI.Sprite.fromFrames("ConductorWithInsulatingPillarAndMetalFoil/skin.negative");return t.anchor.set(.5),t}},{key:"setDiDotsPoints",value:function(t){this.pcDot.setPoints(t)}},{key:"checkDiDotAnimation",value:function(){var t=this;this.zhuBox.animationMode&&this.connectEarthFlag&&(this._isDiDotRunning||0!==this.ganNum&&(this.setDotsMoveUp(this._isUp),this._isDiDotRunning=!0,this.pcDot.visible=!0,this.timeFlag=setTimeout(function(){t.hadDestory||(t.pcDot.visible=!1,t._isDiDotRunning=!1)},100)))}},{key:"caculateOverStatic",value:function(){0!==this.ganNum&&(this._isUp=this.diOriGanNum>this.ganNum,this.diOriGanNum=this.ganNum)}},{key:"changeConnectEarth",value:function(t){this.connectEarthFlag=t.checked,this.freshEarthFlag(),this.connectEarthFlag&&(this.elecNum=0,this.freshDotFrom_elecNum(),this.fresh_angle(),this.connectEarthFlag&&(this.bindST.elecNum=0,this.bindST.freshDotFrom_elecNum(),this.bindST.fresh_angle()))}},{key:"changeAnimationMode",value:function(t){this.zhuBox.animationMode=t.checked,this.freshParticleVisible(),this.bindST.freshParticleVisible(),this.diyChanged()}},{key:"freshParticleVisible",value:function(){this._particle.visible=!this.zhuBox.animationMode,this.dotBox.visible=!this._particle.visible}},{key:"createElecDots",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"createElecDots",this).call(this),this.freshParticleVisible()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.connectEarthFlag=this.connectEarthFlag,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.connectEarthFlag=t.connectEarthFlag,this.freshEarthFlag()}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getSwitch(this.language.getLocaleStr("grounding"),this.connectEarthFlag,this.changeConnectEarth,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("animation_mode"),this.zhuBox.animationMode,this.changeAnimationMode,this)),t}},{key:"getLocalBoundsElecs",value:function(){return[this.zhuBox.left.bg,this.zhuBox.right.bg]}}]),e}(y["default"])},627:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o={};e["default"]=function(){function t(){n(this,t)}return r(t,[{key:"checkExistByIdInTable",value:function(t,e){}}],[{key:"AddData2DataBase",value:function(e,i){if(t.ObjHasKey(o,e)&&o[e]){for(var n=0;o[e].length>n;n++)if(o[e][n].Id===i.Id)return o[e][n]=i,1;o[e].push(i)}else o[e]=[],o[e].push(i)}},{key:"UpdateData2DataBase",value:function(e,i){t.AddData2DataBase(e,i)}},{key:"GetDataByType",value:function(t){return o[t]||[]}},{key:"ReMoveAllDataByType",value:function(t){o[t]=null}},{key:"ReMoveOneDataByTypeAndID",value:function(t,e){for(var i=o[t],n=0;i.length>n;n++){if(i[n].Id==e)return i.splice(n,1),1}return-1}},{key:"ObjHasKey",value:function(t,e){for(var i in t)if(i===e)return!0;return!1}},{key:"DataBaseTableHasData",value:function(t){return!!o[t]&&o[t].length>0}},{key:"IsDataLegality",value:function(t){return!0}}]),t}()},628:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(501),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(t,i,o){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,o))}return o(e,t),a(e,[{key:"getValue",value:function(t){var e=(this.omiga*t+this.phi)%(2*Math.PI);return 0>e&&(e+=2*Math.PI),this.A*(e-Math.PI)/Math.PI}}]),e}(l["default"])},629:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(501),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(t,i,o){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,o))}return o(e,t),a(e,[{key:"getValue",value:function(t){return this.A*Math.sin(this.omiga*t+this.phi)}}]),e}(l["default"])},795:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=(i(0),i(457)),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t,i,o,a,s,l,u){n(this,e);var h=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,o,a,s,l));return h.checked=l,h.group=u||[],h.group.push(h),h}return o(e,t),a(e,[{key:"destroy",value:function(){var t=this.group.indexOf(this);0>t||this.group.splice(t,1),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"canCallBack",value:function(){var t=this;return this.checked=this.isOpen,this.checked&&this.group.forEach(function(e){e!==t&&e.close()}),!0}}]),e}(u["default"])},826:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function m(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:m(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(68),h=i(215),c=n(h),p=i(525),f=n(p),d=i(620),y=n(d),g=i(466),_=n(g),b=i(918),v=n(b);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.moduleType=1,i}return a(e,t),s(e,[{key:"init",value:function(){var t=this;return this.main&&this.main.isDestroy?Promise.resolve():this.hasInit?Promise.resolve():(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this.globalConfig.showElecLine=!0,new Promise(function(e){t.groundElecManager=new v["default"](t),t.groundElecManager.init(),t.elecUtil=new _["default"](t),t.elecUtil.init(),t.drawLineComp=new f["default"](t),t.drawLineComp.init();var i=new y["default"](t);t.magElecMain=i,t.freshMagConf(),i.initComp(),i.init(),t.addShaderInit(),e()}))}},{key:"freshMagConf",value:function(){this.magElecMain.drawPotential=this.globalConfig.SHOW_DENG_SHI,this.magElecMain.drawElecField=this.globalConfig.SHOW_DIAN_CHANG,this.magElecMain.drawMagnetic=this.globalConfig.SHOW_CIGAN,this.magElecMain.magnetic3D=!this.globalConfig.CIGAN_MODEL,this.magElecMain.isDashLine=!this.globalConfig.CIGAN_SE,this.magElecMain.elecField3D=!this.globalConfig.DIANCHANG_SE,this.magElecMain.refresh()}},{key:"onRemoveEquipment",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onRemoveEquipment",this).call(this),this.diyChangedAll()}},{key:"onSetDataComplete",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onSetDataComplete",this).call(this),this.diyChangedAll(),setTimeout(function(){t.hadDestory||t.main&&t.main.freshMagSettings.call(t.main)},100)}},{key:"diyChangedAll",value:function(){this.elecUtil.diyChanged(),this.elecUtil.electricField_Update.checkAllChanged(),this.elecUtil.magneticField_Update.checkAllChanged()}},{key:"setActive",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setActive",this).call(this,t),this.drawLineComp.setActive(t),this.magElecMain.setActive(t),this.elecUtil.setActive(t),this.magElecMain.refresh()}},{key:"requestAnimationLoop",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requestAnimationLoop",this).call(this),this.elecUtil&&this.elecUtil.elect_Update.stepLoop(),this.magElecMain&&this.magElecMain.renderLoop()}},{key:"destroy",value:function(){this.elecUtil.destroy(),this.elecUtil=null,this.groundElecManager.destroy(),this.groundElecManager=null,this.drawLineComp.destroy(),this.drawLineComp=null,this.magElecMain.destroy(),this.magElecMain=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"saveLampData",value:function(t){t.getData()}},{key:"updateLampData",value:function(){var t=this;this.main.getEquipmentArr(!0).filter(function(e){"ElecLampAndHolder"===e.classname&&t.saveLampData(e)})}},{key:"addShaderInit",value:function(){this.updateLampData()}}],[{key:"MODULE_TYPE",get:function(){return u.Modules.ELECTRICITY}}]),e}(c["default"])},827:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function b(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:b(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(6),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}(h),p=i(101),f=n(p),d=i(102),y=n(d),g=i(486),_=n(g);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=3;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.bulb=null,i.light=null,i.filament=null,i.ratedV=2.5,i.ratedP=.75,i.Resistance=u.M.sq(i.ratedV)/i.ratedP,i.ratedVArr=["2.5V","3V","6V","10V"],i.ratedPArr=["0.75W","0.9W","3.6W","10W"],i.ratedMaxP=10,i.isShortCircuit=!1,i.iRate=.2,i.fRate=5,i.iType=2,i.freshBreakV(),i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.canReversal=!0,this.go1=new _["default"](this.moduleMain),this.addChild(this.go1);this.go1.setPArr([new u.Point(7,-15),new u.Point(7,-42),new u.Point(-7,-42),new u.Point(-7,-15)]),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter0.dp.setTo(8,-6),this.bposter1.dp.setTo(-10,-6),this.freshBgShow(),this.refreshLight()}},{key:"freshBreakV",value:function(){this.breakV=c.round(this.ratedV*y["default"].ELEC_BREAK_BEI2,2)}},{key:"reversal",value:function(t){this.zuo.scale.x*=-1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reversal",this).call(this,t)}},{key:"update",value:function(){this.go1.update()}},{key:"removed",value:function(){this.go1.removed.call(this.go1),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.go1.freshElecNum(this.hasReversal?t:-t)}},{key:"setWorkPower",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.isBreak||(t=Math.abs(t))>this.breakV&&this["break"](),this.freshElecLineVisible(),this.refreshLight()}},{key:"refreshLight",value:function(){var t=this.curElec*this.curPower;switch(this.iType){case 2:this.light.alpha=Math.pow(t*this.iRate,2),this.filament.alpha=Math.pow(t*this.fRate,2);break;case 3:this.light.alpha=Math.sqrt(t*this.iRate),this.filament.alpha=Math.sqrt(t*this.fRate);break;case 1:default:this.light.alpha=t*this.iRate,this.filament.alpha=t*this.fRate}}},{key:"freshElecLineVisible",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshElecLineVisible",this).call(this),this.go1.visible=this.globalConfig.showElecLine&&!this.isShortCircuit}},{key:"break",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this),this.freshBgShow()}},{key:"repair",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this),this.freshBgShow(),this.setShortCircuit(!1)}},{key:"freshBgShow",value:function(){this.bulb.gotoAndStop(this.isBreak?1:0)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.ratedV=this.ratedV,t.ratedP=this.ratedP,t.breakV=this.breakV,t.isShortCircuit=this.isShortCircuit,t}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.ratedV=this.ratedV,t.ratedP=this.ratedP,t}},{key:"setDefaultOrigin",value:function(){this.ratedV=3,this.ratedP=3.6}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.ratedV=t.ratedV,this.ratedP=t.ratedP,this.breakV=t.breakV||this.breakV,t.isShortCircuit?this.setShortCircuit(!0):this.Resistance=u.M.sq(this.ratedV)/this.ratedP}},{key:"setShortCircuit",value:function(t){var e=this;t&&(this.isBreak=!1),this.isShortCircuit=t,this.Resistance=this.isShortCircuit?y["default"].MIN_RESISTANCE:u.M.sq(this.ratedV)/this.ratedP,this.branchChange=!0,this.isShortCircuit&&!this.tisi.visible&&setTimeout(function(){e.hadDestory||(e.tisi&&e.globalConfig.SHOWTIPPAO&&(e.tisi.visible=!0),e.freshElecLineVisible())},0)}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("ratedVoltage"),canEnter:!0,enterUnit:"V",maxValue:380,minValue:1,showValue:this.ratedV+"V",value:this.ratedVArr,callBack:function(e){t.ratedV=u.M.getNumStr(e.showValue)-0,t.Resistance=u.M.sq(t.ratedV)/t.ratedP,t.freshBreakV(),t.branchChange=!0}},{type:this.ComponentProperty.INPUT,name:this.language.getLocaleStr("breakVoltage"),showValue:this.breakV+"V",enterUnit:"V",minValue:this.ratedV,callBack:function(e){t.breakV=c.round(u.M.getNumStr(e.showValue)-0,2),t.branchChange=!0}},{type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("ratedPowerfull"),canEnter:!0,enterUnit:"W",maxValue:this.ratedMaxP,minValue:.01,showValue:this.ratedP+"W",value:this.ratedPArr,callBack:function(e){t.ratedP=u.M.getNumStr(e.showValue)-0,t.Resistance=u.M.sq(t.ratedV)/t.ratedP,t.branchChange=!0}},{type:this.ComponentProperty.BUTTON,name:this.language.getLocaleStr("fuseSet"),text:this.language.getLocaleStr("fuse"),callBack:function(){t["break"]()}},{type:this.ComponentProperty.BUTTON,name:this.language.getLocaleStr("shortCircuitSet"),text:this.language.getLocaleStr("shortCircuit"),"this":this,callBack:function(){t.setShortCircuit(!0)}}),i}},{key:"selectRenderChild",value:function(){return this.range.getBounds()}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("ratedVoltage")+": "+this.ratedV+"V\n    "+this.language.getLocaleStr("ratedPowerfull")+": "+this.ratedP+"W\n    "}}]),e}(f["default"])},828:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(0),u=i(621),h=n(u),c=i(104),p=n(c),f=i(69),d=n(f);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.elecUtil=t.elecUtil,i.globalConfig=t.globalConfig,i.viewRect=null,i.elecBoundsRect=null,i.r=0,i.chargeR=30,i.stepU=0,i.lineColor=0,i.lineWidth=1,i.lineAlpha=1,i.step=10,i.gridStepU=10,i._scale=1,i.threshold=1,i.elecLineColor=16740898,i.potLineColor=3392915,i.magLineColor=14534411,i.elecArrowColor=16775523,i.magArrowColor=16775523,i.maxStep=200,i.lineType=1,i.elecFieldModeN=3,i.drawPotential=!1,i.drawElecField=!1,i.drawMagnetic=!1,i.drawMagArrow=!0,i.drawElecArrow=!0,i.isDashLine=!0,i.dashN=6,i.dashM=3,i.arrowStartP=new l.Point,i.magArrowSpace=6,i.elecArrowSpace=Math.round(180/i.step),i.optimize=!0,i.LINE_WIDTH=3,i.lineGraphics=null,i.elecLineGraphics=new PIXI.Graphics,i.addChild(i.elecLineGraphics),i.potLineGraphics=new PIXI.Graphics,i.addChild(i.potLineGraphics),i.magLineGraphics=new PIXI.Graphics,i.addChild(i.magLineGraphics),i.currentArr=[],i.staCompArr=[],i.rodCompArr=[],i.pointCompArr=[],i.k=1,i.eleStaCompArr=[],i.eleRodCompArr=[],i.elePointCompArr=[],i.magStaCompArr=[],i.magRodCompArr=[],i.magPointCompArr=[],i}return a(e,t),s(e,[{key:"clearElecField",value:function(){this.elecLineGraphics.clear()}},{key:"refreshElecField",value:function(){d["default"].setType(1),this.lineType=1,this.currentArr=d["default"].elecArr,this.staCompArr=this.eleStaCompArr,this.rodCompArr=this.eleRodCompArr,this.pointCompArr=this.elePointCompArr,this.lineGraphics=this.elecLineGraphics,this.lineGraphics.clear(),this.lineColor=this.elecLineColor,this.lineGraphics.lineStyle(this.lineWidth,this.lineColor,this.lineAlpha),this.reFreshElecFieldLine()}},{key:"clearPotField",value:function(){this.potLineGraphics.clear()}},{key:"refreshPotField",value:function(){d["default"].setType(1),this.lineType=1,this.currentArr=d["default"].elecArr,this.lineGraphics=this.potLineGraphics,this.lineGraphics.clear(),this.lineColor=this.potLineColor,this.lineGraphics.lineStyle(this.lineWidth,this.lineColor,this.lineAlpha),this.reFreshElecPotentialLine()}},{key:"clearMagField",value:function(){this.magLineGraphics.clear()}},{key:"refreshMagField",value:function(){d["default"].setType(2),d["default"]._getTotalForce=d["default"].getTotalForce,this.currentArr=d["default"].magArr,this.staCompArr=this.magStaCompArr,this.rodCompArr=this.magRodCompArr,this.pointCompArr=this.magPointCompArr,this.lineGraphics=this.magLineGraphics,this.lineGraphics.clear(),this.lineColor=this.magLineColor,this.lineType=2,this.lineGraphics.lineStyle(this.lineWidth,this.lineColor,this.lineAlpha),this.reFreshMagFieldLine()}},{key:"updateParam",value:function(){this.updateViewParam(),this.updateElecViewParams(),this.updateMagViewParams(),this.updateElecArr(),this.updateMagArr()}},{key:"updateViewParam",value:function(){this._scale=this.globalConfig.main.view.scale,this.viewRect=this.getViewRect()}},{key:"getViewRect",value:function(){return this.globalConfig.main.getViewRect(this.parent)}},{key:"updateMagViewParams",value:function(){var t=Math.sqrt(this._scale.x);this.step=15/t,this.threshold=this.step,this.maxStep=500/t,this.symmetric&&(this.step*=.5,this.threshold=this.step,this.maxStep*=2);var e=t*this.step;this.dashN=Math.round(40/e),this.dashM=Math.round(2*this.dashN/3),3>this.dashN&&(this.dashN=3,this.dashM=2),this.magArrowSpace=Math.round(180/(this.step*this.dashN*this._scale.x*.5)),this.gridStepU=20/this._scale.x,this.lineWidth=this.LINE_WIDTH/this._scale.x,this.viewRect=this.getViewRect(),this.elecBoundsRect=this.getElecBoundsRect(),this.r=d["default"].distance(this.viewRect.width,this.viewRect.height),this.num=this.getTotalLineNum(),this.ele=this.currentArr.length}},{key:"updateElecViewParams",value:function(){1>this._scale.x?(this.step=20/this._scale.x,this.threshold=20/this._scale.x,this.maxStep=500/this._scale.x):2>this._scale.x?(this.step=20,this.threshold=20,this.maxStep=300/this._scale.x):(this.step=10,this.threshold=10,this.maxStep=500/this._scale.x),this.elecArrowSpace=Math.round(180/(this.step*this._scale.x*.5)),this.gridStepU=20/this._scale.x,this.lineWidth=this.LINE_WIDTH/this._scale.x,this.elecBoundsRect=this.getElecBoundsRect(),this.r=d["default"].distance(this.viewRect.width,this.viewRect.height),this.num=this.getTotalLineNum(),this.ele=this.currentArr.length,this.elecFieldModeN=0==this.ele?3:this.ele>5&&this.num/this.ele>=8?1:3}},{key:"updateMagArr",value:function(){var t=this.elecUtil.getMagStaCompArr();d["default"].magArr=[],d["default"].wireArr=[],this.magStaCompArr=[],this.magRodCompArr=[],this.magPointCompArr=[];for(var e=t.length,i=0,n=void 0,r=0;e>r;r++){var o=t[r];o.getWireLine&&d["default"].wireArr.push(o.getWireLine());var a=o.showMagLine?o.getElecs():[];if(0!=a.length){i++,n=o,d["default"].magArr=d["default"].magArr.concat(a);for(var s=o.getComps(),l=0;s.length>l;l++){var u=s[l],c=u.data;switch(u.type){case 1:var f=new p["default"](o.showElecMagLine);f.init(c,!0),this.magStaCompArr.push(f),this.magPointCompArr.push(f);break;case 2:var y=new h["default"](o.showElecMagLine);y.init(c,!0),this.magStaCompArr.push(y),this.magRodCompArr.push(y)}}}}if(this.symmetric=!1,1==i&&"MagnetHorseShoe"==n.classname){this.symmetric=!0;for(var g=this.magStaCompArr.length,_={},b=0;g>b;b++)for(var v=this.magStaCompArr[b],m=b+1;g>m;m++)if(!_[m]){var P=this.magStaCompArr[m];if(0!=v.id&&v.id+P.id==0){v.oppsite=P,P.oppsite=v,_[b]=!0,_[m]=!0;break}}}}},{key:"updateElecArr",value:function(){this.symmetric=!1,d["default"].elecArr=[],this.eleStaCompArr=[],this.elePointCompArr=[],this.eleRodCompArr=[];var t=this.elecUtil.getElecStaCompArr();d["default"].removeEmptyObject(t,"elecNum");for(var e=t.length,i=0;e>i;i++){var n=t[i],r=n.getElecs();if(0!=r.length){d["default"].elecArr=d["default"].elecArr.concat(r);for(var o=n.getComps(),a=0;o.length>a;a++){var s=o[a],l=s.data;switch(s.type){case 1:var u=new p["default"](n.showElecMagLine);u.init(l,!0),this.eleStaCompArr.push(u),this.elePointCompArr.push(u);break;case 2:var c=new h["default"](n.showElecMagLine);c.init(l,!0),this.eleStaCompArr.push(c),this.eleRodCompArr.push(c)}}}}}},{key:"reFreshElecPotentialLine",value:function(){var t=this.currentArr.length;t>0&&(1===t?this.elecPotentialLineOne(this.currentArr[0]):this.elecPotentialLineN())}},{key:"reFreshElecFieldLine",value:function(){var t=this.currentArr.length;if(t>0)if(1===t){var e=this.currentArr[0];e.showFlag&&Math.abs(e.elecNum)>=5&&this.elecFieldLineOne(e)}else if(2===t){var i=this.currentArr[0],n=this.currentArr[1];i.showFlag&&n.showFlag&&Math.abs(i.elecNum)>=5&&Math.abs(n.elecNum)>=5?this.elecFieldLineTwo(i,n):(this.updateGetTotalForce(),this.elecFieldLineN())}else this.updateGetTotalForce(),this.elecFieldLineN()}},{key:"updateGetTotalForce",value:function(){switch(this.elecFieldModeN){case 1:case 2:d["default"]._getTotalForce=d["default"].getTotalForceByGrid,d["default"].updateGridE(this.elecBoundsRect,this.step);break;case 3:default:d["default"]._getTotalForce=d["default"].getTotalForce}}},{key:"reFreshMagFieldLine",value:function(){var t=this.currentArr.length;if(0!=t)if(1==t){var e=this.currentArr[0];e.showFlag&&this.elecFieldLineOne(e)}else if(2==t){var i=this.currentArr[0],n=this.currentArr[1];i.showFlag&&n.showFlag?this.elecFieldLineTwo(i,n):this.elecFieldLineN()}else this.elecFieldLineN()}},{key:"elecFieldLineN",value:function(){this.staCompArr.sort(function(t,e){return t.elecNum-e.elecNum});var t=[],e=[],i=0;this.staCompArr.forEach(function(n){i+=n.elecNum,n.elecNum>0?t.push(n):e.push(n)},this),0>i?(this._drawElecFieldLine(e),this._drawElecFieldLine(t)):(this._drawElecFieldLine(t),this._drawElecFieldLine(e))}},{key:"_lineTo",value:function(t,e,i,n,r){if(this.viewRect.contains(t.x,t.y))if(i=!1,2==this.lineType)if(this.isDashLine){var o=r%this.dashN;if(this.dashM>o){if(this.lineGraphics.lineTo(t.x,t.y),this.drawMagArrow){var a=n>0?this.dashM-1:0;o==a&&(r-a)/this.dashN%this.magArrowSpace==this.magArrowSpace-1&&(this.drawArrow(n>0?t:this.arrowStartP,e,n,this.magArrowColor),0>n&&this.lineGraphics.moveTo(t.x,t.y))}}else this.lineGraphics.moveTo(t.x,t.y),this.arrowStartP.x=t.x,this.arrowStartP.y=t.y}else this.lineGraphics.lineTo(t.x,t.y),!this.drawMagArrow||r!=this.magArrowSpace-1&&r%(this.dashN*this.magArrowSpace)!=this.magArrowSpace-1||this.drawArrow(t,e,n,this.magArrowColor);else this.lineGraphics.lineTo(t.x,t.y),this.drawElecArrow&&r%this.elecArrowSpace==this.elecArrowSpace-1&&this.drawArrow(t,e,n,this.elecArrowColor);else i?this.lineGraphics.moveTo(t.x,t.y):this.lineGraphics.lineTo(t.x,t.y),i=!0;return i}},{key:"_drawElecFieldLine",value:function(t){for(var e=t.length,i=0;e>i;i++){var n=t[i];if(n.showFlag&&Math.abs(n.elecNum)>=5)for(var r=n.dir,o=n.getPoints(),a=0;o.length>a;a++){var s=o[a],u=s.index;this.lineGraphics.moveTo(s.x,s.y);var h=d["default"].getTotalForce(s);h.normalize(r*this.step*.5),s.x+=h.x,s.y+=h.y,this.lineGraphics.lineTo(s.x,s.y);for(var c=0,p=!1;;){var f=this.nextF(s,r*this.step);if(0===f.x&&0===f.y)break;var y=void 0,g=void 0,_=0;if(this.optimize){for(;;){if(y=new l.Point(s.x+f.x,s.y+f.y),g=this.nextF(y,r*this.step),g.x*f.x+g.y*f.y>=0)break;if(f.x*=.5,f.y*=.5,++_>10)break}s.x=y.x,s.y=y.y}else s.x+=f.x,s.y+=f.y;h=f,p=this._lineTo(s,h,p,r,c);if(this.symmetric?this.checkClose2(n,s,h,this.threshold,u):this.checkClose(n,s,h,this.threshold,u))break;if(!this.elecBoundsRect.contains(s.x,s.y))break;if(++c>this.maxStep)break}}}}},{key:"nextF",value:function(t,e){var i=d["default"]._getTotalForce(t);return 0===i.x&&0===i.y?i:(i.normalize(e),i)}},{key:"drawArrow",value:function(t,e,i,n){var r=d["default"].getTotalForce(t);i=r.x*e.x+r.y*e.y>0?1:-1;var o=e.clone();o.normalize(1);for(var a=o.x,s=-o.y,l=2/this._scale.x*i*.5,u=l,h=l*a,c=u*s,p=-l*s,f=u*a,y=t.x,g=t.y,_=[[-13.5,0,1],[-27,-11.5,1],[0,0,1],[-27,11.5,1]],b=[],v=0;4>v;v++){var m=_[v];b[v]=[h*m[0]+c*m[1]+y,p*m[0]+f*m[1]+g,1]}var P=this.lineGraphics;P.beginFill(n,1),P.moveTo(b[0][0],b[0][1]),P.lineTo(b[1][0],b[1][1]),P.lineTo(b[2][0],b[2][1]),P.lineTo(b[3][0],b[3][1]),P.lineTo(b[0][0],b[0][1]),P.endFill(),this.lineGraphics.moveTo(t.x,t.y)}},{key:"elecFieldLineOne",value:function(t){for(var e=d["default"].getTotalElecLineNum(t.elecNum),i=d["default"].getDir(t),n=2*Math.PI/e,r=0;e>r;r++){this._drawRayLine(t.elecPoint.clone(),i*n*r,this.r,i)}}},{key:"elecFieldLineTwo",value:function(t,e){var i=t.elecPoint,n=e.elecPoint,r=new l.Point(n.x-i.x,n.y-i.y),o=d["default"].getAngle(r),a=d["default"].getTotalElecLineNum(t.elecNum),s=d["default"].getTotalElecLineNum(e.elecNum),u=2*Math.PI/a,h=2*Math.PI/s,c=d["default"].getDir(t),p=d["default"].getDir(e);c*p>0?(this._drawRepelLine(t,o+u/2,a,c),this._drawRepelLine(e,o+Math.PI+h/2,s,p)):a>s||a==s&&c>0?this._drawAttractLine(t,e,o,a,s,c,p):this._drawAttractLine(e,t,o+Math.PI,s,a,p,c)}},{key:"_drawAttractLine",value:function(t,e,i,n,r,o,a){var s=t.elecPoint,l=e.elecPoint;this._drawSegmentLine(s,l,o);for(var u=2*Math.PI/n,h=2*Math.PI/r,c=0,p=1;n>p;p++){var f=void 0,d=void 0;p%2==0?(f=i+u*c,d=i+Math.PI-h*c):(c++,f=i-u*c,d=i+Math.PI+h*c);var y=this.drawLineTwoElec(s,l,f,o);if(r>p&&!y){var g=Math.abs(d-i)%(2*Math.PI);g=Math.min(g,2*Math.PI-g),.1>g?(this.drawZeroPoint(t,e),this._drawRayLine(l,d,this.r,a)):this.drawLineTwoElec(l,s,d,a)}}}},{key:"drawZeroPoint",value:function(t,e){var i=d["default"].getZeroEPoint(t,e);i&&(this.lineGraphics.beginFill(this.lineColor,this.lineAlpha),this.lineGraphics.drawCircle(i.x,i.y,10),this.lineGraphics.endFill())}},{key:"_drawSegmentLine",value:function(t,e,i){var n=t.clone(),r=l.Point.distance(t,e)/this.step,o=new l.Point(e.x-t.x,e.y-t.y),a=o.clone();a.normalize(this.step),this.lineGraphics.moveTo(n.x,n.y);for(var s=0,u=!1;;){if(n.x+=a.x,n.y+=a.y,u=this._lineTo(n,a,u,i,s),s>=r)return!1;s++}}},{key:"_drawRayLine",value:function(t,e,i,n){var r=t.clone(),o=new l.Point(Math.cos(e),Math.sin(e)),a=o.clone();a.normalize(this.step),r.x+=o.x,r.y+=o.y,this.lineGraphics.moveTo(r.x,r.y);for(var s=0,u=!1;;){if(r.x+=a.x,r.y+=a.y,u=this._lineTo(r,a,u,n,s),!this.elecBoundsRect.contains(r.x,r.y))return!1;s++}}},{key:"drawLineTwoElec",value:function(t,e,i,n,r){var o=t.clone(),a=new l.Point(Math.cos(i),Math.sin(i));o.x+=a.x,o.y+=a.y,this.lineGraphics.moveTo(o.x,o.y);for(var s=0,u=!1;;){var h=d["default"].getTotalForce(o);if(r&&1e-5>h.length)break;if(h.normalize(n*this.step),o.x+=h.x,o.y+=h.y,u=this._lineTo(o,h,u,n,s),d["default"].checkBiheTo(e,o,this.threshold))return!0;if(!this.elecBoundsRect.contains(o.x,o.y))return!1;if(++s>this.maxStep)break}}},{key:"_drawRepelLine",value:function(t,e,i,n){for(var r=2*Math.PI/i,o=0;i>o;o++){var a=t.elecPoint.clone(),s=e+n*r*o,u=new l.Point(Math.cos(s),Math.sin(s));a.x+=u.x,a.y+=u.y,this.lineGraphics.moveTo(a.x,a.y);for(var h=0,c=!1;;){var p=d["default"].getTotalForce(a);if(p.normalize(n*this.step),a.x+=p.x,a.y+=p.y,c=this._lineTo(a,p,c,n,h),!this.elecBoundsRect.contains(a.x,a.y))break;h++}}}},{key:"elecPotentialLineOne",value:function(t){for(var e=this.getUArr1(t),i=e.length,n=0;i>n;n++){var r=t.elecPoint;this.lineGraphics.drawCircle(r.x,r.y,e[n])}}},{key:"getUArr1",value:function(t){var e=d["default"].getDir(t),i=e*this.k*t.elecNum,n=i/this.chargeR,r=[],o=this.r;if(this.dengbiU)for(;;){n/=this.factorU;var a=i/n;if(r.push(a),a>=o)break}else{var s=20;for(this.stepU=n/s;s>0;){var l=i/n;if(l*=l/this.chargeR*(l/this.chargeR),r.push(l),l>=o)break;s--,n-=this.stepU}}return r}},{key:"elecPotentialLineN",value:function(){this.gridAndContour(this.getUArrN())}},{key:"getUArrN",value:function(){for(var t=-Infinity,e=Infinity,i=new l.Point,n=new l.Point,r=this.currentArr.length,o=0;r>o;o++){var a=this.currentArr[o],s=a.elecNum,u=a.elecPoint;s>t&&(t=s,i=u.clone()),e>s&&(e=s,n=u.clone())}i.x+=this.chargeR;var h=d["default"].getTotalU(i),c=void 0;n.x+=this.chargeR,c=d["default"].getTotalU(n);var p=[],f=void 0;if(h*c>0)if(f=i>0?h:c,this.dengbiU)for(var y=0;16>y;y++)p.push(f),f/=this.factorU;else for(var g=18,_=f/g,b=f;g>0;)p.push(f*(f/b)*(f/b)),g--,f-=_;else if(this.dengbiU){f=h,p.push(0);for(var v=0;8>v;v++)p.push(f),f/=this.factorU;f=c;for(var m=0;8>m;m++)p.push(f),f/=this.factorU}else for(var P=d["default"].getIntCountableSet(16,-1),w=(h-c)/16,O=0;16>O;O++)f=w*P[O],p.push(f);return p}},{key:"gridAndContour",value:function(t){d["default"].updateGridU(this.viewRect,this.gridStepU);for(var e=d["default"].gridU.sx,i=d["default"].gridU.stepx,n=d["default"].gridU.sy,r=d["default"].gridU.stepy,o=d["default"].gridU.mm,a=d["default"].gridU.nn,s=d["default"].gridU.data,u=0;o-1>u;u++)for(var h=0;a-1>h;h++)for(var c=s[u][h],p=s[u+1][h],f=s[u][h+1],y=s[u+1][h+1],g=new l.Point(e+u*i,n+h*r),_=new l.Point(g.x+i,g.y),b=new l.Point(g.x,g.y+r),v=new l.Point(g.x+i,g.y+r),m=t.length,P=0;m>P;P++){var w=t[P],O=0==w?1e-6:w/800,k=[],C=void 0;C=d["default"].getpInEdge(c,p,g,_,w,O),C&&k.push(C),C=d["default"].getpInEdge(p,y,_,v,w,O),C&&k.push(C),C=d["default"].getpInEdge(c,f,g,b,w,O),C&&k.push(C),C=d["default"].getpInEdge(f,y,b,v,w,O),C&&k.push(C);for(var M=0;k.length>M;M++){var A=k[M];0==M?this.lineGraphics.moveTo(A.x,A.y):this.lineGraphics.lineTo(A.x,A.y)}}}},{key:"getTotalLineNum",value:function(){for(var t=0,e=this.staCompArr.length,i=0;e>i;i++)t+=this.staCompArr[i].n;return t}},{key:"getElecBoundsRect",value:function(){for(var t=this.viewRect.clone(),e=d["default"].currentArr.length,i=0;e>i;i++){var n=d["default"].currentArr[i],r=2*this.step,o=n.elecPoint;t=t.union(new l.Rectangle(o.x-r,o.y-r,2*r,2*r))}return t}},{key:"checkClose2",value:function(t,e,i,n,r){for(var o=t.oppsite,a=this.staCompArr.length,s=0;a>s;s++){if(this.staCompArr[s].checkSimpleClose(e,n))return r=t.getOppositeIndex(r),o.closeByIndex(r),!0}return!1}},{key:"checkClose",value:function(t,e,i,n,r){var o=void 0,a=this.staCompArr.length>1;switch(t.classname){case"MagElecPoint":o=this.checCloseArr(this.pointCompArr,e,i,n),1!=o&&a&&(o=this.checCloseArr(this.rodCompArr,e,i,n));break;case"MagElecRod":o=this.checCloseArr(this.rodCompArr,e,i,n),1!=o&&a&&(o=this.checCloseArr(this.pointCompArr,e,i,n));break;default:o=this.checCloseArr(this.staCompArr,e,i,n)}return 0!=o}},{key:"checCloseArr",value:function(t,e,i,n){for(var r=t.length,o=0;r>o;o++){if(t[o].checkClose(e,i,n))return!0}return!1}}]),e}(PIXI.Sprite)},829:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:p(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(69),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t,i,o){n(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));a.globalConfig=t.globalConfig,a.elecUtil=t.elecUtil,a.WIDTH=i,a.HEIGHT=o,a.colorU=255,a.colorE=16740898,a.colorM=14534411,a.showU=!1,a.showE=!1,a.showM=!1,a.useEF=!0,a.powEFNum=.5,a.powENum=0,a.useMF=!0,a.powMFNum=.4,a.powMNum=0,a.elecNum=0,a.magNum=0,a.maxU=0,a.minU=0,a.stepU=0,a.elecSca=1,a.magSca=1,a.uniforms={},navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),a.viewRect=new l.Rectangle(0,0,i,o),a.myW=1024,a.myH=2;var s=a.__createCanvas(a.myW,a.myH),u=s.getContext("2d"),h=PIXI.Texture.fromCanvas(s,PIXI.SCALE_MODES.DEFAULT);return a.myCanvas=s,a.myCtx=u,a.myTexture=h,a.myIndex=0,a.initSuccess=!0,a.pluginName="mag3DRenderer",a.startAng=0,a.updateUniforms(),a}return o(e,t),a(e,[{key:"updateElecArr3D",value:function(){h["default"].elecArr3D=[];var t=this.elecUtil.getElecStaCompArr();h["default"].removeEmptyObject(t,"elecNum");for(var e=t.length,i=0;e>i;i++)for(var n=t[i],r=n.getComps3D(),o=0;r.length>o;o++){var a=r[o];0!==a.elecNum&&h["default"].elecArr3D.push(a)}}},{key:"updateMagArr3D",value:function(){h["default"].magArr3D=[];for(var t=this.elecUtil.getMagStaCompArr(),e=t.length,i=0;e>i;i++)for(var n=t[i],r=n.getMagComps3D(),o=0;r.length>o;o++){var a=r[o];0!==a.I&&h["default"].magArr3D.push(a)}}},{key:"__createCanvas",value:function(t,e){var i=document.createElement("div");return i.innerHTML="<canvas width='"+t+"px' height='"+e+"px' style='width:"+t+"px;height:"+e+"px;background:#000000;'></canvas>",i.childNodes[0]}},{key:"destroy",value:function(){this.elecUtil=null,this.globalConfig=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"getColor",value:function(t){var e=t>>16&255,i=t>>8&255,n=t>>0&255;return new Float32Array([e/255,i/255,n/255,1])}},{key:"updateU",value:function(){for(var t=h["default"].elecArr3D.length,e=-Infinity,i=Infinity,n=Infinity,r=-Infinity,o=new l.Point,a=new l.Point,s=0;t>s;s++){var u=h["default"].elecArr3D[s],c=u.elecNum,p=u.elecPoint;(c>e||c===e&&u.UID>n)&&(e=c,o=p.clone(),n=u.UID),(i>c||c===i&&r>u.UID)&&(i=c,a=p.clone(),r=u.UID)}if(o.x+=15,a.x+=15,this.maxU=h["default"].getTotalU(o),this.minU=h["default"].getTotalU(a),0>this.maxU*this.minU){this.stepU=(this.maxU-this.minU)/18;this.stepU=-this.minU/Math.ceil(-this.minU/this.stepU)}else this.maxU>0?this.minU=0:this.maxU=0,this.stepU=(this.maxU-this.minU)/18}},{key:"clearSamplerCanvas",value:function(){this.myCtx.fillStyle="#000000",this.myCtx.fillRect(0,0,this.myW,this.myH)}},{key:"updateElecPositions3D",value:function(){this.myIndex=0,this.imgData=this.myCtx.getImageData(0,0,this.myW,1);var t=h["default"].elecArr3D.length;this.elecNum=t;for(var e=0;t>e;e++){var i=h["default"].elecArr3D[e],n=i.elecNum,r=i.elecPoint,o=i.type,a=this.mapPoint(r),s=n;switch(o){case 2:this.pushData(0),this.pushData(a.x),this.pushData(a.y),this.pushData(s),this.pushData(this.mapDis(i.length)),this.pushData(180*i.angle/Math.PI);break;case 1:default:this.pushData(255),this.pushData(a.x),this.pushData(a.y),this.pushData(s)}}this.myCtx.putImageData(this.imgData,0,0)}},{key:"updateMagPositions3D",value:function(){this.myIndex=0,this.imgData=this.myCtx.getImageData(0,1,this.myW,1);var t=h["default"].magArr3D.length;this.magNum=t;for(var e=0;t>e;e++){var i=h["default"].magArr3D[e],n=this.mapPoint(i.p),r=1e4*i.I,o=i.dir;this.pushData(100*n.x),this.pushData(100*n.y),this.pushData(r*o)}this.myCtx.putImageData(this.imgData,0,1)}},{key:"mapDis",value:function(t){var e=this.mapPoint(new l.Point(0,0));return this.mapPoint(new l.Point(t,0)).x-e.x}},{key:"mapPoint",value:function(t){var e=this.WIDTH,i=this.HEIGHT;return new l.Point(e*(t.x-this.viewRect.x)/this.viewRect.width,i-i*(t.y-this.viewRect.y)/this.viewRect.height)}},{key:"pushData",value:function(t){var e=this.imgData.data;t+=327679;var i=(16711680&t)>>16,n=(65280&t)>>8,r=255&t;e[this.myIndex++]=i,e[this.myIndex++]=n,e[this.myIndex++]=r,e[this.myIndex++]=255}},{key:"to16",value:function(t){return Math.floor(t/16).toString(16)+(t%16).toString(16)}},{key:"updateUniforms",value:function(){this.uniforms.elecNum=this.elecNum,this.uniforms.magNum=this.magNum,this.uniforms.minU=this.minU,this.uniforms.stepU=this.stepU,this.uniforms.colorU=this.getColor(this.colorU),this.uniforms.colorE=this.getColor(this.colorE),this.uniforms.colorM=this.getColor(this.colorM),this.uniforms.showU=this.showU,this.uniforms.showE=this.showE,this.uniforms.showM=this.showM,this.uniforms.useEF=this.useEF,this.uniforms.powENum=this.powENum,this.uniforms.powEFNum=this.powEFNum,this.uniforms.useMF=this.useMF,this.uniforms.powMNum=this.powMNum,this.uniforms.powMFNum=this.powMFNum,this.uniforms.elecSca=this.elecSca,this.uniforms.magSca=this.magSca,this.u_Sampler=this.myTexture,this.uniforms.startAng=this.startAng}},{key:"updateMagElec3D",value:function(){this.viewRect=this.globalConfig.main.getViewRect(this.parent),this.WIDTH=this.globalConfig.main.canvas.width,this.HEIGHT=this.globalConfig.main.canvas.height,this.clearSamplerCanvas(),this.updateU(),this.updateElecPositions3D(),this.updateMagPositions3D(),this.myTexture.update(),this.updateUniforms()}},{key:"_renderWebGL",value:function(t){var e=t.plugins[this.pluginName];try{e||(PIXI.WebGLRenderer.registerPlugin(this.pluginName,c),t.plugins[this.pluginName]=new c(t),e=t.plugins[this.pluginName]),t.setObjectRenderer(e),e.render(this)}catch(i){this.initSuccess=!1}}}]),e}(PIXI.Sprite);var c=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.gl=t.gl,i}return o(e,t),a(e,[{key:"start",value:function(){this.shader||this._initShader()}},{key:"onContextChange",value:function(){this._initShader()}},{key:"_initShader",value:function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new PIXI.Shader(this.gl,this.__getVShaderSource(),this.__getFShaderSource());var t=this.gl,e=this.shader.attributes,i=[-1,1,0,1,1,0,-1,-1,0,1,-1,0];this.vertexBuffer=PIXI.glCore.GLBuffer.createVertexBuffer(t,new Float32Array(i),t.STATIC_DRAW);var n=this.renderer.createVao();n.addAttribute(this.vertexBuffer,e.position,t.FLOAT,!1,0,0),this.renderer.bindVao(n),this.vao=n}},{key:"render",value:function(t){var e=this.renderer,i=e.gl,n=this.shader;e.bindShader(n),t.uniforms.u_Sampler=e.bindTexture(t.u_Sampler),Object.assign(n.uniforms,t.uniforms),this.renderer.bindVao(this.vao),this.vao.draw(i.TRIANGLE_STRIP,4,0)}},{key:"destroy",value:function(){var t=this.renderer.gl;this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffer&&(t.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"__getVShaderSource",value:function(){return"\n        attribute vec3 position;\n        \n        void main() {\n            gl_Position = vec4(position, 1.0);\n        }\n        "}},{key:"__getFShaderSource",value:function(){return"\n        precision highp float;\n        uniform float minU; // 最小电势\n        uniform float stepU; // 电势间隔\n        uniform float elecNum; // 电荷个数\n        uniform float magNum; // 线圈个数\n        uniform vec4 colorU; // 等势线颜色\n        uniform vec4 colorE; // 电场线颜色\n        uniform vec4 colorM; // 磁感线颜色\n        uniform sampler2D u_Sampler;\n        uniform float elecSca; // 电场线密度\n        uniform float magSca;  // 磁感线密度\n        uniform bool showU; // 是否显示等势线\n        uniform bool showE; // 是否显示电场线\n        uniform bool showM; // 是否显示磁感线\n        uniform bool useEF;  // 是否使用力来约束电场线的粗细\n        uniform int powENum; // 控制电场线粗细\n        uniform float powEFNum; // F控制电场线粗细\n        uniform bool useMF;  // 是否使用力来约束磁感线的粗细\n        uniform int powMNum; // 控制磁感线粗细\n        uniform float powMFNum; // F控制磁感线粗细\n        uniform float startAng;\n        float PI = 3.141592653;\n        int ii = 0;\n        vec2 f = vec2(0.0, 0.0);\n        float y0 = 0.25;\n        \n        // 复数运算\n        vec2 comMul(vec2 z1, vec2 z2){\n          return vec2(z1.x * z2.x - z1.y * z2.y, z1.x * z2.y + z1.y * z2.x);\n        }\n        \n        // 模的平方\n        float length2(vec2 z){\n          return z.x * z.x + z.y * z.y;\n        }\n        \n        // 复数除法\n        vec2 comDiv(vec2 z1, vec2 z2){\n          return comMul(z1, vec2(z2.x, -z2.y)) / length2(z2);\n        }\n        \n        // 开方\n        vec2 comSqrt(vec2 z){\n          float a = z.x;\n          float b = z.y;\n          float r = length(z);\n          float _re;\n          float _im;\n          if(a>=0.0){\n            if(b==0.0){\n              return vec2(sqrt(a), 0.0);\n            }\n            _re = 0.5 * sqrt(2.0 *(r+a));\n          } else {\n            _re = abs(b)/sqrt(2.0*(r-a));\n          }\n          if(a<=0.0){\n            _im = 0.5* sqrt(2.0*(r-a));\n          } else {\n            _im = abs(b)/sqrt(2.0*(r+a));\n          }\n          if(b<0.0){\n            _im = -_im;\n          }\n          return vec2(_re, _im);\n        }\n        \n        // 导体棒的保角变换\n        vec2 complexMap01(vec2 p, float a){\n          vec2 z = comSqrt(comMul(p, p)/4.0-vec2(a*a / 16.0,0.0));\n          if(p.x > 0.0){\n            z = p / 2.0 + z;\n          } else {\n            z = p / 2.0 - z;\n          }\n          return z;\n        }\n        \n        // 从Sampler2D里边取值\n        float getValue(){\n          float ind = (float(ii)+ 0.5) / 1024.0;\n          vec4 smp = texture2D(u_Sampler, vec2(ind, y0));\n          ii = ii + 1;\n          float r = smp.r * 255.0;\n          float g = smp.g * 255.0;\n          float b = smp.b * 255.0;\n          // return ((r*256.0+g)*256.0+b) - 524287.0;\n          return (((r-4.0)*256.0+(g-255.0))*256.0+(b-255.0));\n        }\n        \n        // 旋转\n        vec2 rotVec2(vec2 p, float r0){\n          float co = cos(r0);\n          float si = sin(r0);\n          float x1 = p.x * co - p.y * si;\n          float y1 = p.x * si + p.y * co;\n          return vec2(x1, y1);\n        }\n        \n        // 计算点电荷电荷产生的电势\n        float getU1(){\n          float x0 = getValue();\n          float y0 = getValue();\n          float q0 = getValue();\n          vec2 disVec = gl_FragCoord.xy - vec2(x0,y0);\n          float r = length(disVec);\n          if(r==0.0){\n            return 0.0;\n          }\n          return q0 / r;\n        }\n        // 计算导体棒产生的电势\n        float getU2(){\n          float x0 = getValue();\n          float y0 = getValue();\n          float q0 = getValue();\n          float a0 = getValue();\n          float r0 = getValue() * PI / 180.0;\n          \n          vec2 disVec = gl_FragCoord.xy - vec2(x0,y0);\n          disVec = rotVec2(disVec, r0);\n          vec2 v0 = complexMap01(disVec, a0);\n          float r = length(v0);\n          if(r==0.0){\n            return 0.0;\n          }\n          return q0 / r;\n        }\n        // 计算一个电荷产生的电势\n        float getU0(){\n          float u0 = 0.0;\n          float t0 = getValue();\n          if(t0 > 1.0){\n            u0 = getU1();\n          } else {\n            u0 = getU2();\n          }\n          return u0;\n        }\n        \n        // 计算总的电势\n        float getU(){\n          ii = 0;\n          float u = 0.0;\n          int len = int(elecNum);\n          for(int i=0;i<2000;i+=1){\n              if(i>=len)break;\n              float u0 = getU0();\n              u = u + u0;\n          }\n          // if(elecNum <= 0.0){\n          //   u = 1.0;\n          // }\n          return u;\n        }\n        \n        float u2alp(float u){\n          if(u==0.0){\n            return 0.0;\n          }\n          u=mod((u-minU)/stepU,1.0);\n          return u * 0.95;//(1.0 - u) * 0.95;\n        }\n        \n        // 计算单个电荷电场流函数的值\n        float getTheta(vec2 p, float a){\n          float angle = atan(p.y, p.x) + PI;\n          return angle * a;\n        }\n        \n        // 计算单个电荷的电场力\n        vec2 getF0(vec2 p, float q){\n          float r = length(p);\n          float r2 = r*r;\n          float k = q / (r2 * r);\n          return vec2(k * p.x, k * p.y);\n        }\n        \n        // 电量对应的线条数，可以是负\n        float q2Num(float q0){\n          float sca = 1.0;\n          if(q0 < 0.0){\n            sca = -1.0;\n          }\n          return sca * floor(0.5 + elecSca * 5.0 * sqrt(abs(q0) / 10.0));\n        }\n        \n        // 计算点电荷的流函数值\n        vec4 getTheta1(){\n          float x0 = getValue();\n          float y0 = getValue();\n          float q0 = getValue();\n          float n = q2Num(q0);\n          vec2 v2 = gl_FragCoord.xy-vec2(x0,y0);\n          float theta0 = getTheta(v2, n);\n          return vec4(x0, y0, q0, theta0);\n        }\n        \n        // 计算导体棒的流函数值\n        vec4 getTheta2(){\n          float x0 = getValue();\n          float y0 = getValue();\n          float q0 = getValue();\n          float a0 = getValue();\n          float r0 = getValue() * PI / 180.0;\n          vec2 v2 = gl_FragCoord.xy - vec2(x0,y0);\n          v2 = rotVec2(v2, r0);\n          v2 = complexMap01(v2, a0);\n          float n = q2Num(q0);\n          // float m = mod(n,2.0);\n          // if(m==1.0){\n          //   n = n+1.0;\n          // } else if(m==-1.0){\n          //   n = n-1.0;\n          // }\n          float theta0 = getTheta(v2, n);\n          return vec4(x0, y0, q0, theta0);\n        }\n        \n        // 计算电场线\n        float getE(){\n          ii = 0;\n          float theta = 0.0;\n          float off = 0.0;\n          vec3 p1;\n          vec3 p2;\n          int len = int(elecNum);\n          bool elec2 = true;\n          for(int i=0;i<2000;i+=1){\n            if(i>=len)break;\n            float t0 = getValue();\n            vec3 p;\n            if(t0 > 1.0){\n              vec4 v0 = getTheta1();\n              p = v0.xyz;\n              theta = theta + v0.w;\n            } else {\n              elec2 = false;\n              vec4 v0 = getTheta2();\n              p = v0.xyz;\n              theta = theta + v0.w;\n            }\n            // 记录前两个电荷的位置\n            if(i==0){\n              p1 = p;\n            } else if(i==1){\n              p2 = p;\n            }\n            f = f + getF0(gl_FragCoord.xy - p.xy, p.z);\n          }\n          if(elec2 && int(elecNum)==2){\n            // 计算角度偏移量，保证两个点电荷的时候完全对称\n            float theta12 = getTheta(p2.xy - p1.xy, 1.0);\n            off = -(theta12 * q2Num(p1.z) + (PI + theta12) * q2Num(p2.z)); \n          }\n          theta = mod(theta + off + startAng, 2.0 * PI) / (2.0 * PI);\n          return theta;\n        }\n        \n        float e2alp(float theta){\n          // 颜色周期分布改为对称分布\n          float alp = mod(theta, 1.0);\n          if(alp < 0.5) {\n            alp = alp * 2.0;\n          } else {\n            alp = (1.0 - alp) * 2.0;\n          }\n          // 锐化，显示线\n          if(useEF){\n            if(1.0 - alp > powEFNum * sqrt(length(f))){\n              alp = 0.0;\n            }\n          }\n          for(int i = 0; i < 100; i++){\n            if(i >= powENum) break;\n            alp = alp * alp;\n          }\n          return alp;\n        }\n        \n        //------------------------------------\n        float getM0(){\n          float x0 = getValue() * 0.01;\n          float y0 = getValue() * 0.01;\n          float I = getValue() * 0.0001;\n          \n          vec2 v = gl_FragCoord.xy - vec2(x0,y0);\n          float r = length(v);\n          return I / r;\n        }\n        \n        float getM(){\n          float m = 0.0;\n          int len = int(magNum);\n          for(int i = 0;i < 2000;i++){\n            if(i>=len)break;\n            float u0 = getM0();\n            m = m + u0;\n          }\n          return m;\n        }\n        \n        float m2alp(float m){\n          float alp = mod(sqrt(abs(m)* 500.0), 1.0);\n          for(int i = 0;i<0;i++){\n            alp *= alp;\n          }\n          return alp;\n        }\n        \n        void main() {\n          ii = 0;\n          y0 = 0.25;\n          // 计算电势\n          float u = 0.0;\n          float ualp = 0.0;\n          if(showU){\n            u = getU();\n            ualp = u2alp(u);\n          }\n          // 计算电场线\n          float theta = 0.0;\n          float ealp = 0.0;\n          if(showE){\n            theta = getE();\n            ealp = e2alp(theta);\n          }\n          // 计算磁感线\n          ii = 0;\n          y0 = 0.75;\n          float m = 0.0;\n          float malp = 0.0;\n          if(showM){\n            m = getM();\n            malp = m2alp(m);\n          }\n          \n          ii= 1;\n          y0 = 0.25;\n          float x0 = getValue();\n          // gl_FragColor = colorU * mod(gl_FragCoord.x,x0) / x0;\n          gl_FragColor = colorU * ualp + colorE * ealp + colorM * malp;\n        }\n        "}}]),e}(PIXI.ObjectRenderer)},830:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.Resistance=1,i.astElecWire=null,i}return o(e,t),a(e,[{key:"getGlobalTopP",value:function(){return this.toGlobalView(new l.Point,this.bposter0)}},{key:"getGlobalBottomP",value:function(){return this.toGlobalView(new l.Point,this.bposter1)}},{key:"addOthers",value:function(){this.astElecWire=this.dependEquipments[0],this.astElecWire.getConfJumpTarget=this,this.fresh_astElecWire_location(),this.dispatchLoadedComplete()}},{key:"moveEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.fresh_astElecWire_location()}},{key:"fresh_astElecWire_location",value:function(){if(this.astElecWire){var t=this.toGlobalView(new l.Point(-1,1),this.parent);l.M.setSPPoint(this.astElecWire.parent,t),this.astElecWire.componentBox.rotation=this.componentBox.rotation}}},{key:"rotateChange",value:function(t,i){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t,i),this.fresh_astElecWire_location()}},{key:"added",value:function(){this.add2component(this.bg),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addOthers(),this.bposter0.dp.setTo(0,-14),this.bposter1.dp.setTo(0,14)}},{key:"removed",value:function(){this.main.removeEquipment(this.astElecWire),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.diyChangedMag()}},{key:"getElecs",value:function(){return[]}},{key:"getComps",value:function(){return[]}},{key:"getWireLine",value:function(){return{p1:this.getGlobalBottomP(),p2:this.getGlobalTopP(),I:Math.abs(this.curElec)>1e-6?this.curElec:0}}},{key:"setDataOver",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.fresh_astElecWire_location()}}]),e}(h["default"])},831:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(100),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.allowSave=!1,i.level=7,i.canDel=!1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.cannotSystemDrag=!0}}]),e}(u["default"])},832:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(465),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!1,i.powerArr=["2V","4V","6V"],i.resArr=["0Ω","0.1Ω","0.2Ω","0.5Ω","1Ω","2Ω"],i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.oriPotisionArr=[[{x:-58,y:-78},{x:60,y:-78}],[{x:30,y:-78},{x:60,y:-58}],[{x:-58,y:-58},{x:-33,y:-83}],[{x:-58,y:-93},{x:62,y:-48}],[{x:-58,y:-48},{x:62,y:-93}]],this.canReversal=!0,this._freshCurPower(),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=40}},{key:"_freshCurPower",value:function(){this.Power=2*(this.bg.currentFrame+1)}},{key:"reversal",value:function(t){t||(this.hasReversal=!this.hasReversal),this._freshBPosPosition(),this.updateBinds(!0),this.bg.scale.x*=-1}},{key:"_freshBPosPosition",value:function(){0===this.bg.currentFrame?(this.hasReversal?(l.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[0][1]),l.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[0][0])):(l.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[0][0]),l.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[0][1])),this.bposter0.dp.setTo(10,-8),this.bposter1.dp.setTo(10,-8)):1===this.bg.currentFrame?(this.hasReversal?(l.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[2][1]),l.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[2][0])):(l.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[1][0]),l.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[1][1])),this.bposter0.dp.setTo(5,0),this.bposter1.dp.setTo(5,0)):2===this.bg.currentFrame&&(this.hasReversal?(l.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[4][1]),l.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[4][0])):(l.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[3][0]),l.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[3][1])),this.bposter0.dp.setTo(15,-5),this.bposter1.dp.setTo(8,-5)),this.freshDp(),this.freshGlow()}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.bgCurrentFrame=this.bg.currentFrame,t}},{key:"setData",value:function(t){var i=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.bg.currentFrame=t.bgCurrentFrame,setTimeout(function(){i.hadDestory||(i._freshBPosPosition(),i.updateBinds())},500)}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.bgCurrentFrame=this.bg.currentFrame,t}},{key:"setDefaultSetting",value:function(t){this.bg.currentFrame=t.bgCurrentFrame}},{key:"setDefaultOrigin",value:function(){this.bg.currentFrame=0}},{key:"defaultSettingChanged",value:function(){this.hadDestory||(this._freshBPosPosition(),this.updateBinds())}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.TYPE_LIST_BATTERY,name:this.language.getLocaleStr("voltage"),value:this.powerArr,checked:this.bg.currentFrame,callBack:function(e){t.bg.currentFrame=e.checked,t._freshCurPower(),t._freshBPosPosition(),t.updateBinds(),t.diyChanged()}}),i}},{key:"getTipMess",value:function(){var t=this.getShowValue(),i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("inResistance")+": "+t+"\n    "+this.language.getLocaleStr("voltage")+": "+this.powerArr[this.bg.currentFrame]+"\n    "}},{key:"freshGlow",value:function(){this.showGlowIndex(this.hasReversal?this.bg.currentFrame+3:this.bg.currentFrame)}}]),e}(h["default"])},833:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(465),c=n(h),p=i(102);n(p);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.powerArr=["1.5V","3V","4.5V","6V"],i.resArr=["0Ω","0.1Ω","0.2Ω","0.5Ω","1Ω","2Ω"],i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.oriPotisionArr=[[{x:-98,y:13.5,glowX:-87,glowY:3.85},{x:105,y:13.5,glowX:89,glowY:4.95}],[{x:-160,y:20,glowX:-148.6,glowY:9.8},{x:165,y:20,glowX:148.7,glowY:10.8}],[{x:-240,y:20,glowX:-225.65,glowY:11.3},{x:245,y:20,glowX:226.05,glowY:11.2}],[{x:150,y:3,glowX:131.4,glowY:-4.15},{x:155,y:30,glowX:139.25,glowY:24.55}],[{x:-150,y:3,glowX:-132.3,glowY:-4.15},{x:-150,y:30,glowX:-139.7,glowY:25.3}]],this.bg.currentFrame=1,this.drawDis=40,this.canReversal=!0,this._freshCurPower(),this._freshBPosPosition()}},{key:"_freshCurPower",value:function(){this.Power=1.5*(this.bg.currentFrame+1)}},{key:"reversal",value:function(t){t||(this.hasReversal=!this.hasReversal),this._freshBPosPosition(),this.bg.scale.x*=-1,this.reversalBposter01(),this.updateBinds(!0),this.bar1.branchChange=!0}},{key:"_freshBPosPosition",value:function(){3===this.bg.currentFrame?(this.hasReversal?(u.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[4][0]),u.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[4][1])):(u.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[3][0]),u.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[3][1])),this.bposter0.bindinger.linkWireType=this.hasReversal?1:2,this.bposter1.bindinger.linkWireType=this.hasReversal?1:2,this.bposter0.dp.setTo(-10,-8),this.bposter1.dp.setTo(-5,-8)):(this.hasReversal?(u.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[this.bg.currentFrame][1]),u.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[this.bg.currentFrame][0])):(u.M.setSPPoint(this.bposter0.position,this.oriPotisionArr[this.bg.currentFrame][0]),u.M.setSPPoint(this.bposter1.position,this.oriPotisionArr[this.bg.currentFrame][1])),this.bposter0.bindinger.linkWireType=this.hasReversal?2:1,this.bposter1.bindinger.linkWireType=this.hasReversal?1:2,this.bposter0.dp.setTo(6,-8),this.bposter1.dp.setTo(-6,-8)),this.freshDp(),this.freshGlow()}},{key:"freshGlow",value:function(){this.showGlowIndex(this.hasReversal?this.bg.currentFrame+4:this.bg.currentFrame)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.bgCurrentFrame=this.bg.currentFrame,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.bg.currentFrame=t.bgCurrentFrame||0,this._freshBPosPosition(),this.updateBinds()}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.TYPE_LIST_BATTERY_HOLDER,name:this.language.getLocaleStr("voltage"),value:this.powerArr,checked:this.bg.currentFrame,callBack:function(e){t.bg.currentFrame=e.checked,t._freshCurPower(),t._freshBPosPosition(),t.updateBinds(),t.diyChanged()}}),i}},{key:"getTipMess",value:function(){var t=this.getShowValue(),i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("inResistance")+": "+t+"\n    "+this.language.getLocaleStr("voltage")+": "+this.powerArr[this.bg.currentFrame]+"\n    "}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.Resistance=this.bar2.Resistance,t.currentFrame=this.bg.currentFrame,t}},{key:"setDefaultSetting",value:function(t){this.bar2.Resistance=t.Resistance,this.bg.currentFrame=t.currentFrame}},{key:"setDefaultOrigin",value:function(){this.bar2.Resistance=0,this.bg.currentFrame=1}},{key:"defaultSettingChanged",value:function(){this._freshCurPower(),this._freshBPosPosition(),this.updateBinds(),this.branchChange=!0}}]),e}(c["default"])},834:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(527),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){return n(this,e),t.iElecInter=-1,r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s["default"])},835:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(101),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.capacitanceArr=["5μF","50μF","500μF","5000μF"],i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({capacitance:1,pos:[[1,0],[1,1]]})}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.capacitance=this.bar1.capacitance,t}},{key:"setDataOver",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.bar1.capacitance=t.capacitance}},{key:"added",value:function(){this.add2component(this.bg),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=40,this.bposter0.dp.setTo(10,-8),this.bposter1.dp.setTo(-10,-8)}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("capacitance"),canEnter:!0,enterUnit:"μF",maxValue:1e7,minValue:0,showValue:1e6*this.bar1.capacitance+"μF",value:this.capacitanceArr,"this":this,callBack:function(e){var i=l.M.getNumStr(e.showValue)/1e6;t.bar1.setCapacitance(i)}}),i}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("capacitance")+": "+1e6*this.bar1.capacitance+"μF\n    "}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.capacitance=this.bar1.capacitance,t}},{key:"setDefaultOrigin",value:function(){this.bar1.capacitance=obj.capacitance}},{key:"setDefaultSetting",value:function(t){this.bar1.capacitance=1e-4}}]),e}(h["default"])},836:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(626),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.showElecMagLine=!0,i}return o(e,t),e}(s["default"])},837:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(626),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.showElecMagLine=!0,i}return o(e,t),e}(s["default"])},838:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(6),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}(h),p=i(443),f=function(t){return t&&t.__esModule?t:{"default":t}}(p);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isZuHe=!0,i.left=null,i.right=null,i.RLen=197,i.MAX_DOT_NUMS=50,i.zhuanNum=0,i.resetDisLoadComp=!0,i.animationMode=!0,i.level=6,i}return o(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.cannotSystemDrag=!0,this.removeChildren(),this.initAnimation(),this.addOthers()}},{key:"addOthers",value:function(){var t=this.dependEquipments;this.left=t[0],this.right=t[1],this._initLR(),this.freshDotBoxLocation(),this.dispatchLoadedComplete()}},{key:"_initLR",value:function(){var t=this;this.left.bindST=this.right,this.right.bindST=this.left,this.right.parent.x=this.left.parent.x+this.RLen,this.left.initComp(this),this.right.initComp(this),this.left.dragEndFunc=this.right.dragEndFunc=function(e){t.freshLRDragRect()},this.left.oriGanNum=0,this.right.oriGanNum=0,this.left.dragEndFunc["this"]=this,this.right.dragEndFunc["this"]=this,this.left.canCreateGanYingElec=!0,this.right.canCreateGanYingElec=!0,this.left.ganPP=new u.Point(-81,-166),this.right.ganPP=new u.Point(81,-166),this.left.init(0),this.right.init(0),this.freshLRDragRect(),this.addCursor(this.left,"zuoyou"),this.addCursor(this.right,"zuoyou"),this.left.setDiDotsPoints([new u.Point(-32,-136),new u.Point(-32,114),new u.Point(-121,114),new u.Point(-121,190)]),this.right.setDiDotsPoints([new u.Point(32,-136),new u.Point(32,114),new u.Point(121,114),new u.Point(121,190)]),this._tempLRData&&(this.left.setData(this._tempLRData.leftData),this.right.setData(this._tempLRData.rightData))}},{key:"removed",value:function(){this.__hasRemoved||(this.__hasRemoved=!0,this.left&&(this.removedCursor(this.left),this.removedCursor(this.right),this.left.bindST=null,this.right.bindST=null,this.left=null,this.right=null),this.dotArr.forEach(function(t){TweenLite.killTweensOf(t)}),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this))}},{key:"freshLRDragRect",value:function(t){this.left.dragRect.x=this.right.x-this.left.dragRect.width,this.right.dragRect.x=this.left.x}},{key:"caculateOverStatic",value:function(){if(this.left&&this.right&&this.left.transform&&this.right.transform){var t=this.checkIsLink();this.isLRLink=t;var e=void 0,i=void 0;t?(Math.abs(this.left.ganNum)>Math.abs(this.right.ganNum)?(e=this.left,i=this.right):(e=this.right,i=this.left),this.zhuanNum=-e.ganNum,e.fresh_angle(),i.connectEarthFlag||e.connectEarthFlag?(i.ganNum=0,i.freshDotFrom_elecNum(),i.fresh_angle()):(i.ganNum=this.zhuanNum,i.freshDotFrom_elecNum(),i.fresh_angle()),this.maxItem=e,this.minItem=i,this.checkAndStartAnimation()):(e=this.maxItem,i=this.minItem,i.connectEarthFlag||(i.ganNum=this.zhuanNum),e.connectEarthFlag||(e.ganNum=-this.zhuanNum),e.freshDotFrom_elecNum(),e.fresh_angle(),i.freshDotFrom_elecNum(),i.fresh_angle(),e.checkDiDotAnimation(),i.checkDiDotAnimation())}}},{key:"checkIsLink",value:function(){if(!this.left||!this.right)return!1;var t=!1,e=this;return $.each(this.left.friendArr,function(i,n){if(n.UID===e.right.UID)return t=!0,!1}),t}},{key:"createDot",value:function(){var t=["ConductorWithInsulatingPillarAndMetalFoil/skin.none","ConductorWithInsulatingPillarAndMetalFoil/skin.positive","ConductorWithInsulatingPillarAndMetalFoil/skin.negative"];return PIXI.extras.MovieClip.fromFrames(t)}},{key:"initAnimation",value:function(){this.dotBox=new PIXI.Sprite,this.addChild(this.dotBox),this.dotArr=[];for(var t=0;this.MAX_DOT_NUMS>t;t++){var e=this.createDot();e.gotoAndStop(2),this.dotBox.addChild(e),this.dotArr.push(e),e.visible=!1,e.isActive=!1,e.index=0}}},{key:"freshDotBoxLocation",value:function(){var t=new u.Point(98,-163);this.updateTransform();var e=this.toLocal(t,this.left);u.M.setSPPoint(this.dotBox,e)}},{key:"checkAndStartAnimation",value:function(){var t=this;this.animationMode&&this.maxItem.oriGanNum!==this.maxItem.ganNum&&(clearTimeout(this.loopFlag),this.loopFlag=setTimeout(function(){t.hadDestory||t.checkAndStartAnimationLoop()},10))}},{key:"getFreeDot",value:function(){for(var t=void 0,e=0;this.dotArr.length>e;e++){var i=this.dotArr[e];if(!i.isActive){t=i;break}}return t}},{key:"checkAndStartAnimationLoop",value:function(){var t=this,e=this.maxItem.ganNum-this.maxItem.oriGanNum,i=void 0;e>0?(i="ConductorRight"===this.maxItem.classname,this.minItem.setDotsMoveUp(!1),this.maxItem.setDotsMoveUp(!1)):(i="ConductorLeft"===this.maxItem.classname,this.minItem.setDotsMoveUp(!0),this.maxItem.setDotsMoveUp(!0));for(var n=e/Math.abs(e),r=Math.abs(e),o=0;r>=1&&r>o;o++){var s=function(e){var r=t.getFreeDot();if(!r)return t.checkToHideDiDots(),{v:void 0};Math.abs(t.maxItem.oriGanNum+n)>Math.abs(t.maxItem.ganNum)?t.maxItem.oriGanNum=t.maxItem.ganNum:t.maxItem.oriGanNum+=n,t.maxItem.connectEarthFlag||(r.visible=!0),r.isActive=!0,r.y=c.random(-20,10,!1);var o=c.random(0,.5,!0),a=void 0;i?(r.x=c.random(140,170,!1),a=-180):(r.x=c.random(-180,-150,!1),a=170),TweenLite.to(r,.4,{x:a,delay:o,onCompleteParams:[r],onComplete:function(e){e.visible=!1,e.isActive=!1,t.checkToHideDiDots(),TweenLite.killTweensOf(r)}})}();if("object"===(void 0===s?"undefined":a(s)))return s.v}}},{key:"checkToHideDiDots",value:function(){for(var t=!0,e=0;this.dotArr.length>e;e++){if(this.dotArr[e].isActive){t=!1;break}}t?this.minItem.pcDot.visible=!1:this.minItem.connectEarthFlag&&(this.minItem.pcDot.visible=!0),t?this.maxItem.pcDot.visible=!1:this.maxItem.connectEarthFlag&&(this.maxItem.pcDot.visible=!0)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.animationMode=this.animationMode,t.leftData=this.left.getData(),t.rightData=this.right.getData(),t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.animationMode=t.animationMode,t.leftData&&(this.left?(this.left.setData(t.leftData),this.right.setData(t.rightData)):this._tempLRData=t)}}]),e}(f["default"])},839:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(443),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canCreateGanYingElec=!0,i}return o(e,t),a(e,[{key:"fresh_angle",value:function(t){var e=-Math.abs(t)/100*30;this.ganSP.rotation=l.M.toHu(e),this.bg.zhen.rotation=-this.ganSP.rotation}},{key:"txtNumChanged",value:function(){if(this.fresh_angle(this.txtNum),this._particle2&&this._particle2.particle){this._particle2.particle.maxParticles=Math.abs(this.txtNum);var t=Math.abs(this.ganNum)>Math.abs(this.elecNum)?this.ganNum:-this.elecNum;this._particle2.particle.startColor=l.M.retrieveRGBComponent(0>t?this.elecsParticlesColor.zheng:this.elecsParticlesColor.fu)}}},{key:"init_boElecs",value:function(){var t=this,e=this.ParticleUtil.getParticle(this.ParticleUtil.particles.elecs);this._particle2=e,this.add2component(e),e.completeFunc=function(){l.M.setSPPoint(e,t.hitRect),e.particle.spawnRect.y=165,e.particle.spawnRect.width=t.hitRect.width,e.particle.spawnRect.height=t.hitRect.height,e.particle.maxParticles=Math.abs(e.txtNum)}}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.init(0),this.fresh_angle(0),this.init_boElecs()}},{key:"removed",value:function(){this._particle2.completeFunc=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"selectRenderChild",value:function(){return this.bg.getBounds()}}]),e}(h["default"])},840:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.fuP_=null,i.zhengP_=null,i.cenP_=null,i.redNeedle=null,i.blackNeedle=null,i.dianPArr=[new l.Point(-241,-98),new l.Point(247,-98),new l.Point(280,123),new l.Point(-280,123)],i.dianSP=new PIXI.Sprite,i.loop=!0,i}return o(e,t),a(e,[{key:"getGlobalTopP",value:function(){return this.bposter0.toGlobal()}},{key:"getGlobalBottomP",value:function(){return this.bposter1.toGlobal()}},{key:"addOthers",value:function(){var t=this,e=this.dependEquipments,i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7];l.adsorptionThreshold=0,u.adsorptionThreshold=0,setTimeout(function(){t.hadDestory||(i.linkWireBindMC.call(i,i.bposter0,a.bposter0),i.linkWireBindMC.call(i,i.bposter1,u.bposter0),n.linkWireBindMC.call(n,n.bposter0,a.bposter1),n.linkWireBindMC.call(n,n.bposter1,l.bposter0),r.linkWireBindMC.call(r,r.bposter0,s.bposter0),r.linkWireBindMC.call(r,r.bposter1,t.bposter0),o.linkWireBindMC.call(o,o.bposter0,s.bposter1),o.linkWireBindMC.call(o,o.bposter1,t.bposter1),t.redNeedle=l,t.blackNeedle=u,l.dengBan=t,u.dengBan=t,t.createBWire(t.bposter2,l.bposter1),t.createBWire(t.bposter3,u.bposter1),t.diyChanged(),t.needleMoves())},0)}},{key:"init_shi",value:function(){this.cenP_=l.M.getCenP(this.bposter0,this.bposter1),this.fuP_=new l.Point(this.bposter0.x-this.cenP_.x,this.bposter0.y-this.cenP_.y),this.zhengP_=new l.Point(this.bposter1.x-this.cenP_.x,this.bposter1.y-this.cenP_.y)}},{key:"needleMoves",value:function(){if(this.redNeedle){var t=this.getBBPoint(this.redNeedle),e=this.getBBPoint(this.blackNeedle);if(t&&l.M.checkPolygonPointArr2(t,this.dianPArr)&&e&&l.M.checkPolygonPointArr2(e,this.dianPArr)){var i=this.getNeedleV(this.redNeedle),n=this.getNeedleV(this.blackNeedle),r=i-n;r=this.bar1.curPower*r*3,this.bar2.Power=-r}else this.bar2.Power=0;this.diyChanged()}}},{key:"getNeedleV",value:function(t){var e=this.getBBPoint(t);return e?this.getV(new l.Point(e.x-this.cenP_.x,e.y-this.cenP_.y)):0}},{key:"getBBPoint",value:function(t){return t.getBanP()}},{key:"getV",value:function(t){var e=this.fuP_,i=this.zhengP_;return-1/l.M.getPointLen(t,e)+1/l.M.getPointLen(t,i)}},{key:"addBiaoJi",value:function(t){var e=this.getBBPoint(t);if(e&&l.M.checkPolygonPointArr2(e,this.dianPArr)){var i=new PIXI.Graphics;i.beginFill(16777215),i.drawCircle(e.x,e.y,5),this.dianSP.addChild(i)}}},{key:"hideTip",value:function(){this.tipSP&&(this.tipSP.parent.removeChild(this.tipSP),this.tipSP=null,this.tipTxt.parent.removeChild(this.tipTxt),this.tipTxt=null)}},{key:"moveEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.needleMoves()}},{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:3,pos:[[1,0],[1,1],[2,0],[3,1]],wire:[[[2,1],[3,0]]],res:[[1,100]]}),this.bar2.iElecInter=2,this.bar3.Resistance=1}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),l.M.setSPPointXY(this.bposter2,-1e4,0),l.M.setSPPointXY(this.bposter3,-1e4,0),this.addChild(this.dianSP),this.addOthers(),this.init_shi(),this.bposter0.dp.setTo(0,-8),this.bposter1.dp.setTo(0,-8)}},{key:"hideTips",value:function(){this.main.yndingzhi&&this.tipSP&&(this.tipSP.visible=!1,this.tipTxt.visible=!1)}},{key:"removed",value:function(){this.redNeedle&&(this.redNeedle.dengBan=null),this.blackNeedle&&(this.blackNeedle.dengBan=null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(h["default"])},841:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(465),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resArr=["0Ω","0.1Ω","0.2Ω","0.5Ω","1Ω","2Ω"],i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.Power=1.5,this.canReversal=!0,this.drawDis=35,this.bposter0.dp.setTo(-17,0),this.bposter1.dp.setTo(17,0)}},{key:"reversal",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reversal",this).call(this),this.bposter0.bindinger.linkWireType=0,this.bposter1.bindinger.linkWireType=0,this.updateBinds(!0),this.bg.scale.x*=-1}},{key:"getTipMess",value:function(){var t=this.getShowValue(),i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("inResistance")+": "+t+"\n    "}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.Resistance=this.bar2.Resistance,t}},{key:"setDefaultSetting",value:function(t){this.bar2.Resistance=t.Resistance}},{key:"setDefaultOrigin",value:function(){this.bar2.Resistance=0}}]),e}(u["default"])},842:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(474),c=n(h),p=i(102);n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=5;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.maximumRangeArr=["5mA","50mA","500mA"],i.validNumArr=["1","2","3"],i.maximumRange=.5,i.validNum=1,i.txt=new PIXI.Text("-500mA~500mA",{font:"20px 微软雅黑",fill:10066329,align:"center"}),i._zhenRangeAngle=u.M.toHu(52),i.oriAngle=0,i.unit="mA",i.rotPower=0,i.curPower=0,i.vScale=1,i.angleP=i._zhenRangeAngle/5,i.MIN_POWER=-5,i.MAX_POWER=5,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addChild(this.txt),this.txt.x=-this.txt.width/2-this.bg.width/2+120,this.txt.y=this.bg.height/2-34+2,this.freshLabel("0mA"),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=60,this.bposter0.dp.setTo(12,0),this.bposter1.dp.setTo(-12,0)}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.vScale=1e3*this.maximumRange/5,this.curPower=1e3*t/this.vScale}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.maximumRange=this.maximumRange,t.validNum=this.validNum,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.maximumRange=t.maximumRange,this.validNum=t.validNum,this.rangeChanged({showValue:1e3*this.maximumRange})}},{key:"rangeChanged",value:function(t){var e=t.showValue||this.maximumRangeArr[t.checked];this.maximumRange=u.M.getNumStr(e)/1e3,this.txt.text="-"+e+"~"+e,this.txt.x=-this.txt.width/2-this.bg.width/2+120,this.diyChanged()}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("range"),checked:u.ArrayUtil.getIndexFromValue(this.maximumRangeArr,1e3*this.maximumRange+"mA"),value:this.maximumRangeArr,callBack:this.rangeChanged},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("decimalDigits"),checked:u.ArrayUtil.getIndexFromValue(this.validNumArr,this.validNum),value:this.validNumArr,callBack:function(e){t.validNum=t.validNumArr[e.checked]-0,t.diyChanged()}}),i}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.maximumRange=this.maximumRange,t.validNum=this.validNum,t}},{key:"setDefaultOrigin",value:function(){this.maximumRange=.5,this.validNum=2}},{key:"defaultSettingChanged",value:function(){this.rangeChanged({showValue:1e3*this.maximumRange}),this.branchChange=!0}}]),e}(c["default"])},843:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=(i(0),i(558)),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"overStep",value:function(){if(this.setHuiPower()){var t=this.getInput(0)&this.getInput(1);t&&0===this.bar1.Power?(this.bar1.Power=this.maxPower,this.bar1.branchChange=!0):!t&&this.bar1.Power>0&&(this.bar1.Power=0,this.bar1.branchChange=!0)}}}]),e}(l["default"])},844:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(214),h=n(u),c=i(102),p=n(c);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=-1;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.ratedV=6,i.Resistance=10,i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this);this.ticker=new PIXI.ticker.Ticker,this.ticker.add(function(e){t._playAnimation()}),this.bposter0.dp.setTo(-2,-8),this.bposter1.dp.setTo(0,-8)}},{key:"fresh_playSound",value:function(){this.playSound(this.ticker&&this.ticker.started?!0:!1)}},{key:"playSound",value:function(t){1===this.globalConfig.VOLUME&&t?this.sound||(this.sound=this.globalConfig.SoundTool.playT(this.SoundStr.ELEC_BELL,null,null,this,!0)):this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null)}},{key:"_playMC",value:function(t){t?this.ticker&&!this.ticker.started&&(this.ticker.start(),this.fresh_playSound()):(this.ticker&&this.ticker.started&&(this.ticker.stop(),this.fresh_playSound()),this._playAnimation(!0))}},{key:"_playAnimation",value:function(t){var e=void 0;e=!0===t?0:0===this.chui.currentFrame?1:0,this.chui.currentFrame=e,this.ling.x=0===e?0:-4}},{key:"removed",value:function(){this._playMC(!1),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.left&&(this.isBreak||(0===t?this._playMC(!1):Math.abs(t*this.Resistance)>this.ratedV*p["default"].ELEC_BREAK_BEI?(this["break"](),this._playMC(!1)):this._playMC(Math.abs(t*this.Resistance)>.5?!0:!1),this.isBreak?this.left.magNum=this.right.magNum=0:(this.left.magNum=t/.5*this.QU_DUI_NUM*2,this.right.magNum=-this.left.magNum),this.diyChangedMag()))}},{key:"rotateChange",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t)}}]),e}(h["default"])},845:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(101),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=0;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canReversal=!0,i.Resistance=10,i.ratedV=3.5,i.startV=.5,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=45,this.bposter0.dp.setTo(10,-8),this.bposter1.dp.setTo(-10,-8)}},{key:"playFengSound",value:function(t){if(1===this.globalConfig.VOLUME&&t){if(this.sound||(this.sound=this.globalConfig.SoundTool.play(this.SoundStr.BUMMING,!0)),this.sound){var e=Math.abs(this.curPower)/this.ratedV;this.sound.volume=e}}else this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null)}},{key:"freshFengSound",value:function(){Math.abs(this.curPower)>this.ratedV?(this["break"](),this.playFengSound(!1)):this.playFengSound(this.curPower>this.startV?!0:!1)}},{key:"overStep",value:function(){this.freshFengSound()}},{key:"freshVolume",value:function(){this.freshFengSound()}},{key:"reversal",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reversal",this).call(this),this.bg.scale.x*=-1}},{key:"removed",value:function(){this._soundCompFunc=!1,this.playFengSound(!1),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("ratedVoltage")+": 3V\n    "+this.language.getLocaleStr("resistanceValue")+": 10Ω\n    "}}]),e}(u["default"])},846:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:p(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}(l),h=i(101),c=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.w=0,i.timeStep=.5,i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[1,1],[2,0],[2,1]],wire:[],res:[[1,1e-8],[2,1e-8]]})}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.removeChildAt(2),this.removeChildAt(2),this.tiao=this.create_tiaoComp(),this.addChild(this.tiao),this.tiao.x=-198,this.tiao.y=-22,this.cArr=[];for(var t=0;6>t;t++){var i=this.create_numberComp(t);this.addChild(i),i.x=23.5*t-75,i.y=-497,this.cArr.unshift(i)}this.bposter0.dp.setTo(0,-8),this.bposter1.dp.setTo(0,-8),this.bposter2.dp.setTo(0,-8),this.bposter3.dp.setTo(0,-8)}},{key:"overStep",value:function(){var t=u.get(this.bposter0,"bindinger.unNode.UID"),e=u.get(this.bposter1,"bindinger.unNode.UID"),i=u.get(this.bposter2,"bindinger.unNode.UID"),n=u.get(this.bposter3,"bindinger.unNode.UID");if(t&&t===e&&t===i&&t===n&&Math.abs(this.bposter0.bindinger.Un-this.bposter2.bindinger.Un)>=Math.abs(this.bposter1.bindinger.Un-this.bposter3.bindinger.Un)){this.setJNum(Math.abs((this.bposter1.bindinger.Un-this.bposter3.bindinger.Un)*this.bar1.curElec)*this.timeStep)}}},{key:"setJNum",value:function(t){t/=36e4,this.tiao.addNum(t),this.w+=t,this.cArr[0].addNum(this.w),this.cArr[1].addNum(this.w/10),this.cArr[2].addNum(this.w/100),this.cArr[3].addNum(this.w/1e3),this.cArr[4].addNum(this.w/1e4),this.cArr[5].addNum(this.w/1e5)}},{key:"create_tiaoComp",value:function(){var t=new PIXI.Sprite;t.sp1=PIXI.Sprite.fromFrame("ElecEnergy4/tiaobmd"),t.sp2=PIXI.Sprite.fromFrame("ElecEnergy4/tiaobmd"),t.addChild(t.sp1),t.addChild(t.sp2);var e=new PIXI.Graphics;return e.beginFill(16711680,.8),e.drawRect(129,0,129,3),t.addChild(e),t.mask=e,t.num=0,t.fresh=function(){t.sp1.x=t.num%t.sp1.width,t.sp2.x=t.sp1.x+t.sp1.width},t.fresh(),t.addNum=function(e){t.num+=2e3*e,t.fresh()},t}},{key:"create_numberComp",value:function(t){var e=new PIXI.Sprite;e.sp1=PIXI.Sprite.fromFrame("ElecEnergy4/numbmd"),e.sp2=PIXI.Sprite.fromFrame("ElecEnergy4/numbmd"),e.addChild(e.sp1),e.addChild(e.sp2);var i=new PIXI.Graphics;return i.beginFill(16711680,.5),i.drawRect(0,e.sp1.height+5,30,33),e.addChild(i),e.mask=i,e.p=0,e.num=0,e.type=t,e.fresh=function(){e.sp1.y=e.num,e.sp2.y=e.sp1.y+e.sp1.height},e.fresh(),e.addNum=function(t){t=100*t%100;var i=10*Math.floor(t/10),n=10*Math.max(t%10-9,0);e.num=e.sp1.height*(i+n)/100,e.fresh()},e}}]),e}(c["default"])},847:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(101),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isGround=!0,i.bposter0.cannotBindWire=!0,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.Resistance=0,this.moduleMain.groundElecManager.linkBindMC(this.bposter0)}},{key:"removed",value:function(){this.moduleMain.groundElecManager.unLinkBindMC(this.bposter0),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(u["default"])},848:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(623),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s["default"])},849:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(623),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i._R1=0,i}return o(e,t),a(e,[{key:"setWorkPower",value:function(t){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),!this.isShortCircuit&&!this.isBreak){this.curElec=t/this.Resistance;var i=this.getRI(Math.abs(this.curElec));Math.abs(this.Resistance-i)>1e-5&&(this.Resistance=i,this.branchChange=!0)}}},{key:"getRI",value:function(t){var e=this.ratedP/this.ratedV,i=this.ratedV/e,n=.5*i;return(i-n)/e*t+n}}]),e}(u["default"])},850:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(101),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=0;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.magnet=null,i.terminalL=null,i.terminalR=null,i.canReversal=!0,i.canMagReversal=!0,i.hasMagReversal=!1,i.ratedV=3,i.ratedVArr=["2.5V","3V","6V","12V"],i.ratedP=1.5,i.ratedI=.5,i.stopR=2,i.stopRArr=["1Ω","2Ω","5Ω","10Ω"],i.curI_=!1,i.isStart=!1,i.kk=Math.pow(i.ratedV,3)/(1.11*Math.pow(i.ratedP,2)),i.isHandDown=!1,i.canvasRunHandleProxy=i.canvasRunHandle.bind(i),i.main.addEventListener(i.NBEvent.CANVAS_RUN,i.canvasRunHandleProxy),i}return o(e,t),a(e,[{key:"canvasRunHandle",value:function(t){this._ticker&&(t.isRunning?this._ticker.start():this._ticker.stop())}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),e.prototype._maxAngle=l.M.toHu(30),e.prototype._maxV=6,this.Resistance=2;var t=this;this._ticker=l.M.addTicker(function(){t._lunHandle.call(t)},this,this.main.isRunning),this.lunaTouchID=l.M.addTouch(this.luna,{begin:this.lunaHandle,end:this.lunaHandle},this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=45,this.bposter0.dp.setTo(10,-8),this.bposter1.dp.setTo(-10,-8)}},{key:"lunaHandle",value:function(t){"begin"===t.t?(this.isHandDown=!0,this.Resistance=this.stopR):"end"===t.t&&(this.isHandDown=!1),this.diyChanged()}},{key:"_lunHandle",value:function(){if(!this.isBreak&&this.isStart&&!this.isHandDown){var t=this.curPower/this._maxV*this._maxAngle;this.hasMagReversal&&(t*=-1),this.luna.rotation+=t,this.lunb.rotation=this.luna.rotation}}},{key:"setWorkElec",value:function(t){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),!this.isBreak){if(this.isStart&&.5>Math.abs(t*this.Resistance)?this.isStart=!1:!this.isStart&&Math.abs(t*this.Resistance)>.6&&(this.isStart=!0),this.curI_=t,Math.abs(t*this.Resistance)>1.2*this.ratedV)return this.loop=!1,this.Resistance=this.stopR,void this["break"]();if(!this.isHandDown)if(this.isStart&&0!==this.curI_){var i=this.ratedV*this.ratedV/this.ratedP+(Math.abs(this.curI_)-this.ratedP/this.ratedV)*this.kk;Math.abs(this.Resistance-i)>1e-10&&(this.Resistance=i,this.branchChange=!0)}else this.loop=!1,this.Resistance=this.stopR}}},{key:"removed",value:function(){this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),l.M.removeTouch(this.luna,this.lunaTouchID),l.M.removeTicker(this._ticker),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.ratedV=this.ratedV,t.stopR=this.stopR,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.ratedV=t.ratedV||3,this.stopR=t.stopR||2}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.ratedV=this.ratedV,t.stopR=this.stopR,t}},{key:"setDefaultOrigin",value:function(){this.ratedV=3,this.stopR=2}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("ratedVoltage"),canEnter:!0,enterUnit:"V",maxValue:100,minValue:1,showValue:this.ratedV+"V",value:this.ratedVArr,callBack:function(e){t.ratedV=l.M.getNumStr(e.showValue)}},{type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("inResistanceValue"),canEnter:!0,enterUnit:"Ω",maxValue:100,minValue:1,showValue:this.stopR+"Ω",value:this.stopRArr,callBack:function(e){t.stopR=l.M.getNumStr(e.showValue)}}),i}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("ratedVoltage")+": 3V\n    "+this.language.getLocaleStr("resistanceValue")+": "+this.stopR+"Ω\n    "}}]),e}(h["default"])},851:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(558),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.inputCounts=1,i}return o(e,t),a(e,[{key:"overStep",value:function(){if(this.setHuiPower()){var t=this.getInput(0);t&&this.bar1.Power>0?(this.bar1.Power=0,this.bar1.branchChange=!0):t||0!==this.bar1.Power||(this.bar1.Power=this.maxPower,this.bar1.branchChange=!0)}}}]),e}(l["default"])},852:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(558),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"overStep",value:function(){var t=void 0;t=this.elecUtil.checkBindMCInElec([this.bposter0,this.bposter2])||this.elecUtil.checkBindMCInElec([this.bposter1,this.bposter2])?this.getInput(0)|this.getInput(1):0,t&&0===this.bar1.Power?(this.bar1.Power=this.maxPower,this.bar1.branchChange=!0):!t&&this.bar1.Power>0&&(this.bar1.Power=0,this.bar1.branchChange=!0)}}]),e}(l["default"])},853:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(101),c=n(h),p=i(486),f=n(p);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.tiao=new PIXI.Graphics,i.curWen=20,i.endWen=0,i.addWen=.001,i.maxP=3.6,i.type=0,i.lenType=0,i.showType=0,i.typeArr=[i.language.getLocaleStr("manganin"),i.language.getLocaleStr("Ni-Cr")],i.lenTypeArr=[i.language.getLocaleStr("length1"),i.language.getLocaleStr("length2")],i.showTypeArr=[i.language.getLocaleStr("show"),i.language.getLocaleStr("hide")],i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addChild(this.tiao),this.tiaoPos.visible=!1,this.addWen=0;var i=new PIXI.Graphics;i.beginFill(65280),i.drawCircle(172,145,138),this.zoomMC.addChild(i),this.zoomMC.big.mask=i,this.bigRange={y0:-908.5,y1:-459.55},this.zoomMC.big.y=this.bigRange.y0;this.gopArr1=[new u.Point(-30,-60),new u.Point(-25,106),new u.Point(-8,106),new u.Point(-3,-60)],this.gopArr2=[new u.Point(-30,-60),new u.Point(-30,106),new u.Point(-3,106),new u.Point(-3,-60)],this.go1=new f["default"](this.moduleMain),this.addChild(this.go1),this.go1.setPArr(this.gopArr1),this.RLabel=new PIXI.Text("2V",{font:"30px 微软雅黑",fill:this.globalConfig.DEFAULT_TXT_COLOR,align:"left"}),this.addChild(this.RLabel),this.RLabel.x=80,this.RLabel.y=130,this.freshWen(),this._freshR(),this._tick=new PIXI.ticker.Ticker,this._tick.add(function(){t.enterFrameHandle()}),this.canvasRunHandle({isRunning:this.main.isRunning}),this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.main.addEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"canvasRunHandle",value:function(t){this._tick&&(t.isRunning?this._tick.start():this._tick.stop())}},{key:"enterFrameHandle",value:function(){this.curWen!==this.endWen&&(this.endWen>this.curWen?this.endWen-this.curWen>this.addWen?this.curWen+=this.addWen:this.curWen=this.endWen:this.curWen>this.endWen&&(this.addWen>this.endWen-this.curWen?this.curWen-=this.addWen:this.curWen=this.endWen)),this.freshWen()}},{key:"setWorkElec",value:function(t){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),Math.abs(t)>2)return void this["break"]();this.freshWen(),this.go1.freshElecNum(t)}},{key:"setWorkPower",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t);var i=u.M.sq(t)/this.Resistance;if(i>this.maxP)return this["break"](),this.addWen=.01,void(this.endWen=20);this.endWen=20+40*i/(this.maxP-0),this.addWen=this.endWen===this.curWen?0:this.endWen>this.curWen?.006*i:.01}},{key:"freshWen",value:function(){this.tiao.clear(),this.tiao.lineStyle(2,15099238),this.tiao.moveTo(this.tiaoPos.x,this.tiaoPos.y),this.tiao.lineTo(this.tiaoPos.x,this.tiaoPos.y-(43+1.9625*(this.curWen-20))),this.zoomMC.big.y=this.bigRange.y0+(this.bigRange.y1-this.bigRange.y0)/80*(this.curWen-20)}},{key:"removed",value:function(){this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this._tick.stop(),this.go1.removed(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"_freshR",value:function(){0===this.type?0===this.lenType?(this.Resistance=2.2,this.bg.currentFrame=0,this.go1.setPArr(this.gopArr1)):(this.Resistance=4.4,this.bg.currentFrame=1,this.go1.setPArr(this.gopArr2)):0===this.lenType?(this.Resistance=5,this.bg.currentFrame=2,this.go1.setPArr(this.gopArr1)):(this.Resistance=10,this.bg.currentFrame=3,this.go1.setPArr(this.gopArr2)),this.RLabel.text=this.language.getLocaleStr("r-value")+"："+this.Resistance+"Ω",this.zoomMC.visible=0===this.showType}},{key:"freshElecLineVisible",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshElecLineVisible",this).call(this),this.go1.visible=this.globalConfig.showElecLine}},{key:"update",value:function(){this.go1.update()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.type=this.type,t.lenType=this.lenType,t.showType=this.showType,t}},{key:"setData",value:function(t){this.type=t.type,this.lenType=t.lenType,this.showType=t.showType,this._freshR(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t)}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.type=this.type,t.lenType=this.lenType,t.showType=this.showType,t}},{key:"setDefaultOrigin",value:function(){this.type=0,this.lenType=0,this.showType=0}},{key:"defaultSettingChanged",value:function(){this._freshR()}},{key:"freshConf",value:function(t){this._freshR(),this.diyChanged()}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("material"),checked:this.type,value:this.typeArr,callBack:function(e){t.type=e.checked,t.freshConf()}},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("length"),checked:this.lenType,value:this.lenTypeArr,callBack:function(e){t.lenType=e.checked,t.freshConf()}},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("temperature"),checked:this.showType,value:this.showTypeArr,callBack:function(e){t.showType=e.checked,t.freshConf()}}),i}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("material")+": "+this.typeArr[this.type]+"\n    "+this.language.getLocaleStr("length")+": "+this.lenTypeArr[this.lenType]+"\n    "+this.language.getLocaleStr("temperature")+": "+this.showTypeArr[this.showType]+"\n    "}},{key:"getLocalBoundsElecs",value:function(){var t=[this.bg];return this.zoomMC.visible&&t.push(this.zoomMC),t}}]),e}(c["default"])},854:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(101),c=n(h),p=i(486),f=n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=0;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.Resistance=5,i.resArr=["5Ω","10Ω","15Ω","20Ω","50Ω","100Ω"],i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.go1=new f["default"](this.moduleMain),this.addChild(this.go1),this.go1.setPArr([new u.Point(56,-3),new u.Point(-56,-3)]),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter0.dp.setTo(6,-8),this.bposter1.dp.setTo(-6,-8)}},{key:"removed",value:function(){this.go1.parent.removeChild(this.go1),this.go1.removed(),this.go1=null,this.resArr=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.go1.freshElecNum(this.hasReversal?-t:t)}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.Resistance+"Ω";return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("inResistance"),canEnter:!0,enterUnit:"Ω",maxValue:1e4,minValue:0,showValue:n,value:this.resArr,callBack:function(e){t.Resistance=u.M.getNumStr(e.showValue),t.diyChanged()}},{type:this.ComponentProperty.BUTTON,name:this.language.getLocaleStr("fuseSet"),text:this.language.getLocaleStr("fuse"),"this":this,callBack:function(e){t["break"]()}}),i}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("inResistance")+": "+this.Resistance+"Ω\n    "}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.Resistance=this.Resistance,t}},{key:"setDefaultOrigin",value:function(){this.Resistance=5}},{key:"freshElecLineVisible",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshElecLineVisible",this).call(this),this.go1.visible=this.globalConfig.showElecLine}},{key:"update",value:function(){this.go1.update()}}]),e}(c["default"])},855:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(101),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){return n(this,e),t.iElecInter=0,r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this._addAngle=0,this._addRotateControl(),this.bposter0.dp.setTo(0,-14),this.bposter1.dp.setTo(0,-14)}},{key:"_addRotateControl",value:function(){var t=this;this.parent.updateTransform();var e=void 0;for(e=1;4>=e;e++){var i=this["alphaSP"+e];i.name="alphaSP"+e,i.alpha=0,i.cirComp=this["cirComp"+e],i.rotateData={pareComp:this,cenP:function(e){return function(){return t.toGlobal(e)}}(i),rotateHandleFunc:this._rotateHandleFunc,downHandleFunc:this._downHandleFunc},this.phy.addRotateTool(i),this.addCursor(i,"xuanzhuan")}}},{key:"_downHandleFunc",value:function(t){t.addAngle=0}},{key:"_rotateHandleFunc",value:function(t,e){t.addAngle+=e;var i=!1;t.addAngle>l.M.toHu(30)?(t.cirComp.currentFrame+1>9||(t.cirComp.currentFrame=t.cirComp.currentFrame+1,i=!0),t.addAngle=0):t.addAngle<-l.M.toHu(30)&&(0>t.cirComp.currentFrame-1||(t.cirComp.currentFrame=t.cirComp.currentFrame-1,i=!0),t.addAngle=0),i&&(this._freshResistance(),this.diyChanged(),this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE))}},{key:"_freshResistance",value:function(){this.Resistance=1*this.cirComp1.currentFrame+10*this.cirComp2.currentFrame+100*this.cirComp3.currentFrame+1e3*this.cirComp4.currentFrame}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);t.isOpen=this.isOpen;var i=void 0;for(i=1;4>=i;i++)t["frame_cirComp"+i]=this["cirComp"+i].currentFrame;return t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t);var i=void 0;for(i=1;4>=i;i++)this["cirComp"+i].currentFrame=t["frame_cirComp"+i];this._freshResistance()}},{key:"removed",value:function(){for(var t=1;4>=t;t++){var i=this["alphaSP"+t];i.rotateData=null,this.removedCursor(i),this["alphaSP"+t]=null}s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(h["default"])},856:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(214),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.Resistance=1,i.hasMagLine=!0,i.showMagLine=!1,i.coilArr=i.getBarArr(260,11,3,0,-22,0),i.I=0,i}return o(e,t),a(e,[{key:"added",value:function(){this.add2component(this.bg),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"addedEnd",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"setWorkElec",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),t>6&&this["break"](),this.left&&(this.isBreak?this.left.magNum=this.right.magNum=0:(this.left.magNum=t/.5*this.QU_DUI_NUM*2*1.5,this.right.magNum=-this.left.magNum),this.diyChangedMag())}},{key:"getMagComps3D",value:function(){return this.I=100*-this.curElec*1.6/50,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMagComps3D",this).call(this)}}]),e}(u["default"])},857:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(214),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.Resistance=1,i.hasMagLine=!0,i.showMagLine=!1,i.coilArr=i.getBarArr(260,11,3,0,-22,0),i.I=0,i}return o(e,t),a(e,[{key:"added",value:function(){this.add2component(this.bg),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"addedEnd",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"setWorkElec",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),t>6&&this["break"](),this.left&&(this.isBreak?this.left.magNum=this.right.magNum=0:(this.left.magNum=t/.5*this.QU_DUI_NUM*2,this.right.magNum=-this.left.magNum),this.diyChangedMag())}},{key:"getMagComps3D",value:function(){return this.I=50*-this.curElec*1.6/50,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMagComps3D",this).call(this)}}]),e}(u["default"])},858:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(214),h=n(u),c=i(102),p=n(c);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=-1,t.leftMagNum=30,t.rightMagNum=-30;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.ratedV=6,i.Resistance=10,i.canMagReversal=!0,i.canReversal=!0,i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.ticker=new PIXI.ticker.Ticker,this.ticker.add(function(e){t._loopMC()}),this.ticker.start(),this.speedAnd=0,this.speedind=0,this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=50,this.bposter0.dp.setTo(16,-8),this.bposter1.dp.setTo(-16,-8)}},{key:"_loopMC",value:function(){if(!this.isBreak&&0!=this.curPower){if(this.speedind>=this.speedAnd){this.speedind=0;var t=this.romc.currentFrame;this.hasReversal?this.curPower>0?t--:t++:this.curPower>0?t++:t--,0>t?t=this.romc.totalFrames-1:t>this.romc.totalFrames-1&&(t=0),this.romc.currentFrame=t,this.romb.currentFrame=t}this.speedind++}}},{key:"removed",value:function(){this.ticker.stop(),this.ticker=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.isBreak||0==t||(Math.abs(t)>this.ratedV*p["default"].ELEC_BREAK_BEI?(this["break"](),this.romc.stop(),this.romb.stop()):this.speedAnd=Math.abs(this.ratedV/t))}},{key:"reversal",value:function(t){t||(this.hasReversal=!this.hasReversal),this.hasReversal?(this.bg.currentFrame=1,this.left.magNum=-30,this.right.magNum=30):(this.bg.currentFrame=0,this.left.magNum=30,this.right.magNum=-30),this.diyChangedMag()}}]),e}(h["default"])},859:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(443),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canCreateGanYingElec=!0,i.Resistance=1e6,i.showElecMagLine=!0,i}return o(e,t),a(e,[{key:"fresh_angle",value:function(){var t=Math.abs(this.txtNum/100*97);this.zhen.rotation=l.M.toHu(t)}},{key:"txtNumChanged",value:function(){this.fresh_angle()}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.init(0),this.bposter1.dp.setTo(8,8)}},{key:"setWorkPower",value:function(t){if(this.elecUtil.getAllBposterWires(this).length>0){var e=t/5*100;e=Math.max(-100,e),e=Math.min(100,e),this.fresh_angle(e),this.elecNum=e}}},{key:"clearCharge",value:function(t){this.elecNum=0}},{key:"getData",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.fresh_angle()}},{key:"getConf",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),i=this.language.getLocaleStr("clear_charge");return t.confArr.push(this.ComponentProperty.getButton(i,i,this.clearCharge,this)),t}}]),e}(h["default"])},860:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.startUpstr=i.language.getLocaleStr("startUp"),i.stopItstr=i.language.getLocaleStr("stopIt"),i.Resistance=1e5,i.isStart=!1,i.isLinked=!1,i.groundBPoster=null,i.qiuDis=2e4,i}return o(e,t),a(e,[{key:"_init_ros",value:function(){this._addRotateControl()}},{key:"_addRotateControl",value:function(){var t=this;this.parent.updateTransform(),this.leftT.alpha=this.rightT.alpha=0,this.leftB.dot.alpha=this.rightB.dot.alpha=0,this.leftT.mc=this.leftB,this.leftT.cha=-l.M.toHu(31),this.leftT.maxA=l.M.toHu(39),this.leftT.minA=l.M.toHu(0),this.leftT.rotateData={pareComp:this,cenP:function(){return t.toGlobal(t.leftT)},rotateHandleFunc:this._rotateHandleFunc},this.phy.addRotateTool(this.leftT),this.rightT.mc=this.rightB,this.rightT.cha=l.M.toHu(31),this.rightT.maxA=l.M.toHu(0),this.rightT.minA=l.M.toHu(-39),this.rightT.rotateData={rotateType:1,pareComp:this,cenP:function(){return this.toGlobal(this.rightT)}.bind(this),rotateHandleFunc:this._rotateHandleFunc},this.phy.addRotateTool(this.rightT)}},{key:"_rotateHandleFunc",value:function(t,e){var i=t.rotation+e;i=l.M.range(i,t.minA,t.maxA),t.rotation=i,t.mc.rotation=t.rotation+t.cha;var n=l.M.getPointLen(this.leftB.dot.toGlobal(new l.Point),this.rightB.dot.toGlobal(new l.Point));n/=this.globalConfig.main.view.scale.x,this.qiuDis=n,this.freshFY()}},{key:"freshFY",value:function(){var t=this.qiuDis;22>t?(this.isLinked=!0,this.show_lightning(!1)):t>20&&46>t?(this.isLinked=!1,this.show_lightning(this.isStart?!0:!1)):this.show_lightning(!1),this.freshPower()}},{key:"show_lightning",value:function(t){if(this.lightning.visible=t){var e=this.toLocal(new l.Point,this.leftB.dot),i=this.toLocal(new l.Point,this.rightB.dot),n=l.M.getCenP(e,i);l.M.setSPPoint(this.lightning,n);var r=l.M.getAngleP(e,i)-180;this.lightning.rotation=l.M.toHu(r)}this.fresh_playSound()}},{key:"fresh_playSound",value:function(){this.playSound(this.lightning.visible)}},{key:"playSound",value:function(t){1===this.globalConfig.VOLUME&&t?this.sound||(this.sound=this.globalConfig.SoundTool.play(this.SoundStr.ELECTRIC_APPLIANCE,!0)):this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null)}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.lightning.play(),this.btn=new this.Button({"this":this,text:this.startUpstr,tab:this.tabHandle}),this.addChild(this.btn),this.btn.y=this.bg.height/2+30,this.btn.x=-this.btn.w/2,this._init_ros(),this.ticker=new PIXI.ticker.Ticker,this.ticker.add(function(){t.loopLun()}),this.ticker.start(),this.show_lightning(!1),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter0.dp.setTo(10,-8),this.bposter1.dp.setTo(-10,-8),this.addCursor(this.btn,"hand")}},{key:"tabHandle",value:function(t){this.btn.text===this.startUpstr?(this.btn.text=this.stopItstr,this.isStart=!0):(this.btn.text=this.startUpstr,this.isStart=!1),this.freshFY()}},{key:"freshPower",value:function(t){var e=0;this.Resistance=1e5,this.isStart&&!this.isLinked&&(e=1e5,this.Resistance=.1),this.Power!==e&&(this.Power=e,this.diyChanged())}},{key:"loopLun",value:function(){this.isStart&&(this.qian.rotation+=.08,this.hou.rotation-=.08,this.xin.rotation-=.1)}},{key:"removed",value:function(){this.removedCursor(this.btn),this.ticker.stop(),this.ticker=null,this.btn["this"]=null,this.playSound(!1),this._soundCompFunc=null,this.leftT.rotateData=null,this.rightT.rotateData=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.isStart=this.isStart,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),(this.isStart=t.isStart)&&(this.btn.text=this.stopItstr,this.freshPower())}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}}]),e}(h["default"])},861:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(443),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.xinType=0,i.level=6,i.mArr=[i.language.getLocaleStr("glass"),i.language.getLocaleStr("mica"),i.language.getLocaleStr("metal")],i}return o(e,t),a(e,[{key:"freshType",value:function(t){this.bg.currentFrame=t}},{key:"endEnd",value:function(t){var e=this,i=this.globalConfig.main.getEquipmentArr();each(i,function(t,i){if("ParallelPlateCondenser"===i.component.classname){i.component.checkIsIn.call(i.component,e)&&i.component.turnIn(e,!0)}})}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("material"),this.xinType,this.mArr,function(e){t.xinType=t.bg.currentFrame=e.checked})),i}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("material")+": "+this.mArr[this.xinType]+"\n    "}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.xinType=this.xinType,t}},{key:"setDefaultOrigin",value:function(){this.xinType=0}},{key:"defaultSettingChanged",value:function(){this.freshType(this.xinType)}}]),e}(u["default"])},862:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(214),h=n(u),c=i(102),p=n(c);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=-1,t.leftMagNum=30,t.rightMagNum=-30;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.ratedV=3,i.Resistance=20,i.canMagReversal=!0,i.canReversal=!0,i.hasMagLine=!0,i.showMagLine=!1,i.coilArr=i.getUArr(95,70,3,5,8,-Math.PI,0,-45),i.I=-1,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=50,this.bposter0.dp.setTo(10,-8),this.bposter1.dp.setTo(-10,-8),this.bg=this.magnet}},{key:"setWorkPower",value:function(t){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),!this.isBreak){var i=void 0;Math.abs(t)>this.ratedV*p["default"].ELEC_BREAK_BEI2?(this["break"](),i=0):i=.2*-t,this.hasMagReversal&&(i=-i),TweenMax.to(this.pointer,.5,{rotation:-i})}}}]),e}(h["default"])},863:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i._shangAngle=l.M.toHu(-3.5),i._xiaAngle=l.M.toHu(1.5),i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.createZuhe({bar:3,pos:[[1,0],[1,1],[2,0],[2,1],[3,1]],wire:[[[2,1],[3,0]]],res:[[1,5],[2,.01],[3,.01]]}),this.heng.rotation=this._shangAngle,this.bar2.isBreak=!0,this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=1,this.bposter2.bindinger.linkWireType=2,this.bposter3.bindinger.linkWireType=2,this.bposter4.bindinger.linkWireType=2,this.bposter0.dp.setTo(8,-8),this.bposter1.dp.setTo(8,-8),this.bposter2.dp.setTo(-16,-8),this.bposter3.dp.setTo(-16,-8),this.bposter4.dp.setTo(-16,-8)}},{key:"overStep",value:function(){var t=this;if(this.bar1){var e=this.bar1.curElec;this._temp_curElec!==e&&(this._temp_curElec=e,Math.abs(e)>1e-6?this.heng.rotation!==this._xiaAngle&&(this.heng.rotation=this._xiaAngle,this.playSound(!0)):this.heng.rotation=this._shangAngle,this.left.magNum=e/.5*this.QU_DUI_NUM*2,this.right.magNum=-this.left.magNum,this.diyChangedMag(),this.heng.rotation===this._xiaAngle?(this.bar2.isBreak=!1,this.bar3.isBreak=!0):(this.bar2.isBreak=!0,this.bar3.isBreak=!1),setTimeout(function(){t.hadDestory||t.diyChanged()},50))}}},{key:"playSound",value:function(t){var e=this;1===this.globalConfig.VOLUME&&t?this.sound||(this.sound=this.globalConfig.SoundTool.play(this.SoundStr.ELECTROMAGNETICRELAY,0,function(){e.sound=null},null,this)):this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null)}}]),e}(h["default"])},864:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function p(t,e,i,n){var r=Object.getOwnPropertyDescriptor(t,e);if(r===undefined){var o=Object.getPrototypeOf(t);null!==o&&p(o,e,i,n)}else if("value"in r&&r.writable)r.value=i;else{var a=r.set;a!==undefined&&a.call(n,i)}return i},l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(526),c=function(t){return t&&t.__esModule?t:{"default":t}}(h);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.classname="ElectrostaticShield",i.cage=null,i.cageBack=null,i.earthWire=null,i.elecAre=null,i.paper01=null,i.paper02=null,i.paper03=null,i.paper04=null,i.paper05=null,i.paper12=null,i.paper13=null,i.paper14=null,i.canCreateGanYingElec=!0,i.cantToTop=!0,i.bg=null,i.paperArr=[],i.connectEarthFlag=!1,i.showPaperFlag=!1,i.mapfind=[],i.u=0,i.paperFrameId=0,i}return o(e,t),a(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.init(0),this.bg=this.cage,u.M.setSPPointXY(this.bposter0,this.elecAre.x,this.elecAre.y),this.paperArr=[this.paper01,this.paper02,this.paper03,this.paper04,this.paper05,this.paper12,this.paper13,this.paper14],this.changeShowPaper({ckecked:this.showPaperFlag}),this.changeConnectEarth({checked:this.connectEarthFlag}),this.freshType(),this.selfMoved()}},{key:"addCageBack",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addCageBack",this).call(this);var t=this.cageBackCon;t.addChild(this.paper04),t.addChild(this.paper05),t.addChild(this.paper14),t.addChild(this.cageBack)}},{key:"removed",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setGanYingElec",value:function(t){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setGanYingElec",this).call(this,t),this.connectEarthFlag)this.removeGanNum(this);else if(this.elecInside){var i=this.elecInside.elecNum;i&&(this.ganNum+=i)}this.updatePaperState()}},{key:"containsItem",value:function(t){return this.contains(t.elecPoint)}},{key:"contains",value:function(t){var e=t.x,i=t.y,n=this.elecPoint,r=n.x-(this.elecAre.x+this.elecAre.width/2),o=n.y-(this.elecAre.y+this.elecAre.height/2),a={x:0+r,y:-269+o,r:180},s={x:-183+r,y:-288+o,width:367,height:230},l=e-a.x,u=i-a.y;return a.r>Math.sqrt(l*l+u*u)||e>s.x&&s.x+s.width>e&&i>s.y&&s.y+s.height>i}},{key:"setWorkPower",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),this.freshType()}},{key:"freshType",value:function(){var t=this.elecUtil.findEAb(this,this.bposter0);if(t&&t.body&&t.body.Power){var e=Math.abs(t.body.Power-t.Un);0===t.Un&&1===t.linkWireType&&(e=-e),this.u=e}else this.u=0;this.updateElecNum(),this.updatePaperState()}},{key:"updateElecNum",value:function(){if(this.connectEarthFlag)this.elecNum=0;else if(this.u){var t=.01*this.u;this.elecNum=t}}},{key:"updatePaperState",value:function(){if(this.freshDotFrom_elecNum&&this.freshDotFrom_elecNum(),this.showPaperFlag){var t=Math.abs(this.txtNum);if(0===t)this.setPaperFrame(0);else{var e=Math.round(t/10);0>e&&(e=0),e>7&&(e=7),this.setPaperFrame(e)}}}},{key:"setPaperFrame",value:function(t){var e=this;TweenLite.to(this,.5,{paperFrameId:t,onUpdate:function(){e.paperArr.forEach(function(t){t.gotoAndStop(Math.round(e.paperFrameId))})}})}},{key:"changeShowPaper",value:function(t){var e=this;this.showPaperFlag=t.checked,this.paperArr.forEach(function(t){t.visible=e.showPaperFlag}),this.updatePaperState()}},{key:"changeConnectEarth",value:function(t){this.connectEarthFlag=t.checked,this.earthWire.visible=this.connectEarthFlag,this.updateElecNum(),this.updatePaperState(),this.selfMoved()}},{key:"getDragRect",value:function(){return{x:-this.bg.width/2-this.DASH_DIS,y:-this.bg.height/2-this.DASH_DIS,width:this.bg.width+2*this.DASH_DIS,height:this.bg.height+2*this.DASH_DIS}}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.showPaperFlag=this.showPaperFlag,t.connectEarthFlag=this.connectEarthFlag,t}},{key:"setData",value:function(t){var i=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.showPaperFlag=t.showPaperFlag,this.connectEarthFlag=t.connectEarthFlag,this.changeShowPaper({checked:this.showPaperFlag}),this.changeConnectEarth({checked:this.connectEarthFlag}),setTimeout(function(){i.hadDestory||i.freshType()},0)}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getSwitch(this.language.getLocaleStr("note"),this.showPaperFlag,this.changeShowPaper,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("grounding"),this.connectEarthFlag,this.changeConnectEarth,this)),t}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.showPaperFlag=this.showPaperFlag,t.connectEarthFlag=this.connectEarthFlag,t}},{key:"setDefaultOrigin",value:function(){this.showPaperFlag=!1,this.connectEarthFlag=!1}},{key:"defaultSettingChanged",value:function(){var t=this;this.changeShowPaper({checked:this.showPaperFlag}),this.changeConnectEarth({checked:this.connectEarthFlag}),setTimeout(function(){t.hadDestory||t.freshType()},0)}},{key:"elecNum",get:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"elecNum",this)},set:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"elecNum",t,this),this.connectEarthFlag&&s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"elecNum",0,this),this.updatePaperState()}}]),e}(c["default"])},865:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(101),c=n(h),p=i(486),f=n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=7;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.typeArr=[i.language.getLocaleStr("type")+1,i.language.getLocaleStr("type")+2],i.typeInd=0,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:4,pos:[[1,0],[1,1],[2,0],[2,1],[3,0],[3,1],[4,0],[4,1]],res:[[1,4.4],[2,2.2],[3,10],[4,5]]})}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this);for(var t=[[new u.Point(-70,-70),new u.Point(75,-70)],[new u.Point(-70,-30),new u.Point(75,-30)],[new u.Point(-70,12),new u.Point(75,12)],[new u.Point(-70,52),new u.Point(15,52)]],i=1;4>=i;i++){var n=new f["default"](this.moduleMain);this.addChild(n),n.setPArr(t[i-1]),this["go"+i]=n}}},{key:"freshElecLineVisible",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshElecLineVisible",this).call(this);for(var t=1;4>=t;t++)this["go"+t].visible=this.globalConfig.showElecLine}},{key:"removed",value:function(){for(var t=1;4>=t;t++)this["go"+t].removed();l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"overStep",value:function(){for(var t=1;4>=t;t++)this["go"+t].freshElecNum(this["bar"+t].curElec)}},{key:"update",value:function(){for(var t=1;4>=t;t++)this["go"+t].update()}},{key:"freshType",value:function(){this.typeInd!==this.bg.currentFrame&&(this.bg.gotoAndStop(this.typeInd),0===this.typeInd?(this.bar1.Resistance=4.4,this.bar2.Resistance=2.2,this.bar3.Resistance=10,this.bar4.Resistance=5):(this.bar1.Resistance=4.4,this.bar2.Resistance=10,this.bar3.Resistance=5,this.bar4.Resistance=5),this.bar1.branchChange=!0)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.typeInd=this.typeInd,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.typeInd=t.typeInd,this.freshType()}},{key:"getTipMess",value:function(){var t='x10<font class="pre-snum">-7</font>m<font class="pre-snum">2</font>',i=this.language.getLocaleStr("manganin"),n=this.language.getLocaleStr("Ni-Cr"),r=this.language.getLocaleStr("fine"),o=this.language.getLocaleStr("crude"),a=this.language.getLocaleStr("cross_area"),s=this.language.getLocaleStr("length"),u=this.language.getLocaleStr("short"),h=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return h+=0===this.typeInd?"\n    "+i+"（"+r+"）："+s+" 1m\n                   "+a+" 1"+t+"\n  "+i+"（"+o+"）："+s+" 1m\n                   "+a+" 2"+t+"\n  "+n+"（"+s+"）："+s+" 1m\n                   "+a+" 1"+t+"\n  "+n+"（"+u+"）："+s+" 0.5m\n                   "+a+" 1"+t:"\n      "+i+"（"+r+"）："+s+" 1m\n                   "+a+" 1"+t+"\n  "+n+"（"+r+"）："+s+" 1m\n                   "+a+" 1"+t+"\n  "+n+"（"+o+"）："+s+" 1m\n                   "+a+" 2"+t+"\n  "+n+"（"+u+"）："+s+" 0.5m\n                   "+a+" 1"+t}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("type"),this.typeInd,this.typeArr,function(e){t.typeInd=e.checked,t.freshType(),t.freshLibPan()})),i}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.typeInd=this.typeInd,t}},{key:"setDefaultSetting",value:function(t){this.typeInd=t.typeInd}},{key:"setDefaultOrigin",value:function(){this.typeInd=0}},{key:"defaultSettingChanged",value:function(){this.freshType()}}]),e}(c["default"])},866:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=(i(0),i(443)),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.allowSave=!1,i.isLock=!0,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.init(0),this.addCursor(this,"tuozhuai")}},{key:"endEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.freshControl()}},{key:"moveEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.freshControl()}},{key:"selectRenderChild",value:function(){return this.bg.getBounds()}},{key:"removed",value:function(){this.removedCursor(this),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(u["default"])},867:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:g(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(103),c=n(h),p=i(559),f=n(p),d=i(622),y=n(d);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isZuHeFiled=!0,i.left=null,i.right=null,i.canRotate=!0,i.bindSilk=null,i.canReset=!0,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this);var t={};(0,c["default"])(t,this.paramObj,{rect:{x:-this.bg.width/2,y:-12.5,w:this.bg.width/2-10,h:12.5},ganP:{x:0,y:0},elecNum:0}),this.left=new f["default"](t),this.zuheFiledCompArr.push(this.left);var i={};(0,c["default"])(i,this.paramObj,{rect:{x:0,y:-12.5,w:this.bg.width/2-10,h:12.5},ganP:{x:0,y:0},elecNum:0}),this.right=new f["default"](i),this.zuheFiledCompArr.push(this.right),this.add2component(this.bg),this.add2component(this.left),this.add2component(this.right),this.addOthers()}},{key:"isItemBelongThis",value:function(t){return t===this||t===this.left||t===this.right||t===this.bindSilk}},{key:"addOthers",value:function(){this.bindSilk=this.dependEquipments[0],this._freshBinkSet()}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.freshCData()}},{key:"endEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.freshCData()}},{key:"freshCData",value:function(t){this.left.fresh_elecPoint(),this.right.fresh_elecPoint(),this.diyChanged()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.left_elecNum=this.left.elecNum,t.right_elecNum=this.right.elecNum,this.bindSilk&&(t.bindSilk_elecNum=this.bindSilk.elecNum),t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.left.elecNum=t.left_elecNum,this.right.elecNum=t.right_elecNum,this.freshCData(),this._freshBinkSet()}},{key:"_freshBinkSet",value:function(t){this.bindSilk&&this.setData_obj&&(this.bindSilk.elecNum=this.setData_obj.bindSilk_elecNum||0)}},{key:"reset",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.left.elecNum=this.right.elecNum=0,this.freshCData()}},{key:"getDragRect",value:function(){return{x:-this.bg.width/2-this.DASH_DIS,y:-this.bg.height/2-this.DASH_DIS,width:this.bg.width+2*this.DASH_DIS,height:this.bg.height+2*this.DASH_DIS}}},{key:"getElecs",value:function(){var t=this.startPRadius,e=new u.Point(0,0);return this.createElecs(this.left.elecNum+this.right.elecNum,363,8,t,e.x-181.5,e.y,1)}},{key:"getComps",value:function(){return this.getComp01(this.left.elecNum+this.right.elecNum,new u.Point(0,0),363,0)}},{key:"removed",value:function(){this.bindSilk=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}}]),e}(y["default"])},868:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(624),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1,t.leftMagNum=30,t.rightMagNum=-30;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.startupStr=i.language.getLocaleStr("startUp"),i.stopItStr=i.language.getLocaleStr("stopIt"),i._type=0,i._typeArr=[i.language.getLocaleStr("dc_alternator"),i.language.getLocaleStr("ac_alternator")],i.zeroTime=0,i.maxV=6,i.zhuanType=0,i.zhuanTypeArr=[i.language.getLocaleStr("corotation"),i.language.getLocaleStr("reversal")],i.SePower=6,i}return o(e,t),a(e,[{key:"_init_ros",value:function(){var t=this;this._addRotateControl(),this.loopTicker=l.M.addTicker(function(){var e=t.zhuanType?-1:1,i=.2*e*t.SePower/6;t.ros.rotation+=i,t.xianquan.rotation+=2*i,t.zhuanYingMask.rotation=t.xianquan.rotation,t.freshcacu()},this,!1),this.addCursor(this.ros.alphaSP,"xuanzhuan")}},{key:"_addRotateControl",value:function(){var t=this;this.parent.updateTransform(),this.ros.rotateData={pareComp:this,cenP:function(){return t.ros.toGlobal(new l.Point)},rotateHandleFunc:this._rotateHandleFunc,downHandleFunc:this._downHandleFunc,checkDownSP:this.ros.alphaSP},this.phy.addRotateTool(this.ros),this.ros.alphaSP.alpha=0}},{key:"_downHandleFunc",value:function(t){t.addAngle=0,t.time=(new Date).getTime(),t.speedArr=[],this._curTime=null}},{key:"_rotateHandleFunc",value:function(t,e){var i=this;if(Math.abs(e)>1&&(e=0),this.ros.rotation+=e,this.xianquan.rotation+=2*e,this.zhuanYingMask.rotation=this.xianquan.rotation,!this._curTime)return void(this._curTime=(new Date).getTime());var n=(new Date).getTime(),r=n-this._curTime;this._curTime=n;var o=r;o=Math.sqrt(o);o=l.M.range(o,2.9,7),o=this.SePower-(o-2.9)/4.1*this.SePower;var a=l.M.getFuhao(e)*o,s=l.M.range(a,-this.SePower,this.SePower);s&&(this.cacuPower(s),this.diyChanged(),clearTimeout(this.zeroTime),this.zeroTime=setTimeout(function(){i.hadDestory||(i.Power=0,i.diyChanged())},100))}},{key:"cacuPower",value:function(t){this.Power=0===this._type?t:t*Math.sin(this.xianquan.rotation)}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.btn=new this.Button({"this":this,text:this.startupStr,tab:this.btnTabHandle}),this.addChild(this.btn),this.btn.y=this.bg.height/2+30,this.btn.x=-this.btn.w/2,this._init_ros(),this.addCursor(this.btn,"hand"),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter0.dp.setTo(10,-8),this.bposter1.dp.setTo(-10,-8),this.createZhuanMask()}},{key:"createZhuanMask",value:function(){var t=Math.sqrt(l.M.sq(14)-l.M.sq(3)),e=new l.Point(3,-t),i=new l.Point(3,t),n=l.M.getCenP(e,i),r=l.M.getXianDianByDis(22,!1,n,new l.Point(0,0)),o=new l.Point(-3,-t),a=new l.Point(-3,t),s=new PIXI.Graphics,u=l.M.getCenP(o,a),h=l.M.getXianDianByDis(-22,!1,u,new l.Point(0,0));s.beginFill(16711680,.5),s.moveTo(e.x,e.y),s.quadraticCurveTo(r.x,r.y,i.x,i.y),s.lineTo(e.x,e.y),s.moveTo(o.x,o.y),s.quadraticCurveTo(h.x,h.y,a.x,a.y),s.lineTo(o.x,o.y),this.addChild(s),l.M.setSPPoint(s,this.zhuanYing),this.zhuanYing.mask=s,this.zhuanYingMask=s}},{key:"btnTabHandle",value:function(){this.btn.text===this.startupStr?(this.btn.text=this.stopItStr,l.M.addDenyDB(this.ros),this.loopTicker.start(),this.freshcacu()):(this.btn.text=this.startupStr,l.M.removeDenyDB(this.ros),this.loopTicker.stop(),this.freshcacu())}},{key:"freshcacu",value:function(){var t=0;if(this.btn.text===this.stopItStr)if(0===this._type){var e=this.zhuanType?-1:1;t=this.SePower*e}else t=this.SePower*Math.sin(this.xianquan.rotation);else t=0;this.Power!==t&&(this.Power=t,this.diyChanged())}},{key:"removed",value:function(){this.removedCursor(this.ros.alphaSP),this.removedCursor(this.btn),this.phy.removeRotateTool(this.ros),l.M.removeTicker(this.loopTicker),this.btn.destroy(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.SePower=this.SePower,t.zhuanType=this.zhuanType,t.hand_type=this._type,t.btn_text=this.btn.text,t}},{key:"setData",value:function(t){this.SePower=t.SePower,this.zhuanType=t.zhuanType||0,this._type=t.hand_type||0,this.btn.text=(t.btn_text||this.startupStr)===this.startupStr?this.stopItStr:this.startupStr,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.btnTabHandle(),this.fresh_xianzhu_frameFromType()}},{key:"fresh_xianzhu_frameFromType",value:function(){0===this._type?(this.xianzhu.currentFrame=0,this.zhuanYing.visible=!0):(this.xianzhu.currentFrame=1,this.zhuanYing.visible=!1)}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.DRAG,name:this.language.getLocaleStr("voltage"),canEnter:!0,enterUnit:"",maxValue:6,minValue:0,showValue:this.SePower,step:1,callBack:function(e){var i=l.M.getNumStr(e.showValue);t.SePower=i,t.freshcacu()}},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("direction"),checked:this.zhuanType,value:this.zhuanTypeArr,callBack:function(e){t.zhuanType=e.checked,t.freshcacu()}},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("type"),checked:this._type,value:this._typeArr,callBack:function(e){t._type=e.checked,t.fresh_xianzhu_frameFromType()}}),i}},{key:"getTipMess",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("voltage")+": "+this.SePower+"V\n    "+this.language.getLocaleStr("direction")+": "+this.zhuanTypeArr[this.zhuanType]+"\n    "+this.language.getLocaleStr("type")+": "+this._typeArr[this._type]+"\n    "}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.SePower=this.SePower,t.zhuanType=this.zhuanType,t._type=this._type,t}},{key:"setDefaultOrigin",value:function(){this.SePower=6,this.zhuanType=0,this._type=0}},{key:"defaultSettingChanged",value:function(){this.freshcacu(),this.fresh_xianzhu_frameFromType()}}]),e}(h["default"])},869:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(474),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=5;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.validNum=2,i.resArr=["0Ω","0.5Ω","1Ω","2Ω","5Ω"],i.validNumArr=["1","2","3"],i._zhenRangeAngle=l.M.toHu(51),i.oriAngle=-i._zhenRangeAngle/2,i.unit="A",i.rotPower=0,i.curPower=0,i.vScale=1,i.angleP=i._zhenRangeAngle/.4,i.MIN_POWER=-.2,i.MAX_POWER=.6,i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:3,pos:[[1,0],[2,0],[3,0]],wire:[[[1,1],[2,0]],[[2,1],[3,0]],[[3,1],[1,0]]],res:[[1,.19999],[2,7e-5],[3,1e-5]]})}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.freshLabel("0A"),this.zhen.rotation=this.oriAngle,this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter2.bindinger.linkWireType=2,this.drawDis=52,this.bposter0.dp.setTo(-2,5),this.bposter1.dp.setTo(-15,5),this.bposter2.dp.setTo(2,5)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"overStep",value:function(){if(this.bar1.isBreak)return this.curPower=0,void this.freshLabel("");var t=void 0,e=void 0;if(this.bposter0.bindinger&&this.bposter0.bindinger.friendPostersArr.length>1&&this.bposter1.bindinger.friendPostersArr.length>1&&this.bposter2.bindinger.friendPostersArr.length>1){if(0!==this.bar1.curPower&&0!==this.bar2.curPower)for(t=0,e=this.bposter2.bindinger.friendPostersArr.length,t=0;e>t;t++){var i=this.bposter2.bindinger.friendPostersArr[t],n=i.body;if(n&&0!==n.curElec)return void this.freshLabel("错误")}}else this.updateLabel();this.vScale=this.bposter0.bindinger&&this.bposter0.bindinger.friendPostersArr.length>1&&this.bposter2.bindinger.friendPostersArr.length>1?5:1,this.curPower=-(this.bar1.curElec+this.bar3.curElec)/this.vScale}},{key:"break",value:function(){this.bar1.isBreak=!0,this.bar2.isBreak=!0,this.bar3.isBreak=!0,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this)}},{key:"repair",value:function(){this.bar1.isBreak=!1,this.bar2.isBreak=!1,this.bar3.isBreak=!1,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.validNum=this.validNum,t.bar2Resistance=this.bar2.Resistance,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.validNum=t.validNum;var i=t.bar2Resistance;i>7e-5?(this.bar1.Resistance=2500*i,this.bar2.Resistance=1*i,this.bar3.Resistance=.25*i):(this.bar1.Resistance=.19999,this.bar2.Resistance=7e-5,this.bar3.Resistance=1e-5),t.isBreak&&(this.bar1.isBreak=!0,this.bar2.isBreak=!0,this.bar3.isBreak=!0)}},{key:"getShowValue",value:function(){return this.bar2.Resistance>7e-5?this.bar2.Resistance/.8+"Ω":"0Ω"}},{key:"getConf",value:function(){var t=this,i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this),n=this.getShowValue();return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("small_InResistance"),canEnter:!0,enterUnit:"Ω",maxValue:5,minValue:0,showValue:n,value:this.resArr,callBack:function(e){var i=l.M.getNumStr(e.showValue);i>7e-5?(t.bar1.Resistance=2500*i*.8,t.bar2.Resistance=1*i*.8,t.bar3.Resistance=.25*i*.8):(t.bar1.Resistance=.19999,t.bar2.Resistance=7e-5,t.bar3.Resistance=1e-5),t.diyChanged()}},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("decimalDigits"),checked:l.ArrayUtil.getIndexFromValue(this.validNumArr,this.validNum+""),value:this.validNumArr,callBack:function(e){t.validNum=t.validNumArr[e.checked]-0,t.diyChanged()}}),i}},{key:"getTipMess",value:function(){var t=this.getShowValue(),i=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return i+="\n    "+this.language.getLocaleStr("small_InResistance")+": "+t+"\n    "}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.validNum=this.validNum,t.bar2Resistance=this.bar2.Resistance,t}},{key:"setDefaultSetting",value:function(t){this.validNum=t.validNum;var e=t.bar2Resistance;e>7e-5?(this.bar1.Resistance=2500*e,this.bar2.Resistance=1*e,this.bar3.Resistance=.25*e):(this.bar1.Resistance=.19999,this.bar2.Resistance=7e-5,this.bar3.Resistance=1e-5)}},{key:"setDefaultOrigin",value:function(){this.validNum=2,this.bar1.Resistance=.19999,this.bar2.Resistance=7e-5,this.bar3.Resistance=1e-5}}]),e}(h["default"])},870:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(443),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.showElecMagLine=1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.init(0)}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}}]),e}(u["default"])},871:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(557),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(s["default"])},872:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(560),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){return n(this,e),t.dependClass="IronNail",t.zhenNumName="IronNailNum",r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s["default"])},873:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:g(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(101),c=n(h),p=i(915),f=n(p),d=i(6),y=n(d);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.classname="JouleLaw",i.bg=null,i.redLiquidL=null,i.redLiquidR=null,i.btnL=null,i.btnR=null,i.redLiquidColumnL=null,i.redLiquidColumnR=null,i.resArr=["5Ω","10Ω","15Ω","20Ω","50Ω","100Ω"],i.index01=0,i.index02=0,i.index03=0,i.index04=0,i.sa=1,i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.btnL.alpha=0,this.btnR.alpha=0,this.addCursor(this.btnL,"hand"),this.addCursor(this.btnR,"hand"),this.clickIdL=u.M.addTouch(this.btnL,{tab:this.btnLClicked},this),this.clickIdR=u.M.addTouch(this.btnR,{tab:this.btnRClicked},this),this.redLiquidColumnL=new f["default"](this,this.redLiquidL),this.redLiquidColumnR=new f["default"](this,this.redLiquidR),this.saChanged({showValue:this.sa}),this.tickerId=u.M.addTicker(function(){t.update()},this,!0)}},{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:4,pos:[[1,0],[1,1],[2,0],[2,1],[3,0],[3,1],[4,0],[4,1]],wire:[],res:[[1,this.getRValue(this.index01)],[2,this.getRValue(this.index02)],[3,this.getRValue(this.index03)],[4,this.getRValue(this.index04)]]})}},{key:"removed",value:function(){this.removedCursor(this.btnL),this.removedCursor(this.btnR),this.redLiquidColumnL.destroy(),this.redLiquidColumnR.destroy(),u.M.removeTouch(this.btnL,this.clickIdL),u.M.removeTouch(this.btnR,this.clickIdR),u.M.removeTicker(this.tickerId),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"overStep",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"overStep",this).call(this),this.p3=this.bar3.curPower*this.bar3.curElec}},{key:"update",value:function(){var t=this.getP(this.bar3),e=this.getP(this.bar4),i=this.getP(this.bar2);this.redLiquidColumnL.addEnergy(.016*(t+e)),this.redLiquidColumnR.addEnergy(.016*i),this.redLiquidColumnL.update(),this.redLiquidColumnR.update()}},{key:"getP",value:function(t){return Math.abs(t.curPower*t.curElec)}},{key:"btnRClicked",value:function(t){this.redLiquidColumnR.releaseEnergy()}},{key:"btnLClicked",value:function(t){this.redLiquidColumnL.releaseEnergy()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.index01=this.index01,t.index02=this.index02,t.index03=this.index03,t.index04=this.index04,t.sa=this.sa,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.R1Changed({checked:t.index01||0}),this.R2Changed({checked:t.index02||0}),this.R3Changed({checked:t.index03||0}),this.R4Changed({checked:t.index04||0}),this.sa=t.sa||1,this.saChanged({showValue:this.sa})}},{key:"getRValue",value:function(t){return u.M.getNumStr(this.resArr[t])}},{key:"R1Changed",value:function(t){this.index01=t.checked,this.bar1.Resistance=this.getRValue(this.index01),this.bar1.branchChange=!0}},{key:"R2Changed",value:function(t){this.index02=t.checked,this.bar2.Resistance=this.getRValue(this.index02),this.bar2.branchChange=!0}},{key:"R3Changed",value:function(t){this.index03=t.checked,this.bar3.Resistance=this.getRValue(this.index03),this.bar3.branchChange=!0}},{key:"R4Changed",value:function(t){this.index04=t.checked,this.bar4.Resistance=this.getRValue(this.index04),this.bar4.branchChange=!0}},{key:"saChanged",value:function(t){this.sa=t.showValue,this.redLiquidColumnL.sa=this.sa,this.redLiquidColumnR.sa=this.sa}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getDropMenu("R1",!1,"Ω",this.resArr[this.index01],this.resArr,this,this.R1Changed),this.ComponentProperty.getDropMenu("R2",!1,"Ω",this.resArr[this.index02],this.resArr,this,this.R2Changed),this.ComponentProperty.getDropMenu("R3",!1,"Ω",this.resArr[this.index03],this.resArr,this,this.R3Changed),this.ComponentProperty.getDropMenu("R4",!1,"Ω",this.resArr[this.index04],this.resArr,this,this.R4Changed),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("effect_enhancement"),!1,"",10,1,y["default"].round(this.sa,1),.1,this.saChanged,this)),t}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n  R1: "+this.resArr[this.index01]+"\n  R2: "+this.resArr[this.index02]+"\n  R3: "+this.resArr[this.index03]+"\n  R4: "+this.resArr[this.index04]+"\n  "+this.language.getLocaleStr("effect_enhancement")+": "+y["default"].round(this.sa,1)+"\n    "}}]),e}(c["default"])},874:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(625),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i._type=1,i}return o(e,t),a(e,[{key:"setDefaultOrigin",value:function(){this._type=1}}]),e}(l["default"])},875:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isOpen=!1,i.zdl=!1,i.referenceP=new l.Point(2,-65),i.referenceR=77,i.startP=new l.Point(2,0),i.dir_liu=-1,i.Resistance=.001,i}return o(e,t),a(e,[{key:"_init_ros",value:function(){this._addRotateControl()}},{key:"_addRotateControl",value:function(){var t=this;this.parent.updateTransform(),this.xn.pa=this.pa1,this.xn.angleRange=35,this.xn.rotateData={pareComp:this,cenP:function(){return t.toGlobal(t.xn)},rotateHandleFunc:this._rotateHandleFunc},this.phy.addRotateTool(this.xn),this.xnb.pa=this.pa2,this.xnb.angleRange=40,this.xnb.rotateData={pareComp:this,cenP:function(){return t.toGlobal(t.xnb)},rotateHandleFunc:this._rotateHandleFunc},this.phy.addRotateTool(this.xnb)}},{key:"_rotateHandleFunc",value:function(t,e){var i=l.M.getValidAngle(l.M.toAngle(t.rotation+e));i>135&&180>i?i=135:i>=180&&225>i&&(i=225),t.rotation=l.M.toHu(i);var n=0;225>i||i>360?(n+=135,n+=i):n=i-225,n/=270,t.pa.rotation=l.M.toHu(2*t.angleRange*n-t.angleRange),t.per=n,this.updateLine()}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.xn.per=this.xnb.per=.5,l.M.setToggle(this.xn2,{w:10,toggle:function(){t.onToggled()}}),this._onOpenId=l.M.addTouch(this.btn,{tab:this.onOpen},this),this._init_ros(),this.line=new PIXI.Graphics,this.addChild(this.line),this.blurFilter=new PIXI.filters.BlurFilter,this.line.filters=[this.blurFilter],this.freshBlur(),this.updateLine(),this.addCursor(this.xn2,"hand"),this.addCursor(this.btn,"hand"),this.addCursor(this.xn,"rotatebtn"),this.addCursor(this.xnb,"rotatebtn")}},{key:"viewZoomComplete",value:function(){this.freshBlur()}},{key:"freshBlur",value:function(){this.blurFilter.blur=4*Math.sqrt(this.main.view.scale.x)}},{key:"freshPPer",value:function(t,e){t.rotation=l.M.toHu(80*e-40)}},{key:"updateLine",value:function(){this.line.clear();var t=300*this.xn.per,e=4*this.xnb.per;if(this.isOpen&&t){if(this.line.lineStyle(5,6936985),.1>Math.abs(e))return this.line.moveTo(this.startP.x-2,this.startP.y-5),void this.line.lineTo(this.startP.x+50,this.startP.y-5);var i=10*Math.sqrt(t)/e*this.dir_liu,n=new l.Point(0,-4.5+i),r=-90,o=-1;1===this.dir_liu&&(o=1);var a=void 0;for(a=0;360>=a;a++){r+=o;var s=n.x+i*Math.cos(l.M.toHu(r)),u=n.y+i*Math.sin(l.M.toHu(r));if(l.M.getXYLen(this.referenceP.x,this.referenceP.y,s,u)>this.referenceR)return;0==a?this.line.moveTo(0,-4.5):this.line.lineTo(s,u)}}}},{key:"onOpen",value:function(t,e){0===e.currentFrame?(e.currentFrame=1,this.isOpen=!0,this.light.currentFrame=1,this.Resistance=1e4,this.Power=3e6):(e.currentFrame=0,this.isOpen=!1,this.light.currentFrame=0,this.Resistance=.001,this.Power=0),this.updateLine(),this.diyChanged()}},{key:"onToggled",value:function(t){this.dir_liu*=-1,this.updateLine()}},{key:"removed",value:function(){this.removedCursor(this.xn2),this.removedCursor(this.btn),this.removedCursor(this.xn),this.removedCursor(this.xnb),l.M.removeTouch(this.btn,this._onOpenId),this.phy.removeRotateTool(this.xnb),this.phy.removeRotateTool(this.xn),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"setWorkElec",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t)}}]),e}(h["default"])},876:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:p(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u),c=i(6);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1,t.leftMagNum=-30,t.rightMagNum=30;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.bindCoil=null,i.temp_bindCoil=null,i.dotType=1,i.flag=0,i.level=7,i.oriP=new l.Point,i.showElecMagLine=1,i._testMoveP=new l.Point(0,0),i._magDotRadius=10,i.hasMagLine=!0,i.showMagLine=!0,i.coilArr=i.getBarArr(330,11,10,0,0,0),i.I=1,i.DEBUG=!1,i.oriTime=0,i}return o(e,t),a(e,[{key:"beginEnd",value:function(t){var e=l.M.getMouseXY(t);l.M.setSPPoint(this.oriP,e),this.oriTime=(new Date).getTime()}},{key:"moveEnd",value:function(t){var i=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t);var n=l.M.getMouseXY(t);if(n.y-this.oriP.y!=0||0>=Math.abs(n.x-this.oriP.x)){this.bindCoil?this.checkAndBind(null,!1):each(this.staCompArr,function(t,e){if("SpacedCoil"===e.classname&&!e.bind_MagnetBar)return i.checkAndBind(e,!0),i.bindCoil&&i.canRotate&&(i.canRotate=!1,i.main.hideConfPan()),!1}),this.fresh_dragBound(),this.fresh_clipRect();var r=(new Date).getTime(),o=(n.y-this.oriP.y)/(r-this.oriTime);2===this.dotType&&(o*=-1),clearTimeout(this.speedTimer),this.speedTimer=setTimeout(function(){i.speedTimer=null,o=0,i.freshSpeedCacu(o)},200),this.freshSpeedCacu(o),l.M.setSPPoint(this.oriP,n),this.oriTime=r,l.M.setSPPoint(this.oriP,n)}}},{key:"freshSpeedCacu",value:function(t){this.bindCoil&&(this.bindCoil.caculateVolt(!0,t),this.bindCoil.bar2.branchChange=!0)}},{key:"endEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.bindCoil||this.canRotate||(this.canRotate=!0,this.main.hideConfPan())}},{key:"bindTo",value:function(t){this.bindCoil=t,this.mask=this.bindCoil?this.bindCoil.maskg:null}},{key:"checkAndBind",value:function(t,e){var i=this.toGlobalView(this.cirSP1,this.componentBox),n=this.toGlobalView(this.cirSP2,this.componentBox),r=void 0;if(i.y>n.y?(this.dotType=1,r=i):(this.dotType=2,r=n),e&&!this.bindCoil){if(t.getHitRect().containsPoint(r)){var o=l.M.getValidAngle(l.M.toAngle(this.componentBox.rotation)),a=!1;o>250&&290>o?(this.componentBox.rotation=l.M.toHu(270),a=!0):o>70&&110>o&&(this.componentBox.rotation=l.M.toHu(90),a=!0),a&&(t.bindMagBar=this)}}else if(!e&&this.bindCoil){var s=this.bindCoil.getHitRect();s&&r.y>=s.y||(this.bindCoil.bindMagBar=null)}}},{key:"fresh_clipRect",value:function(t,e){this.mask=this.bindCoil?this.bindCoil.maskg:null}},{key:"fresh_dragBound",value:function(){if(this.bindCoil){var t=this.bindCoil.toGlobalView(new l.Point,this.bindCoil);this.setDragRect(new l.Rectangle(t.x-15,t.y-500,33,450))}else this.setDragRect(null)}},{key:"fresh_ct",value:function(t){if(this.bindCoil){var e=1===this.dotType?-.001:.001;e*=t,this.bindCoil.setSource(e)}}},{key:"added",value:function(){if(this.cirSP1=new l.Point(-175,0),this.cirSP2=new l.Point(175,0),this.add2component(this.bg),this.bg.currentFrame=0,this.DEBUG){var t=new PIXI.Graphics;t.beginFill(16711680),t.drawCircle(this.cirSP1.x,this.cirSP1.y,5),t.drawCircle(this.cirSP2.x,this.cirSP2.y,5),t.endFill(),this.add2component(t)}s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"addedEnd",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"removed",value:function(){this.bindCoil&&(this.bindCoil.bindMagBar=null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){t.showMagLine=(0,c.get)(t,"showMagLine",!0),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t)}},{key:"getComps",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getComps",this).call(this);return t.forEach(function(t){t.data.notHalfStep=!0}),t}},{key:"getMagLineStartAngle",value:function(){return this.componentBox.rotation-Math.PI/2}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}}]),e}(h["default"])},877:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1,t.leftMagNum=30,t.rightMagNum=-30;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.Resistance=10,i.hasReversal=!0,i.hasMagReversal=!0,i.canMagReversal=!0,i.hasMagLine=!0,i.showMagLine=!1,i.coilArr=i.getUArr(75,90,3,6,5,-Math.PI/2,-28,-30),i.I=-1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.rate=.1;var t=this;this.ticker=new PIXI.ticker.Ticker,this.ticker.add(function(e){t._onEnter.call(t)}),this.ticker.start(),this.bposter0.bindinger.linkWireType=2,this.bposter1.bindinger.linkWireType=2,this.bposter0.dp.setTo(-15,-8),this.bposter1.dp.setTo(-15,-8),this.bg=this.magnet}},{key:"_onEnter",value:function(){var t=this.gan.x,e=this.curPower*this.rate*-1;this.hasMagReversal&&(e*=-1),t=l.M.range(t+e,-110,150),this.gan.x!=t&&(this.gan.x=t)}},{key:"removed",value:function(){this.ticker.stop(),this.ticker=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}},{key:"getMagComps3D",value:function(){return this.I=-1,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMagComps3D",this).call(this)}}]),e}(h["default"])},878:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function _(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:_(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(214),c=n(h),p=i(104),f=n(p),d=i(69),y=n(d),g=i(6);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=-1,t.leftMagNum=-30,t.rightMagNum=30;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.showElecMagLine=1,i.hasMagLine=!0,i.showMagLine=!0,i.coilArr=[{dir:1,x:-70,y:-98},{dir:-1,x:-50,y:-98},{dir:1,x:-70.45,y:-76.65},{dir:-1,x:-50.45,y:-76.65},{dir:1,x:-70.45,y:-55.35},{dir:-1,x:-50.45,y:-55.35},{dir:1,x:-70.45,y:-34},{dir:-1,x:-50.45,y:-34},{dir:1,x:-70.45,y:-12.649999999999999},{dir:-1,x:-50.45,y:-12.650000000000002},{dir:1,x:-70.45,y:8.700000000000001},{dir:-1,x:-50.45,y:8.699999999999998},{dir:1,x:-70,y:30},{dir:-1,x:-50,y:30},{dir:1,x:-64.49948250998894,y:56.05093058308208},{dir:-1,x:-46.000517490011056,y:48.44906941691792},{dir:1,x:-48.782671589808814,y:77.95944496054153},{dir:-1,x:-34.61732841019119,y:63.84055503945848},{dir:1,x:-26.331297115119582,y:92.63694551330019},{dir:-1,x:-18.668702884880418,y:74.16305448669982},{dir:1,x:-.0007616640710252027,y:97.44999997099339},{dir:-1,x:.0007616640710252027,y:77.45000002900662},{dir:1,x:26.200447773810524,y:92.54968089820068},{dir:-1,x:18.599552226189473,y:74.05031910179932},{dir:1,x:48.55939214591815,y:77.68272423084147},{dir:-1,x:34.44060785408185,y:63.517275769158516},{dir:1,x:64.03694551330018,y:56.13129711511958},{dir:-1,x:45.56305448669981,y:48.468702884880415},{dir:1,x:70,y:29.999999999999996},{dir:-1,x:50,y:30.000000000000004},{dir:1,x:69.6,y:8.699999999999998},{dir:-1,x:49.6,y:8.700000000000001},{dir:1,x:69.6,y:-12.600000000000001},{dir:-1,x:49.6,y:-12.599999999999998},{dir:1,x:69.55,y:-33.95},{dir:-1,x:49.55,y:-33.95},{dir:1,x:69.55,y:-55.3},{dir:-1,x:49.55,y:-55.3},{dir:1,x:69.55,y:-76.6},{dir:-1,x:49.55,y:-76.6},{dir:1,x:70,y:-98},{dir:-1,x:50,y:-98}],i.I=1,i}return a(e,t),s(e,[{key:"added",value:function(){this.add2component(this.bg),this.bg.currentFrame=0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"addedEnd",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"removed",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"rotateChange",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotateChange",this).call(this,t)}},{key:"getData",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){t.showMagLine=(0,g.get)(t,"showMagLine",!0),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t)}},{key:"getElecs",value:function(){for(var t=this._magDotRadius||15,e=new u.Point(this.lr0.x+this.lr0.width/2,this.lr0.y+this.lr0.height/2),i=new u.Point(this.lr1.x+this.lr1.width/2,this.lr1.y+this.lr1.height/2),n=this.createElecs(this.left.magNum,150,5,t,e.x,e.y,2),r=this.createElecs(this.right.magNum,150,5,t,i.x,i.y,2),o=n.length,a=0;o>a;a++){var s=n[a],l=r[a];s.elecNum*=.8+.8*a/o,l.elecNum*=.8+.8*a/o}return n.concat(r)}},{key:"getComps",value:function(){var t=new u.Point(this.lr0.x+this.lr0.width/2,this.lr0.y+this.lr0.height/2),e=new u.Point(t.x,t.y+150);t=this.toGlobalView(t,this.componentBox),e=this.toGlobalView(e,this.componentBox);var i=new u.Point(this.lr1.x+this.lr1.width/2,this.lr1.y+this.lr1.height/2),n=new u.Point(i.x,i.y+150);i=this.toGlobalView(i,this.componentBox),n=this.toGlobalView(n,this.componentBox);var r=this._magDotRadius||15,o=this.componentBox.rotation,a=y["default"].getTotalElecLineNum(this.left.magNum,2),s=y["default"].getTotalElecLineNum(this.right.magNum,2);return[this.pointComp(2*this.left.magNum/3,Math.round(2*a/3),t,r,f["default"].TYPE_LEFT,o+Math.PI/2,1),this.rodComp(this.left.magNum/2,Math.round(a/2),t,e,r,2),this.pointComp(1*this.left.magNum/3,Math.round(1*a/3),e,r,f["default"].TYPE_RIGHT,o+Math.PI/2,3),this.pointComp(2*this.right.magNum/3,Math.round(2*s/3),i,r,f["default"].TYPE_LEFT,o+Math.PI/2,-1),this.rodComp(this.right.magNum/2,Math.round(s/2),i,n,r,-2),this.pointComp(1*this.right.magNum/3,Math.round(1*s/3),n,r,f["default"].TYPE_RIGHT,o+Math.PI/2,-3)]}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}}]),e}(c["default"])},879:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(6),h=n(u),c=i(0),p=i(214),f=n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=-1;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.dial=null,i.needle=null,i.canFreshMag=!0,i.level=6,i._tInd=0,i._old=0,i.ticker=c.M.addTicker(i.update,i),i.targetAngle=0,i.rotSpeed=0,i.showDialFlag=!0,i.size=1,i}return a(e,t),s(e,[{key:"update",value:function(){if(this.targetAngle!==this.needle.rotation){var t=this.targetAngle-this.needle.rotation;if(t%=2*Math.PI,0>t&&(t+=2*Math.PI),t>Math.PI&&(t-=2*Math.PI),.01>Math.abs(t)&&.01>Math.abs(this.rotSpeed))this.needle.rotation=this.targetAngle,this.rotSpeed=0;else{this.rotSpeed+=.1*t,this.needle.rotation+=this.rotSpeed,this.rotSpeed*=.9}}}},{key:"freshRotation",value:function(t){if(0===t.x&&0===t.y)return void(this.targetAngle=0);this.canFreshMag=!(!t||0!==t.x||0!==t.y);var e=Math.atan2(t.x,-t.y),i=void 0;i=e,this.targetAngle=i}},{key:"freshMag",value:function(t){if(this._tInd>=5){if(1>Math.abs(Math.abs(t)-Math.abs(this._old)))return void(this._old=t);this._old=t,this._tInd=0,this.canFreshMag&&(this.targetAngle=(-90-Math.round(t))/180*Math.PI)}this._tInd++}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"addedEnd",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addedEnd",this).call(this)}},{key:"removed",value:function(){c.M.removeTicker(this.ticker),this.ticker=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"showDialCallBack",value:function(t){this.showDialFlag=!!t.checked,this.bg.visible=this.showDialFlag}},{key:"sizeChangeCallBack",value:function(t){this.size=t.showValue,this.bg.scale.x=this.bg.scale.y=this.size,this.needle.scale.x=this.needle.scale.y=this.size}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.showDialFlag=this.showDialFlag,t.size=this.size,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.showDialFlag=!t.hasOwnProperty("showDialFlag")||!!t.showDialFlag,this.size=+t.size||1,this.showDialCallBack({checked:this.showDialFlag}),this.sizeChangeCallBack({showValue:this.size})}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getSwitch(this.language.getLocaleStr("show_dial"),this.showDialFlag,this.showDialCallBack,this),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("size"),!1,"",2,.2,h["default"].round(this.size,2),.01,this.sizeChangeCallBack,this)),t}},{key:"getElecs",value:function(){return[]}},{key:"getComps",value:function(){return[]}},{key:"getLocalBoundsElecs",value:function(){return this.bg.visible?[this.bg]:[this.needle]}}]),e}(f["default"])},880:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(443),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.showElecMagLine=1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.init(0)}},{key:"getElecs",value:function(){var t=this.startPRadius,e=new l.Point(0,-43);return this.createElecs(this.elecNum,386,8,t,e.x-193,e.y,1)}},{key:"getComps",value:function(){return this.getComp01(this.elecNum,new l.Point(0,-43),386,0)}},{key:"getComps3D",value:function(){return[this.getComp3D(this.elecNum,new l.Point(0,-43),386,this.componentBox.rotation)]}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}}]),e}(h["default"])},881:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=(i(0),i(101)),h=n(u),c=i(486),p=n(c);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=0;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.metaInd=0,i.metaArr=[i.language.getLocaleStr("NiCrWire"),i.language.getLocaleStr("iron_wire")],i.Resistance=10,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.go1=new p["default"](this.moduleMain),this.addChild(this.go1),this.go1.setPArr([new PIXI.Point(77,-7),new PIXI.Point(-77,-7)])}},{key:"removed",value:function(){this.go1.parent.removeChild(this.go1),this.go1.removed(),this.go1=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkElec",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.go1.freshElecNum(this.hasReversal?t:-t)}},{key:"freshMeta",value:function(){this.metaInd!==this.bg.currentFrame&&(this.bg.gotoAndStop(this.metaInd),this.Resistance=[10,.98][this.metaInd],this.branchChange=!0)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.metaInd=this.metaInd,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.metaInd=t.metaInd,this.freshMeta()}},{key:"update",value:function(){this.go1.update()}},{key:"getTipMess",value:function(){var t='x10<font class="pre-snum">-7</font>m<font class="pre-snum">2</font>',i=this.language.getLocaleStr("cross_area"),n=this.language.getLocaleStr("length"),r=this.language.getLocaleStr("iron_wire"),o=this.language.getLocaleStr("NiCrWire"),a=1===this.metaInd?r:o,s=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this,a);return s+="\n    "+n+"：1m\n    "+i+"：1"+t}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("type"),this.metaInd,this.metaArr,function(e){t.metaInd=e.checked,t.freshMeta(),t.freshLibPan()})),i}},{key:"freshElecLineVisible",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"freshElecLineVisible",this).call(this),this.go1.visible=this.globalConfig.showElecLine}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.metaInd=this.metaInd,t}},{key:"setDefaultSetting",value:function(t){this.metaInd=t.metaInd}},{key:"setDefaultOrigin",value:function(){this.metaInd=0}},{key:"defaultSettingChanged",value:function(){this.freshMeta()}}]),e}(h["default"])},882:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(443),c=n(h),p=i(6),f=n(p);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.showElecMagLine=1,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.init(-100)}},{key:"elecChanged",value:function(t){this.elecNum=10*u.M.getNumStr(t.showValue)}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("elecAmount"),!0,"C",0,-10,f["default"].round(this.elecNum/10,2),.01,this.elecChanged,this)),t}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n  "+this.language.getLocaleStr("elecAmount")+": "+f["default"].round(this.elecNum/10,2)+"\n    "}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t._elecNum=this._elecNum,t}},{key:"setDefaultOrigin",value:function(){this._elecNum=-100}}]),e}(c["default"])},883:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function w(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:w(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(6),c=i(101),p=n(c),f=i(102),d=(n(f),i(457)),y=n(d),g=i(464),_=n(g),b=i(628),v=n(b),m=i(629),P=n(m);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.rot00=null,i.rot01=null,i.rot02=null,i.rot03=null,i.rot04=null,i.rot05=null,i.rot06=null,i.rot07=null,i.rot08=null,i.rot09=null,i.switch00=null,i.switch01=null,i.switch02=null,i.bp0=null,i.bp1=null,i.bp2=null,i.light=null,i.principle=null,i.pType=1,i.customButtonArr=[],i.isOpen=!1,i.isAc=!1,i.syncNeg=!0,i.pFlag=!1,i.brightness=1,i.focus00=0,i.focus01=0,i.yGain=1,i.xGain=1,i.offX=0,i.offY=0,i.yLevel=0,i.xLevel=0,i.yDamping=1,i.frequency=1,i.frequencyScale=.25,i.powerX=0,i.powerY=0,i.xSignal=new v["default"](50,1,0),i.ySignal=new P["default"](50,4,0),i.t=0,i.lastT=0,i.freqArr=[1,Infinity],i.MAX_X_LEVEL=1,i.dampArr=[1,10,100,1e3,1],i.principleLineGra=null,i.screenCon=null,i.waveCon=null,i.dotPool=[],i.dotR=1,i.MAX_RESISTANCE=1e8,i}return a(e,t),s(e,[{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bp0.visible=!1,this.bp1.visible=!1,this.bp2.visible=!1,this.customButtonArr.push(new y["default"](this.switch00,this,1,0,this.switchCallBack00,this.isOpen,[this.light]),new y["default"](this.switch01,this,1,0,this.switchCallBack01,this.isAc,null),new y["default"](this.switch02,this,1,0,this.switchCallBack02,this.syncNeg,null));var i=2*Math.PI,n=u.M.toHu(60);this.customButtonArr.push(new _["default"](this.rot00,this,0,-i,i,0,this.rotateCallBack00).setValueRange(0,8).setValue(this.brightness),new _["default"](this.rot01,this,0,-i,i,0,this.rotateCallBack01).setValueRange(-5,5).setValue(this.focus00),new _["default"](this.rot02,this,0,-i,i,0,this.rotateCallBack02).setValueRange(-.1,.1).setValue(this.focus01),new _["default"](this.rot03,this,0,-i,i,0,this.rotateCallBack03).setValueRange(-60,60).setValue(this.offY),new _["default"](this.rot04,this,0,-i,i,0,this.rotateCallBack04).setValueRange(-1,1).setValue(Math.log10(this.yGain)),new _["default"](this.rot05,this,0,-i,i,0,this.rotateCallBack05).setValueRange(-1,1).setValue(Math.log10(this.xGain)),new _["default"](this.rot06,this,0,-i,i,0,this.rotateCallBack06).setValueRange(-60,60).setValue(this.offX),new _["default"](this.rot07,this,0,-i,i,0,this.rotateCallBack07).setValueRange(-1,0).setValue(Math.log10(this.frequencyScale)),new _["default"](this.rot08,this,n/2,-n,n,0,this.rotateCallBack08).setLevel0Angle(-n).setLevel(0),new _["default"](this.rot09,this,2*n/this.MAX_X_LEVEL,-n,n,0,this.rotateCallBack09).setLevel0Angle(-n).setLevel(0)),this.setPtype(this.pType),this.pFlagChanged({checked:this.pFlag}),this.screenCon=new PIXI.Container,this.addChild(this.screenCon),this.screenCon.x=-34,this.screenCon.y=-97;var r=new PIXI.Graphics;this.screenCon.addChild(r),r.beginFill(16711680,.5),r.drawCircle(0,0,68),r.endFill(),this.screenCon.mask=r,this.waveCon=new PIXI.Graphics,this.screenCon.addChild(this.waveCon),this.waveCon.scale.y=-1,this.principleLineGra=new PIXI.Graphics,this.principle.addChildAt(this.principleLineGra,1),this.principleLineGra.x=-100,this.principleLineGra.y=0,this.lastT=(new Date).getTime(),this.lastT=this.elecUtil.getTime(),this.ticker=u.M.addTicker(this.update,this,!0),this.dragId=u.M.addDrag(this.principle,null,{begin:function(e){t.cannotSystemDrag=!0},end:function(e){t.cannotSystemDrag=!1}},this),this.principle.getMScale=function(){return t.getMain().view.scale}}},{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:4,pos:[[2,1],[1,0],[4,1]],wire:[[[1,1],[2,0]],[[2,1],[3,0]],[[3,1],[4,0]]],res:[[1,this.MAX_RESISTANCE],[2,this.MAX_RESISTANCE],[3,this.MAX_RESISTANCE],[4,this.MAX_RESISTANCE]]}),this.isOpen?this.open():this.close()}},{key:"removed",value:function(){u.M.removeDrag(this.principle,this.dragId),this.principle.getMScale=null,this.customButtonArr.forEach(function(t){t.destroy()}),this.customButtonArr=null,u.M.removeTicker(this.ticker),this.ticker=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){var t=(new Date).getTime(),e=t-this.lastT;this.lastT=t;var i=0,n=0;this.updateDots(),this.isOpen?(4===this.yLevel?(this.ySignal.update(),n=this.ySignal.getValue(this.t)):n=-(this.bar1.curPower+this.bar2.curPower),n*=this.yGain/this.yDamping,n+=this.offY,this.xLevel===this.MAX_X_LEVEL?i=this.bar3.curPower+this.bar4.curPower:(this.xSignal.T=1/this.getFrequency(),this.xSignal.phi=this.syncNeg?Math.PI:0,this.xSignal.update(),i=this.xSignal.getValue(this.t)),i*=this.xGain,i+=this.offX,this.t+=e/1e3,this.dotR=1*(Math.abs(this.focus00)+1+Math.abs(this.focus01)),this.addDot(this.powerX,this.powerY)):this.t=0,this.powerX=i,this.powerY=n,this.principleLineGra.visible=this.isOpen,this.updatePrincipleLine()}},{key:"startStep",value:function(){this.update()}},{key:"overStep",value:function(){this.branchChange=!0}},{key:"updatePrincipleLine",value:function(){this.principleLineGra.clear(),this.principleLineGra.lineStyle(2,16725504,1);var t=void 0,e=void 0,i=void 0;1===this.pType?(t=100,e=23*this.powerX/65,i=65*this.powerY/65):(t=150,e=23*this.powerY/65,i=65*this.powerX/65);var n=Math.sqrt(65*e/23*(65*e/23)+i*i);if(n>65){var r=65/n;e*=r,i*=r}-23>e&&(e=-23),e>23&&(e=23),-65>i&&(e=-65),e>65&&(e=65),this.principleLineGra.moveTo(0,0),this.principleLineGra.lineTo(t,0),this.principleLineGra.lineTo(290+e,i)}},{key:"updateDots",value:function(){for(var t=this.waveCon.children.length-1;t>=0;t--){var e=this.waveCon.children[t];e.brightness-=.01,e.alpha=e.brightness,e.alpha>0||(this.waveCon.removeChildAt(t),this.dotPool.push(e))}}},{key:"addDot",value:function(t,e){var i=this.dotPool.pop();if(!i){i=new PIXI.Container;var n=PIXI.Sprite.fromFrame("Oscilloscope/dot.png");i.addChild(n),n.x=-5,n.y=-5}i.scale.x=i.scale.y=this.dotR/10,i.brightness=this.brightness,this.waveCon.addChild(i),i.x=t,i.y=e,i.alpha=this.brightness}},{key:"caculateOver",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"caculateOver",this).call(this)}},{key:"open",value:function(){this.isOpen=!0,this.elecUtil.linkWireBindMC(this.wire1.bposter1,this.bar2.bposter0),this.elecUtil.linkWireBindMC(this.wire3.bposter1,this.bar4.bposter0)}},{key:"close",value:function(){this.isOpen=!1,this.wire1.unLink(this.wire1.bposter1),this.wire3.unLink(this.wire3.bposter1)}},{key:"switchCallBack00",value:function(t,e){this.isOpen=e,this.isOpen?this.open():this.close(),t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE)}},{key:"switchCallBack01",value:function(t,e){this.isAc=e,this.freshGlow()}},{key:"switchCallBack02",value:function(t,e){this.syncNeg=e,this.freshGlow()}},{key:"rotateCallBack00",value:function(t,e,i,n,r){this.brightness=r.getValue()}},{key:"rotateCallBack01",value:function(t,e,i,n,r){this.focus00=r.getValue()}},{key:"rotateCallBack02",value:function(t,e,i,n,r){this.focus01=r.getValue()}},{key:"rotateCallBack03",value:function(t,e,i,n,r){this.offY=r.getValue()}},{key:"rotateCallBack04",value:function(t,e,i,n,r){this.yGain=Math.pow(10,r.getValue())}},{key:"rotateCallBack05",value:function(t,e,i,n,r){this.xGain=Math.pow(10,r.getValue())}},{key:"rotateCallBack06",value:function(t,e,i,n,r){this.offX=r.getValue()}},{key:"rotateCallBack07",value:function(t,e,i,n,r){this.frequencyScale=Math.pow(10,r.getValue())}},{key:"rotateCallBack08",value:function(t,e,i,n,r){this.yLevel=r.getLevel(),this.yDamping=this.dampArr[this.yLevel]}},{key:"rotateCallBack09",value:function(t,e,i,n,r){this.xLevel=r.getLevel(),this.frequency=this.freqArr[this.xLevel]}},{key:"getFrequency",value:function(){return this.frequency*this.frequencyScale}},{key:"setPtype",value:function(t){this.pType=t,this.pType?(this.principle.front.gotoAndStop(1),this.principle.back.gotoAndStop(1)):(this.principle.front.gotoAndStop(0),this.principle.back.gotoAndStop(0))}},{key:"pFlagChanged",value:function(t){this.pFlag=t.checked,this.principle.visible=this.pFlag}},{key:"pTypeChanged",value:function(t){this.setPtype(t.checked?1:0)}},{key:"tChanged",value:function(t){this.frequencyScale=1/t.showValue/this.frequency,this.customButtonArr[10].setValue(Math.log10(this.frequencyScale))}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.isOpen=this.isOpen,t.isAc=this.isAc,t.syncNeg=this.syncNeg,t.brightness=this.brightness,t.focus00=this.focus00,t.focus01=this.focus01,t.offY=this.offY,t.offX=this.offX,t.yGain=this.yGain,t.xGain=this.xGain,t.frequencyScale=this.frequencyScale,t.yDamping=this.yDamping,t.frequency=this.frequency,t.yLevel=this.yLevel,t.xLevel=this.xLevel,t.prPos={x:this.principle.x,y:this.principle.y},t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.isOpen=t.isOpen,this.isAc=t.isAc,this.syncNeg=t.syncNeg,this.brightness=t.brightness,this.focus00=t.focus00,this.focus01=t.focus01,this.offX=t.offX,this.offY=t.offY,this.yGain=t.yGain,this.xGain=t.xGain,this.frequencyScale=t.frequencyScale,this.yLevel=t.yLevel,this.xLevel=t.xLevel,this.customButtonArr[0].setState(this.isOpen),this.customButtonArr[1].setState(this.isAc),this.customButtonArr[2].setState(this.syncNeg),this.customButtonArr[3].setValue(this.brightness),this.customButtonArr[4].setValue(this.focus00),this.customButtonArr[5].setValue(this.focus01),this.customButtonArr[6].setValue(this.offY),this.customButtonArr[7].setValue(Math.log10(this.yGain)),this.customButtonArr[8].setValue(Math.log10(this.xGain)),this.customButtonArr[9].setValue(this.offX),this.customButtonArr[10].setValue(Math.log10(this.frequencyScale)),this.customButtonArr[11].setLevel(this.yLevel),this.customButtonArr[12].setLevel(this.xLevel),this.frequency=this.freqArr[this.xLevel],this.yDamping=this.dampArr[this.yLevel],this.isOpen?this.open():this.close(),this.principle.x=t.prPos.x,this.principle.y=t.prPos.y}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getSwitch(this.language.getLocaleStr("principle"),this.pFlag,this.pFlagChanged,this),this.ComponentProperty.getSwitch(this.language.getLocaleStr("principle")+"X/Y",!!this.pType,this.pTypeChanged,this)),this.xLevel!==this.MAX_X_LEVEL&&t.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("cycle"),!0,"s",(0,h.round)(10/this.frequency,2),(0,h.round)(.1/this.frequency,2),(0,h.round)(1/this.getFrequency(),2),.01,this.tChanged,this)),t}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("cycle")+": "+(0,h.round)(1/this.getFrequency(),2)+"s\n    "}},{key:"freshGlow",value:function(){this.globalConfig.SHOW_GLOW&&(this.glowSPArr[0][0].visible=!this.isAc,this.glowSPArr[0][1].visible=this.isAc,this.glowSPArr[0][2].visible=!this.syncNeg,this.glowSPArr[0][3].visible=this.syncNeg)}},{key:"showGlowIndex",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"showGlowIndex",this).call(this,t),this.freshGlow()}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.pFlag=this.pFlag,t.pType=this.pType,t}},{key:"setDefaultOrigin",value:function(){this.pFlag=!1,this.pType=1}},{key:"defaultSettingChanged",value:function(){this.principle.visible=this.pFlag,this.setPtype(this.pType)}}]),e}(p["default"])},884:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(557),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(s["default"])},885:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(560),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){return n(this,e),t.dependClass="PaperClip",t.zhenNumName="PaperClipNum",r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s["default"])},886:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function b(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:b(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(103),c=n(h),p=i(559),f=n(p),d=i(102),y=n(d),g=i(443),_=n(g);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.electrolyte=null,i.isXi=!1,i.xinState=1,i.resArr=[],i.isZuHeFiled=!0,i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,1]],wire:[[[1,1],[2,0]]],res:[[1,0],[2,y["default"].MIN_RESISTANCE]]}),this.bar1.iElecInter=2,this.bar2.Resistance=.1}},{key:"overStep",value:function(){Math.abs(this.bar2.curElec)>y["default"].DAMAGE_A&&this["break"]()}},{key:"break",value:function(){this.bar1.isBreak=!0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"break",this).call(this)}},{key:"repair",value:function(){this.bar1.isBreak=!1,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"repair",this).call(this)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.Resistance=this.bar2.Resistance,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.bar2.Resistance=t.Resistance}},{key:"turnIn",value:function(t,e){e&&!this.electrolyte?(this.electrolyte=t,this.xinIMG.x=0,this.xinIMG.y=1,this.xinState=2,this.freshXinIMG(),u.M.setSPPoint(this.xinIMG,this.xinIMGBack),this.main.deSelected()):!e&&this.electrolyte&&(this.xinState=1,this.freshXinIMG(),this.electrolyte=null,this.fresh_xinIMG_location())}},{key:"checkXi",value:function(){this.get_xiRect().containsPoint(this.electrolyte.toGlobalView(new u.Point(0,0)))?(this.xinIMG.x=60,this.xinIMG.y=0,this.isXi=!0):(this.turnIn(this.electrolyte,!1),this.isXi=!1)}},{key:"fresh_xinIMG_location",value:function(){if(this.electrolyte){this.main.view.updateTransform();var t=this.toLocal(new u.Point,this.electrolyte.parent);u.M.setSPPoint(this.xinIMG,t)}}},{key:"checkIsIn",value:function(t){return this.get_xiRect().containsPoint(t.toGlobalView.call(t,new u.Point(0,0),t.parent))}},{key:"get_xiRect",value:function(t){var e=this.toGlobalView(new u.Point(0,0),this.xinIMGBack),i=100/this.globalConfig.main.view.scale.x;return new u.Rectangle(e.x-i,e.y-i,2*i,2*i)}},{key:"fresh_bposter0XY",value:function(){this.bposter0.x=this.leftAlpha.x+77,this.bposter0.y=this.leftAlpha.y+186.95,this.freshDp(),this.updateBinds()}},{key:"fresh_Power",value:function(){var t=170-Math.abs(this.bg.y-this.leftAlpha.y);t=u.M.range(t,1,170);var e=Math.abs(this.left.elecNum),i=Math.abs(this.bg.x-this.leftAlpha.x-35.024);i=u.M.range(i,10,175.5),i/=175.5;var n=i/t*e;if(2===this.xinState)switch(this.xinIMG.currentFrame){case 0:this.Power=30*n;break;case 1:this.Power=20*n;break;case 2:this.Power=10*n}else this.Power=40*n;this.Power/=10,this.Power=Math.min(4,this.Power),this.elecUtil.diyChanged()}},{key:"added",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addParticle(),this.freshXinIMG(),this.xinIMG.getMScale=function(){return t.globalConfig.main.view.scale};var i={begin:function(e){t.xinIMGBack.visible?(t.cannotSystemDrag=!0,i.isLock=!0,t.xinState=3,t.freshXinIMG()):i.isLock=!1},end:function(e){if(t.cannotSystemDrag=!1,t.electrolyte){if(t.get_xiRect().containsPoint(t.toGlobalView(new u.Point(0,0),t.xinIMG)))t.xinIMG.x=60,t.xinIMG.y=0,t.xinState=2,t.freshXinIMG();else if(t.electrolyte){t.xinState=1,t.freshXinIMG(),t.electrolyte.parent.parent.updateTransform();var i=t.electrolyte.parent.parent.toLocal(new u.Point(0,0),t.xinIMG);u.M.setSPPoint(t.electrolyte.parent,i),t.electrolyte.freshType(t.xinIMG.currentFrame),t.electrolyte=null,u.M.setSPPoint(t.xinIMG,t.xinIMGBack)}t.fresh_Power()}}};this._xinIMGTouchID=u.M.addDrag(this.xinIMG,null,i,this),this._spDownP=new u.Point;var n=new u.Rectangle(-200,-267,176,340);this._left_alphaSP_touchID=u.M.addTouch(this.leftAlpha,{begin:function(e){t.cannotSystemDrag=!0;var i=u.M.getMouseXY(e);u.M.setSPPoint(t._spDownP,i),t.leftBack.tipsp.visible&&(t.leftBack.tipsp.visible=!1)},move:function(e){var i=u.M.getMouseXY(e),r=i.x-t._spDownP.x,o=i.y-t._spDownP.y;u.M.setSPPoint(t._spDownP,i);var a=t.main.view.scale;r/=a.x,o/=a.y;var s=new u.Point(t.leftAlpha.x+r,t.leftAlpha.y+o);s.x=u.M.range(s.x,n.x,n.x+n.width),s.y=u.M.range(s.y,n.y,n.y+n.height),t.leftAlpha.x===s.x&&t.leftAlpha.y===s.y||(u.M.setSPPoint(t.leftAlpha,s),t.fresh_bposter0XY(),u.M.setSPPoint(t.leftBack,t.leftAlpha),t.fresh_Power())},end:function(e){t.cannotSystemDrag=!1,t.fresh_bposter0XY()}}),this.bposter1.dp.setTo(10,0)}},{key:"freshXinIMG",value:function(){1===this.xinState?(this.electrolyte&&(this.electrolyte.visible=!0),this.xinIMG.alpha=0,this.xinIMGBack.visible=!1):2===this.xinState?(this.electrolyte&&(this.electrolyte.visible=!1,this.xinIMGBack.currentFrame=this.xinIMG.currentFrame=this.electrolyte.bg.currentFrame),this.xinIMG.alpha=0,this.xinIMGBack.visible=!0):(this.electrolyte&&(this.electrolyte.visible=!1),this.xinIMG.alpha=1,this.xinIMGBack.visible=!1),this.fresh_Power()}},{key:"endEnd",value:function(t){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.electrolyte){this.electrolyte.parent.parent.updateTransform();var i=this.electrolyte.parent.parent.toLocal(new u.Point(0,0),this.xinIMG);u.M.setSPPoint(this.electrolyte.parent,i)}}},{key:"addParticle",value:function(){var t=this,e={rect:{x:68,y:0,w:25,h:190},ganP:{x:0,y:0},elecNum:1},i={rect:{x:60,y:-90,w:25,h:190},ganP:{x:0,y:0},elecNum:1};(0,c["default"])(e,this.paramObj),(0,c["default"])(i,this.paramObj),this.left=new f["default"](e),this.zuheFiledCompArr.push(this.left),this.right=new f["default"](i),this.zuheFiledCompArr.push(this.right),this.left.addEventListener("STATICELECTRICOMP_TXT_NUM_CHANGED",function(e){t.txtChange(e)}),this.right.addEventListener("STATICELECTRICOMP_TXT_NUM_CHANGED",function(e){t.txtChange(e)}),this.leftBack.addChild(this.left),this.addChild(this.right)}},{key:"txtChange",value:function(t){var e=t.elec;e===this.left?this.right.elecNum=-this.left.elecNum:e===this.right&&(this.left.elecNum=-this.right.elecNum),this.fresh_Power()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.left_elecNum=this.left.elecNum,this.electrolyte&&(t.xinState=this.xinState,t.electrolyte_UID=this.electrolyte.UID),t}},{key:"setDataOver",value:function(t){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.setData_obj&&this.setData_obj.electrolyte_UID){this.turnIn(this.equipmentUtil.getEquiFromUID(this.setData_obj.electrolyte_UID),!0),this.xinState=t.xinState||1,this.freshXinIMG()}this.setData_obj&&(this.left.elecNum=this.setData_obj.left_elecNum||0,this.right.elecNum=-this.left.elecNum,this.fresh_Power())}},{key:"removed",value:function(){u.M.removeDrag(this.xinIMG,this._xinIMGTouchID),u.M.removeTouch(this.leftAlpha.alphaSP,this._left_alphaSP_touchID),this.xinIMG.getMScale=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"hideTips",value:function(){this.leftBack.tipsp.visible=!1}},{key:"getLocalBoundsElecs",value:function(){return[this.leftAlpha,this.bg]}},{key:"Power",get:function(){return this.bar1.Power},set:function(t){this.bar1&&(this.bar1.Power=t)}}]),e}(_["default"])},887:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(557),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(s["default"])},888:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(560),s=function(t){return t&&t.__esModule?t:{"default":t}}(a);e["default"]=function(t){function e(t){return n(this,e),t.dependClass="Pin",t.zhenNumName="PinNum",r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),e}(s["default"])},889:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:f(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=(i(0),i(102)),h=n(u),c=i(465),p=n(c);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bg=null,i.bp0=null,i.bp1=null,i.alphaSP=null,i.ros=null,i.pointer=null,i.proSet=null,i.alphaSP1=null,i.ros1=null,i.alphaSP2=null,i.ros2=null,i.pointerMask=null,i.seType=-1,i.rosInd=15,i.range=1,i.Rr=0,i.curNum=0,i.pointerTargetRotation=0,i.offOhm=0,i.offRot=0,i.POINTER_MAX_ANGLE=43*Math.PI/180,i.MAX_ROS_ID=18,i.ANGLE_STEP=2*Math.PI/i.MAX_ROS_ID,i.OFF_SET_ANGLE=.5*i.ANGLE_STEP,i.configArr=[{seType:3,resistance:165,power:-.1,range:10,Rr:.2},{seType:3,resistance:16.5,power:-.1,range:1,Rr:.1},{seType:1,resistance:h["default"].MAX_RESISTANCE,power:0,range:2.5,Rr:0},{seType:1,resistance:h["default"].MAX_RESISTANCE,power:0,range:10,Rr:0},{seType:1,resistance:h["default"].MAX_RESISTANCE,power:0,range:50,Rr:0},{seType:1,resistance:h["default"].MAX_RESISTANCE,power:0,range:250,Rr:0},{seType:1,resistance:h["default"].MAX_RESISTANCE,power:0,range:500,Rr:0},{seType:0,resistance:h["default"].MAX_RESISTANCE,power:0,range:500,Rr:0},{seType:0,resistance:h["default"].MAX_RESISTANCE,power:0,range:250,Rr:0},{seType:0,resistance:h["default"].MAX_RESISTANCE,power:0,range:50,Rr:0},{seType:0,resistance:h["default"].MAX_RESISTANCE,power:0,range:10,Rr:0},{seType:0,resistance:h["default"].MAX_RESISTANCE,power:0,range:2.5,Rr:0},{seType:2,resistance:h["default"].MIN_RESISTANCE,power:0,range:2.5,Rr:0},{seType:2,resistance:h["default"].MIN_RESISTANCE,power:0,range:25,Rr:0},{seType:2,resistance:h["default"].MIN_RESISTANCE,power:0,range:250,Rr:0},{seType:-1,resistance:h["default"].MAX_RESISTANCE,power:0,range:0,Rr:0},{seType:3,resistance:16500,power:-5,range:1e3,Rr:.4},{seType:3,resistance:1650,power:-.5,range:100,Rr:.3}],i.acVoltConfig=[[0,-43],[.5,-38],[1,-23],[1.5,-1],[2,21],[2.5,43]],i.ohmConfig=[[0,43],[5,18],[10,6],[15,-2],[20,-10],[30,-17.5],[40,-25],[50,-28],[100,-35],[200,-37.5],[500,-39],[1e3,-40],[1e10,-43]],i}return a(e,t),s(e,[{key:"addRotate",value:function(t,e,i){this.parent.updateTransform(),t.rotateData={rotateType:null===i||i===undefined?0:1,pareComp:this,cenP:function(){return this.toGlobal(t)}.bind(this),rotateHandleFunc:e,downHandleFunc:this.downHandleFunc,upHandleFunc:this.upHandleFunc},this.phy.addRotateTool(t)}},{key:"downHandleFunc",value:function(t){t.addAngle=0}},{key:"upHandleFunc",value:function(t){}},{key:"rotateHandleFunc",value:function(t,e){t.addAngle+=e;var i=!1;t.addAngle>this.ANGLE_STEP?(this.rosInd++,i=!0,t.addAngle=0):-this.ANGLE_STEP>t.addAngle&&(this.rosInd--,i=!0,t.addAngle=0),i&&(this.updateRos(),this.changeSeType(),this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE))}},{key:"rotateHandleFunc1",value:function(t,e){this.ros1.rotation+=e,this.ros1.rotation>2*Math.PI?this.ros1.rotation=2*Math.PI:this.ros1.rotation<2*-Math.PI&&(this.ros1.rotation=2*-Math.PI),this.updateOffRot()}},{key:"rotateHandleFunc2",value:function(t,e){this.ros2.rotation+=e,this.ros2.rotation>4*Math.PI?this.ros2.rotation=4*Math.PI:this.ros2.rotation<4*-Math.PI&&(this.ros2.rotation=4*-Math.PI),this.updateOffOhm(),this.diyChanged()}},{key:"updateOffRot",value:function(){this.offRot=2*this.ros1.rotation/180}},{key:"updateOffOhm",value:function(){this.offOhm=.5*this.ros2.rotation/Math.PI}},{key:"updateRos",value:function(){this.rosInd=this.rosInd%this.MAX_ROS_ID,0>this.rosInd&&(this.rosInd+=this.MAX_ROS_ID,this.rosInd=this.rosInd%this.MAX_ROS_ID),this.ros.rotation=this.rosInd*this.ANGLE_STEP+this.OFF_SET_ANGLE}},{key:"changeSeType",value:function(){var t=this.configArr[this.rosInd];this.seType=t.seType,0===this.seType||1===this.seType?this.bar2.elecConnect=!1:2===this.seType?(this.bar2.Resistance=h["default"].MIN_RESISTANCE,this.bar2.elecConnect=!0):3===this.seType&&(this.bar2.Resistance=1,this.bar2.elecConnect=!0),this.Resistance=t.resistance,this.Power=t.power,this.range=t.range,this.Rr=t.Rr,this.diyChanged()}},{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.pointerMask.alpha=0,this.pointer.mask=this.pointerMask.getChildAt(0),this.Resistance=h["default"].MAX_RESISTANCE,this.alphaSP.alpha=0,this.addRotate(this.alphaSP,this.rotateHandleFunc,1),this.alphaSP1.alpha=0,this.addRotate(this.alphaSP1,this.rotateHandleFunc1),this.alphaSP2.alpha=0,this.addRotate(this.alphaSP2,this.rotateHandleFunc2),this.bposter0.dp.setTo(10,0),this.bposter1.dp.setTo(-10,0),this.addCursor(this.alphaSP,"rotatebtn"),this.addCursor(this.alphaSP1,"rotatebtn"),this.addCursor(this.alphaSP2,"rotatebtn"),this.updateRos(),this.setPointerRotationByPer(0),this.tick=new PIXI.ticker.Ticker,this.tick.add(this.update.bind(this)),this.tick.start(),this.addOthers(),this.pointer.rotation=this.pointerTargetRotation+this.offRot}},{key:"addOthers",value:function(){var t=this,e=this.dependEquipments,i=e[0],n=e[1],r=e[2],o=e[3];setTimeout(function(){t.hadDestory||(i.linkWireBindMC.call(i,i.bposter0,t.bposter0),i.linkWireBindMC.call(i,i.bposter1,o.bposter0),n.linkWireBindMC.call(n,n.bposter0,t.bposter1),n.linkWireBindMC.call(n,n.bposter1,r.bposter0),i.colorIndex=1,i.freshLineType(),i.isDrawType=!0,n.isDrawType=!0,t.diyChanged(),r.rotateA(-30),o.rotateA(30),t.wire0=i,t.wire1=n,t.redNeedle=r,t.blackNeedle=o,t.wire0.getConfJumpTarget=t,t.wire1.getConfJumpTarget=t,t.redNeedle.getConfJumpTarget=t,t.blackNeedle.getConfJumpTarget=t)},0)}},{key:"removed",value:function(){this.removeFromFramework(this.wire0),this.removeFromFramework(this.wire1),this.removeFromFramework(this.redNeedle),this.removeFromFramework(this.blackNeedle),this.removedCursor(this.alphaSP),this.removedCursor(this.alphaSP1),this.removedCursor(this.alphaSP2),this.phy.removeRotateTool(this.alphaSP),this.phy.removeRotateTool(this.alphaSP1),this.phy.removeRotateTool(this.alphaSP2),this.tick&&(this.tick.stop(),this.tick=null),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){var t=this.pointerTargetRotation+this.offRot;if(this.pointer.rotation!==t){var e=t-this.pointer.rotation;.001>Math.abs(e)?this.pointer.rotation=t:this.pointer.rotation+=.1*e}}},{key:"overStep",value:function(){var t=0,e=0;if(this.bar2){switch(_.get(this.bar2,"bposter0.bindinger.unNode.UID")===_.get(this.bar2,"bposter1.bindinger.unNode.UID")&&(e=this.bar2.bposter1.bindinger.Un-this.bar2.bposter0.bindinger.Un),this.seType){case 0:this.curNum=e,t=this.curNum/this.range;break;case 1:this.curNum=Math.abs(e);var i=this.getAngleByConfig(2.5*this.curNum/this.range,this.acVoltConfig);i=Math.PI*i/180,t=this.angle2per(i);break;case 2:this.curNum=e/this.bar2.Resistance,t=1e3*this.curNum/this.range;break;case 3:this.curNum=Math.abs(-this.bar1.Power/e*this.bar2.Resistance-this.bar2.Resistance),t=this.getOhmPer();break;default:this.curNum=0,t=0}this.setPointerRotationByPer(t)}}},{key:"getOhmPer",value:function(){var t=0;t=this.curNum/this.range+4/Math.log(this.Resistance)-this.offOhm;var e=this.getAngleByConfig(t,this.ohmConfig);return e=Math.PI*e/180,this.angle2per(e)}},{key:"angle2per",value:function(t){return(t+this.POINTER_MAX_ANGLE)/(2*this.POINTER_MAX_ANGLE)}},{key:"per2angle",value:function(t){return 2*this.POINTER_MAX_ANGLE*t-this.POINTER_MAX_ANGLE}},{key:"setPointerRotationByPer",value:function(t){-.1>t?t=-.1:t>1.1&&(t=1.1),this.pointerTargetRotation=this.per2angle(t)}},{key:"getAngleByConfig",value:function(t,e){var i=e.length,n=void 0;for(n=0;i>n&&e[n][0]<=t;n++);if(0===n&&(n=1),n>=i)return n=i-1,e[n][1];var r=e[n-1],o=e[n],a=r[0],s=o[0],l=r[1];return l+(o[1]-l)*(t-a)/(s-a)}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.rosInd=this.rosInd,t.rot1=this.ros1.rotation,t.rot2=this.ros2.rotation,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.rosInd=t.rosInd||0,this.ros2.rotation=t.rot2||0,this.ros1.rotation=t.rot1||0,this.updateOffRot(),this.updateOffOhm(),this.updateRos(),this.changeSeType()}}]),e}(p["default"])},890:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(443),c=n(h),p=i(6),f=n(p);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.showElecMagLine=1,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.init(100)}},{key:"elecChanged",value:function(t){this.elecNum=10*u.M.getNumStr(t.showValue)}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("elecAmount"),!0,"C",10,0,f["default"].round(this.elecNum/10,2),.01,this.elecChanged,this)),t}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n  "+this.language.getLocaleStr("elecAmount")+": "+f["default"].round(this.elecNum/10,2)+"\n    "}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t._elecNum=this._elecNum,t}},{key:"setDefaultOrigin",value:function(){this._elecNum=100}}]),e}(c["default"])},891:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(214),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1,t.leftMagNum=30,t.rightMagNum=-30;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.Resistance=10,i.hasReversal=!0,i.hasMagReversal=!0,i.canMagReversal=!0,i.canReversal=!0,i.coil=null,i.arrow=null,i.rotSpeed=0,i.coilCurFrame=0,i.hasMagLine=!0,i.showMagLine=!1,i.coilArr=i.getUArr(95,70,3,5,8,-Math.PI,0,-45),i.I=-1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=50,this.bposter0.dp.setTo(15,-7),this.bposter1.dp.setTo(-14,-6),this.arrow.visible=!1,this.bg=this.magnet,this.coil.gotoAndStop(0)}},{key:"update",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),0!=this.rotSpeed&&(this.coilCurFrame=(this.coilCurFrame+this.rotSpeed+this.coil.totalFrames)%this.coil.totalFrames,Math.floor(this.coilCurFrame)!=this.coil.currentFrame&&this.coil.gotoAndStop(Math.floor(this.coilCurFrame)))}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t),1e-6>Math.abs(t)?(this.arrow.visible=!1,this.rotSpeed=0):(this.arrow.visible=!0,this.rotSpeed=t>0?1:-1,this.hasMagReversal&&(this.rotSpeed*=-1),this.arrow.gotoAndStop(this.rotSpeed>0?0:1))}}]),e}(u["default"])},892:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(527),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){return n(this,e),t.iElecInter=-1,r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"setWorkPower",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkPower",this).call(this,t)}}]),e}(u["default"])},893:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(100),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.WIDTH=247,i.HEIGHT=296,i.level=4,i.equipSupport=null,i.lastP=null,i.assembleSupport=!0,i.tip={x:0,y:-i.HEIGHT,r:40},i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this)}},{key:"removed",value:function(){this.removeAssembleEq(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"beginEnd",value:function(t){this.lastP=this.getMouseXY(t)}},{key:"moveEnd",value:function(t){var e=this.getMouseXY(t);this.equipSupport&&(this.equipSupport.parent.x+=e.x-this.lastP.x,this.equipSupport.parent.y+=e.y-this.lastP.y,this.equipSupport.diyChanged()),this.lastP=e}},{key:"endEnd",value:function(t){this.equipSupport||this.checkAssemble()}},{key:"checkAssemble",value:function(){for(var t=this.main.getEquipmentArr(),e=t.length,i=0;e>i;i++){var n=t[i];if(n&&n.component){var r=n.component;if(r.assemble&&this.checkHit(n.x,n.y)){this.assembleEq(r);var o=this.getHitPointInGlobal();return this.parent.x+=n.x-o.x,void(this.parent.y+=n.y-o.y)}}}}},{key:"checkHit",value:function(t,e){var i=t-this.parent.x-this.tip.x,n=e-this.parent.y-this.tip.y;return this.tip.r>Math.sqrt(i*i+n*n)}},{key:"getHitPointInGlobal",value:function(){return new PIXI.Point(this.parent.x+this.tip.x,this.parent.y+this.tip.y)}},{key:"assembleEq",value:function(t){this.equipSupport=t,t.rotatingSupport=this}},{key:"removeAssembleEq",value:function(){this.equipSupport&&(this.equipSupport.rotatingSupport=null,this.equipSupport.setRotationY(0),this.equipSupport=null)}},{key:"setData",value:function(t){var i=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),setTimeout(function(){i.hadDestory||i.checkAssemble()},100)}}]),e}(u["default"])},894:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:g(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(103),c=n(h),p=i(559),f=n(p),d=i(622),y=n(d);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isZuHeFiled=!0,i.left=null,i.right=null,i.canRotate=!0,i.bindFur=null,i.canReset=!0,i.assemble=!0,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this);var t={};(0,c["default"])(t,this.paramObj,{rect:{x:-this.bg.width/2+10,y:-12.5,w:this.bg.width/2-10,h:25},ganP:{x:0,y:0},elecNum:0}),this.left=new f["default"](t),this.zuheFiledCompArr.push(this.left);var i={};(0,c["default"])(i,this.paramObj,{rect:{x:10,y:-12.5,w:this.bg.width/2-10,h:25},ganP:{x:0,y:0},elecNum:0}),this.right=new f["default"](i),this.zuheFiledCompArr.push(this.right),this.add2component(this.bg),this.add2component(this.left),this.add2component(this.right),this.addOthers()}},{key:"removed",value:function(){this.rotatingSupport&&(this.rotatingSupport.removeAssembleEq(this),this.rotatingSupport=null),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"isItemBelongThis",value:function(t){return t===this||t===this.left||t===this.right||t===this.bindSilk}},{key:"addOthers",value:function(){this.bindFur=this.dependEquipments[0],this._freshBinkSet()}},{key:"moveEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.freshCData()}},{key:"endEnd",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.freshCData()}},{key:"freshCData",value:function(t){this.left.fresh_elecPoint(),this.right.fresh_elecPoint(),this.diyChanged()}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.left_elecNum=this.left.elecNum,t.right_elecNum=this.right.elecNum,this.bindFur&&(t.bindFur_elecNum=this.bindFur.elecNum),t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.left.elecNum=t.left_elecNum,this.right.elecNum=t.right_elecNum,this.freshCData(),this._freshBinkSet()}},{key:"_freshBinkSet",value:function(t){this.bindFur&&this.setData_obj&&(this.bindFur.elecNum=this.setData_obj.bindFur_elecNum||0)}},{key:"reset",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.left.elecNum=this.right.elecNum=0,this.freshCData()}},{key:"getElecs",value:function(){this.elecNum=this.left.elecNum+this.right.elecNum;var t=this.startPRadius,e=new u.Point(0,0);return this.createElecs(this.elecNum,363,8,t,e.x-181.5,e.y,1)}},{key:"getComps",value:function(){return this.getComp01(this.left.elecNum+this.right.elecNum,new u.Point(0,0),363,0)}},{key:"getLocalBoundsElecs",value:function(){return[this.bg]}}]),e}(y["default"])},895:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(443),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);i(0);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.allowSave=!1,i.level=6,i.smStent=null,i.canBind=!0,i.host=null,i.hostFlag=null,i.MAX_ANGLE=20,i.showElecMagLine=1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.init(0),this.freshControl()}},{key:"beginEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginEnd",this).call(this,t),this.canBind=!1,this.host=null,this.hostFlag=0,this.fresh_angle(0)}},{key:"endEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.canBind=!0,this.freshControl(),this.diyChanged(),setTimeout(function(){this.hadDestory||(this.freshControl(),this.diyChanged())}.bind(this),50)}},{key:"fresh_angle",value:function(t){this.rotateA(this.canBind?-t:0)}},{key:"setElectricField",value:function(t){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setElectricField",this).call(this),0!=this.hostFlag){var i=this.toGlobalView(this.ganP,this),n=this.getElecVFunc(i,[this.UID]),r=this.txtNum*n.x;if(0!=r){r/=1e7;var o=r/Math.abs(r);r=Math.abs(r),r=4*Math.pow(r,.25),r=Math.min(50,r),r=Math.floor(10*r)/10,r*=o}this.fresh_angle(-(r/50*this.MAX_ANGLE))}}}]),e}(u["default"])},896:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=(i(0),i(443)),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isLock=!0,i.ball=null,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.init(0),this.ballP1.visible=this.ballP2.visible=this.ballP3.visible=!1,this.addOthers()}},{key:"addOthers",value:function(){this.ball=this.dependEquipments[0],this.ball.smStent=this,this.diyChanged()}},{key:"moveEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.freshCData()}},{key:"endEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.freshCData()}},{key:"freshCData",value:function(t){this.freshControl(),this.diyChanged()}},{key:"removed",value:function(){this.ball&&this.main.removeEquipment(this.ball),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(u["default"])},897:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function T(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:T(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(6),c=n(h),p=i(101),f=n(p),d=i(102),y=(n(d),i(457)),g=n(y),_=i(795),b=n(_),v=i(464),m=n(v),P=i(501),w=n(P),O=i(629),k=n(O),C=i(916),M=n(C),A=i(917),E=n(A),S=i(628),x=n(S);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.iElecInter=2,i.bg=null,i.rot00=null,i.rot01=null,i.rot02=null,i.switch00=null,i.switch01=null,i.switch02=null,i.switch04=null,i.switch05=null,i.bp0=null,i.bp1=null,i.light=null,i.customButtonArr=[],i.screenCon=null,i.waveCon=null,i.tf1=null,i.radioGroup=[],i.type=0,i.invers=!1,i.isOpen=!1,i.Power=0,i.t=0,i.A=50,i.T=4,i.phi=0,i.waveData=[],i.changed=!0,i.tpx=.04,i.mode=1,i.baseSignal=new w["default"](i.A,i.T,i.phi),i.sinSignal=new k["default"](i.A,i.T,i.phi),i.cosSignal=new M["default"](i.A,i.T,i.phi),i.squareSignal=new E["default"](i.A,i.T,i.phi),i.sawToothSignal=new x["default"](i.A,i.T,i.phi),i.curSignal=i.baseSignal,i.signalArr=[i.baseSignal,i.sinSignal,i.cosSignal,i.squareSignal,i.sawToothSignal],i.BASE=0,i.SIN=1,i.COS=2,i.SQUARE=3,i.SAWTOOTH=4,i.MAX_V=50,i.MIN_V=0,i.MAX_A=50,i.MIN_A=0,i.MIN_T=1,i.MAX_T=8,i}return a(e,t),s(e,[{key:"added",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bp0.visible=!1,this.bp1.visible=!1,this.customButtonArr.push(new g["default"](this.switch00,this,1,0,this.switchCallBack00,this.isOpen,[this.light])),this.customButtonArr.push(new b["default"](this.switch01,this,1,0,this.switchCallBack01,!1,this.radioGroup)),this.customButtonArr.push(new b["default"](this.switch02,this,1,0,this.switchCallBack02,!1,this.radioGroup)),this.customButtonArr.push(new b["default"](this.switch03,this,1,0,this.switchCallBack03,!1,this.radioGroup)),this.customButtonArr.push(new b["default"](this.switch04,this,1,0,this.switchCallBack04,!1,this.radioGroup)),this.customButtonArr.push(new g["default"](this.switch05,this,1,0,this.switchCallBack05,this.invers,null)),this.customButtonArr.push(new m["default"](this.rot00,this,0,-Math.PI/3,Math.PI/3,0,this.rotateCallBack00).setValueRange(this.MIN_A,this.MAX_A).setValue(this.A)),this.customButtonArr.push(new m["default"](this.rot01,this,0,-Math.PI/3,Math.PI/3,0,this.rotateCallBack01).setValueRange(this.MIN_T,this.MAX_T).setValue(this.T)),this.customButtonArr.push(new m["default"](this.rot02,this,0,-Math.PI,Math.PI,0,this.rotateCallBack02).setRotation(this.phi,!0)),this.screenCon=new PIXI.Graphics,this.addChild(this.screenCon),this.screenCon.x=-171,this.screenCon.y=-34,this.waveCon=new PIXI.Graphics,this.screenCon.addChild(this.waveCon);var t=new PIXI.Graphics;t.beginFill(16711680,.5),t.drawRect(0,-62,248,124),t.endFill(),this.screenCon.addChild(t),this.waveCon.mask=t,this.waveCon.scale.y=-1,this.tf1=new PIXI.Text("",{font:"12px Arial",fill:2674438}),this.screenCon.addChild(this.tf1),this.tf1.x=180,this.tf1.y=-50,this.lastT=(new Date).getTime()}},{key:"removed",value:function(){this.customButtonArr.forEach(function(t){t.destroy()}),this.customButtonArr=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"update",value:function(){this.Power=0,this.waveCon.clear(),this.screenCon.visible=this.isOpen;var t=(new Date).getTime(),e=t-this.lastT;if(this.lastT=t,this.isOpen){this.curSignal=this.signalArr[this.type],this.curSignal.A=this.A,this.curSignal.T=this.T,this.curSignal.phi=this.phi,this.curSignal.update();var i=this.invers?-1:1;if(this.waveCon.lineStyle(1,16725504,1),1!==this.mode)for(var n=0;236>n;n++){var r=this.curSignal.getValue(this.t+n*this.tpx)*i;0===n?(this.Power=this.MAX_V*r/this.MAX_A,this.waveCon.moveTo(n+5,r)):this.waveCon.lineTo(n+5,r)}else{this.changed&&(this.changed=!1,this.updateWaveData());for(var o=this.waveData.length,a=0;233>a;a++){var s=Math.floor(a+this.t/this.tpx)%o,l=this.waveData[s]*i;0===a?(this.Power=this.MAX_V*l/this.MAX_A,this.waveCon.moveTo(a+8,l)):this.waveCon.lineTo(a+8,l)}}this.t+=e/1e3,this.tf1.text=this.language.getLocaleStr("cycle")+":"+c["default"].round(this.T,1)+"s"}}},{key:"startStep",value:function(){this.update()}},{key:"overStep",value:function(){this.branchChange=!0}},{key:"updateWaveData",value:function(){this.waveData.length=0;for(var t=this.T/this.tpx,e=0;t>e;e++)this.waveData[e]=this.curSignal.getValue(e*this.tpx)}},{key:"switchCallBack00",value:function(t,e){this.isOpen=e,t&&this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE),this.freshGlow()}},{key:"switchCallBack01",value:function(t,e){e?this.type=this.SIN:this.type===this.SIN&&(this.type=this.BASE),this.changed=!0}},{key:"switchCallBack02",value:function(t,e){e?this.type=this.COS:this.type===this.COS&&(this.type=this.BASE),this.changed=!0}},{key:"switchCallBack03",value:function(t,e){e?this.type=this.SQUARE:this.type===this.SQUARE&&(this.type=this.BASE),this.changed=!0}},{key:"switchCallBack04",value:function(t,e){e?this.type=this.SAWTOOTH:this.type===this.SAWTOOTH&&(this.type=this.BASE),this.changed=!0}},{key:"switchCallBack05",value:function(t,e){this.invers=e}},{key:"rotateCallBack00",value:function(t,e,i,n,r){this.A=r.getValue(),this.changed=!0}},{key:"rotateCallBack01",value:function(t,e,i,n,r){this.T=r.getValue(),this.changed=!0}},{key:"rotateCallBack02",value:function(t,e,i,n,r){this.phi=e,this.changed=!0}},{key:"openChanged",value:function(t){this.isOpen=t.checked,this.customButtonArr[0].setState(this.isOpen),this.freshGlow()}},{key:"aChanged",value:function(t){this.A=t.showValue,this.customButtonArr[6].setValue(this.A),this.changed=!0}},{key:"tChanged",value:function(t){this.T=t.showValue,this.customButtonArr[7].setValue(this.T),this.changed=!0}},{key:"phiChanged",value:function(t){this.phi=u.M.toHu(t.showValue),this.customButtonArr[8].setRotation(this.phi),this.changed=!0}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.isOpen=this.isOpen,t.invers=this.invers,t.A=this.A,t.T=this.T,t.phi=this.phi,t.type=this.type,t}},{key:"setData",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.isOpen=t.isOpen,this.invers=t.invers,this.A=t.A,this.T=t.T,this.phi=t.phi,this.type=t.type,this.customButtonArr[0].setState(this.isOpen),this.customButtonArr[5].setState(this.invers);for(var i=1;5>i;i++)this.customButtonArr[i].setState(this.type===i);this.customButtonArr[6].setValue(this.A),this.customButtonArr[7].setValue(this.T),this.customButtonArr[8].setRotation(this.phi),this.freshGlow()}},{key:"getConf",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getScrollBar(this.language.getLocaleStr("amplitude"),!0,"v",this.MAX_A,this.MIN_A,c["default"].round(this.A,1),.1,this.aChanged,this),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("cycle"),!0,"s",this.MAX_T,this.MIN_T,c["default"].round(this.T,1),.1,this.tChanged,this),this.ComponentProperty.getScrollBar(this.language.getLocaleStr("phase"),!0,"°",180,-180,c["default"].round(u.M.toAngle(this.phi),0),1,this.phiChanged,this)),t}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("amplitude")+": "+c["default"].round(this.A,1)+"v\n    "+this.language.getLocaleStr("cycle")+": "+c["default"].round(this.T,1)+"s\n    "+this.language.getLocaleStr("phase")+": "+c["default"].round(u.M.toAngle(this.phi),0)+"°\n    "}},{key:"freshGlow",value:function(){this.globalConfig.SHOW_GLOW&&(this.glowSPArr[0][0].visible=!this.isOpen,this.glowSPArr[0][1].visible=this.isOpen)}},{key:"showGlowIndex",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"showGlowIndex",this).call(this,t),this.freshGlow()}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.A=this.A,t.T=this.T,t.phi=this.phi,t}},{key:"setDefaultOrigin",value:function(){this.A=50,this.T=4,this.phi=0}},{key:"defaultSettingChanged",value:function(){this.customButtonArr[6].setValue(this.A),this.customButtonArr[7].setValue(this.T),this.customButtonArr[8].setRotation(this.phi)}}]),e}(f["default"])},898:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(443),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.allowSave=!1,i.isLock=!0,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.add2component(this.bg),this.init(0),this.addCursor(this,"tuozhuai")}},{key:"endEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endEnd",this).call(this,t),this.freshControl()}},{key:"moveEnd",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t),this.freshControl()}},{key:"selectRenderChild",value:function(){return this.bg.getBounds()}},{key:"removed",value:function(){this.removedCursor(this),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(u["default"])},899:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(214),c=n(h),p=i(102),f=n(p);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.resArr=["0Ω","10Ω","20Ω","50Ω","100Ω"],i}return a(e,t),s(e,[{key:"initZuhe",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:1,inductor:1,pos:[[1,0],[2,1]],wire:[[[1,1],[2,0]]]}),this.bar1.Resistance=0}},{key:"getData",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.inductance=this.bar1.inductance,t}},{key:"setDataOver",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.bar1.inductance=t.inductance}},{key:"added",value:function(){this.add2component(this.bg),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=50,this.bposter0.dp.setTo(8,-6),this.bposter1.dp.setTo(-8,-6)}},{key:"getShowValue",value:function(){return this.bar1.Resistance>f["default"].MIN_RESISTANCE?this.bar1.Resistance+"Ω":"0Ω"}},{key:"getConf",value:function(){var t=this,i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("inResistance"),canEnter:!0,enterUnit:"Ω",maxValue:1e4,minValue:0,showValue:this.getShowValue(),value:this.resArr,callBack:function(e){t.bar1.Resistance=u.M.getNumStr(e.showValue)}},this.bar2.getInductorConfObj.call(this.bar2)),i}},{key:"getTipMess",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getTipMess",this).call(this);return t+="\n    "+this.language.getLocaleStr("inductance")+": "+this.bar1.inductance+"H\n    "}},{key:"getDefaultSetting",value:function(){var t=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.inductance=this.bar1.inductance,t}},{key:"setDefaultOrigin",value:function(){this.bar1.inductance=1e-4}},{key:"setDefaultSetting",value:function(t){this.bar1.inductance=t.inductance}}]),e}(c["default"])},900:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(619),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.dotType=1,i.flag=0,i.level=7,i.oriP=new l.Point,i.oriTime=0,i.hasMagLine=!0,i.showMagLine=!1,i.coilArr=i.getBarArr(190,9,20,0,10,1),i.I=0,i.ironCore=null,i.hasIronCore=!1,i.bar1OriPower=0,i.speedTimer=null,i.bindCoil=null,i}return o(e,t),a(e,[{key:"beginEnd",value:function(t){var e=l.M.getMouseXY(t);l.M.setSPPoint(this.oriP,e),this.oriTime=(new Date).getTime()}},{key:"moveEnd",value:function(t){var i=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveEnd",this).call(this,t);var n=l.M.getMouseXY(t);this.bindCoil?this.checkAndBind(null,!1):each(this.staCompArr,function(t,e){if("SpacedCoil"===e.classname&&!e.bind_SolenoidElectri)return i.checkAndBind(e,!0),!1},this),this.fresh_dragBound(),this.fresh_clipRect();var r=(new Date).getTime(),o=(n.y-this.oriP.y)/(r-this.oriTime);clearTimeout(this.speedTimer),this.speedTimer=setTimeout(function(){i.speedTimer=null,o=0,i.freshSpeedCacu(o)},200),this.freshSpeedCacu(o),l.M.setSPPoint(this.oriP,n),this.oriTime=r}},{key:"freshSpeedCacu",value:function(t){this.caculateVolt(!0,t),this.bar2.branchChange=!0,this.bindCoil&&(this.bindCoil.caculateVolt(!0,t),this.bindCoil.bar2.branchChange=!0)}},{key:"getDragPer",value:function(){return this.parent.dragRect?2*((this.parent.y-this.parent.dragRect.y)/this.parent.dragRect.height-.5):0}},{key:"bindTo",value:function(t){this.bindCoil=t,this.mask=this.bindCoil?this.bindCoil.maskg:null}},{key:"checkAndBind",value:function(t,e){var i=this.toGlobalView(this.cirSP1,this);if(e&&!this.bindCoil){t.getHitRect().containsPoint(i)&&(t.bindCoil=this)}else if(!e&&this.bindCoil){var n=this.bindCoil.getHitRect();n&&i.y>=n.y||(this.bindCoil.bindCoil=null)}}},{key:"fresh_clipRect",value:function(){this.mask=this.bindCoil?this.bindCoil.maskg:null}},{key:"fresh_dragBound",value:function(){if(this.bindCoil){var t=this.bindCoil.toGlobalView(new l.Point,this.bindCoil);this.setDragRect(new l.Rectangle(t.x-10,t.y-500,23,450))}else this.setDragRect(null)}},{key:"added",value:function(){this.cirSP1=new l.Point(0,120),this.add2component(this.bg);s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.drawDis=30,this.bposter0.dp.setTo(10,-8),this.bposter1.dp.setTo(-10,-8),this.ironCore=this.bg.ironCore,this.ironCore.visible=this.hasIronCore}},{key:"removed",value:function(){this.bindCoil&&(this.bindCoil.bindCoil=null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return this.bindCoil&&(t.bindCoil_uid=this.bindCoil.uid),t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.ironCore.visible=this.hasIronCore}},{key:"setDataOver",value:function(t){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.setData_obj.bindCoil_uid){var i=this.getChildByUID(this.setData_obj.bindCoil_uid);i&&(this.checkAndBind(i,!0),this.fresh_dragBound(),this.fresh_clipRect())}}},{key:"getMagComps3D",value:function(){return this.I=-(this.bar1.curElec+this.bar2.curElec)*this.turnsNum/50,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMagComps3D",this).call(this)}},{key:"ironCoreChanged",value:function(t){this.hasIronCore=!!t.checked,this.ironCore.visible=this.hasIronCore}},{key:"getConf",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("ironCore"),this.hasIronCore?1:0,[this.language.getLocaleStr("noIronCore"),this.language.getLocaleStr("hasIronCore")],this.ironCoreChanged,this)),t}}]),e}(h["default"])},901:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canRotate=!0,i.canReset=!0,i}return o(e,t),a(e,[{key:"added",value:function(){var t=this;this.add2component(this.bg),this.add2component(this.xian),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.Resistance=1,this.xian.currentFrame=0,this.var_mc_ID=l.M.addTouch(this.xian,{tab:function(e){if(0!=t.curElec){var i=t.xian.currentFrame+2;i=Math.min(t.xian.totalFrames-1,i),t.xian.currentFrame!=i&&(t.xian.currentFrame=i)}}},this),this.bposter0.dp.setTo(0,-8),this.bposter1.dp.setTo(0,-8)}},{key:"setWorkElec",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.left&&(this.left.magNum=t/.5*this.QU_DUI_NUM*2,this.right.magNum=-this.left.magNum,this.diyChangedMag())}},{key:"removed",value:function(){l.M.removeTouch(this.xian,this.var_mc_ID),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"reset",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this.xian.currentFrame=0}}]),e}(h["default"])},902:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(214),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.bposter1.dp.setTo(-13,-8),i.canReversal=!0,i.hasMagLine=!0,i.showMagLine=!0,i.coilArr=i.getBarArr(220,12,25,5,-41,0),i.I=0,i.hw=25,i.hasIronCore=!1,i}return o(e,t),a(e,[{key:"setWorkElec",value:function(t){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWorkElec",this).call(this,t),this.left){if(t>6&&this["break"](),this.isBreak)this.left.magNum=0,this.right.magNum=0;else{this.left.magNum=t/.5*this.QU_DUI_NUM*2*(0===this.bg.currentFrame?1:1.6),this.hasIronCore&&(this.left.magNum=2*this.left.magNum),this.right.magNum=-this.left.magNum}this.diyChangedMag()}}},{key:"getData",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this)}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.bg.currentFrame=this.hasIronCore?1:0}},{key:"reversal",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reversal",this).call(this),this.bg.scale.x*=-1}},{key:"ironCoreChanged",value:function(t){this.hasIronCore=!!t.checked,this.bg.currentFrame=this.hasIronCore?1:0,this.branchChange=!0}},{key:"getConf",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getConf",this).call(this);return t.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("ironCore"),this.hasIronCore?1:0,[this.language.getLocaleStr("noIronCore"),this.language.getLocaleStr("hasIronCore")],this.ironCoreChanged,this)),t}},{key:"getMagComps3D",value:function(){return this.I=(this.hasReversal?1:-1)*this.curElec,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMagComps3D",this).call(this)}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.currentFrame=this.bg.currentFrame,t}},{key:"setDefaultOrigin",value:function(){this.bg.currentFrame=0}},{key:"setDefaultSetting",value:function(t){this.bg.currentFrame=t.currentFrame}}]),e}(u["default"])},903:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function d(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:d(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(6),c=n(h),p=i(619),f=n(p);e["default"]=function(t){function e(t){r(this,e),t.iElecInter=-1;var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.bindMagBar=null,i.rectSP=new u.Rectangle(-50,-130,100,260),i.downP=new u.Point,i.level=6;return i.hasMagLine=!0,i.showMagLine=!1,i.coilArr=i.getBarArr(190,9,35,2,0,1),i.I=0,i}return a(e,t),s(e,[{key:"getHitRect",value:function(){if(c["default"].has(this,"main.view")){var t=this.toGlobalView(new u.Point(this.rectSP.x,this.rectSP.y),this);return new u.Rectangle(t.x,t.y,this.rectSP.width,this.rectSP.height)}return null}},{key:"added",value:function(){this.add2component(this.bg);var t=new PIXI.Graphics,i=new PIXI.Graphics;i.beginFill(255,0);i.moveTo(-70,-110),i.lineTo(-45,-104),i.lineTo(-35,-102),i.lineTo(-25,-101),i.lineTo(-15,-99),i.lineTo(0,-98),i.lineTo(15,-99),i.lineTo(25,-101),i.lineTo(35,-102),i.lineTo(45,-104),i.lineTo(70,-110),i.lineTo(70,-610),i.lineTo(-70,-610),i.lineTo(-70,-110),t.interactive=t.interactiveChildren=!1,t.addChild(i),this.addChild(t),this.maskg=i,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2,this.bposter0.dp.setTo(10,-8),this.bposter1.dp.setTo(-10,-8)}},{key:"beginEnd",value:function(t){u.M.setSPPoint(this.downP,this.phy.getMouseXY(t))}},{key:"moveEnd",value:function(t){var e=this.phy.getMouseXY(t),i=e.x-this.downP.x,n=e.y-this.downP.y;this.bindCoil?(this.bindCoil.parent.x+=i,this.bindCoil.parent.y+=n,this.bindCoil.updateBinds()):this.bindMagBar&&(this.bindMagBar.parent.x+=i,this.bindMagBar.parent.y+=n),u.M.setSPPoint(this.downP,e)}},{key:"endEnd",value:function(t){this.bindCoil&&this.bindCoil.fresh_dragBound.call(this.bindCoil),this.bindMagBar&&this.bindMagBar.fresh_dragBound.call(this.bindMagBar)}},{key:"removed",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this),this.bindMagBar=null,this.bindCoil=null}},{key:"selectRenderChild",value:function(){return this.bg.getBounds()}},{key:"getMagComps3D",value:function(){return this.I=-this.bar1.curElec*this.turnsNum/50,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMagComps3D",this).call(this)}},{key:"bindMagBar",get:function(){return this._bindMagBar},set:function(t){this._bindMagBar&&this._bindMagBar.bindTo(null),this._bindMagBar=t,t&&t.bindTo(this),this.diyChanged()}},{key:"bindCoil",get:function(){return this._bindCoil},set:function(t){this._bindCoil&&this._bindCoil.bindTo(null),this._bindCoil=t,t&&t.bindTo(this)}}]),e}(f["default"])},904:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1,t.leftMagNum=30,t.rightMagNum=-30;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canMagReversal=!0,i.canReversal=!0,i.hasMagLine=!0,i.showMagLine=!1,i.coilArr=i.getUArr(32,35,3,6,5,-Math.PI/2,28,-85),i.I=1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.Resistance=1,this.var_ropeHead=new PIXI.Graphics,this.var_ropeBack=new PIXI.Graphics,this.addChild(this.var_ropeHead),this.addChildAt(this.var_ropeBack,0),this.func_freshRope(),this.gan.oriP=l.M.getSPPoint(this.gan),this.var_chaX=40,this.var_chaY=10,this.var_tween=new TimelineLite,this.bposter0.dp.setTo(15,0),this.bposter1.dp.setTo(10,0)}},{key:"caculateOver",value:function(){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"caculateOver",this).call(this),this.var_tween){var t=this.curElec,i=Math.abs(t/.6);i=Math.min(1,i);var n=void 0,r=void 0,o=!1;this.var_tween.clear(),this.hasReversal?0===t?(n=this.gan.oriP.x,r=this.gan.oriP.y):0>t?(n=this.gan.oriP.x+this.var_chaX*i,r=this.gan.oriP.y-this.var_chaY*i,this.gan.oriP.x>this.gan.x&&(o=!0)):(n=this.gan.oriP.x-this.var_chaX*i,r=this.gan.oriP.y-this.var_chaY*i,this.gan.x>this.gan.oriP.x&&(o=!0)):0===t?(n=this.gan.oriP.x,r=this.gan.oriP.y):t>0?(n=this.gan.oriP.x+this.var_chaX*i,r=this.gan.oriP.y-this.var_chaY*i,this.gan.oriP.x>this.gan.x&&(o=!0)):(n=this.gan.oriP.x-this.var_chaX*i,r=this.gan.oriP.y-this.var_chaY*i,this.gan.x>this.gan.oriP.x&&(o=!0)),o?this.var_tween.to(this.gan,.1,{x:this.gan.oriP.x,y:this.gan.oriP.y,onUpdate:this.func_tweenUp}).to(this.gan,.8,{x:n,y:r,onUpdate:this.func_tweenUp,ease:com.greensock.easing.Elastic.easeOut}):this.var_tween.to(this.gan,.9,{x:n,y:r,onUpdate:this.func_tweenUp,ease:com.greensock.easing.Elastic.easeOut}),this.func_freshRope()}}},{key:"func_tweenUp",value:function(){this.target.parent&&this.target.parent.func_freshRope()}},{key:"func_freshRope",value:function(t){this.var_ropeHead.clear(),this.var_ropeBack.clear(),this.var_ropeHead.lineStyle(3,16754025),this.var_ropeBack.lineStyle(3,16754025),this.var_ropeHead.moveTo(this.bposter0.x,this.bposter0.y),this.var_ropeHead.lineTo(this.gan.x-22,this.gan.y+27),this.var_ropeBack.moveTo(this.bposter1.x,this.bposter1.y),this.var_ropeBack.lineTo(this.gan.x+25,this.gan.y-35)}},{key:"reversal",value:function(t){t||(this.hasReversal=!this.hasReversal),this.hasReversal?(this.shang.currentFrame=1,this.xia.currentFrame=1,this.left.magNum=-30,this.right.magNum=30):(this.shang.currentFrame=0,this.xia.currentFrame=0,this.left.magNum=30,this.right.magNum=-30),this.diyChangedMag(),this.diyChanged()}}]),e}(h["default"])},905:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1,t.leftMagNum=30,t.rightMagNum=-30;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canMagReversal=!0,i.canReversal=!0,i.hasMagLine=!0,i.showMagLine=!1,i.coilArr=i.getUArr(32,40,3,6,5,-Math.PI/2,10,-100),i.I=1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.createZuhe({bar:3,pos:[[1,0],[1,1],[2,1],[3,1]],wire:[[[1,1],[2,0]],[[2,1],[3,0]]],res:[[1,1],[2,1],[3,1]]}),this.Resistance=1,this.var_rope0=new PIXI.Graphics,this.var_rope1=new PIXI.Graphics,this.var_rope2=new PIXI.Graphics,this.var_rope3=new PIXI.Graphics,this.addChildAt(this.var_rope0,this.getChildIndex(this.bg)),this.addChildAt(this.var_rope1,this.getChildIndex(this.shang0)),this.addChildAt(this.var_rope2,this.getChildIndex(this.shang1)),this.addChildAt(this.var_rope3,this.getChildIndex(this.shang2)),this.func_freshRope(),this.gan.oriP=l.M.getSPPoint(this.gan),this.chaX=40,this.chaY=10,this.tween=new TimelineLite}},{key:"caculateOver",value:function(){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"caculateOver",this).call(this),this.bar1){var t=(this.bar1.curElec+this.bar2.curElec+this.bar3.curElec)/3,i=Math.abs(t/.6);i=Math.min(1,i);var n=void 0,r=void 0,o=!1;this.tween.clear(),this.hasReversal?0===t?(n=this.gan.oriP.x,r=this.gan.oriP.y):0>t?(n=this.gan.oriP.x+this.chaX*i,r=this.gan.oriP.y-this.chaY*i,this.gan.oriP.x>this.gan.x&&(o=!0)):(n=this.gan.oriP.x-this.chaX*i,r=this.gan.oriP.y-this.chaY*i,this.gan.x>this.gan.oriP.x&&(o=!0)):0===t?(n=this.gan.oriP.x,r=this.gan.oriP.y):t>0?(n=this.gan.oriP.x+this.chaX*i,r=this.gan.oriP.y-this.chaY*i,this.gan.oriP.x>this.gan.x&&(o=!0)):(n=this.gan.oriP.x-this.chaX*i,r=this.gan.oriP.y-this.chaY*i,this.gan.x>this.gan.oriP.x&&(o=!0)),this.gan._destroyed||(o?this.tween.to(this.gan,.1,{x:this.gan.oriP.x,y:this.gan.oriP.y,onUpdate:this._tweenUp}).to(this.gan,.8,{x:n,y:r,onUpdate:this._tweenUp,ease:com.greensock.easing.Elastic.easeOut}):this.tween.to(this.gan,.9,{x:n,y:r,onUpdate:this._tweenUp,ease:com.greensock.easing.Elastic.easeOut}),this.func_freshRope())}}},{key:"_tweenUp",value:function(){this.hadDestory||this._destroyed||this.target.parent&&this.target.parent.func_freshRope.call(this.target.parent)}},{key:"func_freshRope",value:function(){this.func_drawRope(this.var_rope0,new l.Point(this.bp0.x+10,this.bp0.y),new l.Point(this.gan.x-22,this.gan.y+27)),this.func_drawRope(this.var_rope1,new l.Point(this.bp1.x+10,this.bp1.y),new l.Point(this.gan.x-22+15,this.gan.y+10)),this.func_drawRope(this.var_rope2,new l.Point(this.bp2.x+10,this.bp2.y),new l.Point(this.gan.x-22+30,this.gan.y-7)),this.func_drawRope(this.var_rope3,new l.Point(this.bp3.x+10,this.bp3.y),new l.Point(this.gan.x-22+45,this.gan.y-25))}},{key:"func_drawRope",value:function(t,e,i){t.clear(),t.lineStyle(3,16754025),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y)}},{key:"reversal",value:function(t){t||(this.hasReversal=!this.hasReversal),this.hasReversal?(this.shang0.currentFrame=1,this.shang1.currentFrame=1,this.shang2.currentFrame=1,this.xia.currentFrame=1,this.left.magNum=-30,this.right.magNum=30):(this.shang0.currentFrame=0,this.shang1.currentFrame=0,this.shang2.currentFrame=0,this.xia.currentFrame=0,this.left.magNum=30,this.right.magNum=-30),this.diyChangedMag(),this.diyChanged()}},{key:"removed",value:function(){this.tween.stop(),this.tween.clear(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"getMagComps3D",value:function(){return this.I=1,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMagComps3D",this).call(this)}}]),e}(h["default"])},906:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(624),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.leftMagNum=30,t.rightMagNum=-30;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canMagReversal=!0,i.canReversal=!0,i._touchIdArr=[],i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.bar2.Resistance=10}},{key:"added",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.globalConfig.main.canvas.style.backgroundColor=0,[this.shang,this.xia,this.zuo,this.you].forEach(function(e){t._touchIdArr.push({mc:e,touchId:l.M.addTouch(e,{tab:t.btnTab},t)}),t.addCursor(e,"hand")}),this.oriP=l.M.getSPPoint(this.bang),this.dx=0,this.dy=0}},{key:"update",value:function(){this.stepMove()}},{key:"btnTab",value:function(t,e){e===this.shang?(this.dy=0,this.dx=-1,this.updateVolt(-.1)):e===this.xia?(this.dy=0,this.dx=1,this.updateVolt(.1)):e===this.zuo?(this.dy=3,this.dx=0,this.updateVolt(0)):e===this.you&&(this.dy=0,this.dx=0,this.updateVolt(0))}},{key:"stopMove",value:function(t){this.updateVolt(0)}},{key:"updateVolt",value:function(t){this.Power!==t&&(this.Power=this.hasReversal?-t:t,this.diyChanged())}},{key:"stepMove",value:function(){if(0!==this.dx){var t=this.bang.x+this.dx;t>this.oriP.x-100?this.oriP.x+100>t||(t=this.oriP.x+100,this.stopMove()):(t=this.oriP.x-100,this.stopMove()),this.updateBind(t-this.bang.x,0),this.bang.x=t}else if(0!==this.dy){var e=this.bang.y+this.dy;e>this.oriP.y-100?this.oriP.y>e||(e=this.oriP.y,this.dy*=-1):(e=this.oriP.y-100,this.dy*=-1),this.updateBind(0,e-this.bang.y),this.bang.y=e}}},{key:"updateBind",value:function(t,e){this.bposter0.x+=t,this.bposter1.x+=t,this.bposter0.y+=e,this.bposter1.y+=e,this.updateBinds(),this.freshDp()}},{key:"removed",value:function(){var t=this;this._touchIdArr.forEach(function(e){t.removedCursor(e.mc),l.M.removeTouch(e.mc,e.touchId)}),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"reversal",value:function(t){t||(this.hasReversal=!this.hasReversal),this.freshReversal()}},{key:"freshReversal",value:function(t){this.hasReversal?(this.left.magNum=-30,this.right.magNum=30,this.bgtop.currentFrame=1,this.bg.currentFrame=1):(this.left.magNum=30,this.right.magNum=-30,this.bgtop.currentFrame=0,this.bg.currentFrame=0),this.diyChangedMag()}},{key:"setDataOver",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setDataOver",this).call(this,t),this.Power=0,this.hasReversal&&this.freshReversal()}},{key:"getData",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.hasReversal=this.hasReversal,t}},{key:"setData",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.hasReversal=t.hasReversal}},{key:"getLocalBoundsElecs",value:function(){return[this.bg,this.bgtop,this.you]}}]),e}(h["default"])},907:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);t.length>e;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var l=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=function _(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:_(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},h=i(0),c=i(6),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}(c),f=i(102),d=n(f),y=i(465),g=n(y);e["default"]=function(t){function e(t){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.OVER_LOAD_TXT="OL",i.seType=0,i.rosInd=0,i.angleArr=[],i.txtNumScale=1,i.curNum=0,i.oriPaoP=new h.Point,i.danweiArr=[[200,"mV"],[2,"V"],[20,"V"],[200,"V"],[1e3,"V"],[750,"V"],[200,"V"],[200,"μA"],[2,"mA"],[20,"mA"],[200,"mA"],[2,"A"],[10,"A"],[20,"MΩ"],[2,"MΩ"],[200,"KΩ"],[20,"KΩ"],[2,"KΩ"],[200,"Ω"],[200,"mV"]],i.label=new PIXI.Text("",{font:"35px 微软雅黑",fill:14394913,align:"left"}),i.numType=0,i.numTypeArr=[2,3,4],i.jiaoArr=[],i}return s(e,t),l(e,[{key:"_init_ros",value:function(){this.addRotateControl.call(this)}},{key:"addRotateControl",value:function(){var t=this;this.parent.updateTransform(),this.alphaSP.rotateData={pareComp:this,cenP:function(){return t.toGlobal(t.alphaSP)},rotateHandleFunc:this.rotateHandleFunc,downHandleFunc:this.downHandleFunc,upHandleFunc:this.upHandleFunc},this.phy.addRotateTool(this.alphaSP),this.alphaSP.alpha=0}},{key:"downHandleFunc",value:function(t){t.addAngle=0,this.showPaoLabel(!0)}},{key:"upHandleFunc",value:function(t){this.showPaoLabel(!1)}},{key:"rotateHandleFunc",value:function(t,e){this.alphaSP.rotation+=e,t.addAngle+=e;var i=!1;t.addAngle>h.M.toHu(15)?(this.rosInd++,this.rosInd===this.angleArr.length-1&&(this.rosInd=0),this.ros.rotation=this.angleArr[this.rosInd],i=!0,t.addAngle=0):t.addAngle<-h.M.toHu(15)&&(this.rosInd--,0>this.rosInd&&(this.rosInd=this.angleArr.length-2),this.ros.rotation=this.angleArr[this.rosInd],i=!0,t.addAngle=0),i&&(this.changeSeType(),this.globalConfig.SoundTool.play(this.SoundStr.BUTTON_ROTATE))}},{key:"added",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),h.M.setSPPoint(this.oriPaoP,this.numBig),this.addChildAt(this.label,1),this.label.y=-this.bg.height/2,this.bar2.elecConnect=!1,this.numlabel1=new PIXI.Text("",{font:"20px 微软雅黑",fill:16777215,align:"left"}),this.numlabel1.y=-85,this.numlabel2=new PIXI.Text("",{font:"20px 微软雅黑",fill:16777215,align:"left"}),this.numlabel2.y=this.numlabel1.y+22,this.addChild(this.numlabel1),this.addChild(this.numlabel2),this.numBig.alpha=0,this.numlabel1.alpha=0,this.numlabel2.alpha=0;var t=void 0;for(t=0;20>=t;t++)this.angleArr.push(h.M.toHu(2+18*t));this._init_ros(),this.freshPaoLabel(),this.freshPingLabel(),this.bposter0.dp.setTo(10,0),this.bposter1.dp.setTo(-10,0),this.addCursor(this.alphaSP,"rotatebtn")}},{key:"showPaoLabel",value:function(t){t?(TweenMax.to(this.numBig,.4,{alpha:1}),TweenMax.to(this.numlabel1,.4,{alpha:1}),TweenMax.to(this.numlabel2,.4,{alpha:1})):(TweenMax.to(this.numBig,.4,{alpha:0}),TweenMax.to(this.numlabel1,.4,{alpha:0}),TweenMax.to(this.numlabel2,.4,{alpha:0}))}},{key:"freshPaoLabel",value:function(){this.numBig.rotation=this.ros.rotation;var t=h.M.rotaPointFromP(this.oriPaoP,this.ros,this.ros.rotation);h.M.setSPPoint(this.numBig,t);var e=h.M.getXianDianByDis(60,!1,this.numBig,this.ros);this.numlabel1.text=this.danweiArr[this.rosInd][0],this.numlabel1.x=e.x-this.numlabel1.width/2,this.numlabel1.y=e.y-20,this.numlabel2.text=this.danweiArr[this.rosInd][1],this.numlabel2.x=e.x-this.numlabel2.width/2,this.numlabel2.y=e.y}},{key:"freshPingLabel",value:function(){if(!isFinite(this.curNum)||this.curNum>1e9)this.label.text=this.OVER_LOAD_TXT;else{var t=this.curNum*this.txtNumScale;t=h.M.getNumJie(t,this.numTypeArr[this.numType]),this.label.text=""+t}this.label.x=204-this.label.width-120}},{key:"changeSeType",value:function(){19===this.rosInd||this.rosInd>=0&&4>=this.rosInd?(this.seType=0,this.Power=0,this.bar2.elecConnect=!1):5>this.rosInd||this.rosInd>6?7>this.rosInd||this.rosInd>12?13>this.rosInd||this.rosInd>18||(this.seType=3,this.bar2.Resistance=1,this.bar2.elecConnect=!0,this.Power=-.1):(this.seType=2,this.bar2.Resistance=d["default"].MIN_RESISTANCE,this.bar2.elecConnect=!0,this.Power=0):(this.seType=1,this.bar2.elecConnect=!1,this.Power=0),19===this.rosInd||0===this.rosInd||this.rosInd>=8&&10>=this.rosInd?this.txtNumScale=1e3:this.rosInd>=1&&6>=this.rosInd||this.rosInd>=11&&12>=this.rosInd||18===this.rosInd?this.txtNumScale=1:7===this.rosInd?this.txtNumScale=1e6:13>this.rosInd||this.rosInd>14?15>this.rosInd||this.rosInd>17||(this.txtNumScale=.001):this.txtNumScale=1e-6,this.freshPaoLabel(),this.diyChanged()}},{key:"overStep",value:function(){var t=this,e=0;switch(p.get(this.bar2,"bposter0.bindinger.unNode.UID")===p.get(this.bar2,"bposter1.bindinger.unNode.UID")&&(e=this.bar2.bposter1.bindinger.Un-this.bar2.bposter0.bindinger.Un),this.seType){case 0:this.curNum=e;break;case 1:this.jiaoArr.push(Math.abs(e)),this.jiaoArr.length>50&&this.jiaoArr.shift(),this.curNum=Math.max.apply(Math,r(this.jiaoArr)),this.curNum>0&&(clearTimeout(this.re0flag),this.re0flag=setTimeout(function(){t.hadDestory||(t.curNum=0,t.jiaoArr.splice(0,t.jiaoArr.length),t.freshPingLabel())},1e3));break;case 2:this.curNum=e/this.bar2.Resistance;break;case 3:this.curNum=Math.abs(this.bar1.Power/e*this.bar2.Resistance+this.bar2.Resistance)}this.freshPingLabel()}},{key:"getData",value:function(){var t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getData",this).call(this);return t.rotation=this.ros.rotation,t.rosInd=this.rosInd,t}},{key:"setData",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.ros.rotation=t.rotation,this.rosInd=t.rosInd||0,this.changeSeType()}},{key:"removed",value:function(){this.removedCursor(this.alphaSP),clearTimeout(this.re0flag),this.alphaSP.rotateData.cenP=null,this.alphaSP.rotateData=null,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(g["default"])},908:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(465),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canReversal=!0,i.resArr=["0Ω","0.1Ω","0.2Ω","0.5Ω","1Ω","2Ω"],i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.Power=9,this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=2}},{key:"reversal",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reversal",this).call(this),this.bg.currentFrame=this.hasReversal?1:0}},{key:"getDefaultSetting",value:function(){var t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultSetting",this).call(this);return t.Resistance=this.bar2.Resistance,t}},{key:"setDefaultSetting",value:function(t){this.bar2.Resistance=t.Resistance}},{key:"setDefaultOrigin",value:function(){this.bar2.Resistance=0}}]),e}(u["default"])},909:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(214),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.var_temp_rightFlag=0,i.var_temp_allPower_=0,i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:5,pos:[[1,0],[1,1],[2,1],[3,1],[4,0],[4,1],[5,1]],wire:[[[1,1],[2,0]],[[2,1],[3,0]],[[4,1],[5,0]]],res:[[1,1],[2,1],[3,1],[4,1e-4],[5,1e-4]]})}},{key:"added",value:function(){this.add2component(this.bg),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=1,this.bposter2.bindinger.linkWireType=1,this.bposter3.bindinger.linkWireType=1,this.bposter4.bindinger.linkWireType=2,this.bposter5.bindinger.linkWireType=2,this.bposter6.bindinger.linkWireType=2,this.bposter0.dp.setTo(15,-8),this.bposter1.dp.setTo(15,-8),this.bposter2.dp.setTo(15,-8),this.bposter3.dp.setTo(15,-8),this.bposter4.dp.setTo(-15,-8),this.bposter5.dp.setTo(-15,-8),this.bposter6.dp.setTo(-15,-8)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"caculateOver",value:function(t){var i=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"caculateOver",this).call(this);var n=0;Math.abs(this.bar1.curPower)>.1&&(n+=this.bar1.curPower/2,Math.abs(this.bar2.curPower)>.1&&(n=(this.bar1.curPower+this.bar2.curPower)/8,Math.abs(this.bar3.curPower)>.1&&(n=(this.bar1.curPower+this.bar2.curPower+this.bar3.curPower)/14))),n!==this.var_temp_allPower_&&(this.var_temp_allPower_=n,this.bar4.Power=n,this.bar5.Power=3*n,this.bar4.iElecInter=this.bar5.iElecInter=2,this.bar1.branchChange=!0,clearTimeout(this.timeFlag),this.timeFlag=setTimeout(function(){i.hadDestory||(i.bar4.Power=0,i.bar5.Power=0,i.bar1.branchChange=!0)},500))}}]),e}(u["default"])},910:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(443),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canXi=!0,i.level=8,i}return o(e,t),a(e,[{key:"beginFore",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginFore",this).call(this,t),this.canXi&&(this.canXi=!1,this.xiPareObj&&this.xiPareObj.removeXi(this))}},{key:"endFore",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endFore",this).call(this,t),this.canXi||(this.canXi=!0)}},{key:"setElectricField",value:function(t){if(t&&t.nearItem&&this.canXi){var e=this.toGlobalView(new l.Point,this);if(120>l.Point.distance(t.nearItem.elecPoint,e)&&Math.abs(t.nearNum)>5&&!t.nearItem.hasXi(this)&&!t.nearItem.isFull()){this.xiPareObj&&this.xiPareObj.removeXi(this),this.xiPareObj=t.nearItem;var i=t.nearItem.elecPoint,n=new l.Rectangle(i.x-t.nearItem.hitRect.width/2,i.y-t.nearItem.hitRect.height/2,t.nearItem.hitRect.width,t.nearItem.hitRect.height),r=n.x+Math.random()*n.width,o=n.y+Math.random()*n.height;this.parent.x=r,this.parent.y=o;var a=this.xiPareObj.componentBox.toLocal(new l.Point(r,o),this.parent.parent);l.M.setSPPoint(this.xiPareP,a),this.componentBox.rotation=Math.random()*Math.PI,this.toXiItem(t.nearItem)}}}},{key:"added",value:function(){var t=this;this.add2component(this.bg),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.bg.currentFrame=Math.floor(14*Math.random()),this.init(0),setTimeout(function(){t.hadDestory||(t.diyChanged(),t.canXi=!0)},500)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}}]),e}(h["default"])},911:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function h(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:h(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(443),u=function(t){return t&&t.__esModule?t:{"default":t}}(l);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.allowSave=!1,i}return o(e,t),a(e,[{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.addOthers()}},{key:"addOthers",value:function(){this.dependEquipments.forEach(function(t){t.allowSave=!0,t.fresh_elecPoint.call(t)})}}]),e}(u["default"])},912:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function c(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:c(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(214),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e),t.iElecInter=-1;var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.var_rote=0,i}return o(e,t),a(e,[{key:"initZuhe",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[1,1],[2,0],[2,1]],wire:[],res:[[1,10],[2,10]]}),this.bposter0.bindinger.linkWireType=1,this.bposter1.bindinger.linkWireType=1,this.bposter2.bindinger.linkWireType=2,this.bposter3.bindinger.linkWireType=2}},{key:"drawLine",value:function(){if(this.rope1){var t=new l.Point(this.bp0.x+8+15,this.bp0.y+12),e=new l.Point(t.x,this.bp1.y-20),i=new l.Point(this.bp2.x-2,t.y),n=new l.Point(i.x,e.y),r=l.M.get_quadraticCurveTo_points(t.x,t.y,t.x-this.var_rote,0,e.x,e.y),o=l.M.get_quadraticCurveTo_points(i.x,i.y,i.x+this.var_rote,0,n.x,n.y);this.rope1.setPoints(r),this.rope2.setPoints(o)}}},{key:"added",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"added",this).call(this),this.rope1=new PIXI.mesh.RopeBitmap(PIXI.Texture.fromImage(this.globalConfig.constructor.cdn_static+"electrical/elecwire/ElecWireLineStyle.png")),this.rope2=new PIXI.mesh.RopeBitmap(PIXI.Texture.fromImage(this.globalConfig.constructor.cdn_static+"electrical/elecwire/ElecWireLineStyle.png")),this.addChildAt(this.rope1,1),this.addChildAt(this.rope2,1),this.drawLine(),this.drawDIs=50,this.bposter0.dp.setTo(10,8),this.bposter2.dp.setTo(-10,8),this.bposter1.dp.setTo(10,0),this.bposter3.dp.setTo(-10,0)}},{key:"removed",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removed",this).call(this)}},{key:"caculateOver",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"caculateOver",this).call(this);var i=this.bar1.curPower,n=this.bar2.curPower;if(0!=i&&0!=n){var t=Math.abs(i)+Math.abs(n);0>i*n?(this.var_rote=10*t,this.var_rote=Math.min(44,this.var_rote)):(this.var_rote=10*-t,this.var_rote=Math.max(-44,this.var_rote))}else this.var_rote=0;this.drawLine()}},{key:"getLocalBoundsElecs",value:function(){return[this]}}]),e}(h["default"])},913:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o={};e["default"]=function(){function t(){n(this,t)}return r(t,null,[{key:"AddOneAddedSate",value:function(t){o[t]=!0}},{key:"isAdded",value:function(t){return!(!o[t]||0==o[t])}},{key:"deleteState",value:function(t){delete o[t]}}]),t}()},914:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===undefined){var r=Object.getPrototypeOf(t);return null===r?undefined:p(r,e,i)}if("value"in n)return n.value;var o=n.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(627),h=function(t){return t&&t.__esModule?t:{"default":t}}(u);e["default"]=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i.globalConfig=t,i.lightsCapNums=0,i.myW=1024,i.myH=1;var o=i.__createCanvas(i.myW,i.myH),a=o.getContext("2d"),s=PIXI.Texture.fromCanvas(o,PIXI.SCALE_MODES.DEFAULT);return i.myCanvas=o,i.myCtx=a,i.myTexture=s,i.myIndex=0,i.bulbPosition={x:1,y:1},i.bulbsData=[],i.updataBulbsData(),i.initSuccess=!0,i.pluginName="BulbShineRender",i.uniforms={},i.updateUniforms(),i.ticker=l.M.addTicker(function(){i.updateVisible()},!0),i}return o(e,t),a(e,[{key:"__createCanvas",value:function(t,e){var i=document.createElement("div");return i.innerHTML="<canvas width='"+t+"px' height='"+e+"px' style='width:"+t+"px;height:"+e+"px;background:#000000;'></canvas>",i.childNodes[0]}},{key:"destroy",value:function(){this.globalConfig=null,l.M.removeTicker(this.ticker),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"getColor",value:function(t){var e=t>>16&255,i=t>>8&255,n=t>>0&255;return new Float32Array([e/255,i/255,n/255,1])}},{key:"mapPoint",value:function(t){this.WIDTH=this.globalConfig.main.canvas.width,this.HEIGHT=this.globalConfig.main.canvas.height;var e=this.globalConfig.main.getViewRect(this.globalConfig.main.viewStack),i=Math.max(e.width/this.WIDTH,e.height/this.HEIGHT);this.rect=new PIXI.Rectangle(e.x,e.y,this.WIDTH*i,this.HEIGHT*i);var n=this.WIDTH,r=this.HEIGHT,o=n*(t.x-this.rect.x)/this.rect.width,a=r-r*(t.y-this.rect.y)/this.rect.height;return new PIXI.Point(o,a)}},{key:"mapBulbPoints",value:function(t){for(var e=0;t.length>e;e++){var i=t[e];i.isBreak||(t[e].point=this.mapPoint(i.point))}}},{key:"pushData",value:function(t){var e=this.imgData.data;t+=8388607;var i=(16711680&t)>>16,n=(65280&t)>>8,r=255&t;e[this.myIndex++]=i,e[this.myIndex++]=n,e[this.myIndex++]=r,e[this.myIndex++]=255}},{key:"renderData2Texture",value:function(){this.myCtx.fillStyle="#000000",this.myCtx.fillRect(0,0,this.myW,this.myH),this.myIndex=0,this.imgData=this.myCtx.getImageData(0,0,this.myW,this.myH);for(var t=0;this.bulbsData.length>t;t++){var e=this.bulbsData[t],i=e.isBreak,n=e.voltage*e.power>.03;!i&&n&&(this.pushData(e.point.x),this.pushData(e.point.y),this.pushData(e.voltage),this.pushData(e.power))}this.myCtx.putImageData(this.imgData,0,0)}},{key:"updateUniforms",value:function(){this.uniforms.colorU=this.getColor(16711680),this.u_Sampler=this.myTexture;var t=this.globalConfig.main.canvas.width,e=this.globalConfig.main.canvas.height;this.uniforms.iResolution=new Float32Array([t,e]),this.uniforms.bulbNum=this.bulbsData.length,this.uniforms.scale=this.globalConfig.main.view.scale.x}},{key:"updateVisible",value:function(){this.visible=this.globalConfig.BULB_SHINE_VISIBLE}},{key:"updataBulbsData",value:function(){this.bulbsData&&(this.bulbsData=h["default"].GetDataByType("BulbShineGraphic"),this.mapBulbPoints(this.bulbsData),this.renderData2Texture())}},{key:"updateData",value:function(){this.updataBulbsData(),this.myTexture.update(),this.updateUniforms()}},{key:"checkDelete",value:function(){h["default"].DataBaseTableHasData("BulbShineGraphic")||this.destroy()}},{key:"_renderWebGL",value:function(t){this.updateData(),this.checkDelete();var e=t.plugins[this.pluginName];try{e||(PIXI.WebGLRenderer.registerPlugin(this.pluginName,c),t.plugins[this.pluginName]=new c(t),e=t.plugins[this.pluginName]),t.setObjectRenderer(e),e.render(this)}catch(i){this.initSuccess=!1}}}]),e}(PIXI.Sprite);var c=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.gl=t.gl,i}return o(e,t),a(e,[{key:"start",value:function(){this.shader||this._initShader()}},{key:"onContextChange",value:function(){this._initShader()}},{key:"_initShader",value:function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new PIXI.Shader(this.gl,this.__getVShaderSource(),this.__getFShaderSource());var t=this.gl,e=this.shader.attributes,i=[-1,1,0,1,1,0,-1,-1,0,1,-1,0];this.vertexBuffer=PIXI.glCore.GLBuffer.createVertexBuffer(t,new Float32Array(i),t.STATIC_DRAW);var n=this.renderer.createVao();n.addAttribute(this.vertexBuffer,e.position,t.FLOAT,!1,0,0),this.renderer.bindVao(n),this.vao=n}},{key:"render",value:function(t){var e=this.renderer,i=e.gl,n=this.shader;e.bindShader(n),t.uniforms.u_Sampler=e.bindTexture(t.u_Sampler),Object.assign(n.uniforms,t.uniforms),this.renderer.bindVao(this.vao),this.vao.draw(i.TRIANGLE_STRIP,4,0)}},{key:"destroy",value:function(){var t=this.renderer.gl;this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffer&&(t.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"__getVShaderSource",value:function(){return"\n            attribute vec3 position;\n            void main() {\n                gl_Position = vec4(position, 1.0);\n            }\n            "}},{key:"__getFShaderSource",value:function(){return"            \n        precision highp float;\n        uniform vec4 colorU; \n        uniform vec2 iResolution;\n        uniform sampler2D u_Sampler;\n        uniform float bulbNum;\n        uniform float scale;\n        int ii = 0;\n      float getValue()\n      {\n        float ind = (float(ii)+ 0.5) / 1024.0;\n        vec4 smp = texture2D(u_Sampler, vec2(ind, 0.5));\n        ii = ii + 1;\n        float r = smp.r * 255.0;\n        float g = smp.g * 255.0;\n        float b = smp.b * 255.0;\n        return ((r*256.0+g)*256.0+b) - 8388607.0;\n      }\n      \n      //点到圆的距离\n      float sdfCircle(vec2 p, vec2 co)\n      {\n        float dis = length(p-co);\n        return 1./(pow(dis,1.4));\n      }\n      vec2 uvCorrect(vec2 pp, vec2 ir){\n        vec2 uv = pp / ir;\n        vec2 p = uv - .5; \n        p.x *= ir.x / ir.y;\n        return p;\n      }\n      void main() {\n        vec2 dd = iResolution * vec2(0.5);\n        vec2 p = uvCorrect(gl_FragCoord.xy,iResolution.xy);\n        vec3 bgColor = vec3(0.,0.,0.);\n        vec3 shineCol = vec3(.92,.63,0.);\n        vec3 col = vec3(0.);\n        //最多计算30个灯泡\n        for(float i = 0.; i< 10.; ++i){\n          float x = getValue();\n          float lastIndex = bulbNum;\n          if(x < -15.)\n          {\n            break;\n          }\n          \n          float y = getValue() + 27.5 * scale; // 校准y方向的坐标\n          float vol = getValue() * 0.002;\n          float power = getValue() * 0.002;\n          vec2 bulbPos = uvCorrect(vec2(x,y),iResolution.xy);\n          float RDisCirlce = sdfCircle(bulbPos, p);\n\n          vec3 I = (vol * .17 * power * scale) * (RDisCirlce * shineCol / 62.);\n          col += I;\n        }      \n        gl_FragColor=vec4(col,.0);\n      }\n            \n            "}}]),e}(PIXI.ObjectRenderer)},915:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e["default"]=function(){function t(e,i){n(this,t),this.jouleLaw=e,this.redLiquid=i,this.energy=0,this.addE=0,this._removed=!1,this.maskGra=new PIXI.Graphics,this.redLiquid.addChild(this.maskGra),this.maskGra.scale.y=-1,this.redLiquid.mask=this.maskGra,this.w0=40,this.value0=7,this.h0=this.value2h(this.value0),this.h=this.h0,this.sa=1,this.hSpeed=.1}return r(t,[{key:"update",value:function(){if(!this._removed){this.energy+=.1*(1-1/(this.addE*(1/(this.addE+1/9)+1)*this.sa+1)-this.energy),0>this.energy&&(this.energy=0);var t=this.value0+7*this.energy,e=this.value2h(t),i=e-this.h,n=(i>0?1:-1)*this.hSpeed;i>0&&Math.abs(this.addE)>1e-4&&(n*=Math.abs(this.addE)/.01),Math.abs(i)<Math.abs(n)&&(n=i),this.addE=0,this.h+=n,this.updateMask()}}},{key:"value2h",value:function(t){return 45+25*t}},{key:"updateMask",value:function(){this.maskGra.clear(),this.maskGra.beginFill(16711680,.5),this.maskGra.drawRect(-10,0,this.w0,this.h),this.maskGra.drawRect(-10+this.w0,0,this.w0,2*this.h0-this.h),this.maskGra.endFill()}},{key:"releaseEnergy",value:function(){this.energy=0}},{key:"addEnergy",value:function(t){this.addE=t}},{key:"destroy",value:function(){this.jouleLaw=null,this.redLiquid=null,this._removed=!0}}]),t}()},916:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(501),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(t,i,o){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,o))}return o(e,t),a(e,[{key:"getValue",value:function(t){return this.A*Math.cos(this.omiga*t+this.phi)}}]),e}(l["default"])},917:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(501),l=function(t){return t&&t.__esModule?t:{"default":t}}(s);e["default"]=function(t){function e(t,i,o){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,o))}return o(e,t),a(e,[{key:"getValue",value:function(t){var e=(this.omiga*t+this.phi)%(2*Math.PI);return 0>e&&(e+=2*Math.PI),e<Math.PI?this.A:-this.A}}]),e}(l["default"])},918:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(0),u=i(219),h=n(u),c=i(220),p=n(c),f=i(221),d=n(f);e["default"]=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.config));return i.moduleMain=t,i.linkBindMCMap=new l.HashMap,i.bindMC=new p["default"]("ground"),i.bindMC.bindinger=new d["default"](null,i.bindMC,i.bindMC.name),i.bindMC.bindinger.globalConfig=t.globalConfig,i.bindMC.bindinger.elecUtil=t.elecUtil,i.bindMC.bindinger.isGround=!0,i}return a(e,t),s(e,[{key:"init",value:function(){}},{key:"linkBindMC",value:function(t){if(!this.linkBindMCMap.has(t.UID)){var e={},i=this.createBWire(t,this.bindMC);e.UID=t.UID,e.wire=i,this.linkBindMCMap.put(e.UID,e)}}},{key:"unLinkBindMC",value:function(t){if(this.linkBindMCMap.has(t.UID)){var e=this.linkBindMCMap.get(t.UID),i=e.wire;i.isGround=!0,i.unLink(i.bposter0),i.unLink(i.bposter1),this.linkBindMCMap.remove(t.UID),l.ArrayUtil.removeValueFromArray(this.zuheCompArr,i),i.removed.call(i),i.zuheBox=null,i._root_=null,i.parent&&i.parent.removeChild(i)}}},{key:"getAllLinkElec",value:function(){var t=[];return this.bindMC.bindinger.friendPostersArr.forEach(function(e){t.push(e.body)}),t}},{key:"destroy",value:function(){}}]),e}(h["default"])}});