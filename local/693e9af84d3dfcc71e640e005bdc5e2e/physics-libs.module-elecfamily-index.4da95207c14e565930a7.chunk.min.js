/*!
 * Copyright (c) 2017 Nobook inc.
 * 
 * (TBD)
 * 
 * Version: 0.5.92
 * Date: Sat Mar 30 2019 10:13:19 GMT+0800 (中国标准时间)
 */
webpackJsonpPhysicsCanvas([6],{418:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(101),l=function(e){return e&&e.__esModule?e:{"default":e}}(s),u=function(e){function t(e){r(this,t),e.iElecInter=1;var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.Resistance=0,i.classname="BaseElecWire",i}return o(t,e),a(t,[{key:"linkTwoBindMC",value:function(e,t){this.elecUtil.linkWireBindMC(this.bposter0,e),this.elecUtil.linkWireBindMC(this.bposter1,t)}},{key:"unLink",value:function(e){e&&e.bindinger&&e.bindinger.breakBinding.call(e.bindinger)}}]),t}(l["default"]);u.UPDATE_POSTER_POSITION="update_poster_position",t["default"]=u},419:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=i(101),l=r(s),u=i(102),h=r(u);t["default"]=function(e){function t(e){n(this,t),e.iElecInter=6;var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.name=e.name,i.zuheBox=e.zuheBox,i.Resistance=e.resistance||h["default"].MIN_RESISTANCE,i.classname="BaseElecResistance",i.bposter0.bindinger.set_myroad(i.bposter1.bindinger,i.Resistance),i}return a(t,e),t}(l["default"])},423:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var n=i(461),o=(r(n),i(804)),a=r(o),s=i(803),l=r(s),u=i(812),h=r(u),c=i(813),f=r(c),p=i(817),d=r(p),b=i(818),y=r(b),g=i(821),v=r(g),m=i(819),_=r(m),P=i(820),w=r(P),k=i(807),C=r(k),O=i(823),A=r(O),E=i(806),M=r(E),T=i(810),S=r(T),L=i(822),j=r(L),I=i(808),N=r(I),x=i(805),D=r(x),B=i(811),R=r(B),F=i(809),U=r(F),H=i(816),W=r(H),V=i(814),G=r(V),X=i(815),q=r(X),z=i(824),Y=r(z),$=i(801),K=r($);K["default"].classList={ChaTouTwo:a["default"],ChaTouThree:l["default"],ElecFamilyLight:h["default"],ElecFamilyLightHolder:f["default"],ElecFamilySwitchA:d["default"],ElecFamilySwitchB:y["default"],ElecFamilyTwoHoleOutlets:v["default"],ElecFamilyThreeHoleOutlets:_["default"],ElecFamilyTv:w["default"],ElecFamilyFan:C["default"],ElecFamilyWave:A["default"],ElecFamilyCooker:M["default"],ElecFamilyInserted:S["default"],ElecFamilyWash:j["default"],ElecFamilyFridge:N["default"],ElecFamilyAir:D["default"],ElecFamilyKettle:R["default"],ElecFamilyHeater:U["default"],ElecFamilyStove:W["default"],ElecFamilyPencil:G["default"],ElecFamilyPower:q["default"],ElecFamilyWire:Y["default"],ComTimerNew:r(i(513))["default"]},t["default"]=K["default"]},461:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function y(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:y(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(103),c=r(h),f=i(802),p=r(f),d=i(101),b=r(d);t["default"]=function(e){function t(e){n(this,t),e.iElecInter=0;var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.touBox=new PIXI.Sprite,i.showLineType=2,i.lineNameArr=["ElecWireLineStyleRed","ElecWireLineStyleBlueB","ElecWireLineStyleYellow"],i.bindChar=null,i.charDotP=null,i._charLineArr=[],i.hotCirArr=[],i.iElecInter=-3,i.isCheckPencilLink=!1,i.resetDisLoadComp=!0,i.isCharBase=!1,i}return a(t,e),s(t,[{key:"createRope",value:function(e,t){var i=void 0;if(this.globalConfig.isWinXP){var r=new PIXI.Graphics;r.lineNameInd=t,i=r}else i=new PIXI.mesh.Rope(PIXI.Texture.fromImage(e),[]);return i}},{key:"setRopePoints",value:function(e,t,i){var r=void 0;if(t){r=[];var n=!0,o=!1,a=undefined;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value,h=!1,c=!0,f=!1,p=undefined;try{for(var d,b=r[Symbol.iterator]();!(c=(d=b.next()).done);c=!0){var y=d.value;if(u.x===y.x&&u.y===y.y){h=!0;break}}}catch(g){f=!0,p=g}finally{try{!c&&b["return"]&&b["return"]()}finally{if(f)throw p}}h||r.push(u)}}catch(g){o=!0,a=g}finally{try{!n&&l["return"]&&l["return"]()}finally{if(o)throw a}}}if(this.globalConfig.isWinXP){i=e.lineNameInd||i,e.clear();e.lineStyle(9,[8523520,1276846,15052063,10263456][i]),r.forEach(function(t,i){0===i?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y)})}else e.setRopePoints(r)}},{key:"addHeadWires",value:function(e){var t=this;e.forEach(function(e){var i=e.type?e.type:0,r=t.createRope(t.globalConfig.cdn_static+"electrical/elecwire/"+t.lineNameArr[i]+".png");t.touBox.addChild(r),t.setRopePoints(r,e.pArr,i)})}},{key:"clearHeadWires",value:function(){u.M.removeAllChild(this.touBox)}},{key:"drawLineArr",value:function(){}},{key:"addChar",value:function(){var e=this,t=this.cha2||this.cha3;if(t){this.charDot.visible=!1,t.visible=!1,this.charDotP=u.M.getSPPoint(this.charDot);var i=this.dependEquipments;if(i){this.main.viewStack.updateTransform();var r=this.main.viewStack.toLocal(u.M.getSPPoint(t),this.parent);this.bindChar=i[0],u.M.setSPPoint(this.bindChar.parent,r),this.charLine=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/ElecWireLineStyle.png",3),this.addChildAt(this.charLine,0),this.charLine.visible=!1,this.bindChar.bindComp=this,this.__isOwnChar=!0,this.removeChild(this.charDot),this.removeChild(this["char"]),this._fresh_bindChar(),setTimeout(function(){e.hadDestory||(e.freshCharLine(),e.freshLinks(),e.charLine.visible=!0,e.addBindCharOK(),e.dispatchLoadedComplete())})}}}},{key:"addBindCharOK",value:function(e,t){}},{key:"addHotCir",value:function(e,t,i,r,n){var o={};(0,c["default"])(o,this.paramObj,{bindMC:e,Radius:i});var a=new p["default"](o);return this.addChild(a),this.hotCirArr.push(a),t&&u.M.setSPPoint(a,t),a.elecInsOne=r,a.hotFlag=n,a}},{key:"freshCharLine",value:function(e){if(this.main&&this.charLine){e||(e=this.bindChar);var t=void 0;if(this.main.view.updateTransform(),"ElecInsOne"===e.classname){t=this.toLocal(e.posP,e.pare),0===e.charType?t.y-=10:t.y+=10}else t=this.toLocal(new u.Point(0,0),e);this._charLineArr=u.M.getRoundP(this.charDotP,new u.Point(t.x,this.charDotP.y),t),this.setRopePoints(this.charLine,this._charLineArr)}}},{key:"_checkPencilLink",value:function(){this.main.getAllElecArr().forEach(function(e){var t=e.component;t&&"ElecFamilyPencil"===t.classname&&t.checkPencilLink.call(t)})}},{key:"added",value:function(){this.addChildAt(this.touBox,0),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.addChar(),this.drawLineArr()}},{key:"moveDragHandle",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveDragHandle",this).call(this,e),this.classname&&"7"===this.cateid&&(this.freshCharLine(),this.isCheckPencilLink&&this._checkPencilLink())}},{key:"removed",value:function(){var e=this;if("ElecFamilyWire"!==this.classname){this.bindChar&&(this.bindChar.unBind.call(this.bindChar),this.__isOwnChar&&(this.bindChar.bindComp=null,this.main.removeEquipment(this.bindChar)),this.bindChar=null);this.elecUtil.getAllElecWires(this).forEach(function(t){e.main.removeEquipment.call(e.main,t)})}this.parent.removeEventListener(this.NBDrag.event.STOP_DRAG,this._dragHandle),this.parent.removeEventListener(this.NBDrag.event.DRAG_MOVE,this._dragHandle),"ElecFamilyWire"!==this.classname&&l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this);return this.bindChar&&(e.bindCharX=this.bindChar.parent.x,e.bindCharY=this.bindChar.parent.y,this.bindChar.bindHO&&("ElecInsOne"===this.bindChar.bindHO.classname?e.bindInsInd=this.bindChar.bindHO.index:e.bindChar_bindHO_UID=this.bindChar.bindHO.UID)),e}},{key:"setData",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),this._fresh_bindChar()}},{key:"_fresh_bindChar",value:function(){this.bindChar&&this.setData_obj&&!this.bindChar._hasSetData&&(this.bindChar._hasSetData=!0,this.bindChar.parent.x=this.setData_obj.bindCharX,this.bindChar.parent.y=this.setData_obj.bindCharY)}},{key:"freshLinks",value:function(){if(this.bindChar&&this.setData_obj&&this.setData_obj.bindChar_bindHO_UID&&this.bindChar){this.bindChar.toBindHO(this.getChildByUID(this.setData_obj.bindChar_bindHO_UID))}}},{key:"setDataOver",value:function(){this.setData_obj&&this.setData_obj.bindInsInd!==undefined&&(this.__bindChar_setDataOverNum=0,this.__bindChar_setDataOver())}},{key:"__bindChar_setDataOver",value:function(){var e=this;this.bindChar?this.bindChar.endEnd():50>this.__bindChar_setDataOverNum&&(this.__bindChar_setDataOverNum++,setTimeout(function(){e.hadDestory||e.__bindChar_setDataOver()},100))}}]),t}(b["default"])},462:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(461),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.ratedP,a=e.ratedV,s=e.workV;return a=a||220,s=s||200,i.ratedV=a,i.ratedP=o,i.oriRateP=o,i.freshMyResistance(),i.workV=s,i.isOutElec=!1,i.canReset=!0,i}return o(t,e),a(t,[{key:"freshMyResistance",value:function(){this.Resistance=l.M.sq(this.ratedV)/this.ratedP}},{key:"setWorkPower",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWorkPower",this).call(this,e),this.bg&&2===this.bg.totalFrames&&(this.bg.currentFrame=Math.abs(e)>this.workV?1:0)}},{key:"reset",value:function(){this.ratedP=this.oriRateP,this.freshMyResistance(),this.freshLibPan(),this.diyChanged()}},{key:"getConf",value:function(){var e=this,i=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getConf",this).call(this);return i.confArr.push({type:this.ComponentProperty.INPUT,name:this.language.getLocaleStr("ratedPowerfull"),showValue:this.ratedP+"W",enterUnit:"W",maxValue:3e3,minValue:1,callBack:function(t){e.ratedP=l.M.getNumStr(t.showValue)-0,e.freshMyResistance(),e.diyChanged()}}),i}},{key:"getTipMess",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getTipMess",this).call(this);return e+="\n    "+this.language.getLocaleStr("ratedVoltage")+": "+this.ratedV+"V\n    ",this.ratedP!==undefined&&(e+=this.language.getLocaleStr("ratedPowerfull")+": "+this.ratedP+"W\n    "),e}}]),t}(h["default"])},466:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);e.length>t;t++)i[t]=e[t];return i}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(0),l=i(478),u=r(l),h=i(480),c=r(h),f=i(484),p=r(f),d=function(){function e(t){o(this,e),this.moduleMain=t,this.globalConfig=t.globalConfig,this.main=this.globalConfig.main}return a(e,[{key:"destroy",value:function(){this.elect_Update.destroy(),this.elect_Update=null,this.moduleMain=null,this.globalConfig=null}},{key:"init",value:function(){this.elect_Update=new u["default"](this.moduleMain),this.electricField_Update=new c["default"](this.moduleMain),this.magneticField_Update=new p["default"](this.moduleMain)}},{key:"setActive",value:function(e){this.elect_Update.setActive(e)}},{key:"diyChanged",value:function(e){this.globalConfig&&this.globalConfig.main&&this.globalConfig.main.isDestroy||this.elect_Update&&(this.elect_Update.checkAllChanged(e),this.globalConfig.main.dispatchEvent("diyChanged"))}},{key:"checkIsWire",value:function(e){return!!e&&1===e.iElecInter}},{key:"getBposterWires",value:function(e){var t=[];return e&&e.bindinger&&e.bindinger.friendPostersArr&&e.bindinger.friendPostersArr.length>0&&$.each(e.bindinger.friendPostersArr,function(e,i){"ElecWire"!==i.body.classname&&"ElecFamilyWire"!==i.body.classname||t.push(i)}),t}},{key:"getBposterWiresBody",value:function(e){var t=this.getBposterWires(e),i=[];return each(t,function(e,t){i.push(t.body)}),i}},{key:"getAllBposterWires",value:function(e){var t=[];return $.each(e.bPsArr,function(e,i){$.each(i.friendPostersArr,function(e,i){"ElecWire"!==i.body.classname&&"SElecWire"!==i.body.classname||t.push(i)})}),t}},{key:"getAllElecWires",value:function(e){var t=new s.HashMap;return e.bPsArr&&$.each(e.bPsArr,function(e,i){$.each(i.friendPostersArr,function(e,i){"ElecWire"!==i.body.classname&&"SElecWire"!==i.body.classname&&"ElecFamilyWire"!==i.body.classname||t.put(i.body.UID,i.body)})}),t.values()}},{key:"getWireLinkBposter",value:function(e){var t=this,i=null;return e&&e.bindinger&&e.bindinger.friendPostersArr&&e.bindinger.friendPostersArr.length&&$.each(e.bindinger.friendPostersArr,function(e,r){if(!t.checkIsWire(r.body))return i=r,!1}),i}},{key:"getWireBposterElec",value:function(e){var t=this,i=null;return e&&e.bindinger&&e.bindinger.friendPostersArr&&e.bindinger.friendPostersArr.length&&$.each(e.bindinger.friendPostersArr,function(e,r){if(!t.checkIsWire(r.body))return i="BaseElecResistance"===r.body.classname?r.body.zuheBox:r.body,!1}),i}},{key:"getWireAllBposterElecs",value:function(e){if(!e)return[];var t=new Map,i=this.getWireBposterElec(e.bposter0),r=this.getWireBposterElec(e.bposter1);return i&&t.set(i.uid,i),r&&t.set(r.uid,r),[].concat(n(t.values()))}},{key:"checkIsDuan",value:function(e){if(!e||this.checkIsWire(e))return!1;var t=this.getBposterWiresBody(e.bposter0),i=this.getBposterWiresBody(e.bposter1),r=!1;return each(t,function(e,t){if(each(i,function(e,i){if(t.uid===i.uid)return r=!0,!1}),r)return!1}),r}},{key:"checkIsPower",value:function(e){return 2===e.iElecInter}},{key:"checkIsLamp",value:function(e){return 3===e.iElecInter}},{key:"checkIsVoltmeter",value:function(e){return 4===e.iElecInter}},{key:"checkIsAmpereMeter",value:function(e){return 5===e.iElecInter}},{key:"getNextName",value:function(t){var i=void 0;switch(t.iElecInter){case 3:i=e.L;break;case 7:i=e.S;break;case 5:i=e.A;break;case 4:i=e.U;break;case 2:i=e.E;break;case 0:case-1:i="SolenoidalWinding"===t.classname||"SimpleCoilSkin"===t.classname||"SolenoidMagneticInductionLine"===t.classname?e.L:"ElecBuzzer"===t.classname?e.H:"ElecMotors"===t.classname?e.M:e.R}var r=this.globalConfig.main.getEquipmentArr(),n=r.length,o=[],a=void 0;for(a=0;n>a;a++){var l=r[a];if(l.component){var u=l.component;if(!u.flagLabel||0===u.flagLabel.length)continue;var h=!1;switch(i){case e.L:"ElecLampAndHolder"!==u.classname&&"ElecLampAndHolderRes"!==u.classname&&"SimpleCoilSkin"!==u.classname&&"SolenoidalWinding"!==u.classname||(h=!0);break;case e.S:"ElecSinglePloeSingleThrowSwitch"!==u.classname&&"ElecSinglePloeDoubleThrowSwitch"!==u.classname||(h=!0);break;case e.A:"InlandAmpereMeter"!==u.classname&&"ElecAmpereMeter"!==u.classname&&"SensitivityGalvanometer"!==u.classname||(h=!0);break;case e.U:"InlandVoltmeter"===u.classname&&(h=!0);break;case e.R:"ElecResistanceBox"!==u.classname&&"ElecResistance"!==u.classname&&"ElecSlideRheostat"!==u.classname||(h=!0);break;case e.E:"DryBattery"!==u.classname&&"BatteryHolder"!==u.classname&&"Battery"!==u.classname&&"ElecPowerStudent"!==u.classname||(h=!0);break;case e.H:"ElecBuzzer"===u.classname&&(h=!0);break;case e.M:"ElecMotors"===u.classname&&(h=!0)}if(!h)continue;o.push(u.flabel2.text-0)}}var c=i;if(0===o.length)return c+1;o.sort(Array.NUMERIC);var f=-1;for(a=0;o.length>a;a++){var p=a+1;s.ArrayUtil.arrayContainsValue(o,p)||(f=p)}return-1!==f?c+f:c+(o.length+1)}},{key:"modifyBinPosterType",value:function(e,t){if(!this.checkIsWire(this)){var i=e.bindinger.friendPostersArr,r=void 0,n=i.length;for(r=0;n>r;r++){var o=i[r];this.checkIsWire(o.body)&&(o.binPoster.currentFrame=t)}e.bindinger.body.updateBinds()}}},{key:"linkWireBindMC",value:function(e,t){var i=void 0,r=void 0,n=t.bindinger.friendPostersArr.concat([t.bindinger]);for(r=n.length,i=0;r>i;i++){var o=n[i];o.friendPostersArr.push(e.bindinger),e.bindinger.friendPostersArr.push(o)}}},{key:"setBindXY",value:function(e,t){e.x=t.x+t.width/2,e.y=t.y,!this.globalConfig.DEBUG&&t.parent&&t.parent.removeChild(this.bp)}},{key:"getMagStaCompArr",value:function(){for(var e=[],t=this.globalConfig.main.getEquipmentArr(),i=t.length-1;i>=0;i--){var r=t[i];r&&(r.component&&(r=r.component,r.isLock||2===r.magType&&e.push(r)))}return e}},{key:"getElecStaCompArr",value:function(){for(var e=[],t=this.globalConfig.main.getEquipmentArr(),i=t.length-1;i>=0;i--){var r=t[i];r&&(r.component&&(r=r.component,r.isLock||1===r.magType&&e.push(r)))}return e}},{key:"getEquipmentArr",value:function(e){var t=this.globalConfig.main.getEquipmentArr(),i=[];return e?e instanceof Array?$.each(t,function(t,r){r.component&&s.ArrayUtil.arrayContainsValue(e,r.component.classname)&&i.push(r.component)}):$.each(t,function(t,r){r.component&&r.component.classname===e&&i.push(r.component)}):$.each(t,function(e,t){i.push(t.component)}),i}},{key:"findEAb",value:function(e,t){return s.ArrayUtil.clear(e.mapfind),t.bindinger?this.findBindEA(e,t.bindinger.friendPostersArr):null}},{key:"findBindEA",value:function(e,t){var i=void 0,r=t.length;for(i=0;r>i;i++)if(-1===e.mapfind.indexOf(t[i]))if(e.mapfind.push(t[i]),this.checkIsWire(t[i].body)){var n=0;if(0!==(n="bposter0"===t[i].name?this.findBindEA(e,t[i].body.bposter1.bindinger.friendPostersArr):this.findBindEA(e,t[i].body.bposter0.bindinger.friendPostersArr)))return n}else{if(!t[i].body)return 0;var o=t[i].body.classname;if("ElectricAppliance"===o||"MetalPlates"===o)return t[i];if(t[i].body.isBreak)return 0;for(var a=[],s=0;;){if(!t[i].body["bposter"+s])break;t[i].body["bposter"+s].UID!==t[i].UID&&a.push(t[i].body["bposter"+s]),s++}var l=void 0,u=a.length;for(l=0;u>l;l++){var h=a[l].bindinger.body.classname;if("ElectricAppliance"===h||"MetalPlates"===h)return a[l];var c=this.findBindEA(e,a[l].bindinger.friendPostersArr);if(0!==c)return c}}return 0}},{key:"getTime",value:function(){return this.elect_Update.time}},{key:"getTimeStep",value:function(){return this.elect_Update.timeStep}},{key:"getUnNode",value:function(e,t){return _.get(e,"bposter"+t+".bindinger.unNode",null)}},{key:"getUnNodeUID",value:function(e,t){return _.get(e,"bposter"+t+".bindinger.unNode.UID",null)}},{key:"checkBindingerInElec",value:function(e){if(!e||!e.length)return!1;for(var t=null,i=0;e.length>i;i++){var r=e[i],n=_.get(r,"unNode.UID",null);if(!n)return!1;if(t){if(t!==n)return!1}else t=n}return!0}},{key:"checkBindMCInElec",value:function(e){return!!e&&this.checkBindingerInElec(e.map(function(e){return e.bindinger}))}},{key:"checkBPsInOneHui",value:function(e){return!(!e||!e.bPsArr)&&this.checkBindingerInElec(e.bPsArr)}},{key:"getNearWireBinding",value:function(e){var t=this;this.main.view.updateTransform();var i=[],r=this.getEquipmentArr("ElecWire"),n=[];return r.forEach(function(e){e.bPsArr.forEach(function(e){0===e.friendPostersArr.length&&n.push(e)})}),n.length>0&&n.forEach(function(r){var n=t.main.view.toLocal(new s.Point,r.BindMC),o=t.main.view.toLocal(new s.Point,e.BindMC);s.M.getPointLen(n,o)>t.globalConfig.connectMinDistanceNumber||i.push(r)}),i}},{key:"getNearBinding",value:function(e){var t=this;if(!e)return null;this.globalConfig.main.view.updateTransform();var i=e.BindMC.toGlobal(),r=this.getEquipmentArr(),n=99999999,o=void 0;if(r.forEach(function(e){t.checkIsWire(e)||e.bPsArr&&e.bPsArr.length&&e.bPsArr.forEach(function(e){var t=e.BindMC.toGlobal(),r=s.M.getPointLen(i,t);n>r&&(n=r,o=e)})}),o){var a=this.globalConfig.main.view.toLocal(new s.Point,e.BindMC),l=this.globalConfig.main.view.toLocal(new s.Point,o.BindMC);if(this.globalConfig.connectMinDistanceNumber>s.M.getPointLen(a,l))return o}return null}}]),e}();d.L="L",d.S="S",d.A="A",d.U="V",d.R="R",d.E="E",d.H="H",d.M="M",d.VD="VD",d.C="C",d.BATTERY_LEFT=3,d.BATTERY_RIGHT=2,d.LAMP_RIGHT=4,d.LAMP_LEFT=5,d.SLIDE_TOP_LEFT=8,d.SLIDE_TOP_RIGHT=9,d.SLIDE_BOTM_LEFT=6,d.SLIDE_BOTM_RIGHT=7,t["default"]=d},469:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t["default"]=function n(e,t){r(this,n),this.fl=e||0,this.re=t||0}},478:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(0),s=i(487),l=r(s),u=i(503),h=r(u),c=i(102),f=r(c);t["default"]=function(){function e(t){n(this,e),this.INPUT_ELEC_NAME_DEBUG=!1,this.SHOW_UNNODES_DEBUG=!1,this.moduleMain=t,this.globalConfig=t.globalConfig,this.main=this.globalConfig.main,this.NBEvent=this.main.constructor.NBEvent,this.ZERO_RESISTANCE=f["default"].MIN_RESISTANCE,this.allCompArr=[],this.staCompArr=[],this.zuheCompArr=[],this.huiArr=[],this.isChangeTrue=!1,this.time=0,this.timeStep=5e-6,this.stepLoopStepTime=0,this.addLoopInit()}return o(e,[{key:"checkAllChanged",value:function(){this.isChangeTrue=!0,this.updateCircuit()}},{key:"updateCircuit",value:function(){this.freshEquipmentArr(),this.checkNodeChange()&&(this.setChangeFalse(),this.runCircuit())}},{key:"checkNodeChange",value:function(){if(this.isChangeTrue)return!0;for(var e=!1,t=this.allCompArr.length,i=0;t>i;i++){if(this.allCompArr[i].branchChange){e=!0;break}}return e}},{key:"setChangeFalse",value:function(){this.isChangeTrue=!1;for(var e=this.allCompArr.length,t=0;e>t;t++){this.allCompArr[t].branchChange=!1}}},{key:"runCircuit",value:function(){this.startStepDis(),this.doStepDis()?this.isChangeTrue=!0:this.endStepDis()}},{key:"startStepDis",value:function(){for(var e=this.allCompArr.length,t=0;e>t;t++){var i=this.allCompArr[t];i._findFlag=0,i.huiArr=[],i.bPsArr.forEach(function(e){e.Un=0,e.unNode=null,e._findFlag=0}),i.startStep.call(i)}}},{key:"doStepDis",value:function(){var e=this,t=!1;return this.findHuiArr().forEach(function(i){i.forEach(function(e){e.huiArr=i});var r=new h["default"](e);if(r.createNodes(i),r.elecArr.length&&r.unNodes.length){var n=r.elecArr.length,o=new l["default"];o.setHead(r.unNodes.length-1);for(var s=0;n>s;s++){var u=r.elecArr[s];if(1===u.elecType)u.Resistance>0?o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,u.Resistance,1):0===u.Resistance&&e.showElecLine&&o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,e.ZERO_RESISTANCE,1);else if(9===u.elecType||10===u.elecType)o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,u.compResistance,1),o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,u.Source,2);else if(3===u.elecType)o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,-u.Power,3);else if(2===u.elecType)o.appendBranch(u.bposter0.bindinger.unNode.number,u.bposter1.bindinger.unNode.number,-u.Source,2);else if(12===u.elecType){var c=u.bposter0.bindinger.unNode.number,f=u.bposter1.bindinger.unNode.number,p=u.bposter2.bindinger.unNode.number,d=u.bposter3.bindinger.unNode.number;o.appendVCCurrentSource(c,p,f,d,u.node_a2),o.appendVCCurrentSource(f,d,c,p,u.node_a3),o.appendBranch(c,p,a1,13),o.appendBranch(f,d,a4,13),o.appendBranch(c,p,u.Source1,2),o.appendBranch(f,d,u.Source2,2)}}var b=o.caculate();if(b&&b.vns){for(var y=null,g=0,v=0;b.vns.length>v;v++){var m=r.unNodes[v+1];m.Un=b.vns[v][0],m.isGround&&(y=m),g=Math.min(g,m.Un)}y&&(g=y.Un),r.unNodes.forEach(function(e){e.Un-=g})}else{for(var _=0;r.unNodes.length>_;_++)r.unNodes[_].destroy.call(r.unNodes[_]);a.ArrayUtil.clear(r.unNodes)}r.unNodes.forEach(function(e){e.freshUn.call(e)});var P=r.reLoopCacu();t=t||P}}),t}},{key:"endStepDis",value:function(){for(var e=this.allCompArr.length,t=0;e>t;t++){var i=this.allCompArr[t];i.endStep.call(i);var r=i.bPsArr;2===r.length&&(r[0].unNode&&r[1].unNode&&r[0].unNode.UID===r[1].unNode.UID?(i.curPower=r[1].Un-r[0].Un,0!==i.Resistance&&i.Resistance!==f["default"].MAX_RESISTANCE?(i.curElec=i.isBreak?0:i.curPower/i.Resistance,i.setWorkElec.call(i,i.curElec)):0===i.Resistance&&(this.showElecLine?(i.curElec=i.isBreak?0:i.curPower/this.ZERO_RESISTANCE,i.setWorkElec.call(i,i.curElec)):i.setWorkElec.call(i,null)),i.setWorkPower.call(i,i.curPower)):(i.curPower=0,i.curElec=0,i.isBreak||(i.setWorkElec.call(i,0),i.setWorkPower.call(i,0)))),i.overStep.call(i)}this.zuheCompArr.forEach(function(e){e.overStep.call(e)})}},{key:"freshEquipmentArr",value:function(){var e=this;a.ArrayUtil.clear(this.zuheCompArr),a.ArrayUtil.clear(this.allCompArr),a.ArrayUtil.clear(this.staCompArr);for(var t=this.main.viewStack.children.length,i=0;t>i;i++){var r=this.main.viewStack.getChildAt(i).component;r.bposter0&&r.bposter1&&(r.isZuHe?(this.zuheCompArr.push(r),this.allCompArr=this.allCompArr.concat(r.zuheCompArr)):this.allCompArr.push(r),this.staCompArr.push(r))}if(7===this.globalConfig.version&&this.moduleMain.elecFamilyPower){var n=this.moduleMain.elecFamilyPower;this.zuheCompArr.push(n),this.allCompArr=this.allCompArr.concat(n.zuheCompArr)}if(this.moduleMain.groundElecManager){this.moduleMain.groundElecManager.getAllLinkElec().forEach(function(t){e.allCompArr.push(t)})}}},{key:"findHuiArr",value:function(){for(var e=this,t=this.allCompArr.filter(function(e){return!(e.isBreak||!e.elecConnect)}),i=[];t.length;){(function(){var r=t.shift();if(0!==r._findFlag)return"continue";r._findFlag=1;for(var n=[r],o=[];n.length;)!function(){var t=n.shift();if(t.bPsArr.forEach(function(e){e.friendPostersArr.forEach(function(e){var t=e.body;t&&!t.isBreak&&t.elecConnect&&0===t._findFlag&&(t._findFlag=1,n.push(t))})}),t.isGround&&e.moduleMain.groundElecManager){e.moduleMain.groundElecManager.getAllLinkElec().forEach(function(e){!e.isBreak&&e.elecConnect&&e.UID!==t.UID&&0===e._findFlag&&(e._findFlag=1,n.push(e))})}t._findFlag=2,o.push(t)}();i.push(o)})()}return i}},{key:"addLoopInit",value:function(){this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.main.addEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandle({isRunning:this.main.isRunning})}},{key:"canvasRunHandle",value:function(e){this.setActive(e.isRunning)}},{key:"setActive",value:function(e){}},{key:"stepLoop",value:function(){var e=this;this.stepLoopStepTime>0?this.stepLoopTimerFlag||(this.stepLoopTimerFlag=setTimeout(function(){e.updateCircuit(),e.time+=e.timeStep,e.stepLoopTimerFlag=0},this.stepLoopStepTime)):(this.updateCircuit(),this.time+=this.timeStep)}},{key:"destroy",value:function(){this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"showElecLine",get:function(){return this.globalConfig.showElecLine}}]),e}()},479:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(0),a=i(485),s=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(){function e(){r(this,e),this.elecArr_=[],this.CONST_k=9e9,this.GAN_VALID_MAXDIS=300,this.GAN_VALID_MINDIS=40}return n(e,[{key:"appendOne",value:function(e,t,i,r){this.elecArr_.push(new s["default"](e,t,new o.Vector2DMath(i,r)))}},{key:"clear",value:function(){o.ArrayUtil.clear(this.elecArr_)}},{key:"caculate",value:function(){var e=void 0,t=void 0,i=void 0,r=void 0;for(i=this.elecArr_.length-1,r=this.elecArr_.length,e=0;i>e;e++)for(t=e+1;r>t;t++){var n=this.getTwo_ganNum(this.elecArr_[e],this.elecArr_[t]);0>this.elecArr_[t].elecNum?this.elecArr_[e].ganNum-=n:this.elecArr_[e].ganNum+=n;var o=this.getTwo_ganNum(this.elecArr_[t],this.elecArr_[e]);0>this.elecArr_[e].elecNum?this.elecArr_[t].ganNum-=o:this.elecArr_[t].ganNum+=o}}},{key:"getTwo_ganNum",value:function(e,t){var i=void 0,r=e.v.dist(t.v);return i=r>this.GAN_VALID_MINDIS?this.GAN_VALID_MAXDIS>r?t.elecNum*this.GAN_VALID_MINDIS/r:0:t.elecNum,Math.abs(i)}},{key:"getElecV",value:function(e,t,i){var r=new o.Vector2DMath,n=this;return $.each(this.elecArr_,function(a,s){if(i&&o.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=n.getOneElecV(e,t,s);r.add(l)}),r}},{key:"getOneElecV",value:function(e,t,i){var r=i.v.dist_XY(e,t);if(0==r||r>2*this.GAN_VALID_MAXDIS)return new o.Vector2DMath(0,0);var n=Math.abs(this.CONST_k*i.elecNum/i.v.distSquared_XY(e,t)),a=new o.Vector2DMath(e-i.v.x,t-i.v.y);0>i.elecNum&&(a.x=-a.x,a.y=-a.y);var s=a.length;return new o.Vector2DMath(a.x/s*n,a.y/s*n)}},{key:"elecArr",value:function(){return this.elecArr_}}]),e}()},480:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(215),s=(r(a),i(479)),l=r(s),u=i(0);t["default"]=function(){function e(t){n(this,e),this.moduleMain=t,this.globalConfig=t.globalConfig,this.allCompArr=[],this.staCompArr=[],this.zuheFiledCompArr=new u.HashMap,this.core_=new l["default"],this.huiArr=[],this.oneHuiArr=new u.HashMap,this.allCompArrW_=[],this.allCompArrT=[]}return o(e,[{key:"checkAllChanged",value:function(){var e=this;u.ArrayUtil.clear(this.huiArr),this.getAll_comp();var t=void 0;for(t=0;this.allCompArr.length>t;t++)this.allCompArr[t].isLock&&(this.allCompArr.splice(t,1),t--);this.allCompArrT=u.ArrayUtil.copyArray(this.allCompArr),this.cacu_allElecs(),this.setFriends(),$.each(this.staCompArr,function(t,i){i.allCompArr=this.allCompArr,i.staCompArr=this.staCompArr,i.caculateBegin.call(i),i.getElecVFunc=function(t,i){return e.getElecV(t.x,t.y,i)}}),this.average_huiArr(),this.core_.clear(),$.each(this.allCompArr,function(t,i){if(i.isLock)return!0;e.core_.appendOne(i.UID,i.elecNum,i.elecPoint.x,i.elecPoint.y)}),this.core_.caculate(),$.each(this.core_.elecArr_,function(t,i){e.allCompArr[t].ganNum=i.ganNum}),$.each(this.allCompArr,function(e,t){t.setGanYingElec.call(this,{ganNum:t.ganNum})}),$.each(this.allCompArr,function(t,i){var r=e.getElecV(i.elecPoint.x,i.elecPoint.y),n=e.getNearItem(i);n?(r.nearNum=n.elecNum,r.nearItem=n,i.setElectricField(r)):(r.nearNum=0,r.nearItem=null,i.setElectricField(r))}),$.each(this.staCompArr,function(e,t){if(t.isLock)return!0;t.caculateOver.call(t,"mag")})}},{key:"getNearItem",value:function(e){var t=1e5,i=null;return $.each(this.allCompArr,function(r,n){if(e==n||e.UID==n.UID||"WastPaper"==n.classname)return!0;var o=u.M.getPointLen(n.elecPoint,e.elecPoint);t>o&&(t=o,i=n)}),i}},{key:"average_huiArr",value:function(){$.each(this.huiArr,function(e,t){var i=0,r=0;$.each(t,function(e,t){if(t.isLock)return!0;r++,i+=t.elecNum});var n=Math.floor(i/r*10)/10;$.each(t,function(e,t){if(t.isLock)return!0;t.elecNum=n})})}},{key:"getElecV",value:function(e,t,i){var r=this.core_.getElecV(e,t,i);return{x:r.x,y:r.y}}},{key:"setFriends",value:function(){var e=this;$.each(this.allCompArr,function(e,t){u.ArrayUtil.clear(t.friendArr)}),$.each(this.huiArr,function(t,i){$.each(i,function(t,r){r.friendArr=e.get_item_friendArr(i,r)})})}},{key:"get_item_friendArr",value:function(e,t){var i=[];return $.each(e,function(e,r){r.UID!=t.UID&&i.push(r)}),i}},{key:"cacu_allElecs",value:function(){var e=this;this.oneHuiArr.clear();var t=[];if(0!=this.allCompArrT.length){for(t.push(this.allCompArrT.pop());t.length>0;){var i=t.shift();this.oneHuiArr.insert(i.UID,i);var r=this.get_OtherItems(i,this.allCompArr);if(!r)return;$.each(r,function(i,r){e.oneHuiArr.containsKey(r.UID)||u.ArrayUtil.arrayContainsValue(t,r)||(u.ArrayUtil.removeValueFromArray(e.allCompArrT,r),t.push(r))})}var n=this.oneHuiArr.values();2>n.length||this.huiArr.push(n),this.allCompArrT.length>0&&this.cacu_allElecs()}}},{key:"get_OtherItems",value:function(e,t){var i=[];if(!e)return this.hitArr_;return $.each(t,function(t,r){r.hitRect&&!r.isLock&&e.checkHitRect&&e.checkHitRect(r)&&i.push(r)}),i}},{key:"getAll_comp",value:function(){var e,t,i=void 0,r=void 0;this.hasZuhe=!1,u.ArrayUtil.clear(this.allCompArr),u.ArrayUtil.clear(this.staCompArr),this.zuheFiledCompArr.clear();var n=this.globalConfig.main.getEquipmentArr();for(i=n.length-1;i>=0;i--){var e=n[i];e&&(e.component&&(e=e.component,-2==e.iElecInter&&(this.staCompArr.push(e),e.isZuHeFiled?(this.zuheFiledCompArr.insert(e.UID,e),this.allCompArr=this.allCompArr.concat(e.zuheFiledCompArr),this.hasZuhe=!0):this.allCompArr.push(e))))}for(r=this.staCompArr.length,i=0;r>i;i++){var t=this.staCompArr[i];t.allCompArr=this.allCompArr,t.staCompArr=this.staCompArr}}},{key:"removeElec",value:function(e){e&&this.zuheFiledCompArr.remove(e.UID)}}]),e}()},481:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=i(0);t["default"]=function o(e,t,i){r(this,o),this.UID=e,this.magNum=t,(this.v=i)||(this.v=new n.Vector2DMath)}},482:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=i(0);t["default"]=function o(e,t,i,a,s){r(this,o),this.UID=e,this.lineL=t,this.v=i,a&&(this.topP=a.clone()),s&&(this.bottomP=s.clone()),this.v||(this.v=new n.Vector2DMath)}},483:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(0),s=i(481),l=r(s),u=i(482),h=r(u);t["default"]=function(){function e(){n(this,e),this.magArr_=[],this.magLineArr_=[],this.CONST_k=1e6,this.GAN_VALID_MAXDIS=120,this.GAN_VALID_MINDIS=40}return o(e,[{key:"appendOne",value:function(e,t,i,r){this.magArr_.push(new l["default"](e,t,new a.Vector2DMath(i,r)))}},{key:"appendLineOne",value:function(e,t,i,r,n,o){this.magLineArr_.push(new h["default"](e,r,new a.Vector2DMath(t,i),n,o))}},{key:"clear",value:function(){a.ArrayUtil.clear(this.magArr_),a.ArrayUtil.clear(this.magLineArr_)}},{key:"caculate",value:function(){var e=void 0,t=void 0;for(this.magArr_.length-1,this.magArr_.length,e=0;this.magArr_.length-1>e;e++)for(t=e+1;this.magArr_.length>t;t++){var i=this.getTwo_ganNum(this.magArr_[e],this.magArr_[t]);0>this["this"].magArr_[t].magNum?this.magArr_[e].ganNum-=i:this.magArr_[e].ganNum+=i;var r=this.getTwo_ganNum(this.magArr_[t],this.magArr_[e]);0>this.magArr_[e].magNum?this.magArr_[t].ganNum-=r:this.magArr_[t].ganNum+=r}}},{key:"getTwo_ganNum",value:function(e,t){var i=e.v.dist(t.v);return i>this.GAN_VALID_MINDIS?this.GAN_VALID_MAXDIS>i?t.magNum*this.GAN_VALID_MINDIS/i:0:t.magNum}},{key:"getMagV",value:function(e,t,i){var r=new a.Vector2DMath,n=this;return $.each(this.magArr_,function(o,s){if(i&&a.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=n.getOneMagV(e,t,s);r.add(l)}),$.each(this.magLineArr_,function(o,s){if(i&&a.ArrayUtil.arrayContainsValue(i,s.UID))return!0;var l=n.getOneLineMagV(e,t,s);r.add(l)}),r}},{key:"getOneLineMagV",value:function(e,t,i){if(0==i.lineL)return new a.Vector2DMath;var r=new a.Vector2DMath,n=new a.Point(e,t),o=a.M.getPointLen(n,i.topP)+a.M.getPointLen(n,i.bottomP)-a.M.getPointLen(i.topP,i.bottomP),s=void 0;if(1>Math.abs(o))s=1;else{var l=a.M.getGaoDianFrom3Dian(n,i.topP,i.bottomP);if(!a.M.checkInLineAB(l,i.topP,i.bottomP,.5))return new a.Vector2DMath(0,0);s=a.M.getPointLen(n,l),s=Math.max(2,s)}var u=170-s/10;u=Math.max(1,u),u*=i.lineL;var h=new a.Point(i.topP.x-i.bottomP.x,i.topP.y-i.bottomP.y);h=a.M.rotaPoint(h,a.M.toHu(90)),r.x=h.x,r.y=h.y;var c=r.length;return new a.Vector2DMath(-r.x/c*u,-r.y/c*u)}},{key:"getOneMagV",value:function(e,t,i){if(0==i.v.dist_XY(e,t))return new a.Vector2DMath(0,0);var r=Math.abs(this.CONST_k*i.magNum/i.v.distSquared_XY(e,t)),n=new a.Vector2DMath(e-i.v.x,t-i.v.y);0>i.magNum&&(n.x=-n.x,n.y=-n.y);var o=n.length;return new a.Vector2DMath(n.x/o*r,n.y/o*r)}},{key:"get_magArr",value:function(){return this.magArr_}}]),e}()},484:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(0),a=i(483),s=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(){function e(t){r(this,e),this.moduleMain=t,this.globalConfig=t.globalConfig,this.allCompArr=[],this.staCompArr=[],this.core_=new s["default"]}return n(e,[{key:"checkAllChanged",value:function(){this.getAll_comp.call(this);var e=this;$.each(this.staCompArr,function(t,i){i.allCompArr=e.allCompArr,i.staCompArr=e.staCompArr,i.caculateBegin&&i.caculateBegin.call(e),i.getMagVFunc=function(e,t){return getMagV(e.x,e.y,t)}}),this.core_.clear(),$.each(this.allCompArr,function(t,i){if(i.isLock)return!0;if("AstElecComp"===i.classname){var r=Math.abs(i.curPower)>1e-6?i.curPower:0;e.core_.appendLineOne(i.UID,i.x,i.y,r,i.getGlobalTopP(),i.getGlobalBottomP())}else e.core_.appendOne(i.UID,i.magNum,i.magPoint.x,i.magPoint.y)}),$.each(this.allCompArr,function(t,i){if(i.isLock)return!0;var r=e.getMagV(i.magPoint.x,i.magPoint.y);if(i.setMagtricField){var n=e.getNearItem(i);n&&(r.nearNum=n.magNum,r.nearItem=n,i.setMagtricField(r))}}),$.each(this.allCompArr,function(e,t){if(t.isLock)return!0;t.caculateOver&&t.caculateOver.call(t)})}},{key:"getNearItem",value:function(e){var t=this.globalConfig.main.view.toLocal(new o.Point,e),i=1e5,r=null;return $.each(this.allCompArr,function(n,a){var s=o.M.getPointLen(a.magPoint,t);if(a.UID==e.UID||0==a.magNum)return!0;i>s&&(i=s,r=a)}),r}},{key:"getMagV",value:function(e,t,i){var r=this.core_.getMagV(e,t,i);return{x:r.x,y:r.y}}},{key:"getAll_comp",value:function(){o.ArrayUtil.clear(this.allCompArr),o.ArrayUtil.clear(this.staCompArr);var e=void 0,t=this.globalConfig.main.getEquipmentArr();for(e=t.length-1;e>=0;e--){var i=t[e];i&&(i.component&&(i=i.component,i.isLock||2==i.magType&&(this.staCompArr.push(i),i.isZuHeMag?this.allCompArr=this.allCompArr.concat(i.zuheCompArrMag):i.isYuan&&this.allCompArr.push(i))))}}},{key:"freshMag",value:function(e){$.each(this.staCompArr,function(t,i){i.freshMag&&i.freshMag(e)})}}]),e}()},485:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=i(0);t["default"]=function o(e,t,i){r(this,o),this.UID=e,this.elecNum=t,this.v=i,this.ganNum=0,this.v||(this.v=new n.Vector2DMath)}},487:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(469),s=r(a),l=i(502),u=r(l),h=i(504),c=r(h);t["default"]=function(){function e(){n(this,e),this.debug=!1,this.inputDebug=!1,this.gn=[],this.jn=[],this.nt=0,this.nb=0,this.w=100*Math.PI,this.jr=[0],this.branchDataArr=[]}return o(e,[{key:"trace",value:function(){if(this.debug)for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i]}},{key:"setHead",value:function(e){this.nt=e}},{key:"appendBranch",value:function(e,t,i,r){this.branchDataArr.push([e,t,i]),this.jr.push(r)}},{key:"appendVCCurrentSource",value:function(e,t,i,r,n){this.branchDataArr.push([start,end,n,i,r]),this.jr.push(12)}},{key:"clear",value:function(){this.branchDataArr.splice(0,this.branchDataArr.length),this.jr.splice(1,this.jr.length-1),this.nt=0,this.nb=0}},{key:"caculate",value:function(){if(this.nb=this.branchDataArr.length,0===this.nt||0===this.nb)return null;for(var e=[],t=[],i=[],r=this.jn,n=this.gn,o=0;this.nt+5>o;o++){r[o]=new s["default"](0,0),t[o]=new s["default"](0,0),i[o]=new s["default"](0,0);for(var a=0;this.nt+5>a;a++)n[o]||(n[o]=[]),n[o][a]=new s["default"](0,0),e[o]||(e[o]=[]),e[o][a]=new s["default"](0,0)}var l=this.input(t),u=l.ny,h=l.at;this.trace("******ny******"),this.trace("ny:",u);for(var f=1;u>=f;f++){e[f]||(e[f]=[]);for(var p=1;u>=p;p++)n[f][p]||(n[f][p]=new s["default"]),e[f][p]=n[f][p];e[f][u+1]=r[f]}this.trace("******gna******");for(var d=1;u>=d;d++){for(var b="",y=1;u+1>=y;y++)b+="\t"+e[d][y].fl;this.trace(b)}if(this.gauss(e,i,u)>1e-9){this.trace("******a的转置******"),this.debug&&c["default"].traceMatrix(h),this.trace("******节点电压Vn******");for(var g=1;u>=g;g++)this.trace(g+"-----------\x3e"+i[g].fl+"+i"+i[g].re);for(var v=[],m=this.nt+1;u>=m;m++)v.push(i[m].fl);this.trace("******节点电压Vn实体部分 vns******");for(var _=[],P=1;this.nt>=P;P++)_[P-1]||(_[P-1]=[]),_[P-1][0]=i[P].fl;this.debug&&c["default"].traceMatrix(_),this.trace("******支路电压 Ub = At * GN ******");var w=c["default"].multiply(h,_);return this.debug&&c["default"].traceMatrix(w),{vns:_,ub:w,list:v}}return this.trace("没结果!"),null}},{key:"conclus",value:function(e,t,i){var r=this.w,n=this.nt;this.trace("*********节点电压*********");for(var o=1;n>=o;o++)this.trace("VN["+o+"]="+e[o].fl+"+j"+e[o].re);this.trace("*******电压源支路电流*******");for(var a=n+1;i>=a;a++)this.trace("IS["+t[a]+"]="+e[a].fl+"+j"+e[a].re);this.trace("***********时域形式***********");for(var s=1;n>=s;s++)this.trace("vn["+s+"]="+u["default"].sabs(e[s])+"cos("+r+"t+"+u["default"].ang(e[s])+")");for(var l=n+1;i>=l;l++)this.trace("IS["+t[l]+"]="+u["default"].sabs(e[l])+"cos("+r+"t+"+u["default"].ang(e[l])+")")}},{key:"input",value:function(e){var t=[],i=[],r=void 0,n=[],o=[],a=[],s=[],l=[],u=this.nt,h=this.nb,f=this.w;this.trace("节点数NT "+u+",支路数NB "+h+",角频率W "+f),r=u;for(var p=this.jr,d=1;h>=d;d++)switch(this.trace("编号 "+d+", 类型 "+p[d]),p[d]){case 1:case 2:case 9:case 10:case 13:this.gj(d,p,t,n,s,l,f,this.branchDataArr[d-1]);break;case 3:r++,this.es(d,t,n,s,l,r,o,this.branchDataArr[d-1]),e[r]=d;break;case 4:r++,this.vcvs(d,t,n,s,r,i,o),e[r]=d;break;case 5:this.vccs(d,t,n,s,i);break;case 6:r++,this.ccvs(d,t,n,s,r,i,o),e[r]=d;break;case 7:this.cccs(d,t,n,s,i,o);break;case 8:this.hllm(d,t,n,s,l,i,f);break;default:this.trace("error")}this.trace("============GN==============");for(var b=1;u+1>=b;b++){for(var y="",g=1;u+1>=g;g++)y+="\t"+this.gn[b][g].fl;this.trace(y)}this.trace("============RHS==============");for(var v="",m=1;u+1>=m;m++)v+="\t"+this.jn[m].fl;this.trace(v);for(var _=1;h+1>=_;_++)a[t[_]]||(a[t[_]]=[]),a[n[_]]||(a[n[_]]=[]),a[t[_]][_-1]=1,a[n[_]][_-1]=-1;for(var P=0;a.length>P;P++)for(var w=0;h>w;w++)a[P]||(a[P]=[]),a[P][w]||(a[P][w]=0);a.shift(),this.trace("******************"),this.trace("输入节点数NT 输入支路数NB 扩展行NY 输入角频率W"),this.trace("NT\tNB\tNY\tW"),this.trace(u+"\t"+h+"\t"+r+"\t"+f),this.trace("********各支路参数**********"),this.trace("编号I 支路类型JR 起点编号NS 止点编号NF 参数DX 元件类型ICR 初相角DXC 控制支路编号IC"),this.trace("I\tJR\tNS\tNF\tDX\tDXC\tIC");for(var k=1;h>=k;k++)this.trace(k+"\t"+p[k]+"\t"+t[k]+"\t"+n[k]+"\t"+s[k]+"\t"+l[k]+"\t"+i[k]);return this.trace("******关联矩阵a******"),this.debug&&c["default"].traceMatrix(a),{ny:r,at:c["default"].transpose(a)}}},{key:"gj",value:function(e,t,i,r,n,o,a,l){var h=this.gn,c=this.jn,f=void 0,p=void 0,d=new s["default"](1,0),b=new s["default"],y=new s["default"],g=l;if(i[e]=g[0],r[e]=g[1],1===t[e]||9===t[e]||10===t[e]||13===t[e])n[e]=g[2],this.trace("输入起点，止点，参数及元件类型（R：１，L：２，C：３）:",i[e],r[e],n[e]),f=i[e],p=r[e],1===t[e]||13===t[e]?(b.fl=n[e],b.re=0):9===t[e]?(b.fl=0,b.re=n[e]*a):10===t[e]&&(b.fl=0,b.re=-1/(n[e]*a)),y=13===t[e]?b:u["default"].divv(d,b),0!==f&&0!==p?(this.buGn(f,p),h[f][f]=u["default"].add(h[f][f],y),h[p][p]=u["default"].add(h[p][p],y),h[p][f]=u["default"].sub(h[p][f],y),h[f][p]=u["default"].sub(h[f][p],y)):0===p?(this.buGn(f),h[f][f]=u["default"].add(h[f][f],y)):(this.buGn(p),h[p][p]=u["default"].add(h[p][p],y));else{o[e]=0,n[e]=g[2],this.trace("输入起点，止点与参数及初相角: ",i[e],r[e],n[e],o[e]);var v=3.14159*o[e]/180;b.fl=n[e]*Math.cos(v),b.re=n[e]*Math.sin(v),f=i[e],p=r[e],f&&(c[f]=u["default"].sub(c[f],b)),p&&(c[p]=u["default"].add(c[p],b))}}},{key:"es",value:function(e,t,i,r,n,o,a,l){var u=this.gn,h=this.jn,c=new s["default"],f=new s["default"](1,0),p=new s["default"](-1,0),d=l;t[e]=d[0],i[e]=d[1],r[e]=d[2],n[e]=0,this.trace("输入电压源的起点，止点与参数及初相角: ",t[e],i[e],r[e],n[e]);var b=t[e],y=i[e];a[e]=o,0!==b&&(this.buGn(b,o),u[b][o]=f,u[o][b]=f),0!==y&&(this.buGn(y,o),u[y][o]=p,u[o][y]=p);var g=n[e]*Math.PI/180;c.fl=r[e]*Math.cos(g),c.re=r[e]*Math.sin(g),h[o]=c}},{key:"buGn",value:function(){for(var e=this,t=arguments.length,i=Array(t),r=0;t>r;r++)i[r]=arguments[r];i.forEach(function(t){e.gn[t]||(e.gn[t]=[])})}},{key:"vcvs",value:function(e,t,i,r,n,o,a){var l=this.gn,h=new s["default"](1,0),c=new s["default"](-1,0),f=new s["default"];this.trace("输入VCVS起点，止点，参数与控制支路",t[e],i[e],r[e],o[e]);var p=t[e],d=i[e],b=t[o[e]],y=i[o[e]];a[e]=n,0!==p&&(this.buGn(p,n),l[p][n]=h,l[n][p]=h),0!==d&&(this.buGn(d,n),l[d][n]=c,l[n][d]=c),f.fl=r[e],f.re=0,0!==b&&(this.buGn(n),l[n][b]=u["default"].sub(l[n][b],f)),0!==y&&(this.buGn(n),l[n][y]=u["default"].add(l[n][y],f))}},{key:"vccs",value:function(e,t,i,r,n){var o=this.gn,a=new s["default"];this.trace("输入VCCS起点止点参数与控制支路",t[e],i[e],r[e],n[e]);var l=t[e],h=i[e],c=t[n[e]],f=i[n[e]];a.fl=r[e],a.re=0,0===l?(this.buGn(h),0!==c&&(o[h][c]=u["default"].sub(o[h][c],a)),0!==f&&(o[h][f]=u["default"].add(o[h][f],a))):0===h?(this.buGn(l),0!==c&&(o[l][c]=u["default"].add(o[l][c],a)),0!==f&&(o[l][f]=u["default"].sub(o[l][f],a))):(this.buGn(l,h),0!==c&&(o[l][c]=u["default"].sub(o[l][f],a),o[h][f]=u["default"].add(o[h][f],a)),0!==f&&(this.buGn(l,h),o[l][f]=u["default"].sub(o[l][f],a),o[h][f]=u["default"].add(o[h][f],a)))}},{key:"ccvs",value:function(e,t,i,r,n,o){var a=this.gn,l=new s["default"],u=new s["default"],h=new s["default"];this.trace("输入CCVS的起点止点，参数控制支路序号:",t[e],i[e],r[e],n[e]);var c=t[e],f=i[e],p=o[n[e]];o[e]=ny,l.fl=1,l.re=0,u.fl=-1,u.re=0,0!==c&&(this.buGn(c,ny),a[c][ny]=l,a[ny][c]=l),0!==f&&(this.buGn(f,ny),a[f][ny]=u,a[ny][f]=u),h.fl=r[e],h.re=0,this.buGn(ny),a[ny][p]=sub(a[ny][ke],h)}},{key:"cccs",value:function(e,t,i,r,n,o){var a=this.gn,l=new s["default"];this.trace("输入CCCS的起点，止点，参数及控制支路序号:",t[e],i[e],r[e],n[e]);var h=t[e],c=i[e],f=o[n[e]];l.dl=r[e],l.re=0,h&&(this.buGn(h),a[h][f]=u["default"].add(a[h][f],l)),c&&(this.buGn(c),a[c][f]=u["default"].sub(a[c][f],l))}},{key:"hllm",value:function(e,t,i,r,n,o,a){var s=this.gn;if(this.trace("输入互感支路的起点，止点，参数，互感系数，控制支路:",t[e],i[e],r[e],n[e],o[e]),0!==r[o[e]]){var l=t[e],h=i[e],c=t[o[e]],f=i[o[e]],p=r[o[e]],d=p*r[e]-n[e]*n[e],b=r[e]/(a*d),y=p/(a*d),g=n[e]/(a*d),v=cmplx(0,-b),m=cmplx(0,b),_=cmplx(0,-y),P=cmplx(0,y),w=cmplx(0,g),k=cmplx(0,-g);0!==l&&0!==h?(this.buGn(l,h),s[l][l]=u["default"].add(s[l][l],_),s[h][h]=u["default"].add(s[h][h],_),s[l][h]=u["default"].add(s[l][h],P),s[h][l]=u["default"].add(s[h][l],P)):0===h?(this.buGn(l),s[l][l]=u["default"].add(s[l][l],_)):(this.buGn(h),s[h][h]=u["default"].add(s[h][h],_)),0!==c&&0!==f?(this.buGn(c,f),s[c][c]=u["default"].add(s[c][c],v),s[f][f]=u["default"].add(s[f][f],v),s[c][f]=u["default"].add(s[c][f],m),s[f][c]=u["default"].add(s[f][c],m)):0===f?(this.buGn(c),s[c][c]=u["default"].add(s[c][c],v)):(this.buGn(f),s[f][f]=u["default"].add(s[f][f],v)),0!==l&&0!==c&&(this.buGn(l,c),s[l][c]=u["default"].add(s[l][c],w),s[c][l]=u["default"].add(s[c][l],w)),0!==h&&0!==f&&(this.buGn(h,f),s[h][f]=u["default"].add(s[h][f],w),s[f][h]=u["default"].add(s[f][h],w)),0!==l&&0!==f&&(this.buGn(l,f),s[l][f]=u["default"].add(s[l][f],k),s[f][l]=u["default"].add(s[f][l],k)),0!==h&&0!==c&&(this.buGn(h,c),s[h][c]=u["default"].add(s[h][c],k),s[c][h]=u["default"].add(s[c][h],k))}}},{key:"gauss",value:function(e,t,i){for(var r=void 0,n=[],o=i+1,a=1;i>=a;a++){if(1e-9>(r=this.zu(n,1e-10,i,o,a,e)))return r;var s=void 0;for(s=a;o>=s;s++)e[a][s]=u["default"].divv(e[a][s],n[0]);for(var l=1;i>=l;l++)if(l!==a){var h=e[l][a];for(s=a;o>=s;s++)e[l][s]=u["default"].sub(e[l][s],u["default"].time(h,e[a][s]))}}for(var c=1;i>=c;c++)t[c]=e[c][o];return r}},{key:"zu",value:function(e,t,i,r,n,o){for(var a=new s["default"],l=u["default"].sabs(o[n][n]),h=n,c=n;i>=c;c++)u["default"].sabs(o[c][n])>l&&(l=u["default"].sabs(o[c][n]),h=c);if(t>=l)return 0;if(e[0]=o[h][n],h===n)return 1;for(var f=n;r>=f;f++)a=o[h][f],o[h][f]=o[n][f],o[n][f]=a;return 1}}]),e}()},502:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(469),a=function(e){return e&&e.__esModule?e:{"default":e}}(o);t["default"]=function(){function e(){r(this,e)}return n(e,null,[{key:"cmplx",value:function(e,t){return new a["default"](e,t)}},{key:"add",value:function(e,t){var i=new a["default"];return i.re=e.re+t.re,i.fl=e.fl+t.fl,i}},{key:"sub",value:function(e,t){var i=new a["default"];return i.re=e.re-t.re,i.fl=e.fl-t.fl,i}},{key:"time",value:function(e,t){var i=new a["default"];return i.re=e.fl*t.re+e.re*t.fl,i.fl=e.fl*t.fl-e.re*t.re,i}},{key:"divv",value:function(e,t){var i=new a["default"],r=t.re*t.re+t.fl*t.fl;return r?(r=1/r,i.re=(e.re*t.fl-e.fl*t.re)*r,i.fl=(e.fl*t.fl-e.re*t.re)*r,i):null}},{key:"sabs",value:function(e){return Math.sqrt(e.fl*e.fl+e.re*e.re)}},{key:"ang",value:function(e){var t=void 0;return 0===e.fl?t=90:(t=Math.atan2(e.re,e.fl),t=180*t/3.1415926),t}}]),e}()},503:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=i(0),s=i(505),l=r(s),u=i(466);r(u);t["default"]=function(){function e(t){n(this,e),this.UID=a.M.getUniqueID(),this.cacuMain=t,this.elecArr=null,this.allBPoster=[],this.allBPosterMap=new Map,this.unNodes=[],this.reLoopCompArr=[]}return o(e,[{key:"createNodes",value:function(e){if(this.elecArr=e,this.findAllBPosterAndReset(),this.createUnNodes(),this.cacuMain.SHOW_UNNODES_DEBUG)for(var t=0;this.unNodes.length>t;t++)for(var i=this.unNodes[t],r=0;i.bposterArr.length>r;r++);}},{key:"findAllBPosterAndReset",value:function(){var e=this;a.ArrayUtil.clear(this.unNodes),a.ArrayUtil.clear(this.allBPoster),this.allBPosterMap.clear(),this.elecArr.forEach(function(t){e.allBPoster=e.allBPoster.concat(t.bPsArr),t.isReLoopElec&&e.reLoopCompArr.push(t)}),this.allBPoster.forEach(function(t){e.allBPosterMap.set(t.UID,t)})}},{key:"createUnNodes",value:function(){for(var e=this,t=0;this.allBPoster.length;){var i=this.allBPoster.shift();if(0===i._findFlag){i._findFlag=1;for(var r=[i],n=new l["default"](this.UID),o=[];r.length;){var a=r.shift(),s=a.friendPostersArr;if(a.isGround){s=s.concat(a.friendPostersArr)}else if(!this.cacuMain.showElecLine&&2===a.body.bPsArr.length&&1===a.body.elecType&&0===a.body.Resistance&&!a.body.isBreak&&a.body.elecConnect){var u="bposter0"===a.BindMC.name?a.body.bposter1.bindinger:a.body.bposter0.bindinger;s=s.concat([u])}s=s.filter(function(t){var i=!1;return e.allBPosterMap.has(t.UID)?0===t._findFlag&&(i=!0):(i=!0,e.allBPosterMap.set(t.UID,t)),i&&(t._findFlag=1),i}),r=r.concat(s),a._findFlag=2,a.unNode=n,a.isGround&&(n.isGround=!0),o.push(a)}n.number=t,n.bposterArr=o,this.unNodes.push(n),t++}}}},{key:"reLoopCacu",value:function(){var e=!1;return this.elecArr.forEach(function(t){e=e||t.reLoop()}),e}}]),e}()},504:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.ERROR_MATRIX_NOT_SQUARE="Matrix must be square.",this.ERROR_VECTOR_NOT_2D="Only two dimensional operations are supported at this time."}return n(e,null,[{key:"_check2DVector",value:function(e){if(2!==e.length)throw Error(this.ERROR_VECTOR_NOT_2D)}},{key:"deepCopy",value:function(e){if(!Array.isArray(e))throw Error("Input must be a Matrix.");if(e[0][0]===undefined)throw Error("Input cannot be a vector.");for(var t=Array(e.length),i=0;e.length>i;i++)t[i]=e[i].slice();return t}},{key:"isSquare",value:function(e){if(!Array.isArray(e))throw Error("Input must be a Matrix.");if(e[0][0]===undefined)throw Error("Input cannot be a vector.");for(var t=e.length,i=0;t>i;i++)if(e[i].length!==t)return!1;return!0}},{key:"addition",value:function(e,t){if(e.length!==t.length||e[0].length!==t[0].length)throw Error("Matrix mismatch");var i=Array(e.length),r=void 0;if(e[0].length)for(r=0;e.length>r;r++){i[r]=Array(e[r].length);for(var n=0;e[r].length>n;n++)i[r][n]=e[r][n]+t[r][n]}else for(r=0;e.length>r;r++)i[r]=e[r]+t[r];return i}},{key:"traceMatrix",value:function(e){var t=void 0,i=void 0;if(e[0].length)for(t=0;e.length>t;t++){i="";for(var r=0;e[t].length>r;r++)i+=e[t][r]+"\t"}else for(i="",t=0;e.length>t;t++)i+=e[t]+"\t"}},{key:"subtraction",value:function(e,t){if(e.length!==t.length||e[0].length!==t[0].length)throw Error("Matrix mismatch");var i=Array(e.length),r=void 0;if(e[0].length)for(r=0;e.length>r;r++){i[r]=Array(e[r].length);for(var n=0;e[r].length>n;n++)i[r][n]=e[r][n]-t[r][n]}else for(r=0;e.length>r;r++)i[r]=e[r]-t[r];return i}},{key:"scalar",value:function(e,t){for(var i=0;e.length>i;i++)for(var r=0;e[i].length>r;r++)e[i][r]=t*e[i][r];return e}},{key:"transpose",value:function(e){for(var t=Array(e[0].length),i=0;e[0].length>i;i++){t[i]=Array(e.length);for(var r=0;e.length>r;r++)t[i][r]=e[r][i]}return t}},{key:"identity",value:function(e){for(var t=Array(e),i=0;e>i;i++){t[i]=Array(e);for(var r=0;e>r;r++)t[i][r]=i===r?1:0}return t}},{key:"dotproduct",value:function(e,t){if(e.length!==t.length)throw Error("Vector mismatch");for(var i=0,r=0;e.length>r;r++)i+=e[r]*t[r];return i}},{key:"multiply",value:function(t,i){if(t[0].length!==i.length)throw Error("Matrix mismatch");for(var r=Array(t.length),n=0;t.length>n;n++)r[n]=Array(i[0].length);for(var o=e.transpose(i),a=0;r.length>a;a++)for(var s=0;r[a].length>s;s++)r[a][s]=e.dotproduct(t[a],o[s]);return r}},{key:"determinant",value:function(t){var i=t.length,r=t[0].length,n=0,o=void 0,a=void 0,s=void 0,l=void 0;if(!e.isSquare(t))throw Error(this.ERROR_MATRIX_NOT_SQUARE);if(1===i)return t[0][0];if(2===i)return t[0][0]*t[1][1]-t[0][1]*t[1][0];for(a=0;r>a;a++){for(s=t[0][a],l=t[0][a],o=1;i>o;o++)l*=t[o][((a+o)%r+r)%r],s*=t[o][((a-o)%r+r)%r];n+=l-s}return n}},{key:"lupDecomposition",value:function(t){if(!e.isSquare(t))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var i=t.length,r=e.deepCopy(t),n=e.transpose(e.identity(i)),o=void 0,a=Array(i);this.getL=function(t){for(var i=t[0].length,r=e.identity(i),n=0;i>n;n++)for(var o=0;i>o;o++)n>o&&(r[n][o]=t[n][o]);return r},this.getU=function(t){for(var i=t[0].length,r=e.identity(i),n=0;i>n;n++)for(var o=0;i>o;o++)n>o||(r[n][o]=t[n][o]);return r};for(var s=0;i>s;s++){var l=void 0;for(l=0;i>l;l++)a[l]=r[l][s];for(l=0;i>l;l++){o=r[l];for(var u=Math.min(l,s),h=0,c=0;u>c;c++)h+=o[c]*a[c];o[s]=a[l]-=h}var f=s;for(l=s+1;i>l;l++)Math.abs(a[l])>Math.abs(a[f])&&(f=l);if(f!==s&&(r=e.rowSwitch(r,f,s),n=e.rowSwitch(n,f,s)),i>s&&0!==r[s][s])for(l=s+1;i>l;l++)r[l][s]/=r[s][s]}return[this.getL(r),this.getU(r),n]}},{key:"rotate",value:function(t,i,r){e._check2DVector(t);var n="clockwise"===r?-1:1,o=i*(Math.PI/180);return e.multiply([[Math.cos(o),-1*n*Math.sin(o)],[n*Math.sin(o),Math.cos(o)]],t)}},{key:"scale",value:function(t,i,r){return e._check2DVector(t),e.multiply([[i,0],[0,r]],t)}},{key:"shear",value:function(t,i,r){return e._check2DVector(t),e.multiply([[1,"xaxis"===r?i:0],["yaxis"===r?i:0,1]],t)}},{key:"affine",value:function(t,i,r){e._check2DVector(t);var n=[[1,0,i],[0,1,r],[0,0,1]],o=[[t[0][0]],[t[1][0]],[1]],a=e.multiply(n,o);return[[a[0][0]],[a[1][0]]]}},{key:"rowScale",value:function(e,t,i){for(var r=Array(e.length),n=0;e.length>n;n++){r[n]=Array(e[n].length);for(var o=0;e[n].length>o;o++)r[n][o]=n===t?i*e[n][o]:e[n][o]}return r}},{key:"rowSwitch",value:function(e,t,i){for(var r=Array(e.length),n=0;e.length>n;n++){r[n]=Array(e[n].length);for(var o=0;e[n].length>o;o++)r[n][o]=n===t?e[i][o]:n===i?e[t][o]:e[n][o]}return r}},{key:"rowAddMultiple",value:function(e,t,i,r){for(var n=Array(e.length),o=0;e.length>o;o++){n[o]=Array(e[o].length);for(var a=0;e[o].length>a;a++)o===i?n[i][a]=e[i][a]+r*e[t][a]:n[o][a]=e[o][a]}return n}},{key:"GaussJordanEliminate",value:function(e,t){for(var i=void 0===t?1e-10:t,r=e.length,n=e[0].length,o=-1,a=void 0,s=void 0,l=void 0;++o<r;){var u=o;for(a=o;++a<r;)Math.abs(e[a][o])>Math.abs(e[u][o])&&(u=a);var h=e[o];if(e[o]=e[u],e[u]=h,Math.abs(e[o][o])<=i)return e;for(a=o;++a<r;)for(l=e[a][o]/e[o][o],s=o-1;++s<n;)e[a][s]-=e[o][s]*l}for(o=r;--o>=0;){for(l=e[o][o],a=-1;++a<o;)for(s=n;--s>=o;)e[a][s]-=e[o][s]*e[a][o]/l;for(e[o][o]/=l,s=r-1;++s<n;)e[o][s]/=l}return e}},{key:"rowReduce",value:function(t,i){return e.GaussJordanEliminate(t,i)}},{key:"inverse",value:function(t){if(!e.isSquare(t))throw Error(this.ERROR_MATRIX_NOT_SQUARE);var i=t.length,r=e.identity(i),n=void 0;for(n=0;i>n;n++)t[n]=t[n].concat(r[n]);for(t=e.GaussJordanEliminate(t),n=0;i>n;n++)t[n]=t[n].slice(i);return t}},{key:"getCol",value:function(e,t){var i=Array(e.length);if(0>t)throw Error("The specified column must be a positive integer.");if(t>=e[0].length)throw Error("The specified column must be between 0 and the number of columns - 1.");for(var r=0;e.length>r;r++)i[r]=e[r][t];return i}},{key:"reorderRows",value:function(e,t){var i=[];if(t===undefined)throw Error("A reordering array must be entered.");if(t.length!==e.length)throw Error("The reordered matrix must have the same number of rows as the original Matrix.");for(var r=0;t.length>r;r++){if(0>t[r])throw Error("The desired order of the rows must be positive integers.");if(t[r]>=t.length)throw Error("The desired order of the rows must start at 0 and end at the number of rows - 1.");i.push(e[t[r]])}return i}},{key:"reorderCols",value:function(t,i){var r=[];if(i===undefined)throw Error("Please enter a desired reordering array.");if(i.length!==t[0].length)throw Error("The reordered matrix must have the same number of columns as the original Matrix.");for(var n=0;i.length>n;n++){if(0>i[n])throw Error("The desired order of the columns must be positive integers.");if(i[n]>=i.length)throw Error("The desired order of the columns must start at 0 and end at the number of columns - 1.");r.push(e.getCol(t,i[n]))}return e.transpose(r)}},{key:"reverseRows",value:function(t){for(var i=[],r=t.length-1;r>-1;r--)i.push(r);return e.reorderRows(t,i)}},{key:"reverseCols",value:function(t){for(var i=[],r=t.length-1;r>-1;r--)i.push(r);return e.reorderCols(t,i)}},{key:"zeros",value:function(e,t){var i=Array(e);if(1>e||1>t)throw Error("The matrix dimensions must be positive integers.");e=Math.ceil(e),t=Math.ceil(t);for(var r=0;e>r;r++){for(var n=Array(t),o=0;t>o;o++)n[o]=0;i[r]=n}return i}},{key:"zigzag",value:function(t,i,r){if(1>=t)throw Error("Matrix size must be at least 2x2.");t=Math.ceil(t);var n=e.zeros(t,t),o=function(e){var i=!1,r=t*t,n=1,o=1,a=void 0,s=void 0,l=void 0,u=void 0,h=void 0;for(e[0][0]=r,e[t-1][t-1]=n,u=1;t>u;u++)i?(r-=4*o,n+=4*o,o++):(r--,n++),e[0][u]=r,e[t-1][t-1-u]=n,i=!i;var c=!0;for(u=1;t>u;u++){for(a=0,s=u,l=e[a][s],h=1;u+1>h;h++)c?l-=1:l+=1,a++,s--,e[a][s]=l;c=!c}for(c=t%2==0,u=1;t-1>u;u++){for(a=t-1,s=u,l=e[a][s],h=1;t-u>h;h++)c?l--:l++,a--,s++,e[a][s]=l;c=!c}return e},a=function(t){return e.transpose(o(t))},s=function(t){return e.reverseCols(o(t))},l=function(t){return e.reverseCols(e.reverseRows(o(t)))},u=function(t){return e.transpose(l(t))};if("BR"===i&&"H"===r)return o(n);if("BR"===i&&"V"===r)return a(n);if("BL"===i&&"H"===r)return s(n);if("BL"===i&&"V"===r)return function(t){return e.reverseRows(u(s(t)))}(n);if("TR"===i&&"H"===r)return function(t){return e.reverseRows(o(t))}(n);if("TR"===i&&"V"===r)return function(t){return e.reverseRows(a(t))}(n);if("TL"===i&&"H"===r)return l(n);if("TL"===i&&"V"===r)return u(n);throw Error("Enter the direction (V,H) and corner (BR,BL,TR,TL) correctly.")}},{key:"vectorNorm",value:function(e,t){if(!Array.isArray(e)||0===e.length)throw Error("Vector must be an array of at least length 1.");if(void 0!==t&&"number"!=typeof t)throw Error("Norm order must be a number.");t=void 0===t?2:t;var i=e.length,r=0,n=void 0,o=void 0;switch(t){case Infinity:for(o=0;i>o;o++)(n=Math.abs(e[o]))>r&&(r=n);break;case-Infinity:for(r=Infinity,o=0;i>o;o++)n=Math.abs(e[o]),r>n&&(r=n);break;default:for(o=0;i>o;o++)r+=Math.pow(Math.abs(e[o]),t);r=Math.pow(r,1/t)}return r}},{key:"matrixNorm",value:function(e,t){if(!Array.isArray(e)||0===e.length||!Array.isArray(e[0]))throw Error("Matrix must be an array of at least length 1.");if(void 0!==t&&"number"!=typeof t&&null!==t)throw Error("Norm order must be a number or null.");t=void 0===t?null:t;var i=e.length,r=e[0].length,n=0,o=void 0,a=void 0,s=void 0;switch(t){case Infinity:for(a=0;i>a;a++){for(o=0,s=0;r>s;s++)o+=Math.abs(e[a][s]);o>n&&(n=o)}break;case-Infinity:for(n=Infinity,a=0;i>a;a++){for(o=0,s=0;r>s;s++)o+=Math.abs(e[a][s]);n>o&&(n=o)}break;case 1:for(a=0;r>a;a++){for(o=0,s=0;i>s;s++)o+=Math.abs(e[s][a]);o>n&&(n=o)}break;case-1:for(n=Infinity,a=0;r>a;a++){for(o=0,s=0;i>s;s++)o+=Math.abs(e[s][a]);n>o&&(n=o)}break;case null:for(a=0;i>a;a++)for(s=0;r>s;s++)n+=Math.pow(e[a][s],2);n=Math.pow(n,.5);break;case 2:case-2:throw Error("Singular values are not yet supported in numbers.js.");default:for(a=0;i>a;a++)for(s=0;r>s;s++)n+=Math.pow(Math.abs(e[a][s]),t);n=Math.pow(n,1/t)}return n}},{key:"isUpperBand",value:function(e,t){if(!Array.isArray(e)||!Array.isArray(e[0])||2>e.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof t||0>t||t%1!=0)throw Error("Upper bandwidth must be a nonzero integer.");for(var i=!0,r=e[0].length,n=0,o=t+1;r>o;o++){if(0!==e[n][o]){i=!1;break}n++}return i}},{key:"isLowerBand",value:function(e,t){if(!Array.isArray(e)||!Array.isArray(e[0])||2>e.length)throw Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof t||0>t||t%1!=0)throw Error("Lower bandwidth must be a nonzero integer.");for(var i=!0,r=e.length,n=0,o=t+1;r>o;o++){if(0!==e[o][n]){i=!1;break}n++}return i}},{key:"isRowDD",value:function(t){var i=t.length;if(!e.isSquare(t))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var r=0;i>r;r++){var n=t[r],o=n[r],a=e.sumNondiagonalElements(n,r);if(Math.abs(o)<a)return!1}return!0}},{key:"isStrictlyRowDD",value:function(t){if(!e.isSquare(t))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=t.length,r=0;i>r;r++){var n=t[r],o=n[r],a=e.sumNondiagonalElements(n,r);if(Math.abs(o)<=a)return!1}return!0}},{key:"isColumnDD",value:function(t){if(!e.isSquare)throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=t.length,r=0;i>r;r++){var n=e.getCol(t,r),o=n[r],a=e.sumNondiagonalElements(n,r);if(Math.abs(o)<a)return!1}return!0}},{key:"isStrictlyColumnDD",value:function(t){if(!e.isSquare(t))throw Error(this.ERROR_MATRIX_NOT_SQUARE);for(var i=t.length,r=0;i>r;r++){var n=e.getCol(t,r),o=n[r],a=e.sumNondiagonalElements(n,r);if(Math.abs(o)<=a)return!1}return!0}},{key:"sumNondiagonalElements",value:function(e,t){var i=0,r=void 0;for(r=0;t>r;r++)i+=Math.abs(e[r]);for(r=t+1;e.length>r;r++)i+=Math.abs(e[r]);return i}}]),e}();o.clone=o.deepCopy,o.add=o.addition,t["default"]=o},505:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();t["default"]=function(){function e(t){r(this,e),this.UID=t,this.bposterArr=[],this.number=0,this.Un=0,this.isGround=!1}return n(e,[{key:"freshUn",value:function(){var e=this;this.bposterArr.forEach(function(t){t.Un=e.Un,t.BindMC.unNodeSP&&(t.BindMC.unNodeSP.numberLabel.text=e.number+"号",t.BindMC.unNodeSP.wangLabel.text=e.UID+"团")})}},{key:"destroy",value:function(){this.bposterArr.forEach(function(e){e.unNode=null,e.Un=0,e.BindMC.unNodeSP&&(e.BindMC.unNodeSP.numberLabel.text="",e.BindMC.unNodeSP.wangLabel.text="")})}}]),e}()},513:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(100),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.txt=i.globalConfig.main.cachePool.popText("",{font:"25px Arial",fill:16750848}),i.cateid=5,i.var_now_T=0,i.is_animation_playing=!1,i.isStart=!1,i.start_time=null,i.my_time=0,i.lineSP=null,i.pauseTime=null,i.isshowlabel=!0,i.tic=null,i.sound=null,i.topTouchId=null,i.rightTouchId=null,i.jd=1,i}return o(t,e),a(t,[{key:"added",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this);var i=this.language.getLocaleStr("wei");this.jdArr=["1"+i,"2"+i],this.timeType=0,this.timeTypeArr=[this.language.getLocaleStr("virtual_time"),this.language.getLocaleStr("standard_time")],this.parent.dragArea=this.bg,this.componentBox.visible=!1,this.removeChild(this.componentBox),this.addChild(this.txt),this.tline.visible=!1,this.txt.x=-240,this.txt.y=-220,this.topOriY=this.top.y,this.topTouchId=l.M.addTouch(this.top,{tab:this.topBtnClick,begin:function(t){e.top.y=e.topOriY+10,e.cannotSystemDrag=!0},end:function(t){e.top.y=e.topOriY,e.cannotSystemDrag=!1}},this);var r=l.M.getSPPoint(this.right);this.rightTouchId=l.M.addTouch(this.right,{tab:this.rightBtnClick,begin:function(t){l.M.setSPPointXY(e.right,r.x+5,r.y+5),e.cannotSystemDrag=!0},end:function(t){l.M.setSPPoint(e.right,r),e.cannotSystemDrag=!1}},this,{time:300,dis:15}),this.freshEquipShows(this.globalConfig.SHOWEQUVALUE),this.addCursor(this.top,"hand"),this.addCursor(this.right,"hand")}},{key:"rightBtnClick",value:function(e){this.playStop()}},{key:"topBtnClick",value:function(e){this.isStart?this.playToggle():(this.playGo(),this.playSound(!0))}},{key:"removed",value:function(){this.globalConfig.main.cachePool.pushText(this.txt),this.removeChild(this.txt),this.txt=null,this.removedCursor(this.top),this.removedCursor(this.right),l.M.removeTouch(this.top,this.topTouchId),l.M.removeTouch(this.right,this.rightTouchId),this.tic&&this.tic.stop(),this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}},{key:"freshVolume",value:function(){this.globalConfig.VOLUME&&this.isStart&&this.is_animation_playing?this.sound||(this.sound=this.globalConfig.SoundTool.play(this.SoundStr.COMTIMER,!0)):this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null)}},{key:"playSound",value:function(e){e?this.freshVolume():this.sound&&(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null)}},{key:"playGo",value:function(){this.isStart=!0,this.is_animation_playing=!0,this.start_time=this.getCurrentTime(),this.isshowlabel&&(this.tline.visible=!0)}},{key:"playStop",value:function(){this.isStart=!1,this.is_animation_playing=!1,this.my_time=0,this.tic&&this.tic.stop(),this.freshShow(0),this.playSound(!1),this.tline.visible=!1,this.txt.text=""}},{key:"update",value:function(){if(this.is_animation_playing){if(this.globalConfig.isMec()&&!this.moduleMain.napeEngine.play)return void this.playSound(!1);this.sound||this.playSound(!0);this.freshShow(this.my_time+this.getTimeD())}}},{key:"playToggle",value:function(){this.is_animation_playing=!this.is_animation_playing,this.is_animation_playing?(this.start_time=this.getCurrentTime(),this.playSound(!0)):(this.my_time+=this.getTimeD(),this.playSound(!1))}},{key:"getTimeD",value:function(){if(this.globalConfig.isMec()&&!this.timeType){if(null===this.start_time)return 0;return this.getCurrentTime()-this.start_time}return null===this.start_time?0:(new Date).getTime()-this.start_time}},{key:"getCurrentTime",value:function(){return this.globalConfig.isMec()&&!this.timeType?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getCurrentTime",this).call(this):(new Date).getTime()}},{key:"freshShow",value:function(e){this.miao.rotation=e/3e4*Math.PI*2,this.fen.rotation=e/9e5*Math.PI*2;var t=""+l.M.getNumJie(e/1e3,this.jd);this.contains(t,".")||(t+=".");for(var i=t.slice(t.indexOf(".")).length-1;this.jd>i;)t+="0",i++;this.txt.text=t+"s"}},{key:"contains",value:function(e,t){return e.indexOf(t)>-1}},{key:"freshEquipShows",value:function(e){this.isshowlabel=e,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"freshEquipShows",this).call(this,e),this.txt.visible=e,this.isStart&&!e?this.tline.visible=!1:this.isStart&&e&&(this.tline.visible=!0)}},{key:"changeJd",value:function(e){this.jd=l.M.getNumStr(this.jdArr[e.checked])-0}},{key:"timeChanged",value:function(e){this.timeType=e.checked,this.playStop()}},{key:"selectRenderChild",value:function(){return this.bg.getBounds()}},{key:"getData",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this);return e.timeType=this.timeType,e}},{key:"setData",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),this.timeType=e.timeType||0}},{key:"getConf",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getConf",this).call(this);e.confArr=[];var i=this.language.getLocaleStr("wei");return e.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("accuracy"),l.ArrayUtil.getIndexFromValue(this.jdArr,this.jd+i),this.jdArr,this.changeJd.bind(this))),this.globalConfig.isMec()&&e.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("type"),this.timeType,this.timeTypeArr,this.timeChanged.bind(this))),e}},{key:"getTipMess",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getTipMess",this).call(this);return e+="\n    "+this.language.getLocaleStr("accuracy")+": "+(this.jd+this.language.getLocaleStr("wei"))+"\n    "+this.language.getLocaleStr("type")+": "+this.timeTypeArr[this.timeType]+"\n    "}}]),t}(h["default"])},617:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(461),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.isCharBase=!0,i.canShowDragRect=!1,i.canShowConfPan=!1,i.bindHO=null,i.bindComp=null,i.level=6,i.charType=0,i.isBreak=!0,i.noRenderSelected=!1,i.allowSave=!1,i}return o(t,e),a(t,[{key:"beginEnd",value:function(){this.unBind()}},{key:"unBind",value:function(){this.bindHO&&("ElecFamilyInserted"===this.bindComp.classname?(this.bindHO.wire1.unLink(this.bindHO.wire1.bposter1),this.bindHO.wire2.unLink(this.bindHO.wire2.bposter1),this.bindHO.wire3.unLink(this.bindHO.wire3.bposter1),this.bindHO.bindChar=null,this.bindHO=null,this.bg.currentFrame=0,this.diyChanged()):(this.bindHO.link_bindChar(!1),this.bindHO.bindChar=null,this.bindHO=null,this.bg.currentFrame=0,this.isBreak=!0,this.diyChanged()))}},{key:"endEnd",value:function(e){if(!this.bindHO){var t=void 0;if(t=0===this.charType?this.getChildByClassInRadius(this,"ElecFamilyTwoHoleOutlets",100,new l.Point(0,0)):this.getChildByClassInRadius(this,"ElecFamilyThreeHoleOutlets",100,new l.Point(0,0)),t.length>0){var i=!0,r=!1,n=undefined;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){if(this.toBindHO(o.value))break}}catch(y){r=!0,n=y}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw n}}}else{var s=this.elecUtil.getEquipmentArr(["ElecFamilyInserted"]),u=void 0,h=1e4,c=void 0,f=this.toGlobalView(new l.Point,this);if(each(s,function(e,t){var i=void 0;for(i=0;3>i;i++){var r=t["posP"+i];if(r){var n=this.toGlobalView(r,t),o=l.M.getPointLen(f,n);t.checkIndCanBind.call(t,i)&&h>o&&(h=o,u=i,c=t)}}h>100&&(u=-1)},this),u>=0){var p=c.insArr[u];if(p.bindChar=this,"ElecFamilyInserted"===this.bindComp.classname){this.bindHO=p,p.charType=this.charType;for(var d=this.bindComp,b=1;3>=b;b++)this.elecUtil.linkWireBindMC(p["wire"+b].bposter1,d["bar"+b].bposter0);this.bg.currentFrame=1,this.freshBindLocation(),this.isBreak=!1,this.Resistance=this.bindComp.Resistance,this.diyChanged()}else this.bindHO=p,p.charType=this.charType,this.bindHO.link_bindChar(!0),this.bg.currentFrame=1,this.freshBindLocation(),this.isBreak=!1,this.Resistance=this.bindComp.Resistance,this.diyChanged()}}}this.bindComp?this.main.setCurElec(this.bindComp,!1):this.bindHO&&this.main.setCurElec(this.bindHO,!1)}},{key:"toBindHO",value:function(e){if("ElecFamilyInserted"===this.bindComp.classname){if(!e||e.bindChar||this.bindHO)return!1;e.bindChar=this;var t=this.bindComp,i=e;if(1!==i.charType)return;for(var r=1;3>=r;r++)this.elecUtil.linkWireBindMC(i["wire"+r].bposter1,t["bar"+r].bposter0);return this.bg.currentFrame=1,this.bindHO=i,this.freshBindLocation(),this.diyChanged(),!0}return!(!e||e.bindChar||this.bindHO)&&(e.bindChar=this,this.bindHO=e,this.bindHO.link_bindChar(!0),this.bg.currentFrame=1,this.freshBindLocation(),this.isBreak=!1,this.Resistance=this.bindComp.Resistance,this.diyChanged(),!0)}},{key:"freshBindLocation",value:function(e){if(this.bindHO){var t=void 0;if("ElecInsOne"===this.bindHO.classname){var i=this.bindHO.pare;this.parent.parent.updateTransform(),t=this.parent.parent.toLocal(this.bindHO.posP,i),0===this.bindHO.charType?t.y-=10:t.y+=10}else this.parent.parent.updateTransform(),t=0===this.charType?this.parent.parent.toLocal(new l.Point(0,5),this.bindHO):this.parent.parent.toLocal(new l.Point(0,0),this.bindHO);l.M.setSPPoint(this.parent,t),this.bindComp&&this.bindComp.freshCharLine.call(this.bindComp,this.bindHO)}}},{key:"moveEnd",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveEnd",this).call(this,e),this.bindComp&&this.bindComp.freshCharLine.call(this.bindComp)}},{key:"setWorkElec",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWorkElec",this).call(this,e),this.bindComp&&(this.bindComp.curElec=this.curElec,this.bindComp.setWorkElec.call(this.bindComp,e))}},{key:"setWorkPower",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWorkPower",this).call(this,e),this.bindComp&&(this.bindComp.curPower=this.curPower,this.bindComp.setWorkPower.call(this.bindComp,e))}}]),t}(h["default"])},618:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:p(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(461),h=r(u),c=i(418),f=r(c);t["default"]=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.isHoBase=!0,i.bindChar=null,i.level=4,i.showLineType=1,i.isCheckPencilLink=!0,i.charType=0,i}return a(t,e),s(t,[{key:"initZuhe",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,0]],res:[[1,.1],[2,.1]]}),this.wire1=new f["default"](this.paramObj),this.wire1.zuheBox=this,this.zuheCompArr.push(this.wire1),this.elecUtil.linkWireBindMC(this.wire1.bposter0,this.bar1.bposter1),this.wire2=new f["default"](this.paramObj),this.wire2.zuheBox=this,this.zuheCompArr.push(this.wire2),this.elecUtil.linkWireBindMC(this.wire2.bposter0,this.bar2.bposter1)}},{key:"link_bindChar",value:function(e){this.bindChar&&(e?(this.elecUtil.linkWireBindMC(this.wire1.bposter1,this.bindChar.bposter0),this.elecUtil.linkWireBindMC(this.wire2.bposter1,this.bindChar.bposter1)):(this.wire1.unLink(this.wire1.bposter1),this.wire2.unLink(this.wire2.bposter1)))}},{key:"moveEnd",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveEnd",this).call(this,e),this.freshBindLocation()}},{key:"freshBindLocation",value:function(){this.bindChar&&this.bindChar.freshBindLocation()}}]),t}(h["default"])},801:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function b(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:b(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(68),c=i(215),f=r(c),p=i(466),d=r(p);t["default"]=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.moduleType=7,i}return a(t,e),s(t,[{key:"init",value:function(){var e=this;return this.hasInit?Promise.resolve():(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.globalConfig.showElecLine=!1,new Promise(function(t){e.elecUtil=new d["default"](e),e.elecUtil.init(),t()}))}},{key:"createElecFamilyPower",value:function(){var e=this;return new Promise(function(t){e.elecFamilyPower?t(e.elecFamilyPower):e.main.addComp([{name:"ElecFamilyPower"}],!0,function(i){e.elecFamilyPower=i[0],e.elecFamilyPower.parent.parent.removeChild(e.elecFamilyPower.parent),t(e.elecFamilyPower)})})}},{key:"enterModule",value:function(e){var t=this;return new Promise(function(i){e?setTimeout(function(){t.createElecFamilyPower().then(function(){var e=new PIXI.Sprite;t.main.otherContainer.parent.updateTransform();var r=new u.Point(0,100),n=t.main.otherContainer.toLocal(r,t.main.stage);u.M.setSPPoint(e,n),e.addChild(t.elecFamilyPower),e.component=t.elecFamilyPower,t.main.otherContainer.addChild(e),i()})},100):(t.elecFamilyPower&&t.elecFamilyPower.parent&&t.elecFamilyPower.parent.removeChild(t.elecFamilyPower),i())})}},{key:"onRemoveEquipment",value:function(){this.elecUtil.diyChanged(),this.elecUtil.electricField_Update.checkAllChanged()}},{key:"getElecFamilyPowerData",value:function(){return this.elecFamilyPower.getData()}},{key:"setElecFamilyPowerData",value:function(e){var t=this;this.elecFamilyPower.setData(e),setTimeout(function(){t.elecUtil.diyChanged()},1e3)}},{key:"requestAnimationLoop",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"requestAnimationLoop",this).call(this),this.elecUtil&&this.elecUtil.elect_Update.stepLoop.call(this.elecUtil.elect_Update),this.elecFamilyPower&&this.elecFamilyPower.stepLoop.call(this.elecFamilyPower)}}],[{key:"MODULE_TYPE",get:function(){return h.Modules.ELECFAMILY}}]),t}(f["default"])},802:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(100),l=function(e){return e&&e.__esModule?e:{"default":e}}(s);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.bindMC;i.Radius=e.Radius||12,i.canLinkPen=!0;i.bindMC=o,i.isLock=!1;return i}return o(t,e),a(t,[{key:"isHasLinkChar",value:function(){return!this.canLinkPen||!!(this.bindMC&&this.bindMC.bindinger.body&&this.bindMC.bindinger.body.zuheBox)&&("ElecFamilyInserted"===this.bindMC.bindinger.body.zuheBox.classname?this.checkInsertedHasLink():!!this.bindMC.bindinger.body.zuheBox.bindChar)}},{key:"checkInsertedHasLink",value:function(){var e=!1;return this.elecInsOne&&this.elecInsOne.bindChar&&(e=0===this.elecInsOne.charType?this.hotFlag>=10&&15>=this.hotFlag:this.hotFlag>=1&&9>=this.hotFlag),e}}]),t}(l["default"])},803:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=i(617),s=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.charType=1,i}return o(t,e),t}(s["default"])},804:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=i(617),s=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(e){function t(e){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(s["default"])},805:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(462),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){return r(this,t),e.ratedP=1e3,n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"playSound",value:function(e){var t=this;e?this._timerID||(this._timerID=setTimeout(function(){t.hadDestory||(t._timerID=null,t.playMySound(e))},100)):(this.playMySound(!1),clearTimeout(this._timerID),this._timerID=null)}},{key:"playMySound",value:function(e,t){var i=this;t||(this._toplay=e),1===this.globalConfig.VOLUME&&e?this.sound||(this.sound=this.globalConfig.SoundTool.playT(this.SoundStr.KONGTIAO,function(){i.soundLoop=i.globalConfig.SoundTool.playT(i.SoundStr.KONGTIAOLOOP,null,null,i,!0)},null)):(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null,this.globalConfig.SoundTool.stopT(this.soundLoop),this.soundLoop=null)}},{key:"freshVolume",value:function(){this.playMySound(this._toplay&&this.globalConfig.VOLUME,!0)}},{key:"added",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.setWorkPower(0),this._cInd=0,this._loopT=0,this.ticker=l.M.addTicker(function(){++e._cInd>1&&(e._cInd=0,e.bg.lamp.visible?e.bg.ye.totalFrames-1>e.bg.ye.currentFrame&&e.bg.ye.currentFrame++:e.bg.ye.currentFrame>0&&e.bg.ye.currentFrame--)})}},{key:"setWorkPower",value:function(e){Math.abs(e)>this.workV?(this.bg.lamp.visible=!0,this.playSound(!0)):(this.bg.lamp.visible=!1,this.playSound(!1))}},{key:"removed",value:function(){l.M.removeTicker(this.ticker),this.ticker=null,this.playSound(!1),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}},{key:"selectRenderChild",value:function(){return this.updateTransform(),this.bg.getBounds()}}]),t}(h["default"])},806:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function h(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:h(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(462),u=function(e){return e&&e.__esModule?e:{"default":e}}(l);t["default"]=function(e){function t(e){return r(this,t),e.ratedP=1e3,n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"added",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this._steamParticle=null,this._steamParticle=this.ParticleUtil.getParticle(this.ParticleUtil.particles.waterstream2),this.main.otherContainer.addChild(this._steamParticle),this._steamParticle.bind(this,-5,-70),this._steamParticle.completeFunc=function(){e._steamParticle.particle.maxParticles=0}}},{key:"setWorkPower",value:function(e){var i=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWorkPower",this).call(this,e),this._temp_num=e,this._timerID&&(clearTimeout(this._timerID),this.setWorkPowerDelay(0)),this._timerID=setTimeout(function(){i.hadDestory||(i._timerID=null,i.setWorkPowerDelay(i._temp_num))},100)}},{key:"setWorkPowerDelay",value:function(e){var t=this;this.bg&&2===this.bg.totalFrames?Math.abs(e)>this.workV?this._streamID=setTimeout(function(){t.hadDestory||t._steamParticle&&(t._steamParticle.particle.maxParticles=200)},5e3):(this._steamParticle&&this._steamParticle.particle&&(this._steamParticle.particle.maxParticles=0),clearTimeout(this._streamID)):(this._steamParticle&&(this._steamParticle.particle.maxParticles=0),clearTimeout(this._streamID))}},{key:"removed",value:function(){this._steamParticle.completeFunc=null,this._steamParticle.destroy.call(this._steamParticle),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}}]),t}(u["default"])},807:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(462),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){return r(this,t),e.ratedP=120,n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"added",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this);this._addN=0,this._maxN=.8,this._speed=.001,this.ticker=l.M.addTicker(this._loop,this)}},{key:"_loop",value:function(){Math.abs(this.curPower)>this.workV?this._maxN>this._addN?this._addN+=this._speed:this._addN=this._maxN:this._addN>0?this._addN-=.8*this._speed:this._addN=0,this._addN=l.M.range(this._addN,0,this._maxN),this.ye.rotation=l.M.getValidHu(this.ye.rotation+this._addN)}},{key:"removed",value:function(){this.ticker.stop(),this.ticker=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}},{key:"getLocalBoundsElecs",value:function(){return[this.bg,this.zhao]}}]),t}(h["default"])},808:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(462),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){return r(this,t),e.ratedP=150,n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"playSound",value:function(e){var t=this;e?this._timerID||(this._timerID=setTimeout(function(){t.hadDestory||(t._timerID=null,t.playMySound(e))},100)):(this.playMySound(!1),clearTimeout(this._timerID),this._timerID=null)}},{key:"playMySound",value:function(e,t){t||(this._toplay=e),1===this.globalConfig.VOLUME&&e?this.sound||(this.soundLoop=this.globalConfig.SoundTool.playT(this.SoundStr.ZHILENG,null,null,this,!0)):(this.globalConfig.SoundTool.stopT(this.soundLoop),this.soundLoop=null)}},{key:"freshVolume",value:function(){this.playMySound(this._toplay&&this.globalConfig.VOLUME,!0)}},{key:"added",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.setWorkPower(0),this._cInd=0,this._type=2,this.clickID=l.M.addTouch(this.bg.mbtn,{tab:function(t){e._type=1===e._type?2:1}}),this.ticker=l.M.addTicker(function(){++e._cInd>1&&(e._cInd=0,1===e._type?e.bg.frigdge.totalFrames-1>e.bg.frigdge.currentFrame&&(0!==e.bg.frigdge.currentFrame&&32!==e.bg.frigdge.currentFrame||e.globalConfig.SoundTool.play(e.SoundStr.BINGXIANGKAI),e.bg.frigdge.currentFrame++):2===e._type&&e.bg.frigdge.currentFrame>0&&(1!==e.bg.frigdge.currentFrame&&32!==e.bg.frigdge.currentFrame||e.globalConfig.SoundTool.play(e.SoundStr.BINGXIANGGUAN),e.bg.frigdge.currentFrame--))})}},{key:"setWorkPower",value:function(e){Math.abs(e)>this.workV?(this.bg.lamp1.visible=!0,this.bg.lamp2.visible=!0,this.playSound(!0)):(this.bg.lamp1.visible=!1,this.bg.lamp2.visible=!1,this.playSound(!1))}},{key:"removed",value:function(){l.M.removeTouch(this.bg.mbtn,this.clickID),l.M.removeTicker(this.ticker),this.playSound(!1),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}},{key:"selectRenderChild",value:function(){return this.bg.back.getBounds()}}]),t}(h["default"])},809:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=i(462),s=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(e){function t(e){return r(this,t),e.ratedP=1e3,n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(s["default"])},810:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function v(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:v(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(103),c=r(h),f=i(462),p=r(f),d=i(825),b=r(d),y=i(418),g=r(y);t["default"]=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.Resistance=1e5,i.level=4,i.loadLevel=4,i.ratedAArr=["10A","20A","30A"],i.temp_zuheCompArr=[],i.ratedA=u.M.getNumStr(i.ratedAArr[1])-0,i.isCheckPencilLink=!0,i.canReset=!1,i}return a(t,e),s(t,[{key:"initZuhe",value:function(){this.createZuhe({bar:3,pos:[]})}},{key:"added",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.initLink()}},{key:"initLink",value:function(){this.insArr=[];var e=void 0;for(e=0;3>e;e++){var i=u.M.getSPPoint(this["pos"+e]),r={};(0,c["default"])(r,this.paramObj,{pare:this});var n=new b["default"](r);n.index=e,n.posP=i,this.insArr[e]=n,t["posP"+e]||(t["posP"+e]=i),this["posP"+e]||(this["posP"+e]=i);var o=void 0;for(o=1;3>=o;o++){var a=new g["default"](this.paramObj);a.zuheBox=this,this.zuheCompArr.push(a),this.elecUtil.linkWireBindMC(a.bposter0,this["bar"+o].bposter1),this["wire"+o]=a,n["wire"+o]=a}}this.addHotCir(this.bar1.bposter0,new u.Point(-81,12),10,this.insArr[0],1),this.addHotCir(this.bar1.bposter0,new u.Point(-15,12),10,this.insArr[1],2),this.addHotCir(this.bar1.bposter0,new u.Point(51,12),10,this.insArr[2],3),this.addHotCir(this.bar2.bposter0,new u.Point(-54,12),10,this.insArr[0],4),this.addHotCir(this.bar2.bposter0,new u.Point(12,12),10,this.insArr[1],5),this.addHotCir(this.bar2.bposter0,new u.Point(78,12),10,this.insArr[2],6),this.addHotCir(this.bar3.bposter0,new u.Point(-68,-12),8,this.insArr[0],7),this.addHotCir(this.bar3.bposter0,new u.Point(-2,-12),8,this.insArr[1],8),this.addHotCir(this.bar3.bposter0,new u.Point(64,-12),8,this.insArr[2],9),this.addHotCir(this.bar1.bposter0,new u.Point(-84,-12),10,this.insArr[0],10),this.addHotCir(this.bar1.bposter0,new u.Point(-18,-12),10,this.insArr[1],11),this.addHotCir(this.bar1.bposter0,new u.Point(48,-12),10,this.insArr[2],12),this.addHotCir(this.bar2.bposter0,new u.Point(-52,-12),10,this.insArr[0],13),this.addHotCir(this.bar2.bposter0,new u.Point(14,-12),10,this.insArr[1],14),this.addHotCir(this.bar2.bposter0,new u.Point(80,-12),10,this.insArr[2],15)}},{key:"checkIndCanBind",value:function(e){return!this.insArr[e].bindChar}},{key:"caculateOver",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"caculateOver",this).call(this),this.bar1&&Math.abs(this.bar1.curElec)>this.ratedA+1&&(this.bar1.isBreak=this.bar2.isBreak=this.bar3.isBreak=!0,this["break"]())}},{key:"repair",value:function(){this.bar1.isBreak=this.bar2.isBreak=this.bar3.isBreak=!1,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"repair",this).call(this)}},{key:"moveEnd",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveEnd",this).call(this,e),each(this.insArr,function(e,t){t.moveEnd.call(t)},this)}},{key:"setDataOver",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setDataOver",this).call(this)}},{key:"getData",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this);return e.ratedA=this.ratedA,e}},{key:"setData",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),this.ratedA=e.ratedA}},{key:"getConf",value:function(){var e=this;this.elecLable="插排";var t={"this":this,confArr:[]};return t.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("rated_current"),u.ArrayUtil.getIndexFromValue(this.ratedAArr,this.ratedA+"A"),this.ratedAArr,function(t){e.ratedA=u.M.getNumStr(e.ratedAArr[t.checked])-0,e.diyChanged()})),t}}]),t}(p["default"])},811:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function h(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:h(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(462),u=function(e){return e&&e.__esModule?e:{"default":e}}(l);t["default"]=function(e){function t(e){r(this,t),e.ratedP=1e3;var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._temp_num=0,i}return o(t,e),a(t,[{key:"playSound",value:function(e,t){var i=this;this.hadDestory||(1===this.globalConfig.VOLUME&&e?this.sound||(this.sound=this.globalConfig.SoundTool.playT(this.SoundStr.RESHUIHU,function(){i.soundLoop=i.globalConfig.SoundTool.playT(i.SoundStr.RESHUIHU,null,null,i,!0)},null)):(this.globalConfig.SoundTool.stopT(this.sound),this.sound=null,this.globalConfig.SoundTool.stopT(this.soundLoop),this.soundLoop=null))}},{key:"freshVolume",value:function(){this.playSound(this._toplay&&this.globalConfig.VOLUME,!0)}},{key:"added",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this._steamParticle=null,this._steamParticle=this.ParticleUtil.getParticle(this.ParticleUtil.particles.waterstream),this.main.otherContainer.addChild(this._steamParticle),this._steamParticle.bind(this,-72,-70),this._steamParticle._this=this,this._steamParticle.completeFunc=function(){e._steamParticle.particle.maxParticles=0}}},{key:"setWorkPower",value:function(e){var i=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWorkPower",this).call(this,e),clearTimeout(this._workPTime),this._workPTime=setTimeout(function(){i.hadDestory||i.setWorkPower_time(e)},100)}},{key:"setWorkPower_time",value:function(){var e=this,t=this.curPower;this._temp_num!==(t>150?220:0)&&(this._temp_num=t,this._timerID&&(clearTimeout(this._timerID),this.setWorkPowerDelay(0)),this._timerID=setTimeout(function(){e.hadDestory||(e._timerID=null,e.setWorkPowerDelay(e._temp_num))},100))}},{key:"setWorkPowerDelay",value:function(){var e=this;this.bg&&2===this.bg.totalFrames?Math.abs(this._temp_num)>this.workV?this._streamID=setTimeout(function(){e.hadDestory||Math.abs(e._temp_num)>e.workV&&(e._steamParticle&&(e._steamParticle.particle.maxParticles=200),e.playSound(!0))},5e3):(this._steamParticle&&this._steamParticle.particle&&(this._steamParticle.particle.maxParticles=0),this.playSound(!1),clearTimeout(this._streamID)):(this._steamParticle&&(this._steamParticle.particle.maxParticles=0),this.playSound(!1),clearTimeout(this._streamID))}},{key:"removed",value:function(){this._steamParticle.destroy.call(this._steamParticle),this.playSound(!1),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}}]),t}(u["default"])},812:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(461),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.paoTypeArr=[i.language.getLocaleStr("bchideng"),i.language.getLocaleStr("jnengdeng")],i.paoType=i.paoTypeArr[0],i.touTypeArr=[i.language.getLocaleStr("luowen"),i.language.getLocaleStr("kakou")],i.touType=i.touTypeArr[0],i.ratedP=100,i.ratedPArr=["25W","60W","100W"],i.bindHolder=null,i.Resistance=l.M.sq(220)/i.ratedP,i._isSeLock=!1,i}return o(t,e),a(t,[{key:"freshType",value:function(){this.bg.light.mm1.visible=!1,this.bg.light.mm2.visible=!1,this.bg.light.mm3.visible=!1,this.bg.light.mm4.visible=!1,this.curMM=this.paoType===this.paoTypeArr[0]?this.touType===this.touTypeArr[0]?this.bg.light.mm4:this.bg.light.mm3:this.touType===this.touTypeArr[0]?this.bg.light.mm2:this.bg.light.mm1,this.curMM.visible=!0;var e=l.M.sq(this.curPower)/this.Resistance;this.curMM.mm.alpha=Math.min(Math.sqrt(e/100),1),this.curMM.mm.visible=0!==this.curMM.mm.alpha}},{key:"added",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this._isDown=!1,this._downP=new l.Point,l.M.setSPPointXY(this.bposter0,-5e3,-5e3),l.M.setSPPointXY(this.bposter1,-5e3,-5e3),this.freshType()}},{key:"setWorkPower",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWorkPower",this).call(this,e),this.freshType()}},{key:"beginEnd",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"beginEnd",this).call(this,e);var i=l.M.getMouseXY(e);l.M.setSPPoint(this._downP,i),this._isDown=!0}},{key:"moveEnd",value:function(e){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveEnd",this).call(this,e),this._isDown){var i=l.M.getMouseXY(e);l.M.getPointLen(i,this._downP)>5&&this.unBindC()}}},{key:"unBindC",value:function(){this.bindHolder&&(this.bindHolder.link_bindLight(!1),this.bindHolder.bindLight=null,this.bindHolder=null,this._isSeLock=!1)}},{key:"endEnd",value:function(e){var i=this;if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"endEnd",this).call(this,e),this._isDown=!1,!this.bindHolder){var r=this.getChildByClassInRadius(this,"ElecFamilyLightHolder",150,new l.Point(0,0));each(r,function(e,t){if(!t.bindLight&&i.touType===t.touType)return i._bindLightHolder(t),!1})}}},{key:"_bindLightHolder",value:function(e){e.bindLight=this,this.bindHolder=e,this.freshBindLocation(),this.bindHolder.link_bindLight(!0),this._isSeLock=!0}},{key:"freshBindLocation",value:function(e){if(this.bindHolder){this.main.viewStack.updateTransform();var t=this.main.viewStack.toLocal(new l.Point(0,95),this.bindHolder);l.M.setSPPoint(this.parent,t)}}},{key:"getData",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this);return e.paoType=this.paoTypeArr.indexOf(this.paoType),e.touType=this.touTypeArr.indexOf(this.touType),e.ratedP=this.ratedP,this.bindHolder&&(e.bindHolder_UID=this.bindHolder.UID),e}},{key:"setData",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),isNaN(e.paoType)||(this.paoType=this.paoTypeArr[e.paoType]),isNaN(e.touType)||(this.touType=this.touTypeArr[e.touType]),this.ratedP=e.ratedP,this.Resistance=l.M.sq(220)/this.ratedP,this.freshType()}},{key:"setDataOver",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setDataOver",this).call(this,e),this.setData_obj&&this.setData_obj.bindHolder_UID&&(this.bindHolder=this.getChildByUID(this.setData_obj.bindHolder_UID),this._bindLightHolder(this.bindHolder))}},{key:"removed",value:function(){this.unBindC(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}},{key:"getConf",value:function(){var e=this,i=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("lamp_type"),l.ArrayUtil.getIndexFromValue(this.paoTypeArr,this.paoType),this.paoTypeArr,function(t){e.paoType=e.paoTypeArr[t.checked],e.freshType()}),this.ComponentProperty.getRadio(this.language.getLocaleStr("lamp_head_type"),l.ArrayUtil.getIndexFromValue(this.touTypeArr,this.touType),this.touTypeArr,function(t){e.touType=e.touTypeArr[t.checked],e.freshType(),e.unBindC(),e.endEnd(null)}),this.ComponentProperty.getRadio(this.language.getLocaleStr("ratedPowerfull"),l.ArrayUtil.getIndexFromValue(this.ratedPArr,this.ratedP+"W"),this.ratedPArr,function(t){e.ratedP=l.M.getNumStr(e.ratedPArr[t.checked]),e.Resistance=l.M.sq(220)/e.ratedP,e.diyChanged(),e.freshType()})),i}},{key:"getTipMess",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getTipMess",this).call(this);return e+="\n    "+this.language.getLocaleStr("ratedVoltage")+": 220V\n    "+this.language.getLocaleStr("ratedPowerfull")+": "+this.ratedP+"W\n    "}}]),t}(h["default"])},813:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function d(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:d(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(461),c=r(h),f=i(418),p=r(f);t["default"]=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.showLineType=1,i.bindLight=null,i.touTypeArr=[i.language.getLocaleStr("luowen"),i.language.getLocaleStr("kakou")],i.touType=i.touTypeArr[0],i.isShowNei=!1,i.level=6,i.isCheckPencilLink=!0,i.canShowNei=!0,i}return a(t,e),s(t,[{key:"initZuhe",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,0],[2,0]],res:[[1,.002],[2,.002]]}),this.wire1=new p["default"](this.paramObj),this.wire1.zuheBox=this,this.zuheCompArr.push(this.wire1),this.elecUtil.linkWireBindMC(this.wire1.bposter0,this.bar1.bposter1),this.wire2=new p["default"](this.paramObj),this.wire2.zuheBox=this,this.zuheCompArr.push(this.wire2),this.elecUtil.linkWireBindMC(this.wire2.bposter0,this.bar2.bposter1),this.wire1.Resistance=this.wire2.Resistance=.001,this.bar1.bindWire=this.bar2.bindWire=function(t,i){e.bindWire(t,i)}}},{key:"link_bindLight",value:function(e){this.bindLight&&(e?(this.elecUtil.linkWireBindMC(this.wire1.bposter1,this.bindLight.bposter0),this.elecUtil.linkWireBindMC(this.wire2.bposter1,this.bindLight.bposter1),this.diyChanged()):(this.wire1.unLink(this.wire1.bposter1),this.wire2.unLink(this.wire2.bposter1),this.diyChanged()))}},{key:"drawLineArr",value:function(){this.addHeadWires([{type:1,pArr:[new u.Point(this.bposter0.x,this.bposter0.y),new u.Point(this.bposter0.x,this.bposter0.y+50)]},{type:0,pArr:u.M.getRoundP(new u.Point(this.bposter1.x+2,this.bposter1.y),new u.Point(this.bposter1.x-15,this.bposter1.y),new u.Point(this.bposter1.x-15,this.bposter1.y+50))}])}},{key:"freshType",value:function(){var e=this;this.isShowNei?(this.bg.currentFrame=this.touType===this.touTypeArr[0]?1:2,this.level=4,this.hotCir0.isLock=this.hotCir1.isLock=this.hotCir2.isLock=!1):(this.bg.currentFrame=0,this.level=6,this.hotCir0.isLock=this.hotCir1.isLock=this.hotCir2.isLock=!0),this.upToTop(),this.hotCirArr.forEach(function(t){t.canLinkPen=e.isShowNei}),this.main.dispatchEvent("freshPencil")}},{key:"added",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-12,-15),10),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-12,0),6),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-17,7),6),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-14,23),12),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(-14,33),12),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(12,23),12),this.hotCir0=this.addHotCir(this.bar1.bposter1,new u.Point(12,33),12),this.hotCir2=this.addHotCir(this.bar1.bposter1,new u.Point(0,30),18),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(11,-15),11),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(9,0),7),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(4,7),4),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(0,7),4),this.hotCir1=this.addHotCir(this.bar2.bposter1,new u.Point(-4,7),4),this.freshType()}},{key:"_getElecFromBposter",value:function(e){var t=this,i=null;return e&&e.bindinger.friendPostersArr&&e.bindinger.friendPostersArr.length>0&&$.each(e.bindinger.friendPostersArr,function(e,r){if(!t.elecUtil.checkIsWire(r.body))return i=r.body,!1}),i}},{key:"moveEnd",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveEnd",this).call(this,e),this.freshBindLocation()}},{key:"freshBindLocation",value:function(e){this.bindLight&&this.bindLight.freshBindLocation.call(this.bindLight)}},{key:"getData",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this);return e.touType=this.touTypeArr.indexOf(this.touType),e.isShowNei=this.isShowNei,e}},{key:"setData",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),isNaN(e.touType)||(this.touType=this.touTypeArr[e.touType]),this.isShowNei=e.isShowNei,this.freshType()}},{key:"overStep",value:function(){}},{key:"clickShowNei",value:function(){this.isShowNei=!this.isShowNei,this.freshType()}},{key:"getConf",value:function(){var e=this,i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("lamp_holder_type"),u.ArrayUtil.getIndexFromValue(this.touTypeArr,this.touType),this.touTypeArr,function(t){e.bindLight||(e.touType=e.touTypeArr[t.checked],e.freshType())})),i}},{key:"removed",value:function(){this.bar1.bindWire=null,this.bar2.bindWire=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}}]),t}(c["default"])},814:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function v(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:v(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(103),c=r(h),f=i(461),p=r(f),d=i(418),b=r(d),y=i(419),g=r(y);t["default"]=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.level=7,i}return a(t,e),s(t,[{key:"initZuhe",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initZuhe",this).call(this),this.isZuHe=!0,this.wire1=new b["default"](this.paramObj),this.wire1.zuheBox=this,this.zuheCompArr.push(this.wire1),this.wire2=new b["default"](this.paramObj),this.wire2.zuheBox=this,this.zuheCompArr.push(this.wire2);var e={};(0,c["default"])(e,this.paramObj,{name:"bar1",zuheBox:this,resistance:1e6}),this.bar1=new g["default"](e),this.zuheCompArr.push(this.bar1),this.elecUtil.linkWireBindMC(this.wire1.bposter0,this.bar1.bposter0),this.elecUtil.linkWireBindMC(this.wire2.bposter0,this.bar1.bposter1),this.elecUtil.linkWireBindMC(this.wire1.bposter1,this.moduleMain.elecFamilyPower.bposter2),this._freshPencilHandleProxy=this.freshPencilHandle.bind(this),this.main.addEventListener("freshPencil",this._freshPencilHandleProxy)}},{key:"freshPencilHandle",value:function(){this.checkPencilLink()}},{key:"linkW",value:function(e){e?this.elecUtil.linkWireBindMC(this.wire2.bposter1,e):this.wire1.unLink(this.wire2.bposter1)}},{key:"beginEnd",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"beginEnd",this).call(this,e),this.linkW(null),this.diyChanged()}},{key:"endEnd",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"endEnd",this).call(this,e),this.checkPencilLink()}},{key:"caculateOver",value:function(){this.bg.currentFrame=Math.abs(this.bar1.bposter1.bindinger.Un)>.1?1:0}},{key:"setDataOver",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setDataOver",this).call(this,e),this.checkPencilLink()}},{key:"checkPencilLink",value:function(){var e=this.toGlobalView(new u.Point,this.bg),t=this.main.getAllElecArr(),i=null,r=!0,n=!1,o=undefined;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,h=l.component;if(h&&h.hotCirArr&&h.hotCirArr.length>0){var c=!0,f=!1,p=undefined;try{for(var d,b=h.hotCirArr[Symbol.iterator]();!(c=(d=b.next()).done);c=!0){var y=d.value;if(!y.isHasLinkChar()){var g=this.toGlobalView(new u.Point,y);if(y.Radius>u.M.getPointLen(e,g)){y.isHasLinkChar(),i=y;break}}}}catch(v){f=!0,p=v}finally{try{!c&&b["return"]&&b["return"]()}finally{if(f)throw p}}if(i)break}}}catch(v){n=!0,o=v}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw o}}this.linkW(i&&!i.isLock?i.bindMC:null),this.diyChanged()}},{key:"removed",value:function(){this.main.removeEventListener("freshPencil",this._freshPencilHandleProxy),this._freshPencilHandleProxy=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}}]),t}(p["default"])},815:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function f(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:f(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(461),h=function(e){return e&&e.__esModule?e:{"default":e}}(u),c=i(10);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.canDel=!1,i.showLineType=1,i.allowSave=!1,i.canCopy=!1,i.canShowDragRect=!1,i.biaoNameArr=[i.language.getLocaleStr("jxdnengbiao"),i.language.getLocaleStr("szdnengbiao")],i.biaoName=i.biaoNameArr[0],i.switchNameArr=[i.language.getLocaleStr("zdkaiguan"),i.language.getLocaleStr("kqkaiguan")],i.switchName=i.switchNameArr[0],i.w=85964,i.P=0,i.timeStep=.5,i.elecIArr=["20A","30A","40A"],i.elecI=20,i.leftPosX=630;return i.linePArr=[[new l.Point(i.leftPosX+.5,74.5),new l.Point(1e5,74.5)],[new l.Point(i.leftPosX,105.5),new l.Point(1e5,105.5)],[new l.Point(i.leftPosX+62,149),new l.Point(1e5,149)]],i.noRenderSelected=!1,i.maiSpeed=0,i.notShowDelBtn=!0,i.numSPXYArr=[new l.Point(143,144),new l.Point(156,131)],i.hasBeginDraw=!1,i}return o(t,e),a(t,[{key:"addLoopInit",value:function(){this.canvasRunHandleProxy=this.canvasRunHandle.bind(this),this.main.addEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy),this.canvasRunHandle({isRunning:this.main.isRunning})}},{key:"canvasRunHandle",value:function(e){this.setActive(e.isRunning)}},{key:"setActive",value:function(e){}},{key:"stepLoop",value:function(){var e=this.P*this.timeStep;this.freshMai(this.P),this.setJNum(e),this.freshLabel()}},{key:"destroy",value:function(){this.main.removeEventListener(this.NBEvent.CANVAS_RUN,this.canvasRunHandleProxy)}},{key:"initNumComp",value:function(){this.numSP=new PIXI.Sprite,this.addChild(this.numSP),this.arr=[];var e=void 0;for(e=0;6>e;e++){var t=new PIXI.Text("2V",{font:"16px 微软雅黑",fill:16777215,align:"left"});this.arr.push(t),this.numSP.addChild(t),t.text="0",t.x=16.9*(5-e)}}},{key:"freshMai",value:function(e){this.maiSpeed+=e;this.biaoName===this.biaoNameArr[1]&&(1>e?this.maichong.currentFrame=1:this.maiSpeed>1e3&&(this.maiSpeed=0,this.maichong.currentFrame=0===this.maichong.currentFrame?1:0))}},{key:"setJNum",value:function(e){e/=36e4,this.tiao.addNum(e),this.w+=this.biaoName===this.biaoNameArr[0]?e:-e;var t=Math.floor(this.w);this.arr[0].text=""+Math.floor(t%10),this.arr[1].text=""+Math.floor(t/10%10),this.arr[2].text=""+Math.floor(t/100%10),this.arr[3].text=""+Math.floor(t/1e3%10),this.arr[4].text=""+Math.floor(t/1e4%10),this.arr[5].text=""+Math.floor(t/1e5%10)}},{key:"initZuhe",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initZuhe",this).call(this),this.createZuhe({bar:5,pos:[[1,0],[2,1],[3,1]],wire:[[[1,1],[4,0]],[[4,1],[2,0]],[[2,1],[5,0]],[[5,1],[3,0]]],res:[[1,1e-4],[2,.001],[3,1e-4],[4,1e-4],[5,1e-4]]}),this.bar1.Power=220,this.bar1.iElecInter=2,this.bar3.Power=-220,this.bar3.iElecInter=2,this.bposter1.lineNameInd=0,this.bposter0.lineNameInd=1,this.bposter2.lineNameInd=2}},{key:"initLines",value:function(){for(var e=["ElecWireLineStyleRed.png","ElecWireLineStyleBlueB.png","ElecWireLineStyleYellow.png"],t=0;3>t;t++){var i=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+e[t]);this.lineBox.addChild(i),this.setRopePoints(i,this.linePArr[t],t)}l.M.setSPPointXY(this.jiedi,640,this.linePArr[2][0].y-4)}},{key:"freshType",value:function(){this.biaoName===this.biaoNameArr[0]?(this.energy.currentFrame=0,this.maichong.visible=!1,l.M.setSPPoint(this.numSP,this.numSPXYArr[1]),this.tiao.visible=!0):(this.energy.currentFrame=1,this.maichong.visible=!0,l.M.setSPPoint(this.numSP,this.numSPXYArr[0]),this.tiao.visible=!1),this.switchName===this.switchNameArr[0]?(this.jxkg.visible=!0,this.jxkgonoff.visible=!0,this.baoxiansi.visible=!0,this.kqkg.visible=!1,this.anxia.visible=!1,this.anxiabtn.visible=!1,this.kqkgonoff.visible=!1,l.M.setSPPoint(this.hotCir0,this.hotCirPArr[0][0]),l.M.setSPPoint(this.hotCir1,this.hotCirPArr[0][1]),this.lines.currentFrame=0):(this.jxkg.visible=!1,this.jxkgonoff.visible=!1,this.baoxiansi.visible=!1,this.kqkg.visible=!0,this.anxia.visible=!0,this.anxiabtn.visible=!0,this.kqkgonoff.visible=!0,l.M.setSPPoint(this.hotCir0,this.hotCirPArr[1][0]),l.M.setSPPoint(this.hotCir1,this.hotCirPArr[1][1]),this.lines.currentFrame=1),this.tisi&&this.tisi.visible&&(this.tisi.visible=!1),this.anxia.currentFrame=1,this.jxkgonoff.currentFrame=this.kqkgonoff.currentFrame=1,this.bar2.isBreak=!1,1!==this.baoxiansi.currentFrame&&3!==this.baoxiansi.currentFrame&&5!==this.baoxiansi.currentFrame||this.baoxiansi.currentFrame--,this.openElec(!0)||this.diyChanged()}},{key:"initWireHandle",value:function(){var e=this;this.main.addEventListener(c.PHY_EVENTS.BLACK_TOUCH_BEGIN,function(t){e.begin(t)}),this.main.addEventListener(c.PHY_EVENTS.BLACK_TOUCH_MOVE,function(t){e.move(t)}),this.documentEndProx=this.documentEnd.bind(this),this.main.addEventListener(c.PHY_EVENTS.DOCUMENT_END,this.documentEndProx);var t=!1;this.lineBoxId=l.M.addTouch(this.lineBox,{begin:function(i){t=!0,e.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_BEGIN,i)},move:function(i){t&&e.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_MOVE,i)},end:function(i){t&&(t=!1,e.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_END,i))}})}},{key:"begin",value:function(e,t){var i=this;if(!this.hasBeginDraw&&(this.hasBeginDraw=!0,7===this.globalConfig.version)){var r=this.phy.getMouseXY(e);this.main.view.updateTransform();if(this.parent.toLocal(r,this.main.viewStack).x>=this.leftPosX){var n=this.getPowerLineData(r),o=void 0,a=void 0,s=-1,u=0,h=!1;if(n)s=0,o=n.p,a=n.post,u=n.lineNameInd;else{var c=this.getPowerElecData(r,t);c&&(s=1,this.main.viewStack.parent.updateTransform(),o=this.main.viewStack.toLocal(new l.Point,c.bPsIt.BindMC),a=c.bPsIt.BindMC,u=0===a.ind?1:1===a.ind?0:2,h=!0)}-1!==s&&(this.addComp([{name:"ElecFamilyWire",p:new l.Point(0,0),classParam:{lineNameInd:u}}],function(e){var t=e[0];t.allowSave=!0,t.linkType=s,0===s&&(t.bposter0LK=!0),t.startP.call(t,o),i.curWire=t,i.elecUtil.linkWireBindMC(t.bposter0,a)},!0),h=!0),h&&(this.globalConfig.isBlackMoveEnable=!1,setTimeout(function(){i.hadDestory||i.main.execute(i.NBCommand.STOP_SELECT,event)},0))}}}},{key:"move",value:function(e){if(7===this.globalConfig.version&&this.curWire){this.curWire.moveP.call(this.curWire,this.phy.getMouseXY(e))}}},{key:"documentEnd",value:function(e){if(this.globalConfig.isBlackMoveEnable=!0,this.hasBeginDraw=!1,7===this.globalConfig.version&&this.curWire){var t=this.curWire.bposter0.toGlobal();if(50>t.x||50>t.y)return this.curWire.dispose(),this.main.removeEquipment.call(this.main,this.curWire),void(this.curWire=null);var i=this.phy.getCanvasP(e);if(1===this.curWire.linkType){var r=this.getPowerLineData(i);if(!r){if(0===this.curWire.bposter1.bindinger.BindMC.x&&0===this.curWire.bposter1.bindinger.BindMC.y)this.main.removeEquipment.call(this.main,this.curWire),this.curWire.dispose();else{if(this.curWire.bposter1.bindinger.nearToBinding.call(this.curWire.bposter1.bindinger)){var n=this.elecUtil.getWireBposterElec(this.curWire.bposter0),o=this.elecUtil.getWireBposterElec(this.curWire.bposter1);n&&o&&n.uid===o.uid?(this.main.removeEquipment.call(this.main,this.curWire),this.curWire.dispose()):(this.checkAndDispose_curWire(),this.diyChanged())}else this.main.removeEquipment.call(this.main,this.curWire),this.curWire.dispose()}return void(this.curWire=null)}i=r.p,this.curWire.bposter1LK=!0,this.elecUtil.linkWireBindMC(this.curWire.bposter1,r.post),this.checkAndDispose_curWire()}this.curWire&&(this.diyChanged(),this.curWire.endP.call(this.curWire,i),this.globalConfig.SoundTool.registAndPlay(this.SoundStr.DAO_XIAN_LIAN_JIE),this.curWire=null)}}},{key:"checkAndDispose_curWire",value:function(e){var t=this;if(!this.curWire)return!1;var i=this.curWire.bposter0.bindinger.friendPostersArr,r=[];if(each(i,function(e,t){"ElecFamilyWire"===t.body.classname&&r.push(t.body.UID)}),r.length>0){var n=this.curWire.bposter1.bindinger.friendPostersArr;each(n,function(e,i){if("ElecFamilyWire"===i.body.classname&&l.ArrayUtil.arrayContainsValue(r,i.body.UID))return t.curWire.dispose(),t.main.removeEquipment.call(t.main,t.curWire),t.curWire=null,!1},this)}}},{key:"getPowerLineData",value:function(e){this.main.viewStack.parent.updateTransform();var t=this.main.viewStack.toLocal(this.linePArr[0][0],this),i=this.main.viewStack.toLocal(this.linePArr[1][0],this),r=this.main.viewStack.toLocal(this.linePArr[2][0],this),n=Math.abs(e.y-t.y),o=Math.abs(e.y-i.y),a=Math.abs(e.y-r.y),s=Math.min(n,o,a);if(s>50/this.main.view.scale.x)return null;var u=new l.Point(e.x,0),h=void 0;return s===n?(u.y=t.y,h=this.bposter1):s===o?(u.y=i.y,h=this.bposter0):s===a&&(u.y=r.y,h=this.bposter2),{post:h,p:u,lineNameInd:h.lineNameInd}}},{key:"getPowerElecData",value:function(e,t){var i=void 0,r=void 0,n=void 0,o=[],a=this.main.getEquipmentArr(),s=a.length;for(r=0;s>r;r++)if(i=a[r].component,!this.elecUtil.checkIsWire(i)&&i.bPsArr&&(!i.showLineType||1===i.showLineType)){var u=i.bPsArr.length;for(this.main.viewStack.parent.updateTransform(),n=0;u>n;n++){var h=i.bPsArr[n];if(!h.body.isZuHe){var c=this.main.viewStack.toLocal(new l.Point,h.BindMC),f=l.M.getPointLen(e,c);!t&&f>30||o.push({distance:f,component:h.body,bPsIt:h})}}}return o.length?(o.sort(function(e,t){return t.distance>e.distance?-1:1}),o[0]):null}},{key:"added",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this);var i=l.M.getAddPIXIBMP(this,"tiaobmd");i&&this.removeChild(i),this.tiao=this.create_tiaoComp(),this.addChild(this.tiao),this.tiao.x=30,this.tiao.y=171.5,this.lineBox=new PIXI.Sprite,this.addChild(this.lineBox),this.initLines(),this.isDown=!1,this.downP=new l.Point,this.tabId=l.M.addTouch(this,{tab:function(t){e.main.setCurElec.call(e.main,e,!0)}});var r=function(t){t.stopPropagation(),e.isDown=!0;var i=e.phy.getMouseXY(t);l.M.setSPPoint(e.downP,i)},n=function(t){if(e.isDown){var i=e.phy.getMouseXY(t),r=i.y-e.downP.y;0===e.kqkgonoff.currentFrame&&-20>r?(e.wire1.isBreak=!1,(e.switchName===e.switchNameArr[0]||e.switchName===e.switchNameArr[1]&&1===e.anxia.currentFrame)&&(e.jxkgonoff.currentFrame=e.kqkgonoff.currentFrame=1,e.isDown=!1,e.switchName===e.switchNameArr[1]&&e.globalConfig.SoundTool.play(e.SoundStr.SWITCH_OPEN),e.openElec(!0)),1===e.jxkgonoff.currentFrame&&0===e.anxia.currentFrame&&(e.anxia.currentFrame=1)):1===e.kqkgonoff.currentFrame&&r>20&&(e.jxkgonoff.currentFrame=e.kqkgonoff.currentFrame=0,e.isDown=!1,e.switchName===e.switchNameArr[1]&&e.globalConfig.SoundTool.play(e.SoundStr.SWITCH_CLOSE),e.wire1.isBreak=!0,e.openElec(!1))}},o=function(t){e.isDown=!1};this.kqkgonoffId=l.M.addTouch(this.kqkgonoff,{begin:r,move:n,end:o},this),this.jxkgonoffId=l.M.addTouch(this.jxkgonoff,{begin:r,move:n,end:o},this),l.M.setButton(this.anxiabtn,function(t){0!==e.anxia.currentFrame&&(e.anxia.currentFrame=0,e.jxkgonoff.currentFrame=e.kqkgonoff.currentFrame=0,e.openElec(!1),e.globalConfig.SoundTool.play(e.SoundStr.SWITCH_CLOSE))}),this.anxiaId=l.M.addTouch(this.anxia,{begin:function(t){e.anxia.currentFrame=1}}),this.initWireHandle(),this.jxkgonoff.currentFrame=this.kqkgonoff.currentFrame=1,this.openElec(!0),this.hotCir0=this.addHotCir(this.bar2.bposter0),this.hotCir1=this.addHotCir(this.bar2.bposter1),this.hotCirPArr=[[new l.Point(477,260),new l.Point(477,290)],[new l.Point(477,158),new l.Point(551,280)]],this.initNumComp(),this.freshType(),this.main.addEventListener(c.PHY_EVENTS.BPOSTER_DPSP_DOWN,function(t){e.begin(t,!0)}),this.main.addEventListener(c.PHY_EVENTS.BPOSTER_DPSP_MOVE,function(t){e.move(t,!0)}),this.addCursor(this.lineBox,"huizhi"),this.addLoopInit()}},{key:"create_tiaoComp",value:function(){var e=new PIXI.Sprite;e.sp1=PIXI.Sprite.fromFrame("ElecFamilyPower/tiaobmd"),e.sp2=PIXI.Sprite.fromFrame("ElecFamilyPower/tiaobmd"),e.addChild(e.sp1),e.addChild(e.sp2);var t=new PIXI.Graphics;return t.beginFill(16711680,.8),t.drawRect(129,0,88,3),e.addChild(t),e.mask=t,e.num=0,e.fresh=function(){e.sp1.x=e.num%e.sp1.width,e.sp2.x=e.sp1.x+e.sp1.width},e.fresh(),e.addNum=function(t){e.num+=500*t,e.fresh()},e}},{key:"openElec",value:function(e){return this._openElecState!==e&&(this._openElecState=e,e?(this.switchName!==this.switchNameArr[0]||1!==this.baoxiansi.currentFrame&&3!==this.baoxiansi.currentFrame&&5!==this.baoxiansi.currentFrame)&&(this.bar2.isBreak=!1,this.bar3.isBreak=!1,this.wire2.isBreak=!1):(this.bar2.isBreak=!0,this.bar3.isBreak=!0,this.wire2.isBreak=!0),this.diyChanged(),!0)}},{key:"overStep",value:function(){var e=this,t=!1;Math.abs(this.bar5.curElec)>.01&&this.switchName===this.switchNameArr[1]&&(this.anxia.currentFrame=0,this.jxkgonoff.currentFrame=this.kqkgonoff.currentFrame=0,this.openElec(!1),this.globalConfig.SoundTool.play(this.SoundStr.SWITCH_CLOSE),t=!0),(Math.abs(this.bar4.curElec)>this.elecI||Math.abs(this.bar5.curElec)>this.elecI)&&(this.switchName===this.switchNameArr[1]?(this.kqkgonoff.currentFrame=0,this.tisi&&this.tisi.visible&&(this.tisi.visible=!1),this.globalConfig.SoundTool.play(this.SoundStr.SWITCH_CLOSE)):(0!==this.baoxiansi.currentFrame&&2!==this.baoxiansi.currentFrame&&4!==this.baoxiansi.currentFrame||this.baoxiansi.currentFrame++,this.tisi&&(this.tisi.visible=!0,this.globalConfig.SoundTool.registAndPlay(this.SoundStr.LAMP_BURN_OUT))),this.bar2.isBreak=!0,this.openElec(!1),t=!0),t&&(this.__cacuInt&&clearTimeout(this.__cacuInt),this.__cacuInt=setTimeout(function(){e.hadDestory||(e.__cacuInt=null,e.diyChanged())},150)),this.P=Math.abs((this.bposter0.bindinger.Un-this.bposter1.bindinger.Un)*this.bar4.curElec)}},{key:"removed",value:function(){this.removedCursor(this.lineBox),l.M.removeTouch(this,this.tabId),l.M.removeTouch(this.lineBox,this.lineBoxId),l.M.removeTouch(this.kqkgonoff,this.kqkgonoffId),l.M.removeTouch(this.jxkgonoff,this.jxkgonoffId),l.M.removeTouch(this.anxia,this.anxiaId),this.main.removeEventListener(c.PHY_EVENTS.DOCUMENT_END,this.documentEndProx),this.destroy(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var e={};return e.biaoName=this.biaoName,e.switchName=this.switchName,e.elecI=this.elecI,e.isLingBreak=this.isLingBreak,e}},{key:"setData",value:function(e){e&&(this.biaoName=e.biaoName,this.switchName=e.switchName,this.elecI=e.elecI,this.isLingBreak=!!e.isLingBreak,this.freshType())}},{key:"getConf",value:function(){var e=this,i=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getConf",this).call(this);return i.elecLable=this.rootData.name,i.canDelete=!1,i.confArr.push({type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("elec_meter_type"),checked:l.ArrayUtil.getIndexFromValue(this.biaoNameArr,this.biaoName),value:this.biaoNameArr,"this":this,callBack:function(t){e.biaoName=e.biaoNameArr[t.checked],e.freshType()}},{type:this.ComponentProperty.RADIO,name:this.language.getLocaleStr("switch_type"),checked:l.ArrayUtil.getIndexFromValue(this.switchNameArr,this.switchName),value:this.switchNameArr,"this":this,callBack:function(t){e.switchName=e.switchNameArr[t.checked],e.freshType(),e.freshLibPan()}},this.ComponentProperty.getSwitch(this.language.getLocaleStr("liveWireDamage"),this.isLingBreak,function(t){e.isLingBreak=t.checked})),this.switchName===this.switchNameArr[0]&&(i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("safety_wire"),l.ArrayUtil.getIndexFromValue(this.elecIArr,this.elecI+"A"),this.elecIArr,function(t){e.elecI=l.M.getNumStr(e.elecIArr[t.checked])-0,e.tisi&&e.tisi.visible&&(e.tisi.visible=!1),e.baoxiansi.currentFrame=20===e.elecI?0:30===e.elecI?2:4,e.freshType(),e.diyChanged()})),1!==this.baoxiansi.currentFrame&&3!==this.baoxiansi.currentFrame&&5!==this.baoxiansi.currentFrame||i.confArr.push({type:this.ComponentProperty.BUTTON,name:this.language.getLocaleStr("repl_safety_wire"),text:this.language.getLocaleStr("replace"),"this":this,callBack:function(t){1===e.jxkgonoff.currentFrame&&(e.bar2.isBreak=!1,e.bar3.isBreak=!1,e.wire2.isBreak=!1),e.baoxiansi.currentFrame--,e.tisi&&e.tisi.visible&&(e.tisi.visible=!1),e.diyChanged()}})),i}},{key:"isLingBreak",set:function(e){this.bar4.isBreak!==e&&(this.bar4.isBreak=e,this.bar4.branchChange=!0)},get:function(){return this.bar4.isBreak}}]),t}(h["default"])},816:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function h(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:h(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(462),u=function(e){return e&&e.__esModule?e:{"default":e}}(l);t["default"]=function(e){function t(e){return r(this,t),e.ratedP=1500,n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"added",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.bg.redAlpha.alpha=0}},{key:"setWorkPower",value:function(e){Math.abs(e)>this.workV?TweenMax.to(this.bg.redAlpha,2,{alpha:1}):TweenMax.to(this.bg.redAlpha,2,{alpha:0})}}]),t}(u["default"])},817:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(461),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.showLineType=1,i.canShowRepairBtn=!1,i}return o(t,e),a(t,[{key:"drawLineArr",value:function(){this.addHeadWires([{type:0,pArr:l.M.getRoundP(this.bposter0,new l.Point(this.bposter0.x+25,this.bposter0.y),new l.Point(this.bposter0.x+25,this.bposter0.y+50))},{type:0,pArr:[this.bposter1,new l.Point(this.bposter1.x,this.bposter1.y+50)]}]),this.bposter0.ind=1,this.bposter1.ind=1}},{key:"added",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.isBreak=!0,this.oriLineY=this.line.y;var i=void 0;this._lineTouchId=l.M.addTouch(this.line,{begin:function(t){e.cannotSystemDrag=!0,e.downY=l.M.getMouseXY(t).y,i=!0},move:function(t){var r=l.M.getMouseXY(t).y;e.line.y+=r-e.downY,e.line.y-e.oriLineY>15?e.line.y=e.oriLineY+15:0>e.line.y-e.oriLineY&&(e.line.y=e.oriLineY),e.downY=r,i&&e.line.y-e.oriLineY>7?(i=!1,e.switchOpen()):!i&&4>e.line.y-e.oriLineY&&(i=!0)},end:function(t){e.cannotSystemDrag=!1,e.line.y=e.oriLineY}}),this.addCursor(this.line,"tuozhuai")}},{key:"switchOpen",value:function(){this.isBreak=!this.isBreak,this.diyChanged()}},{key:"removed",value:function(){this.removedCursor(this.line),l.M.removeTouch(this.line,this._lineTouchId),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}}]),t}(h["default"])},818:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(461),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.showLineType=1,i.nameInd=0,i.touchId=null,i.nameArr=[i.language.getLocaleStr("two_line"),i.language.getLocaleStr("three_line")],i}return o(t,e),a(t,[{key:"initZuhe",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initZuhe",this).call(this),this.createZuhe({bar:2,pos:[[1,1],[1,0],[2,1]],wire:[[[1,0],[2,0]]]})}},{key:"_drawLineArr",value:function(){0===this.nameInd?(this.clearHeadWires(),this.addHeadWires([{type:0,pArr:l.M.getRoundP(this.var_oriPArr1[0],new l.Point(this.var_oriPArr1[0].x+30,this.var_oriPArr1[0].y),new l.Point(this.var_oriPArr1[0].x+30,this.var_oriPArr1[0].y+50))},{type:0,pArr:[this.var_oriPArr1[1],new l.Point(this.var_oriPArr1[1].x,this.var_oriPArr1[1].y+70)]}]),l.M.setSPPoint(this.bposter0,this.var_oriPArr1[0]),l.M.setSPPoint(this.bposter1,this.var_oriPArr1[1]),l.M.setSPPointXY(this.bposter2,-5e4,-5e4),this.bposter0.dp.setTo(0,0),this.bposter1.dp.setTo(0,0),this.bposter2.dp.setTo(-5e4,-5e4),this.bposter2.bindinger.friendPostersArr.length>0&&this.bposter2.bindinger.friendPostersArr.forEach(function(e){e.body.removeOwner()}),this.freshDp()):(this.clearHeadWires(),this.addHeadWires([{type:0,pArr:l.M.getRoundP(this.var_oriPArr2[0],new l.Point(this.var_oriPArr2[0].x+20,this.var_oriPArr2[0].y),new l.Point(this.var_oriPArr2[0].x+20,this.var_oriPArr2[0].y+70))},{type:0,pArr:[this.var_oriPArr2[1],new l.Point(this.var_oriPArr2[1].x,this.var_oriPArr2[1].y+70)]},{type:0,pArr:l.M.getRoundP(this.var_oriPArr2[2],new l.Point(this.var_oriPArr2[2].x-30,this.var_oriPArr2[2].y),new l.Point(this.var_oriPArr2[2].x-30,this.var_oriPArr2[2].y+70))}]),l.M.setSPPoint(this.bposter0,this.var_oriPArr2[0]),l.M.setSPPoint(this.bposter1,this.var_oriPArr2[1]),l.M.setSPPoint(this.bposter2,this.var_oriPArr2[2]),this.bposter0.dp.setTo(0,0),this.bposter1.dp.setTo(0,0),this.bposter2.dp.setTo(0,-10),this.freshDp()),this.updateBinds(),this.bposter0.ind=1,this.bposter1.ind=1,this.bposter2.ind=1}},{key:"added",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.bg.currentFrame=1,this.freshOpen(!0),this.var_oriPArr1=[new l.Point(this.bposter0.x,this.bposter0.y+10),new l.Point(this.bposter1.x,this.bposter1.y+10)],this.var_oriPArr2=[new l.Point(this.bposter0.x,this.bposter0.y),new l.Point(this.bposter1.x-15,this.bposter1.y),l.M.getSPPoint(this.bposter2)],this.touchId=l.M.addTouch(this.cbtn,{tab:function(t){e.bg.currentFrame=0==e.bg.currentFrame?1:0,e.freshOpen()}},this),this.freshOpen(),this._drawLineArr(),this.addCursor(this.cbtn,"hand")}},{key:"freshOpen",value:function(e){0==this.bg.currentFrame?(this.bar1.isBreak=!1,this.bar2.isBreak=!0):(this.bar1.isBreak=!0,this.bar2.isBreak=!1),e||this.diyChanged()}},{key:"removed",value:function(){this.removedCursor(this.cbtn),l.M.removeTouch(this.cbtn,this.touchId),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}},{key:"getData",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this);return e.nameInd=this.nameInd,e.cframe=this.bg.currentFrame,e}},{key:"setData",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),this.nameInd=e.nameInd,this.bg.currentFrame=e.cframe,this._drawLineArr(),this.freshOpen(!0)}},{key:"getConf",value:function(){var e=this,i=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getConf",this).call(this);return i.confArr.push(this.ComponentProperty.getRadio(this.language.getLocaleStr("type"),this.nameInd,this.nameArr,function(t){e.nameInd=t.checked,e._drawLineArr()})),i}}]),t}(h["default"])},819:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=function d(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:d(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},u=i(0),h=i(618),c=r(h),f=i(418),p=r(f);t["default"]=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.charType=1,i.loadLevel=3,i}return a(t,e),s(t,[{key:"initZuhe",value:function(){this.createZuhe({bar:3,pos:[[1,0],[2,0],[3,0]]}),this.wire1=new p["default"](this.paramObj),this.wire1.zuheBox=this,this.zuheCompArr.push(this.wire1),this.elecUtil.linkWireBindMC(this.wire1.bposter0,this.bar1.bposter1),this.wire2=new p["default"](this.paramObj),this.wire2.zuheBox=this,this.zuheCompArr.push(this.wire2),this.elecUtil.linkWireBindMC(this.wire2.bposter0,this.bar2.bposter1),this.wire3=new p["default"](this.paramObj),this.wire3.zuheBox=this,this.zuheCompArr.push(this.wire3),this.elecUtil.linkWireBindMC(this.wire3.bposter0,this.bar3.bposter1)}},{key:"drawLineArr",value:function(){this.addHeadWires([{type:0,pArr:u.M.getRoundP(u.M.getSPPoint(this.bposter1),new u.Point(this.bposter1.x-8,this.bposter1.y),new u.Point(this.bposter1.x-8,this.bposter1.y+50))},{type:1,pArr:u.M.getRoundP(u.M.getSPPoint(this.bposter0),new u.Point(this.bposter0.x+8,this.bposter0.y),new u.Point(this.bposter0.x+8,this.bposter0.y+50))},{type:2,pArr:[new u.Point(this.bposter2.x,this.bposter2.y),new u.Point(this.bposter2.x,this.bposter2.y+75)]}])}},{key:"added",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.addHotCir(this.bar1.bposter0,new u.Point(-15,10)),this.addHotCir(this.bar2.bposter0,new u.Point(15,10)),this.addHotCir(this.bar3.bposter0,new u.Point(0,-10))}}]),t}(c["default"])},820:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(462),l=function(e){return e&&e.__esModule?e:{"default":e}}(s);t["default"]=function(e){function t(e){return r(this,t),e.ratedP=120,n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"selectRenderChild",value:function(){return this.updateTransform(),this.bg.getBounds()}}]),t}(l["default"])},821:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(618),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.loadLevel=3,i}return o(t,e),a(t,[{key:"drawLineArr",value:function(){this.addHeadWires([{type:1,pArr:[l.M.getSPPoint(this.bposter0),new l.Point(this.bposter0.x,this.bposter0.y+60)]},{type:0,pArr:[l.M.getSPPoint(this.bposter1),new l.Point(this.bposter1.x,this.bposter1.y+60)]}])}},{key:"added",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.addHotCir(this.bar1.bposter0,new l.Point(-15,0)),this.addHotCir(this.bar2.bposter0,new l.Point(15,0))}}]),t}(h["default"])},822:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function c(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:c(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(462),h=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=function(e){function t(e){r(this,t),e.ratedP=400;var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.addN=0,i.maxN=.1,i}return o(t,e),a(t,[{key:"added",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.deng.visible=!1}},{key:"update",value:function(){this.hadDestory||(Math.abs(this.curPower)>this.workV?(this.addN=this.maxN,this.deng.visible||(this.deng.visible=!0)):(this.addN=0,this.deng.visible&&(this.deng.visible=!1)),this.addN=l.M.range(this.addN,0,this.maxN),this.bg.ye&&(this.bg.ye.rotation+=this.addN))}},{key:"removed",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removed",this).call(this)}}]),t}(h["default"])},823:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=i(462),s=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(e){function t(e){return r(this,t),e.ratedP=1e3,n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(s["default"])},824:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=function f(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:f(n,t,i)}if("value"in r)return r.value;var o=r.get;return o===undefined?undefined:o.call(i)},l=i(0),u=i(461),h=function(e){return e&&e.__esModule?e:{"default":e}}(u),c=i(10);t["default"]=function(e){function t(e){r(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.elecFamilyPower=i.moduleMain.elecFamilyPower,i.iElecInter=1,i.linkType=0,i.loadLevel=6,i.bposter0LK=!1,i.bposter1LK=!1,i.lineNameInd=e.classParam&&e.classParam.lineNameInd?e.classParam.lineNameInd:0,i.Resistance=.001,i.visible=!1,i.noRenderSelected=!0,i}return o(t,e),a(t,[{key:"startP",value:function(e){this.globalConfig.canCanvasDrag=!1,l.M.setSPPoint(this.bposter0,e)}},{key:"moveP",value:function(e){l.M.setSPPoint(this.bposter1,e),this.freshbp(!0),this._drawLine()}},{key:"endP",value:function(e){if(this.globalConfig.canCanvasDrag=!0,l.M.setSPPoint(this.bposter1,e),this.freshbp(),this._drawLine(),0===this.linkType){var t=l.M.getSPPoint(this.bposter0);if(100>l.M.getPointLen(t,e))return void this.removeOwner();this.bposter1.bindinger.nearToBinding.call(this.bposter1.bindinger)?(this.globalConfig.SoundTool.registAndPlay(this.SoundStr.DAO_XIAN_LIAN_JIE),this.diyChanged()):this.removeOwner()}}},{key:"removeOwner",value:function(){this.main.removeEquipment.call(this.main,this),this.dispose()}},{key:"dispose",value:function(){this.bposter0.bindinger.breakBinding.call(this.bposter0.bindinger),this.bposter1.bindinger.breakBinding.call(this.bposter1.bindinger),this.diyChanged()}},{key:"freshbp",value:function(e){0===this.linkType?this.bposter0.x=this.bposter1.x:e||(this.bposter1.x=this.bposter0.x)}},{key:"_drawLine",value:function(){this.bposter0LK?this.bposter0.x=this.bposter1.x:this.bposter1LK&&(this.bposter1.x=this.bposter0.x);var e=void 0,t=void 0;this.bposter1.y>this.bposter0.y?(e=l.M.getSPPoint(this.bposter0),t=l.M.getSPPoint(this.bposter1)):(e=l.M.getSPPoint(this.bposter1),t=l.M.getSPPoint(this.bposter0));var i=this.getLinkPowerPoster();if(i){e=l.M.getSPPoint(i[0]);var r=i[2].BindMC.lineNameInd;this.main.view.updateTransform(),e.y=this.parent.toLocal(this.elecFamilyPower.linePArr[r][0],this.elecFamilyPower.lineBox).y,t=l.M.getSPPoint(i[1]);var n=i[1].bindinger.friendPostersArr,o=0;each(n,function(e,t){if("ElecFamilyWire"!==t.body.classname)return o=t.BindMC.ind!==undefined?t.BindMC.ind:t.name.substring(t.name.length-1)-0,!0},this);var a=new l.Point(this.elecFamilyPower.leftPosX,0),s=this.toLocal(a,this.elecFamilyPower).x+20*o+70;s>e.x&&(e.x=s,this.bposter0.x=e.x,u=new l.Point(e.x,t.y),this.setRopePoints(this.bg,[e,u]),this.setRopePoints(this.bg1,[u,t]),this.setRopePoints(this.lineFG,[e,u]),this.setRopePoints(this.lineFG1,[u,t])),l.M.setSPPoint(this.xiantou,e),this.xiantou.visible=!0,this._dragG.clear(),this._dragG.beginFill(16711680,0),this._dragG.drawRect(e.x-10,e.y,20,Math.abs(t.y-e.y+10)),this._dragG.drawRect(e.x+10,t.y-10,Math.abs(t.x-e.x-10),10),this._dragG.endFill(),l.M.setSPPoint(this.closeBtn,new l.Point(e.x,e.y+(t.y-e.y)/2))}else this.xiantou.visible=!1,this._dragG.clear(),this._dragG.beginFill(16711680,0),this._dragG.drawRect(Math.min(e.x,t.x),e.y-10,Math.abs(t.x-e.x),20),this._dragG.endFill(),l.M.setSPPoint(this.closeBtn,new l.Point(e.x+(t.x-e.x)/2,e.y));var u=new l.Point(t.x,e.y);this.setRopePoints(this.bg,[e,u]),this.setRopePoints(this.bg1,[u,t]),this.setRopePoints(this.lineFG,[e,u]),this.setRopePoints(this.lineFG1,[u,t]),this.visible||(this.visible=!0)}},{key:"getLinkPowerPoster",value:function(){var e=this,t=this.bposter0.bindinger.friendPostersArr,i=null,r=null,n=null;return each(t,function(t,o){if(o.body.zuheBox&&"ElecFamilyPower"===o.body.zuheBox.classname)return i=e.bposter0,r=e.bposter1,n=o,!0}),i||(t=this.bposter1.bindinger.friendPostersArr,each(t,function(t,o){if(o.body.zuheBox&&"ElecFamilyPower"===o.body.zuheBox.classname)return i=e.bposter1,r=e.bposter0,n=o,!0})),i?[i,r,n]:null}},{key:"added",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"added",this).call(this),this.cannotSystemDrag=!0,this.removeChild(this.bg),this.bg=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.lineNameArr[this.lineNameInd]+".png"),this.addChild(this.bg),this.setRopePoints(this.bg,[new l.Point(-500,-500),new l.Point(-501,-500)]),this.bg1=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.lineNameArr[this.lineNameInd]+".png"),this.addChild(this.bg1),this.setRopePoints(this.bg1,[new l.Point(-500,-500),new l.Point(-501,-500)]),this.lineFG=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/ElecWireSe.png"),this.addChild(this.lineFG),this.lineFG1=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/ElecWireSe.png"),this.addChild(this.lineFG1),this.lineFG.visible=this.lineFG1.visible=!1,this.addChild(this.xiantou),this._dragG=new PIXI.Graphics,this.addChild(this._dragG),this.closeBtn.visible=!1,l.M.addTouch(this,{begin:function(t){e.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_BEGIN,t)},move:function(t){e.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_MOVE,t)},end:function(t){e.main.dispatchEvent(c.PHY_EVENTS.BLACK_TOUCH_END,t)}}),this.xiantou.visible=!1,this.fresh_lineNameInd()}},{key:"fresh_lineNameInd",value:function(){this.removeChild(this.bg),this.removeChild(this.bg1),this.lineNameInd=this.lineNameInd||0,this.bg=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.lineNameArr[this.lineNameInd]+".png"),this.addChild(this.bg),this.setRopePoints(this.bg,[new l.Point(-500,-500),new l.Point(-501,-500)]),this.bg1=this.createRope(this.globalConfig.cdn_static+"electrical/elecwire/"+this.lineNameArr[this.lineNameInd]+".png"),this.addChild(this.bg1),this.setRopePoints(this.bg1,[new l.Point(-500,-500),new l.Point(-501,-500)]),this.addChild(this.lineFG),this.addChild(this.lineFG1),this.addChild(this.xiantou),this.addChild(this._dragG),this.addChild(this.closeBtn)}},{key:"setRopePoints",value:function(e,i,r){r=this.lineNameInd,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setRopePoints",this).call(this,e,i,r)}},{key:"getData",value:function(){var e=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this);return e.bposter0X=this.bposter0.x,e.bposter0Y=this.bposter0.y,e.bposter1X=this.bposter1.x,e.bposter1Y=this.bposter1.y,e.linkType=this.linkType,e.bposter0LK=this.bposter0LK,e.bposter1LK=this.bposter1LK,e.lineNameInd=this.lineNameInd,e}},{key:"setData",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),this.bposter0.x=e.bposter0X,this.bposter0.y=e.bposter0Y,this.bposter1.x=e.bposter1X,this.bposter1.y=e.bposter1Y,this.linkType=e.linkType,this.bposter0LK=e.bposter0LK,this.bposter1LK=e.bposter1LK,this.lineNameInd=e.lineNameInd,this.bposter0LK?this._linkToPower(this.bposter0,this.lineNameInd):this.bposter0.bindinger.nearToBinding.call(this.bposter0.bindinger),this.bposter1LK?this._linkToPower(this.bposter1,this.lineNameInd):this.bposter1.bindinger.nearToBinding.call(this.bposter1.bindinger),this.fresh_lineNameInd(),this._drawLine()}},{key:"_linkToPower",value:function(e,t){if(null===t||t===undefined){this.main.viewStack.parent.updateTransform();var i=this.main.viewStack.toLocal(new l.Point,e),r=this.elecFamilyPower.getPowerLineData.call(this.elecFamilyPower,i);r&&this.elecUtil.linkWireBindMC(e,r.post)}else{var n=void 0;n=0===t?this.elecFamilyPower.bposter1:1===t?this.elecFamilyPower.bposter0:this.elecFamilyPower.bposter2,this.elecUtil.linkWireBindMC(e,n)}}},{key:"getConf",value:function(){var e=this,i=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getConf",this).call(this),r=[this.language.getLocaleStr("red"),this.language.getLocaleStr("blue"),this.language.getLocaleStr("yellow")],n=r[this.lineNameInd];return i.confArr.push({type:this.ComponentProperty.SELECT,name:this.language.getLocaleStr("wireColor"),canEnter:!1,showValue:n,value:r,"this":this,callBack:function(t){e.lineNameInd=t.checked,e.fresh_lineNameInd(),e._drawLine()}}),i}},{key:"removed",value:function(){this.dispose()}},{key:"setSelected",value:function(e){[this.lineFG,this.lineFG1].forEach(function(t){e?(t.alpha=1,t.visible=!0):t.visible=!1})}},{key:"getLocalBoundsElecs",value:function(){return[this.closeBtn]}}]),t}(h["default"])},825:function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var n=function(){function e(e,t){for(var i=0;t.length>i;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();t["default"]=function(){function e(t){r(this,e),this.classname="ElecInsOne",this.elecUtil=t.moduleMain.elecUtil,this.pare=t.pare,this.index=0,this.bindChar=null,this.charType=0,this.wire1=null,this.wire2=null,this.wire3=null}return n(e,[{key:"freshBindLocation",value:function(){this.bindChar&&this.bindChar.freshBindLocation()}},{key:"link_bindChar",value:function(e){this.bindChar&&(e?(this.elecUtil.linkWireBindMC(this.wire1.bposter1,this.bindChar.bposter0),this.elecUtil.linkWireBindMC(this.wire2.bposter1,this.bindChar.bposter1)):(this.wire1.unLink(this.wire1.bposter1),this.wire2.unLink(this.wire2.bposter1)))}},{key:"moveEnd",value:function(){this.freshBindLocation()}}]),e}()}});